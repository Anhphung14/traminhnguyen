import{w as gk,d as qJ,t as GJ,r as ky,n as nX,o as KJ,a as YJ,b as XJ,c as JJ,h as oX,e as VK,f as CI,g as UJ,i as Sa,u as WJ,F as QJ,j as eQ,k as tQ,l as nQ,m as oQ,p as sQ,q as sX,s as vI,v as yI}from"./app-C8rdCaDJ.js";import{_ as rQ}from"./AdminLayout-CUghWTn0.js";var aQ=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],cQ=function(qt){return aQ.map(function(Mn){return Mn.toLowerCase()}).indexOf(qt.toLowerCase())!==-1},iQ=function(qt,Mn,Fn){Object.keys(Mn).filter(cQ).forEach(function(Xn){var $n=Mn[Xn];typeof $n=="function"&&(Xn==="onInit"?$n(qt,Fn):Fn.on(Xn.substring(2),function(Pn){return $n(Pn,Fn)}))})},lQ=function(qt,Mn,Fn,Xn){var $n=qt.modelEvents?qt.modelEvents:null,Pn=Array.isArray($n)?$n.join(" "):$n;gk(Xn,function(so,ct){Fn&&typeof so=="string"&&so!==ct&&so!==Fn.getContent({format:qt.outputFormat})&&Fn.setContent(so)}),Fn.on(Pn||"change input undo redo",function(){Mn.emit("update:modelValue",Fn.getContent({format:qt.outputFormat}))})},uQ=function(qt,Mn,Fn,Xn,$n,Pn){Xn.setContent(Pn()),Fn.attrs["onUpdate:modelValue"]&&lQ(Mn,Fn,Xn,$n),iQ(qt,Fn.attrs,Xn)},rX=0,ZJ=function(qt){var Mn=Date.now(),Fn=Math.floor(Math.random()*1e9);return rX++,qt+"_"+Fn+rX+String(Mn)},dQ=function(qt){return qt!==null&&qt.tagName.toLowerCase()==="textarea"},aX=function(qt){return typeof qt>"u"||qt===""?[]:Array.isArray(qt)?qt:qt.split(" ")},mQ=function(qt,Mn){return aX(qt).concat(aX(Mn))},fQ=function(qt){return qt==null},cX=function(){return{listeners:[],scriptId:ZJ("tiny-script"),scriptLoaded:!1}},gQ=function(){var qt=cX(),Mn=function($n,Pn,so,ct){var Lt=Pn.createElement("script");Lt.referrerPolicy="origin",Lt.type="application/javascript",Lt.id=$n,Lt.src=so;var st=function(){Lt.removeEventListener("load",st),ct()};Lt.addEventListener("load",st),Pn.head&&Pn.head.appendChild(Lt)},Fn=function($n,Pn,so){qt.scriptLoaded?so():(qt.listeners.push(so),$n.getElementById(qt.scriptId)||Mn(qt.scriptId,$n,Pn,function(){qt.listeners.forEach(function(ct){return ct()}),qt.scriptLoaded=!0}))},Xn=function(){qt=cX()};return{load:Fn,reinitialize:Xn}},hQ=gQ(),pQ=function(){return typeof window<"u"?window:global},tS=function(){var qt=pQ();return qt&&qt.tinymce?qt.tinymce:null},bQ={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(qt){return qt==="html"||qt==="text"}}},Gp=function(){return Gp=Object.assign||function(qt){for(var Mn,Fn=1,Xn=arguments.length;Fn<Xn;Fn++){Mn=arguments[Fn];for(var $n in Mn)Object.prototype.hasOwnProperty.call(Mn,$n)&&(qt[$n]=Mn[$n])}return qt},Gp.apply(this,arguments)},vQ=function(qt,Mn,Fn,Xn){return qt(Xn||"div",{id:Mn,ref:Fn})},yQ=function(qt,Mn,Fn){return qt("textarea",{id:Mn,visibility:"hidden",ref:Fn})},HK={selector:void 0,target:void 0},CQ=qJ({props:bQ,setup:function(qt,Mn){var Fn=qt.init?Gp(Gp({},qt.init),HK):Gp({},HK),Xn=GJ(qt),$n=Xn.disabled,Pn=Xn.modelValue,so=Xn.tagName,ct=ky(null),Lt=null,st=qt.id||ZJ("tiny-vue"),qo=qt.init&&qt.init.inline||qt.inline,rn=!!Mn.attrs["onUpdate:modelValue"],Tt=!0,mn=qt.initialValue?qt.initialValue:"",fo="",In=function(_t){return rn?function(){return Pn?.value?Pn.value:""}:function(){return _t?mn:fo}},nt=function(){var _t=In(Tt),ae=Gp(Gp({},Fn),{readonly:qt.disabled,target:ct.value,plugins:mQ(Fn.plugins,qt.plugins),toolbar:qt.toolbar||Fn.toolbar,inline:qo,setup:function(Jt){Lt=Jt,Jt.on("init",function(Lo){return uQ(Lo,qt,Mn,Jt,Pn,_t)}),typeof Fn.setup=="function"&&Fn.setup(Jt)}});dQ(ct.value)&&(ct.value.style.visibility=""),tS().init(ae),Tt=!1};gk($n,function(_t){var ae;Lt!==null&&(typeof((ae=Lt.mode)===null||ae===void 0?void 0:ae.set)=="function"?Lt.mode.set(_t?"readonly":"design"):Lt.setMode(_t?"readonly":"design"))}),gk(so,function(_t){var ae;rn||(fo=Lt.getContent()),(ae=tS())===null||ae===void 0||ae.remove(Lt),nX(function(){return nt()})}),KJ(function(){if(tS()!==null)nt();else if(ct.value&&ct.value.ownerDocument){var _t=qt.cloudChannel?qt.cloudChannel:"6",ae=qt.apiKey?qt.apiKey:"no-api-key",Jt=fQ(qt.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(ae,"/tinymce/").concat(_t,"/tinymce.min.js"):qt.tinymceScriptSrc;hQ.load(ct.value.ownerDocument,Jt,nt)}}),YJ(function(){tS()!==null&&tS().remove(Lt)}),qo||(XJ(function(){Tt||nt()}),JJ(function(){var _t;rn||(fo=Lt.getContent()),(_t=tS())===null||_t===void 0||_t.remove(Lt)}));var Oo=function(_t){var ae;fo=Lt.getContent(),(ae=tS())===null||ae===void 0||ae.remove(Lt),Fn=Gp(Gp(Gp({},Fn),_t),HK),nX(function(){return nt()})};return Mn.expose({rerender:Oo,getEditor:function(){return Lt}}),function(){return qo?vQ(oX,st,ct,qt.tagName):yQ(oX,st,ct)}}}),zK={exports:{}},iX;function wQ(){return iX||(iX=1,(function(qt){(function(){var Mn=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},Fn=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Xn=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},$n=function(e,n){return Pn(function(o,r){return e.eq(n(o),n(r))})},Pn=function(e){return{eq:e}},so=Pn(function(e,n){return e===n}),ct=so,Lt=function(e){return Pn(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},st=function(e,n){return $n(Lt(e),function(o){return Xn(o,n)})},qo=function(e){return Pn(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!st(ct).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},rn=Pn(function(e,n){if(e===n)return!0;var o=Mn(e),r=Mn(n);return o!==r?!1:Fn(o)?e===n:o==="array"?Lt(rn).eq(e,n):o==="object"?qo(rn).eq(e,n):!1});const Tt=Object.getPrototypeOf,mn=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},fo=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&mn(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},In=e=>n=>fo(n)===e,nt=e=>n=>typeof n===e,Oo=e=>n=>e===n,_t=(e,n)=>Jt(e)&&mn(e,n,(o,r)=>Tt(o)===r),ae=In("string"),Jt=In("object"),Lo=e=>_t(e,Object),Ze=In("array"),q=Oo(null),Rt=nt("boolean"),Zn=Oo(void 0),gn=e=>e==null,_e=e=>!gn(e),fe=nt("function"),cs=nt("number"),Je=(e,n)=>{if(Ze(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},rt=()=>{},k=(e,n)=>(...o)=>e(n.apply(null,o)),mo=(e,n)=>o=>e(n(o)),it=e=>()=>e,Mo=e=>e,ln=(e,n)=>e===n;function Ce(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const dt=e=>n=>!e(n),wn=e=>()=>{throw new Error(e)},Ve=e=>e(),Ht=e=>{e()},Oe=it(!1),ot=it(!0);class F{constructor(n,o){this.tag=n,this.value=o}static some(n){return new F(!0,n)}static none(){return F.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?F.some(n(this.value)):F.none()}bind(n){return this.tag?n(this.value):F.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:F.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return _e(n)?F.some(n):F.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}F.singletonNone=new F(!1);const No=Array.prototype.slice,jn=Array.prototype.indexOf,qn=Array.prototype.push,yo=(e,n)=>jn.call(e,n),ht=(e,n)=>{const o=yo(e,n);return o===-1?F.none():F.some(o)},j=(e,n)=>yo(e,n)>-1,ce=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},de=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},ne=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},Q=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},ie=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},ye=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},wt=(e,n)=>{if(e.length===0)return[];{let o=n(e[0]);const r=[];let c=[];for(let u=0,f=e.length;u<f;u++){const b=e[u],v=n(b);v!==o&&(r.push(c),c=[]),o=v,c.push(b)}return c.length!==0&&r.push(c),r}},Ae=(e,n,o)=>(Q(e,(r,c)=>{o=n(o,r,c)}),o),Ne=(e,n,o)=>(ne(e,(r,c)=>{o=n(o,r,c)}),o),un=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return F.some(u);if(o(u,r))break}return F.none()},Gt=(e,n)=>un(e,n,Oe),go=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return F.some(o)}return F.none()},ko=(e,n)=>{for(let o=e.length-1;o>=0;o--)if(n(e[o],o))return F.some(o);return F.none()},_o=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Ze(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);qn.apply(n,e[o])}return n},_n=(e,n)=>_o(de(e,n)),ns=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},Ln=e=>{const n=No.call(e,0);return n.reverse(),n},Ke=(e,n)=>ye(e,o=>!j(n,o)),At=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},fn=(e,n)=>{const o=No.call(e,0);return o.sort(n),o},an=(e,n)=>n>=0&&n<e.length?F.some(e[n]):F.none(),to=e=>an(e,0),es=e=>an(e,e.length-1),Eo=fe(Array.from)?Array.from:e=>No.call(e),Ds=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return F.none()},Xs=(e,n)=>{const o=[],r=fe(n)?c=>ce(o,u=>n(u,c)):c=>j(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},sn=Object.keys,Do=Object.hasOwnProperty,To=(e,n)=>{const o=sn(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},ac=(e,n)=>da(e,(o,r)=>({k:r,v:n(o,r)})),da=(e,n)=>{const o={};return To(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},tn=e=>(n,o)=>{e[o]=n},Bc=(e,n,o,r)=>{To(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},Os=(e,n)=>{const o={},r={};return Bc(e,n,tn(o),tn(r)),{t:o,f:r}},Mc=(e,n)=>{const o={};return Bc(e,n,tn(o),rt),o},Ma=(e,n)=>{const o=[];return To(e,(r,c)=>{o.push(n(r,c))}),o},zr=e=>Ma(e,Mo),xs=(e,n)=>no(e,n)?F.from(e[n]):F.none(),no=(e,n)=>Do.call(e,n),rs=(e,n)=>no(e,n)&&e[n]!==void 0&&e[n]!==null,Za=(e,n,o=rn)=>qo(o).eq(e,n),ja={generate:e=>{if(!Ze(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return ne(e,(r,c)=>{const u=sn(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ze(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...v)=>{const S=v.length;if(S!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+S);return{fold:(...R)=>{if(R.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+R.length);return R[c].apply(null,v)},match:R=>{const M=sn(R);if(n.length!==M.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+M.join(","));if(!ns(n,J=>j(M,J)))throw new Error("Not all branches were specified when using match. Specified: "+M.join(", ")+`
Required: `+n.join(", "));return R[f].apply(null,v)},log:R=>{console.log(R,{constructors:n,constructor:f,params:v})}}}}),o}},dn=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},Fr=e=>{const n=u=>u(e),o=it(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:ot,isError:Oe,map:u=>ge.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>F.some(e)};return c},yr=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:Oe,isError:ot,map:n,mapError:r=>ge.error(r(e)),bind:n,exists:Oe,forall:ot,getOr:Mo,or:Mo,getOrThunk:Ve,orThunk:Ve,getOrDie:wn(String(e)),each:rt,toOptional:F.none};return o},ge={value:Fr,error:yr,fromOption:(e,n)=>e.fold(()=>yr(n),Fr)},be=typeof window<"u"?window:Function("return this;")(),Be=()=>{const e=window.crypto.getRandomValues(new Uint8Array(16));return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e},tt=()=>{const e=Be(),n=(o,r)=>{let c="";for(let u=o;u<=r;++u){const f=e[u].toString(16).padStart(2,"0");c+=f}return c};return`${n(0,3)}-${n(4,5)}-${n(6,7)}-${n(8,9)}-${n(10,15)}`},Dn=(e,n,o)=>Math.min(Math.max(e,n),o),Gn=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Ao=0;const Ko=e=>{const o=new Date().getTime(),r=Math.floor(Gn()*1e9);return Ao++,e+"_"+r+Ao+String(o)},Yo=()=>window.isSecureContext?window.crypto.randomUUID():tt(),Fo=(e,n)=>n,Z=(e,n)=>Lo(e)&&Lo(n)?at(e,n):n,ve=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)no(c,u)&&(o[u]=e(o[u],c[u]))}return o},at=ve(Z),Zt=ve(Fo),yt=(e,n,o=ln)=>e.exists(r=>o(r,n)),On=(e,n,o=ln)=>Xt(e,n,o).getOr(e.isNone()&&n.isNone()),Sn=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Xt=(e,n,o)=>e.isSome()&&n.isSome()?F.some(o(e.getOrDie(),n.getOrDie())):F.none(),Co=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?F.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):F.none(),Uo=e=>e.bind(Mo),os=(e,n)=>e?F.some(n):F.none(),Cs=(e,n)=>{let o=n??be;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},xa=(e,n)=>{const o=e.split(".");return Cs(o,n)};ja.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Er=e=>{const n=[],o=[];return ne(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},Ol=e=>{const n=dn(F.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(F.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(F.some(b))}}},Gs=e=>{const n=dn(F.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(F.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(F.some(setInterval(b,e)))}}},is=()=>{const e=Ol(rt);return{...e,on:o=>e.get().each(o)}},Rs=(e,n)=>e.substring(n),ma=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Hi=(e,n)=>Kn(e,n)?Rs(e,n.length):e,er=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?Zn(r)?!0:c+n.length<=r:!1},Kn=(e,n)=>ma(e,n,0),fa=(e,n)=>ma(e,n,e.length-n.length),Ea=e=>n=>n.replace(e,""),cr=Ea(/^\s+|\s+$/g),Yu=Ea(/^\s+/g),hu=Ea(/\s+$/g),Js=e=>e.length>0,Ti=e=>!Js(e),si=(e,n)=>n<=0?"":new Array(n+1).join(e),Xu=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?F.none():F.some(o)},Ut=(e,n)=>{let o=null;return{cancel:()=>{q(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{q(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Nc=(e,n)=>{let o=null;const r=()=>{q(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Fa=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},qa="\uFEFF",ir=" ",pu="…",Ga=e=>e===qa,yc=e=>e.replace(/\uFEFF/g,""),Rl=e=>{const n={};return ne(e,o=>{n[o]={}}),sn(n)},Ju=e=>e.length!==void 0,zi=Array.isArray,bu=e=>{if(zi(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Bl=(e,n,o)=>{if(!e)return!1;if(o=o||e,Ju(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(no(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},Vi=(e,n)=>{const o=[];return Bl(e,(r,c)=>{o.push(n(r,c,e))}),o},Ml=(e,n)=>{const o=[];return Bl(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},Nt=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},ll=(e,n,o,r)=>{let c=Zn(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},Qu=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},H=e=>e[e.length-1],le=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),v=c||!u&&f&&r("(min-device-width:768px)"),S=u||f&&!v,_=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,R=!S&&!v&&!_;return{isiPad:it(c),isiPhone:it(u),isTablet:it(v),isPhone:it(S),isTouch:it(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:it(_),isDesktop:it(R)}},ke=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Xe=(e,n)=>{const o=ke(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Po(r(1),r(2))},Mt=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?cn():Xe(e,o)},cn=()=>Po(0,0),Po=(e,n)=>({major:e,minor:n}),So={nu:Po,detect:Mt,unknown:cn},fs=(e,n)=>Ds(n.brands,o=>{const r=o.brand.toLowerCase();return Gt(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:So.nu(parseInt(o.version,10),0)}))}),N=(e,n)=>{const o=String(n).toLowerCase();return Gt(e,r=>r.search(o))},U=(e,n)=>N(e,n).map(o=>{const r=So.detect(o.versionRegexes,n);return{current:o.name,version:r}}),me=(e,n)=>N(e,n).map(o=>{const r=So.detect(o.versionRegexes,n);return{current:o.name,version:r}}),He=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,nn=e=>n=>er(n,e),Xo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>er(e,"edge/")&&er(e,"chrome")&&er(e,"safari")&&er(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,He],search:e=>er(e,"chrome")&&!er(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>er(e,"msie")||er(e,"trident")},{name:"Opera",versionRegexes:[He,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:nn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:nn("firefox")},{name:"Safari",versionRegexes:[He,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(er(e,"safari")||er(e,"mobile/"))&&er(e,"applewebkit")}],Bs=[{name:"Windows",search:nn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>er(e,"iphone")||er(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:nn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:nn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:nn("linux"),versionRegexes:[]},{name:"Solaris",search:nn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:nn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:nn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Or={browsers:it(Xo),oses:it(Bs)},Na="Edge",Cc="Chromium",Jo="IE",ul="Opera",_m="Firefox",Ui="Safari",ig=()=>Dm({current:void 0,version:So.unknown()}),Dm=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(Na),isChromium:r(Cc),isIE:r(Jo),isOpera:r(ul),isFirefox:r(_m),isSafari:r(Ui)}},wc={unknown:ig,nu:Dm},ed="Windows",td="iOS",Ah="Android",lg="Linux",ug="macOS",kh="Solaris",ff="FreeBSD",Wi="ChromeOS",_h=()=>Dh({current:void 0,version:So.unknown()}),Dh=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(ed),isiOS:r(td),isAndroid:r(Ah),isMacOS:r(ug),isLinux:r(lg),isSolaris:r(kh),isFreeBSD:r(ff),isChromeOS:r(Wi)}},K={unknown:_h,nu:Dh},Fe={detect:(e,n,o)=>{const r=Or.browsers(),c=Or.oses(),u=n.bind(v=>fs(r,v)).orThunk(()=>U(r,e)).fold(wc.unknown,wc.nu),f=me(c,e).fold(K.unknown,K.nu),b=le(f,u,e,o);return{browser:u,os:f,deviceType:b}}},ut=e=>window.matchMedia(e).matches;let Hn=Fa(()=>Fe.detect(window.navigator.userAgent,F.from(window.navigator.userAgentData),ut));const Ro=()=>Hn(),Rr=(e,n)=>xa(e,n),Sc=(e,n)=>{const o=Rr(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},ga=Object.getPrototypeOf,xc=e=>Sc("HTMLElement",e),vu=e=>{const n=xa("ownerDocument.defaultView",e);return Jt(e)&&(xc(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ga(e).constructor.name))},Ec=window.navigator.userAgent,yu=Ro(),Tc=yu.browser,Pc=yu.os,Fl=yu.deviceType,$c=Ec.indexOf("Windows Phone")!==-1,Ho={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Tc.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Tc.isIE(),windowsPhone:$c,browser:{current:Tc.current,version:Tc.version,isChromium:Tc.isChromium,isEdge:Tc.isEdge,isFirefox:Tc.isFirefox,isIE:Tc.isIE,isOpera:Tc.isOpera,isSafari:Tc.isSafari},os:{current:Pc.current,version:Pc.version,isAndroid:Pc.isAndroid,isChromeOS:Pc.isChromeOS,isFreeBSD:Pc.isFreeBSD,isiOS:Pc.isiOS,isLinux:Pc.isLinux,isMacOS:Pc.isMacOS,isSolaris:Pc.isSolaris,isWindows:Pc.isWindows},deviceType:{isDesktop:Fl.isDesktop,isiPad:Fl.isiPad,isiPhone:Fl.isiPhone,isPhone:Fl.isPhone,isTablet:Fl.isTablet,isTouch:Fl.isTouch,isWebView:Fl.isWebView}},gf=/^\s*|\s*$/g,Oh=e=>gn(e)?"":(""+e).replace(gf,""),Ir=(e,n)=>n?n==="array"&&zi(e)?!0:typeof e===n:e!==void 0,nS=(e,n,o={})=>{const r=ae(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},Kp=no,oS=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(no(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Q0=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Bl(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(Q0(c,n,o,r),!0)))},kt={trim:Oh,isArray:zi,is:Ir,toArray:bu,makeMap:nS,each:Bl,map:Vi,grep:Ml,inArray:Nt,hasOwn:Kp,extend:oS,walk:Q0,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Ze(e)?e:e===""?[]:Vi(e.split(n||","),Oh),_addCacheSuffix:e=>{const n=Ho.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Ai=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return hf(r.childNodes[0])},dg=(e,n)=>{const r=(n||document).createElement(e);return hf(r)},dl=(e,n)=>{const r=(n||document).createTextNode(e);return hf(r)},hf=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},oe={fromHtml:Ai,fromTag:dg,fromText:dl,fromDom:hf,fromPoint:(e,n,o)=>F.from(e.dom.elementFromPoint(n,o)).map(hf)},ri=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},$d=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Xp=(e,n,o)=>{const r=e.document.createRange();return ri(r,n),$d(r,o),r},pf=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},cc=ja.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ai=(e,n,o)=>n(oe.fromDom(o.startContainer),o.startOffset,oe.fromDom(o.endContainer),o.endOffset),Jp=(e,n)=>n.match({domRange:o=>({ltr:it(o),rtl:F.none}),relative:(o,r)=>({ltr:Fa(()=>Xp(e,o,r)),rtl:Fa(()=>F.some(Xp(e,r,o)))}),exact:(o,r,c,u)=>({ltr:Fa(()=>pf(e,o,r,c,u)),rtl:Fa(()=>F.some(pf(e,c,u,o,r)))})}),Qp=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>cc.rtl(oe.fromDom(c.endContainer),c.endOffset,oe.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>ai(e,cc.ltr,o)):ai(e,cc.ltr,o)},mg=(e,n)=>{const o=Jp(e,n);return Qp(e,o)};cc.ltr,cc.rtl;const ci=8,e1=9,Cu=11,fg=1,t1=3,ki=(e,n)=>{const o=e.dom;if(o.nodeType!==fg)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},n1=e=>e.nodeType!==fg&&e.nodeType!==e1&&e.nodeType!==Cu||e.childElementCount===0,Nl=(e,n)=>{const o=n===void 0?document:n.dom;return n1(o)?[]:de(o.querySelectorAll(e),oe.fromDom)},Id=(e,n)=>{const o=n===void 0?document:n.dom;return n1(o)?F.none():F.from(o.querySelector(e)).map(oe.fromDom)},Qo=(e,n)=>e.dom===n.dom,Ic=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},bf=ki,eb=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Bo=e=>e.dom.nodeName.toLowerCase(),nd=e=>e.dom.nodeType,Xr=e=>n=>nd(n)===e,Pl=e=>nd(e)===ci||Bo(e)==="#comment",$l=e=>Tr(e)&&vu(e.dom),Tr=Xr(fg),Es=Xr(t1),Dy=Xr(e1),Oy=Xr(Cu),Jr=e=>n=>Tr(n)&&Bo(n)===e,ml=e=>oe.fromDom(e.dom.ownerDocument),fl=e=>Dy(e)?e:ml(e),oa=e=>oe.fromDom(fl(e).dom.documentElement),Il=e=>oe.fromDom(fl(e).dom.defaultView),Lc=e=>F.from(e.dom.parentNode).map(oe.fromDom),_i=e=>F.from(e.dom.parentElement).map(oe.fromDom),ic=(e,n)=>{const o=fe(n)?n:Oe;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=oe.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},_s=e=>{const n=o=>ye(o,r=>!Qo(e,r));return Lc(e).map(wr).map(n).getOr([])},Zi=e=>F.from(e.dom.previousSibling).map(oe.fromDom),Hc=e=>F.from(e.dom.nextSibling).map(oe.fromDom),Pa=e=>Ln(eb(e,Zi)),Ta=e=>eb(e,Hc),wr=e=>de(e.dom.childNodes,oe.fromDom),gl=(e,n)=>{const o=e.dom.childNodes;return F.from(o[n]).map(oe.fromDom)},Aa=e=>gl(e,0),Vr=e=>gl(e,e.dom.childNodes.length-1),Ld=e=>e.dom.childNodes.length,tb=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return oe.fromDom(n)},Rh=e=>Oy(e)&&_e(e.dom.host),ka=e=>oe.fromDom(e.dom.getRootNode()),o1=e=>Rh(e)?e:tb(fl(e)),nb=e=>Rh(e)?e:oe.fromDom(fl(e).dom.body),Rm=e=>{const n=ka(e);return Rh(n)?F.some(n):F.none()},zn=e=>oe.fromDom(e.dom.host),s1=e=>{if(_e(e.target)){const n=oe.fromDom(e.target);if(Tr(n)&&ha(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return to(o)}}return F.from(e.target)},ha=e=>_e(e.dom.shadowRoot),$a=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),Ia=e=>{const n=oe.fromDom(s1(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=k(r,o);return $a(n,e.clientX,e.clientY,o,r,c,e)},tr=(e,n)=>o=>{e(o)&&n(Ia(o))},Hd=(e,n,o,r,c)=>{const u=tr(o,r);return e.dom.addEventListener(n,u,c),{unbind:Ce(ji,e,n,u,c)}},Bh=(e,n,o,r)=>Hd(e,n,o,r,!1),ji=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},Ll=ot,r1=(e,n,o)=>Bh(e,n,Ll,o),a1=()=>oe.fromDom(document),gg=(e,n=!1)=>e.dom.focus({preventScroll:n}),wu=e=>{const n=ka(e).dom;return e.dom===n.activeElement},hl=(e=a1())=>F.from(e.dom.activeElement).map(oe.fromDom),c1=e=>hl(ka(e)).filter(n=>e.dom.contains(n.dom)),Ka=(e,n)=>{Lc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},qi=(e,n)=>{Hc(e).fold(()=>{Lc(e).each(c=>{gs(c,n)})},r=>{Ka(r,n)})},Su=(e,n)=>{Aa(e).fold(()=>{gs(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},gs=(e,n)=>{e.dom.appendChild(n.dom)},Di=(e,n)=>{Ka(e,n),gs(n,e)},ob=(e,n)=>{ne(n,o=>{Ka(e,o)})},hg=(e,n)=>{ne(n,(o,r)=>{const c=r===0?e:n[r-1];qi(c,o)})},Gi=(e,n)=>{ne(n,o=>{gs(e,o)})},Jn=(e,n,o)=>{if(ae(o)||Rt(o)||cs(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Cr=(e,n,o)=>{Jn(e.dom,n,o)},Ya=(e,n)=>{const o=e.dom;To(n,(r,c)=>{Jn(o,c,r)})},nr=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Ki=(e,n)=>F.from(nr(e,n)),lr=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Qr=(e,n)=>{e.dom.removeAttribute(n)},vf=e=>{const n=e.dom.attributes;return n==null||n.length===0},Wo=e=>Ne(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),pl=e=>{e.dom.textContent="",ne(wr(e),n=>{Ws(n)})},Ws=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},ii=e=>{const n=wr(e);n.length>0&&hg(e,n),Ws(e)},ea=(e,n)=>oe.fromDom(e.dom.cloneNode(n)),ta=e=>ea(e,!1),xu=e=>ea(e,!0),yf=(e,n)=>{const o=oe.fromTag(n),r=Wo(e);return Ya(o,r),o},od=(e,n)=>{const o=yf(e,n);qi(e,o);const r=wr(e);return Gi(o,r),Ws(e),o},zd=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,wr(oe.fromDom(r))},Vd=e=>de(e,oe.fromDom),Xa=e=>e.dom.innerHTML,sd=(e,n)=>{const r=ml(e).dom,c=oe.fromDom(r.createDocumentFragment()),u=zd(n,r);Gi(c,u),pl(e),gs(e,c)},Ry=e=>{const n=oe.fromTag("div"),o=oe.fromDom(e.dom.cloneNode(!0));return gs(n,o),Xa(n)},Ud=e=>e.style!==void 0&&fe(e.style.getPropertyValue),Ms=e=>{const n=Es(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Rm(oe.fromDom(n)).fold(()=>o.body.contains(n),mo(Ms,zn))},i1=(e,n,o)=>{if(!ae(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Ud(e)&&e.style.setProperty(n,o)},Cf=(e,n)=>{Ud(e)&&e.style.removeProperty(n)},lc=(e,n,o)=>{const r=e.dom;i1(r,n,o)},li=(e,n)=>{const o=e.dom;To(n,(r,c)=>{i1(o,c,r)})},Pr=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!Ms(e)?rd(o,n):c},rd=(e,n)=>Ud(e)?e.style.getPropertyValue(n):"",Ur=(e,n)=>{const o=e.dom,r=rd(o,n);return F.from(r).filter(c=>c.length>0)},wf=e=>{const n={},o=e.dom;if(Ud(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},Mh=(e,n)=>{const o=e.dom;Cf(o,n),yt(Ki(e,"style").map(cr),"")&&Qr(e,"style")},l1=e=>e.dom.offsetWidth,Hl=((e,n)=>{const o=(b,v)=>{if(!cs(v)&&!v.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+v);const S=b.dom;Ud(S)&&(S.style[e]=v+"px")},r=b=>{const v=n(b);if(v<=0||v===null){const S=Pr(b,e);return parseFloat(S)||0}return v},c=r,u=(b,v)=>Ne(v,(S,_)=>{const R=Pr(b,_),M=R===void 0?0:parseInt(R,10);return isNaN(M)?S:S+M},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,v,S)=>{const _=u(b,S);return v>_?v-_:0}}})("height",e=>{const n=e.dom;return Ms(e)?n.getBoundingClientRect().height:n.offsetHeight}),By=e=>Hl.get(e),u1=(e,n)=>({left:e,top:n,translate:(r,c)=>u1(e+r,n+c)}),zl=u1,sb=e=>{const n=e.getBoundingClientRect();return zl(n.left,n.top)},Sf=(e,n)=>e!==void 0?e:n!==void 0?n:0,pg=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return zl(o.offsetLeft,o.offsetTop);const u=Sf(r?.pageYOffset,c.scrollTop),f=Sf(r?.pageXOffset,c.scrollLeft),b=Sf(c.clientTop,o.clientTop),v=Sf(c.clientLeft,o.clientLeft);return bg(e).translate(f-v,u-b)},bg=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?zl(r.offsetLeft,r.offsetTop):Ms(e)?sb(n):zl(0,0)},d1=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return zl(o,r)},rb=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},bl=(e,n)=>{Ro().browser.isSafari()&&fe(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},My=(e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?F.from(u.dom.nodeValue):F.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}},Wd=(e,n)=>{const r=document.createDocumentFragment();return ne(e,c=>{r.appendChild(c.dom)}),oe.fromDom(r)},Fs=My(Es,"text"),uc=e=>Fs.get(e),Eu=e=>Fs.getOption(e),m1=(e,n)=>Fs.set(e,n),Zd=(e,n)=>{const o=nr(e,n);return o===void 0||o===""?[]:o.split(" ")},f1=(e,n,o)=>{const c=Zd(e,n).concat([o]);return Cr(e,n,c.join(" ")),!0},ab=(e,n,o)=>{const r=ye(Zd(e,n),c=>c!==o);return r.length>0?Cr(e,n,r.join(" ")):Qr(e,n),!1};var Tu=(e,n,o,r,c)=>e(o,r)?F.some(o):fe(c)&&c(o)?F.none():n(o,r,c);const Au=(e,n,o)=>{let r=e.dom;const c=fe(o)?o:Oe;for(;r.parentNode;){r=r.parentNode;const u=oe.fromDom(r);if(n(u))return F.some(u);if(c(u))break}return F.none()},Hs=(e,n,o)=>Tu((c,u)=>u(c),Au,e,n,o),cb=(e,n)=>{const o=e.dom;return o.parentNode?Sr(oe.fromDom(o.parentNode),r=>!Qo(e,r)&&n(r)):F.none()},Sr=(e,n)=>{const o=c=>n(oe.fromDom(c));return Gt(e.dom.childNodes,o).map(oe.fromDom)},xf=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=oe.fromDom(r.childNodes[c]);if(n(u))return F.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return F.none()};return o(e.dom)},Wr=(e,n,o)=>Au(e,r=>ki(r,n),o),ku=(e,n)=>Id(n,e),dc=(e,n,o)=>Tu((c,u)=>ki(c,u),Wr,e,n,o),ad=e=>e.dom.classList!==void 0,Fh=e=>Zd(e,"class"),g1=(e,n)=>f1(e,"class",n),h1=(e,n)=>ab(e,"class",n),Fy=(e,n)=>j(Fh(e),n)?h1(e,n):g1(e,n),ui=(e,n)=>{ad(e)?e.dom.classList.add(n):g1(e,n)},Vl=e=>{(ad(e)?e.dom.classList:Fh(e)).length===0&&Qr(e,"class")},Zr=(e,n)=>{ad(e)?e.dom.classList.remove(n):h1(e,n),Vl(e)},_a=(e,n)=>{const o=ad(e)?e.dom.classList.toggle(n):Fy(e,n);return Vl(e),o},Nh=(e,n)=>ad(e)&&e.dom.classList.contains(n),vg=(e,n)=>{ne(n,o=>{ui(e,o)})},Ph=(e,n)=>{ne(n,o=>{Zr(e,o)})},ib=e=>dc(e,"[contenteditable]"),vl=(e,n=!1)=>Ms(e)?e.dom.isContentEditable:ib(e).fold(it(n),o=>rS(o)==="true"),rS=e=>e.dom.contentEditable,x=(e,n)=>{e.dom.contentEditable=n?"true":"false"},A=(e,n,o)=>ye(ic(e,o),n),L=(e,n)=>ye(wr(e),n),X=(e,n)=>{let o=[];return ne(wr(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(X(r,n))}),o},Se=(e,n,o)=>A(e,r=>ki(r,n),o),Ge=(e,n)=>Nl(n,e),zt=(e,n,o)=>Au(e,n,o).isSome(),vn=(e,n)=>cb(e,n).isSome(),po=(e,n)=>xf(e,n).isSome(),$o=(e,n)=>zt(e,Ce(Qo,n)),Ks=(e,n,o)=>Wr(e,n,o).isSome(),ur=e=>fe(e)?e:Oe,na=(e,n,o)=>{let r=e.dom;const c=ur(o);for(;r.parentNode;){r=r.parentNode;const u=oe.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return F.none()},zc=(e,n,o)=>{const r=n(e),c=ur(o);return r.orThunk(()=>c(e)?F.none():na(e,n,c))},cd=e=>Eu(e).filter(n=>n.trim().length!==0||n.indexOf(ir)>-1).isSome(),id=e=>$l(e)&&nr(e,"contenteditable")==="false",yl=["img","br"],p1=e=>cd(e)||j(yl,Bo(e))||id(e),Ef=e=>xf(e,p1),Bm={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Tf=ja.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ih=(e,n,o,r)=>e.fold(n,o,r),Lh=e=>e.fold(Mo,Mo,Mo),Ny=Tf.before,Py=Tf.on,ms=Tf.after,Zs={before:Ny,on:Py,after:ms,cata:Ih,getStart:Lh},pa=ja.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),di=e=>pa.exact(e.start,e.soffset,e.finish,e.foffset),Hh=e=>e.match({domRange:n=>oe.fromDom(n.startContainer),relative:(n,o)=>Zs.getStart(n),exact:(n,o,r,c)=>n}),yg=pa.domRange,zh=pa.relative,Vh=pa.exact,aS=e=>{const n=Hh(e);return Il(n)},Mm=Bm.create,jd={domRange:yg,relative:zh,exact:Vh,exactFromRange:di,getWin:aS,range:Mm},$y=(e,n,o)=>{var r;return F.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(c=>{if(c.offsetNode===null)return F.none();const u=e.createRange();return u.setStart(c.offsetNode,c.offset),u.collapse(),F.some(u)})},hk=(e,n,o)=>{var r;return F.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},ba=(e,n,o)=>e.caretPositionFromPoint?$y(e,n,o):e.caretRangeFromPoint?hk(e,n,o):F.none(),sa=(e,n,o)=>{const r=e.document;return ba(r,n,o).map(c=>Bm.create(oe.fromDom(c.startContainer),c.startOffset,oe.fromDom(c.endContainer),c.endOffset))},ld=(e,n)=>{const o=Bo(e);return o==="input"?Zs.after(e):j(["br","img"],o)?n===0?Zs.before(e):Zs.after(e):Zs.on(e,n)},Uh=(e,n)=>{const o=e.fold(Zs.before,ld,Zs.after),r=n.fold(Zs.before,ld,Zs.after);return jd.relative(o,r)},lb=(e,n,o,r)=>{const c=ld(e,n),u=ld(o,r);return jd.relative(c,u)},Vc=e=>e.match({domRange:n=>{const o=oe.fromDom(n.startContainer),r=oe.fromDom(n.endContainer);return lb(o,n.startOffset,r,n.endOffset)},relative:Uh,exact:lb}),Iy=e=>{const n=jd.getWin(e).dom,o=(c,u,f,b)=>pf(n,c,u,f,b),r=Vc(e);return mg(n,r).match({ltr:o,rtl:o})},Af=(e,n,o)=>sa(e,n,o),ub=e=>{const n=e===void 0?window:e;return Ro().browser.isFirefox()?F.none():F.from(n.visualViewport)},Yi=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),db=e=>{const n=e===void 0?window:e,o=n.document,r=d1(oe.fromDom(o));return ub(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return Yi(r.left,r.top,u,f)},c=>Yi(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))};class Qs{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const Wh=/^[ \t\r\n]*$/,Fm=e=>Wh.test(e),pk=e=>{for(const n of e)if(!Ga(n))return!1;return!0},cS=e=>" \f	\v".indexOf(e)!==-1,mb=e=>e===`
`||e==="\r",bk=(e,n)=>n<e.length&&n>=0?mb(e[n]):!1,Ly=(e,n=4,o=!0,r=!0)=>{const c=si(" ",n),u=e.replace(/\t/g,c);return Ne(u,(b,v)=>cS(v)||v===ir?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||bk(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+ir}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:mb(v),str:b.str+v},{pcIsSpace:!1,str:""}).str},Nm=e=>n=>!!n&&n.nodeType===e,Hy=e=>!!e&&!Object.getPrototypeOf(e),bn=Nm(1),dr=e=>bn(e)&&$l(oe.fromDom(e)),Zh=e=>bn(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Cg=e=>{const n=e.toLowerCase();return o=>_e(o)&&o.nodeName.toLowerCase()===n},Ja=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return j(n,r)}return!1}},jh=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(bn(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},vk=e=>n=>bn(n)&&n.hasAttribute(e),wg=e=>bn(e)&&e.hasAttribute("data-mce-bogus"),iS=e=>bn(e)&&e.getAttribute("data-mce-bogus")==="all",qd=e=>bn(e)&&e.tagName==="TABLE",kf=e=>n=>!!(dr(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),zy=Ja(["textarea","input"]),St=Nm(3),Vy=Nm(4),Uy=Nm(7),$r=Nm(8),Vo=Nm(9),Sg=Nm(11),xr=Cg("br"),Wy=Cg("img"),_u=Cg("a"),mi=kf("true"),mr=kf("false"),fb=e=>dr(e)&&e.isContentEditable&&_e(e.parentElement)&&!e.parentElement.isContentEditable,Gd=Ja(["td","th"]),Zy=Ja(["td","th","caption"]),gb=Cg("template"),Du=Ja(["video","audio","object","embed"]),jy=Cg("li"),hb=Cg("details"),qy=Cg("summary"),lS={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},yk=(e,n,o)=>{const r=oe.fromDom(n),c=oe.fromDom(e),u=o.getWhitespaceElements();return zt(c,b=>no(u,Bo(b)),Ce(Qo,r))},Gy=e=>bn(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),uS=(e,n)=>bn(e)&&no(n.getNonEmptyElements(),e.nodeName),pb=vk("data-mce-bookmark"),Ck=e=>_i(oe.fromDom(e)).exists(n=>!vl(n)),wk=(e,n,o)=>Fm(e.data)&&!yk(e,n,o),Ky=(e,n,o,r)=>St(e)&&!wk(e,n,o)&&(!r.includeZwsp||!pk(e.data)),Yy=(e,n,o,r)=>fe(r.isContent)&&r.isContent(n)||uS(n,e)||pb(n)||Gy(n)||Ky(n,o,e,r)||mr(n)||mi(n)&&Ck(n),Ul=(e,n,o)=>{const r={...lS,...o};if(r.checkRootAsContent&&Yy(e,n,n,r))return!1;let c=n.firstChild,u=0;if(!c)return!0;const f=new Qs(c,n);do{if(r.skipBogus&&bn(c)){const b=c.getAttribute("data-mce-bogus");if(b){c=f.next(b==="all");continue}}if($r(c)){c=f.next(!0);continue}if(xr(c)){u++,c=f.next();continue}if(Yy(e,c,n,r))return!1;c=f.next()}while(c);return u<=1},fi=(e,n,o)=>Ul(e,n.dom,{checkRootAsContent:!0,...o}),Cl=(e,n,o)=>Yy(e,n,n,{includeZwsp:lS.includeZwsp,...o}),Qn=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},gi=e=>Qn(e)!=="html",xg=e=>gi(e.nodeName),dS=e=>Qn(e.nodeName),Sk=["svg","math"],bb=()=>{const e=is(),n=()=>e.get().map(dS).getOr("html");return{track:c=>(xg(c)?e.set(c):e.get().exists(u=>!u.contains(c))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},b1="data-mce-block",Eg=e=>ye(sn(e),n=>!/[A-Z]/.test(n)),vb=e=>de(Eg(e),n=>{const o=CSS.escape(n);return`${o}:`+de(Sk,r=>`not(${r} ${o})`).join(":")}).join(","),_f=(e,n)=>_e(n.querySelector(e))?(n.setAttribute(b1,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(b1),!1),Xy=(e,n)=>{const o=vb(e.getTransparentElements()),r=vb(e.getBlockElements());return ye(n.querySelectorAll(o),c=>_f(r,c))},mS=(e,n,o)=>{var r;const c=o?"lastChild":"firstChild";for(let u=n[c];u;u=u[c])if(Ul(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},Br=(e,n,o)=>{const r=document.createRange(),c=n.parentNode;if(c){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();mS(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();mS(e,f,!1),Ul(e,u,{checkRootAsContent:!0})||c.insertBefore(u,n),Ul(e,o,{checkRootAsContent:!0})||c.insertBefore(o,n),Ul(e,f,{checkRootAsContent:!0})||c.insertBefore(f,n),c.removeChild(n)}},Ou=(e,n,o)=>{const r=e.getBlockElements(),c=oe.fromDom(n),u=b=>Bo(b)in r,f=b=>Qo(b,c);ne(Vd(o),b=>{Au(b,u,f).each(v=>{const S=L(b,_=>u(_)&&!e.isValidChild(Bo(v),Bo(_)));if(S.length>0){const _=_i(v);ne(S,R=>{Au(R,u,f).each(M=>{Br(e,M.dom,R.dom)})}),_.each(R=>Xy(e,R.dom))}})})},Oi=(e,n,o)=>{ne([...o,...ft(e,n)?[n]:[]],r=>ne(Ge(oe.fromDom(r),r.nodeName.toLowerCase()),c=>{wl(e,c.dom)&&ii(c)}))},Df=(e,n)=>{const o=Xy(e,n);Ou(e,n,o),Oi(e,n,o)},hi=(e,n)=>{if(qh(e,n)){const o=vb(e.getBlockElements());_f(o,n)}},Tg=(e,n,o)=>{const r=u=>Qo(u,oe.fromDom(n)),c=ic(oe.fromDom(o),r);an(c,c.length-2).filter(Tr).fold(()=>Df(e,n),u=>Df(e,u.dom))},La=e=>e.hasAttribute(b1),Ac=(e,n)=>no(e.getTransparentElements(),n),qh=(e,n)=>bn(n)&&Ac(e,n.nodeName),ft=(e,n)=>qh(e,n)&&La(n),wl=(e,n)=>qh(e,n)&&!La(n),v1=(e,n)=>n.type===1&&Ac(e,n.name)&&ae(n.attr(b1)),Da=Ro().browser,Wl=e=>Gt(e,Tr),Zl=e=>Da.isFirefox()&&Bo(e)==="table"?Wl(wr(e)).filter(n=>Bo(n)==="caption").bind(n=>Wl(Ta(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,fS=(e,n)=>e.children&&j(e.children,n),Pm=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Pr(oe.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!fS(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!fS(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=Zl(oe.fromDom(n))}return{x:r,y:c}},gS=(e,n)=>{const o=n.crossOrigin;return n.contentCssCors?"anonymous":fe(o)?o(e):void 0},Ri=(e,n={})=>{let o=0;const r={},c=oe.fromDom(e),u=fl(c),f=Ee=>{n.referrerPolicy=Ee},b=Ee=>{n.contentCssCors=Ee},v=Ee=>{n.crossOrigin=Ee},S=Ee=>{gs(o1(c),Ee)},_=Ee=>{const Re=o1(c);ku(Re,"#"+Ee).each(Ws)},R=Ee=>xs(r,Ee).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),M=Ee=>new Promise((Re,Ie)=>{let lt;const Pt=kt._addCacheSuffix(Ee),Et=R(Pt);r[Pt]=Et,Et.count++;const et=(Tn,lo)=>{ne(Tn,Ht),Et.status=lo,Et.passed=[],Et.failed=[],lt&&(lt.onload=null,lt.onerror=null,lt=null)},De=()=>et(Et.passed,2),te=()=>et(Et.failed,3);if(Re&&Et.passed.push(Re),Ie&&Et.failed.push(Ie),Et.status===1)return;if(Et.status===2){De();return}if(Et.status===3){te();return}Et.status=1;const Le=oe.fromTag("link",u.dom);Ya(Le,{rel:"stylesheet",type:"text/css",id:Et.id});const xt=gS(Ee,n);xt!==void 0&&Cr(Le,"crossOrigin",xt),n.referrerPolicy&&Cr(Le,"referrerpolicy",n.referrerPolicy),lt=Le.dom,lt.onload=De,lt.onerror=te,S(Le),Cr(Le,"href",Pt)}),$=(Ee,Re)=>{const Ie=R(Ee);r[Ee]=Ie,Ie.count++;const lt=oe.fromTag("style",u.dom);Ya(lt,{rel:"stylesheet",type:"text/css",id:Ie.id,"data-mce-key":Ee}),lt.dom.innerHTML=Re,S(lt)},J=Ee=>Promise.allSettled(de(Ee,Ie=>M(Ie).then(it(Ie)))).then(Ie=>{const lt=ie(Ie,Pt=>Pt.status==="fulfilled");return lt.fail.length>0?Promise.reject(de(lt.fail,Pt=>Pt.reason)):de(lt.pass,Pt=>Pt.value)}),Y=Ee=>{const Re=kt._addCacheSuffix(Ee);xs(r,Re).each(Ie=>{--Ie.count===0&&(delete r[Re],_(Ie.id))})};return{load:M,loadRawCss:$,loadAll:J,unload:Y,unloadRawCss:Ee=>{xs(r,Ee).each(Re=>{--Re.count===0&&(delete r[Ee],_(Re.id))})},unloadAll:Ee=>{ne(Ee,Re=>{Y(Re)})},_setReferrerPolicy:f,_setContentCssCors:b,_setCrossOrigin:v}},Ru=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=ka(o).dom;return F.from(e.get(u)).getOrThunk(()=>{const f=Ri(u,r);return e.set(u,f),f})}}})(),y1=e=>e.nodeName.toLowerCase()==="span",Lr=(e,n)=>_e(e)&&(Cl(n,e)||n.isInline(e.nodeName.toLowerCase())),hS=(e,n,o)=>{const r=new Qs(e,n).prev(!1),c=new Qs(e,n).next(!1),u=Zn(r)||Lr(r,o),f=Zn(c)||Lr(c,o);return u&&f},yb=e=>y1(e)&&e.getAttribute("data-mce-type")==="bookmark",ud=(e,n,o)=>St(e)&&e.data.length>0&&hS(e,n,o),Jy=e=>bn(e)?e.childNodes.length>0:!1,Xi=e=>Sg(e)||Vo(e),Qy=(e,n,o,r)=>{var c;const u=r||n;if(bn(n)&&yb(n))return n;const f=n.childNodes;for(let b=f.length-1;b>=0;b--)Qy(e,f[b],o,u);if(bn(n)){const b=n.childNodes;b.length===1&&yb(b[0])&&((c=n.parentNode)===null||c===void 0||c.insertBefore(b[0],n))}return!Xi(n)&&!Cl(o,n)&&!Jy(n)&&!ud(n,u,o)&&e.remove(n),n},$e=kt.makeMap,pi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gh=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Mr=/[<>&\"\']/g,Sl=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,mc={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Is={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},pS={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Of=e=>{const n=oe.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},e2=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!Is[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},Rf=e2("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Kh=(e,n)=>e.replace(n?pi:Gh,o=>Is[o]||o),bS=e=>(""+e).replace(Mr,n=>Is[n]||n),vS=(e,n)=>e.replace(n?pi:Gh,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Is[o]||"&#"+o.charCodeAt(0)+";"),$m=(e,n,o)=>{const r=o||Rf;return e.replace(n?pi:Gh,c=>Is[c]||r[c]||c)},Ag={encodeRaw:Kh,encodeAllRaw:bS,encodeNumeric:vS,encodeNamed:$m,getEncodeFunc:(e,n)=>{const o=e2(n)||Rf,r=(f,b)=>f.replace(b?pi:Gh,v=>Is[v]!==void 0?Is[v]:o[v]!==void 0?o[v]:v.length>1?"&#"+((v.charCodeAt(0)-55296)*1024+(v.charCodeAt(1)-56320)+65536)+";":"&#"+v.charCodeAt(0)+";"),c=(f,b)=>$m(f,b,o),u=$e(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:$m:u.numeric?vS:Kh},decode:e=>e.replace(Sl,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):mc[o]||String.fromCharCode(o)):pS[n]||Rf[n]||Of(n))},fc=(e,n)=>(e=kt.trim(e),e?e.split(n||" "):[]),Qa=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Im=e=>Jt(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",Lm=e=>{const n=o=>Ze(o)?de(o,n):Im(o)?new RegExp(o.source,o.flags):Jt(o)?ac(o,n):o;return n(e)},kg=e=>{const n=/^(~)?(.+)$/;return _n(fc(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},Yh=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),bi=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress template time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},Bf=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=bi(e),c=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:c(n),phrasingContent:c(o),flowContent:c(r)})},Oa={html4:Fa(()=>Bf("html4")),html5:Fa(()=>Bf("html5")),"html5-strict":Fa(()=>Bf("html5-strict"))},Cb=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=Oa[e]();return n==="blocks"?F.some(o):n==="phrasing"?F.some(r):n==="flow"?F.some(c):F.none()},Bu=e=>{const n=Yh(e),{phrasingContent:o,flowContent:r}=bi(e),c={},u=(v,S,_)=>{c[v]={attributes:At(S,it({})),attributesOrder:S,children:At(_,it({}))}},f=(v,S="",_="")=>{const R=fc(_),M=fc(v);let $=M.length;const J=[...n,...fc(S)];for(;$--;)u(M[$],J.slice(),R)},b=(v,S)=>{const _=fc(v),R=fc(S);let M=_.length;for(;M--;){const $=c[_[M]];for(let J=0,Y=R.length;J<Y;J++)$.attributes[R[J]]={},$.attributesOrder.push(R[J])}};return e!=="html5-strict"&&(ne(fc("acronym applet basefont big font strike tt"),_=>{f(_,"",o)}),ne(fc("center dir isindex noframes"),_=>{f(_,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&ne([c.video,c.audio],v=>{delete v.children.audio,delete v.children.video}),ne(fc("a form meter progress dfn"),v=>{c[v]&&delete c[v].children[v]}),delete c.caption.children.table,delete c.script,c},Mu=e=>e==="-"?"remove":"add",wb=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return F.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},Ha=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return _n(fc(e,","),o=>{const r=n.exec(o);if(r){const c=r[1],u=c?Mu(c):"replace",f=r[2],b=_n(fc(r[3],"|"),v=>wb(v).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},Xh=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=n;return ne(fc(e,"|"),f=>{const b=o.exec(f);if(b){const v={},S=b[1],_=b[2].replace(/[\\:]:/g,":"),R=b[3],M=b[4];if(S==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(_),v.required=!0),S==="-"){delete c[_],u.splice(kt.inArray(u,_),1);return}if(R&&(R==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:_,value:M}),v.defaultValue=M):R==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:_,value:M}),v.forcedValue=M):R==="<"&&(v.validValues=kt.makeMap(M,"?"))),r.test(_)){const $=v;n.attributePatterns=n.attributePatterns||[],$.pattern=Qa(_),n.attributePatterns.push($)}else c[_]||u.push(_),c[_]=v}})},Hm=(e,n)=>{To(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},_g=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return _n(fc(n,","),r=>{const c=o.exec(r);if(c){const u=c[1],f=c[2],b=c[3],v=c[4],S=c[5],_={attributes:{},attributesOrder:[]};if(e.each(R=>Hm(R,_)),u==="#"?_.paddEmpty=!0:u==="-"&&(_.removeEmpty=!0),v==="!"&&(_.removeEmptyAttrs=!0),S&&Xh(S,_),b&&(_.outputName=f),f==="@")if(e.isNone())e=F.some(_);else return[];return[b?{name:f,element:_,aliasName:b}:{name:f,element:_}]}else return[]})},Kd={},w1=kt.makeMap,xl=kt.each,Dg=kt.extend,yS=kt.explode,jr=(e,n={})=>{const o=w1(e," ",w1(e.toUpperCase()," "));return Dg(o,n)},CS=e=>jr("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Yd=(e,n)=>{if(e){const o={};return ae(e)&&(e={"*":e}),xl(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?w1(r,/[, ]/):yS(r,/[, ]/)}),o}else return},Fu=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(Wn,ys,la)=>{const bc=e[Wn];if(bc)return w1(bc,/[, ]/,w1(bc.toUpperCase(),/[, ]/));{let Rc=Kd[Wn];return Rc||(Rc=jr(ys,la),Kd[Wn]=Rc),Rc}},v=(n=e.schema)!==null&&n!==void 0?n:"html5",S=Bu(v);e.verify_html===!1&&(e.valid_elements="*[*]");const _=Yd(e.valid_styles),R=Yd(e.invalid_styles,"map"),M=Yd(e.valid_classes,"map"),$=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),J=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Y=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),G=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),xe="td th iframe video audio object script code",Ee=b("non_empty_elements",xe+" pre svg textarea summary",Y),Re=b("move_caret_before_on_enter_elements",xe+" table",Y),Ie="h1 h2 h3 h4 h5 h6",lt=b("text_block_elements",Ie+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Pt=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing colgroup col",lt),Et=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),et=b("transparent_elements","a ins del canvas map"),De=b("wrap_block_elements","pre "+Ie);xl("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Wn=>{f[Wn]=new RegExp("</"+Wn+"[^>]*>","gi")});const te=Wn=>{const ys=F.from(o["@"]),la=/[*?+]/;ne(_g(ys,Wn??""),({name:bc,element:Rc,aliasName:rc})=>{if(rc&&(o[rc]=Rc),la.test(bc)){const Kr=Rc;Kr.pattern=Qa(bc),c.push(Kr)}else o[bc]=Rc})},Le=Wn=>{c=[],ne(sn(o),ys=>{delete o[ys]}),te(Wn)},xt=(Wn,ys)=>{var la,bc;delete Kd.text_block_elements,delete Kd.block_elements;const Rc=ys.extends?!Dl(ys.extends):!1,rc=ys.extends;if(r[Wn]=rc?r[rc]:{},u[Wn]=rc??Wn,Ee[Wn.toUpperCase()]={},Ee[Wn]={},Rc||(Pt[Wn.toUpperCase()]={},Pt[Wn]={}),rc&&!o[Wn]&&o[rc]){const Kr=Lm(o[rc]);delete Kr.removeEmptyAttrs,delete Kr.removeEmpty,o[Wn]=Kr}else o[Wn]={attributesOrder:[],attributes:{}};if(Ze(ys.attributes)){const Kr=gu=>{Yr.attributesOrder.push(gu),Yr.attributes[gu]={}},Yr=(la=o[Wn])!==null&&la!==void 0?la:{};delete Yr.attributesDefault,delete Yr.attributesForced,delete Yr.attributePatterns,delete Yr.attributesRequired,Yr.attributesOrder=[],Yr.attributes={},ne(ys.attributes,gu=>{const rg=Yh(v);wb(gu).each(({preset:qp,name:Eh})=>{qp?Eh==="global"&&ne(rg,Kr):Kr(Eh)})}),o[Wn]=Yr}if(Rt(ys.padEmpty)){const Kr=(bc=o[Wn])!==null&&bc!==void 0?bc:{};Kr.paddEmpty=ys.padEmpty,o[Wn]=Kr}if(Ze(ys.children)){const Kr={},Yr=rg=>{Kr[rg]={}},gu=rg=>{Cb(v,rg).each(qp=>{ne(qp,Yr)})};ne(ys.children,rg=>{wb(rg).each(({preset:qp,name:Eh})=>{qp?gu(Eh):Yr(Eh)})}),r[Wn]=Kr}rc&&To(r,(Kr,Yr)=>{Kr[rc]&&(r[Yr]=Kr=Dg({},r[Yr]),Kr[Wn]=Kr[rc])})},Tn=Wn=>{ne(kg(Wn??""),({name:ys,cloneName:la})=>{xt(ys,{extends:la})})},lo=Wn=>{Jt(Wn)?To(Wn,(ys,la)=>xt(la,ys)):ae(Wn)&&Tn(Wn)},Zo=Wn=>{ne(Ha(Wn??""),({operation:ys,name:la,validChildren:bc})=>{const Rc=ys==="replace"?{"#comment":{}}:r[la],rc=Yr=>{ys==="remove"?delete Rc[Yr]:Rc[Yr]={}},Kr=Yr=>{Cb(v,Yr).each(gu=>{ne(gu,rc)})};ne(bc,({preset:Yr,name:gu})=>{Yr?Kr(gu):rc(gu)}),r[la]=Rc})},ds=Wn=>{const ys=o[Wn];if(ys)return ys;let la=c.length;for(;la--;){const bc=c[la];if(bc.pattern.test(Wn))return bc}},_r=()=>{e.valid_elements?(Le(e.valid_elements),xl(S,(Wn,ys)=>{r[ys]=Wn.children})):(xl(S,(Wn,ys)=>{o[ys]={attributes:Wn.attributes,attributesOrder:Wn.attributesOrder},r[ys]=Wn.children}),xl(fc("strong/b em/i"),Wn=>{const ys=fc(Wn,"/");o[ys[1]].outputName=ys[0]}),xl(Et,(Wn,ys)=>{o[ys]&&(e.padd_empty_block_inline_children&&(o[ys].paddInEmptyBlock=!0),o[ys].removeEmpty=!0)}),xl(fc("ol ul blockquote a table tbody"),Wn=>{o[Wn]&&(o[Wn].removeEmpty=!0)}),xl(fc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Wn=>{o[Wn]&&(o[Wn].paddEmpty=!0)}),xl(fc("span"),Wn=>{o[Wn].removeEmptyAttrs=!0})),delete o.svg,lo(e.custom_elements),Zo(e.valid_children),te(e.extended_valid_elements),Zo("+ol[ul|ol],+ul[ul|ol]"),xl({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Wn,ys)=>{o[ys]&&(o[ys].parentsRequired=fc(Wn))}),e.invalid_elements&&xl(yS(e.invalid_elements),Wn=>{o[Wn]&&delete o[Wn]}),ds("span")||te("span[!data-mce-type|*]")},Dr=it(_),Oc=it(R),Bt=it(M),kn=it(G),vs=it(Pt),$s=it(lt),xn=it(Et),Ft=it(Object.seal(Y)),Qt=it(J),eo=it(Ee),uo=it(Re),Us=it($),ar=it(et),Pd=it(De),oi=it(Object.seal(f)),df=(Wn,ys)=>{const la=r[Wn.toLowerCase()];return!!(la&&la[ys.toLowerCase()])},Am=(Wn,ys)=>{const la=ds(Wn);if(la)if(ys){if(la.attributes[ys])return!0;const bc=la.attributePatterns;if(bc){let Rc=bc.length;for(;Rc--;)if(bc[Rc].pattern.test(ys))return!0}}else return!0;return!1},Dl=Wn=>no(vs(),Wn),fu=Wn=>!Kn(Wn,"#")&&Am(Wn)&&!Dl(Wn),mf=Wn=>no(Pd(),Wn)||fu(Wn),Ey=it(u);return _r(),{type:v,children:r,elements:o,getValidStyles:Dr,getValidClasses:Bt,getBlockElements:vs,getInvalidStyles:Oc,getVoidElements:Ft,getTextBlockElements:$s,getTextInlineElements:xn,getBoolAttrs:kn,getElementRule:ds,getSelfClosingElements:Qt,getNonEmptyElements:eo,getMoveCaretBeforeOnEnterElements:uo,getWhitespaceElements:Us,getTransparentElements:ar,getSpecialElements:oi,isValidChild:df,isValid:Am,isBlock:Dl,isInline:fu,isWrapper:mf,getCustomElements:Ey,addValidElements:te,setValidElements:Le,addCustomElements:lo,addValidChildren:Zo}},t2=e=>({value:Og(e)}),Og=e=>Hi(e,"#").toUpperCase(),Ji=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Rg=e=>{const n=Ji(e.red)+Ji(e.green)+Ji(e.blue);return t2(n)},Bg=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,n2=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Sb=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),xb=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return Sb(c,u,f,b)},Eb=e=>Bg.test(e)?"rgb":n2.test(e)?"rgba":"other",o2=e=>{const n=Bg.exec(e);if(n!==null)return F.some(xb(n[1],n[2],n[3],"1"));const o=n2.exec(e);return o!==null?F.some(xb(o[1],o[2],o[3],o[4])):F.none()},wS=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Mg=e=>o2(e).map(Rg).map(n=>"#"+n.value).getOr(e),Fg=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const v=qa;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const S=(`\\" \\' \\; \\: ; : `+v).split(" ");for(let R=0;R<S.length;R++)u[S[R]]=v+R,u[v+R]=S[R];const _={parse:R=>{const M={};let $=!1;const J=e.url_converter,Y=e.url_converter_scope||_,G=(et,De,te)=>{const Le=M[et+"-top"+De];if(!Le)return;const xt=M[et+"-right"+De];if(!xt)return;const Tn=M[et+"-bottom"+De];if(!Tn)return;const lo=M[et+"-left"+De];if(!lo)return;const Zo=[Le,xt,Tn,lo];let ds=Zo.length-1;for(;ds--&&Zo[ds]===Zo[ds+1];);ds>-1&&te||(M[et+De]=ds===-1?Zo[0]:Zo.join(" "),delete M[et+"-top"+De],delete M[et+"-right"+De],delete M[et+"-bottom"+De],delete M[et+"-left"+De])},xe=et=>{const De=M[et];if(!De)return;const te=De.indexOf(",")>-1?[De]:De.split(" ");let Le=te.length;for(;Le--;)if(te[Le]!==te[0])return!1;return M[et]=te[0],!0},Ee=(et,De,te,Le)=>{xe(De)&&xe(te)&&xe(Le)&&(M[et]=M[De]+" "+M[te]+" "+M[Le],delete M[De],delete M[te],delete M[Le])},Re=et=>($=!0,u[et]),Ie=(et,De)=>($&&(et=et.replace(/\uFEFF[0-9]/g,te=>u[te])),De||(et=et.replace(/\\([\'\";:])/g,"$1")),et),lt=et=>String.fromCharCode(parseInt(et.slice(1),16)),Pt=et=>et.replace(/\\[0-9a-f]+/gi,lt),Et=(et,De,te,Le,xt,Tn)=>{if(xt=xt||Tn,xt)return xt=Ie(xt),"'"+xt.replace(/\'/g,"\\'")+"'";if(De=Ie(De||te||Le||""),!e.allow_script_urls){const lo=De.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(lo)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(lo))return""}return J&&(De=J.call(Y,De,"style")),"url('"+De.replace(/\'/g,"\\'")+"')"};if(R){R=R.replace(/[\u0000-\u001F]/g,""),R=R.replace(/\\[\"\';:\uFEFF]/g,Re).replace(/\"[^\"]+\"|\'[^\']+\'/g,De=>De.replace(/[;:]/g,Re));let et;for(;et=r.exec(R);){r.lastIndex=et.index+et[0].length;let De=et[1].replace(c,"").toLowerCase(),te=et[2].replace(c,"");if(De&&te){if(De=Pt(De),te=Pt(te),De.indexOf(v)!==-1||De.indexOf('"')!==-1||!e.allow_script_urls&&(De==="behavior"||/expression\s*\(|\/\*|\*\//.test(te)))continue;De==="font-weight"&&te==="700"?te="bold":(De==="color"||De==="background-color")&&(te=te.toLowerCase()),Eb(te)==="rgb"&&o2(te).each(Le=>{te=Mg(wS(Le)).toLowerCase()}),te=te.replace(o,Et),M[De]=$?Ie(te,!0):te}}G("border","",!0),G("border","-width"),G("border","-color"),G("border","-style"),G("padding",""),G("margin",""),Ee("border","border-width","border-style","border-color"),M.border==="medium none"&&delete M.border,M["border-image"]==="none"&&delete M["border-image"]}return M},serialize:(R,M)=>{let $="";const J=(G,xe)=>{const Ee=xe[G];if(Ee)for(let Re=0,Ie=Ee.length;Re<Ie;Re++){const lt=Ee[Re],Pt=R[lt];Pt&&($+=($.length>0?" ":"")+lt+": "+Pt+";")}},Y=(G,xe)=>{if(!b||!xe)return!0;let Ee=b["*"];return Ee&&Ee[G]?!1:(Ee=b[xe],!(Ee&&Ee[G]))};return M&&f?(J("*",f),J(M,f)):To(R,(G,xe)=>{G&&Y(xe,M)&&($+=($.length>0?" ":"")+xe+": "+G+";")}),$}};return _},dd={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},zm=e=>e instanceof Event||fe(e.initEvent),Ng=e=>e.isDefaultPrevented===ot||e.isDefaultPrevented===Oe,SS=e=>gn(e.preventDefault)||zm(e),S1=(e,n)=>{const o=n??{};for(const r in e)no(dd,r)||(o[r]=e[r]);return _e(e.composedPath)&&(o.composedPath=()=>e.composedPath()),_e(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),_e(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},x1=(e,n,o,r)=>{var c;const u=S1(n,r);return u.type=e,gn(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),SS(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=ot,fe(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=ot,fe(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=ot,u.stopPropagation()},Ng(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?ot:Oe,u.isPropagationStopped=u.cancelBubble===!0?ot:Oe,u.isImmediatePropagationStopped=Oe)),u},xS="mce-data-",ES=/^(?:mouse|contextmenu)|click/,Tb=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Pg=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},Ab=e=>_e(e)&&ES.test(e.type),jl=(e,n)=>{const o=x1(e.type,e,document,n);if(Ab(e)&&Zn(e.pageX)&&!Zn(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},TS=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{Pg(e,"DOMContentLoaded",f),Pg(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():Tb(e,"DOMContentLoaded",f),o.domLoaded||Tb(e,"load",f)};class Nu{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=xS+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,v=M=>{u.executeHandlers(jl(M||b.event),S)};if(!n||St(n)||$r(n))return r;let S;n[u.expando]?S=n[u.expando]:(S=u.count++,n[u.expando]=S,u.events[S]={}),c=c||n;const _=o.split(" ");let R=_.length;for(;R--;){let M=_[R],$=v,J=!1,Y=!1;if(M==="DOMContentLoaded"&&(M="ready"),u.domLoaded&&M==="ready"&&n.readyState==="complete"){r.call(c,jl({type:M}));continue}!u.hasFocusIn&&(M==="focusin"||M==="focusout")&&(J=!0,Y=M==="focusin"?"focus":"blur",$=G=>{const xe=jl(G||b.event);xe.type=xe.type==="focus"?"focusin":"focusout",u.executeHandlers(xe,S)}),f=u.events[S][M],f?M==="ready"&&u.domLoaded?r(jl({type:M})):f.push({func:r,scope:c}):(u.events[S][M]=f=[{func:r,scope:c}],f.fakeName=Y,f.capture=J,f.nativeHandler=$,M==="ready"?TS(n,$,u):Tb(n,Y||M,$,J))}return n=f=null,r}unbind(n,o,r){if(!n||St(n)||$r(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const v=f[b],S=u[v];if(S){if(r){let _=S.length;for(;_--;)if(S[_].func===r){const R=S.nativeHandler,M=S.fakeName,$=S.capture,J=S.slice(0,_).concat(S.slice(_+1));J.nativeHandler=R,J.fakeName=M,J.capture=$,u[v]=J}}(!r||S.length===0)&&(delete u[v],Pg(n,S.fakeName||v,S.nativeHandler,S.capture))}}}else To(u,(f,b)=>{Pg(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(no(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||St(n)||$r(n))return this;const c=jl({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||St(n)||$r(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Nu.Event=new Nu;const E1=kt.each,AS=kt.grep,kS="data-mce-style",Qi=kt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),T1=(e,n,o)=>{gn(o)||o===""?Qr(e,n):Cr(e,n,o)},_S=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Mf=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&St(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},xk=(e,n)=>{const o=nr(n,"style"),r=e.serialize(e.parse(o),Bo(n));T1(n,kS,r)},Ek=(e,n)=>cs(e)?no(Qi,n)?e+"":e+"px":e,s2=(e,n,o)=>{const r=_S(n);gn(o)||o===""?Mh(e,r):lc(e,r,Ek(o,r))},Tk=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,v)=>{const S=oe.fromDom(f);fe(n.url_converter)&&_e(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),v,f));const _="data-mce-"+v;T1(S,_,b),T1(S,v,b)},get:(f,b)=>{const v=oe.fromDom(f);return nr(v,"data-mce-"+b)||nr(v,b)}},u={style:{set:(f,b)=>{const v=oe.fromDom(f);r&&T1(v,kS,b),Qr(v,"style"),ae(b)&&li(v,e.parse(b))},get:f=>{const b=oe.fromDom(f),v=nr(b,kS)||nr(b,"style");return e.serialize(e.parse(v),Bo(b))}}};return r&&(u.href=u.src=c),u},Ls=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,v=Ru.forElement(oe.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy,crossOrigin:Pe=>{const We=n.crossOrigin;if(fe(We))return We(Pe,"stylesheet")}}),S=[],_=n.schema?n.schema:Fu({}),R=Fg({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),M=n.ownEvents?new Nu:Nu.Event,$=_.getBlockElements(),J=Pe=>ae(Pe)?no($,Pe):bn(Pe)&&(no($,Pe.nodeName)||ft(_,Pe)),Y=Pe=>Pe&&e&&ae(Pe)?e.getElementById(Pe):Pe,G=Pe=>{const We=Y(Pe);return _e(We)?oe.fromDom(We):null},xe=(Pe,We,Kt="")=>{let It;const oo=G(Pe);if(_e(oo)&&Tr(oo)){const ks=bI[We];ks&&ks.get?It=ks.get(oo.dom,We):It=nr(oo,We)}return _e(It)?It:Kt},Ee=Pe=>{const We=Y(Pe);return gn(We)?[]:We.attributes},Re=(Pe,We,Kt)=>{kn(Pe,It=>{if(bn(It)){const oo=oe.fromDom(It),ks=Kt===""?null:Kt,ua=nr(oo,We),Th=bI[We];Th&&Th.set?Th.set(oo.dom,ks,We):T1(oo,We,ks),ua!==ks&&n.onSetAttrib&&n.onSetAttrib({attrElm:oo.dom,attrName:We,attrValue:ks})}})},Ie=(Pe,We)=>Pe.cloneNode(We),lt=()=>n.root_element||e.body,Pt=Pe=>{const We=db(Pe);return{x:We.x,y:We.y,w:We.width,h:We.height}},Et=(Pe,We)=>Pm(e.body,Y(Pe),We),et=(Pe,We,Kt)=>{kn(Pe,It=>{const oo=oe.fromDom(It);s2(oo,We,Kt),n.update_styles&&xk(R,oo)})},De=(Pe,We)=>{kn(Pe,Kt=>{const It=oe.fromDom(Kt);To(We,(oo,ks)=>{s2(It,ks,oo)}),n.update_styles&&xk(R,It)})},te=(Pe,We,Kt)=>{const It=Y(Pe);if(!(gn(It)||!dr(It)&&!Zh(It)))return Kt?Pr(oe.fromDom(It),_S(We)):(We=We.replace(/-(\D)/g,(oo,ks)=>ks.toUpperCase()),We==="float"&&(We="cssFloat"),It.style?It.style[We]:void 0)},Le=Pe=>{const We=Y(Pe);if(!We)return{w:0,h:0};let Kt=te(We,"width"),It=te(We,"height");return(!Kt||Kt.indexOf("px")===-1)&&(Kt="0"),(!It||It.indexOf("px")===-1)&&(It="0"),{w:parseInt(Kt,10)||We.offsetWidth||We.clientWidth,h:parseInt(It,10)||We.offsetHeight||We.clientHeight}},xt=Pe=>{const We=Y(Pe),Kt=Et(We),It=Le(We);return{x:Kt.x,y:Kt.y,w:It.w,h:It.h}},Tn=(Pe,We)=>{if(!Pe)return!1;const Kt=Ze(Pe)?Pe:[Pe];return ce(Kt,It=>ki(oe.fromDom(It),We))},lo=(Pe,We,Kt,It)=>{const oo=[];let ks=Y(Pe);It=It===void 0;const ua=Kt||(lt().nodeName!=="BODY"?lt().parentNode:null);if(ae(We))if(We==="*")We=bn;else{const Th=We;We=cg=>Tn(cg,Th)}for(;ks&&!(ks===ua||gn(ks.nodeType)||Vo(ks)||Sg(ks));){if(!We||We(ks))if(It)oo.push(ks);else return[ks];ks=ks.parentNode}return It?oo:null},Zo=(Pe,We,Kt)=>{const It=lo(Pe,We,Kt,!1);return It&&It.length>0?It[0]:null},ds=(Pe,We,Kt)=>{let It=We;if(Pe){ae(We)&&(It=oo=>Tn(oo,We));for(let oo=Pe[Kt];oo;oo=oo[Kt])if(fe(It)&&It(oo))return oo}return null},_r=(Pe,We)=>ds(Pe,We,"nextSibling"),Dr=(Pe,We)=>ds(Pe,We,"previousSibling"),Oc=Pe=>fe(Pe.querySelectorAll),Bt=(Pe,We)=>{var Kt,It;const oo=(It=(Kt=Y(We))!==null&&Kt!==void 0?Kt:n.root_element)!==null&&It!==void 0?It:e;return Oc(oo)?Eo(oo.querySelectorAll(Pe)):[]},kn=function(Pe,We,Kt){const It=Kt??this;if(Ze(Pe)){const oo=[];return E1(Pe,(ks,ua)=>{const Th=Y(ks);Th&&oo.push(We.call(It,Th,ua))}),oo}else{const oo=Y(Pe);return oo?We.call(It,oo):!1}},vs=(Pe,We)=>{kn(Pe,Kt=>{To(We,(It,oo)=>{Re(Kt,oo,It)})})},$s=(Pe,We)=>{kn(Pe,Kt=>{const It=oe.fromDom(Kt);sd(It,We)})},xn=(Pe,We,Kt,It,oo)=>kn(Pe,ks=>{const ua=ae(We)?e.createElement(We):We;return _e(Kt)&&vs(ua,Kt),It&&(!ae(It)&&It.nodeType?ua.appendChild(It):ae(It)&&$s(ua,It)),oo?ua:ks.appendChild(ua)}),Ft=(Pe,We,Kt)=>xn(e.createElement(Pe),Pe,We,Kt,!0),Qt=Ag.decode,eo=Ag.encodeAllRaw,uo=(Pe,We,Kt="")=>{let It="<"+Pe;for(const oo in We)rs(We,oo)&&(It+=" "+oo+'="'+eo(We[oo])+'"');return Ti(Kt)&&no(_.getVoidElements(),Pe)?It+" />":It+">"+Kt+"</"+Pe+">"},Us=Pe=>{const We=e.createElement("div"),Kt=e.createDocumentFragment();Kt.appendChild(We),Pe&&(We.innerHTML=Pe);let It;for(;It=We.firstChild;)Kt.appendChild(It);return Kt.removeChild(We),Kt},ar=(Pe,We)=>kn(Pe,Kt=>{const It=oe.fromDom(Kt);return We&&ne(wr(It),oo=>{Es(oo)&&oo.dom.length===0?Ws(oo):Ka(It,oo)}),Ws(It),It.dom}),Pd=Pe=>kn(Pe,We=>{const Kt=We.attributes;for(let It=Kt.length-1;It>=0;It--)We.removeAttributeNode(Kt.item(It))}),oi=Pe=>R.parse(Pe),df=(Pe,We)=>R.serialize(Pe,We),Am=Pe=>{if(Ay!==Ls.DOM&&e===document){if(o[Pe])return;o[Pe]=!0}let We=e.getElementById("mceDefaultStyles");if(!We){We=e.createElement("style"),We.id="mceDefaultStyles",We.type="text/css";const Kt=e.head;Kt.firstChild?Kt.insertBefore(We,Kt.firstChild):Kt.appendChild(We)}We.styleSheet?We.styleSheet.cssText+=Pe:We.appendChild(e.createTextNode(Pe))},Dl=Pe=>{Pe||(Pe=""),ne(Pe.split(","),We=>{c[We]=!0,v.load(We).catch(rt)})},fu=(Pe,We,Kt)=>{kn(Pe,It=>{if(bn(It)){const oo=oe.fromDom(It),ks=We.split(" ");ne(ks,ua=>{_e(Kt)?(Kt?ui:Zr)(oo,ua):_a(oo,ua)})}})},mf=(Pe,We)=>{fu(Pe,We,!0)},Ey=(Pe,We)=>{fu(Pe,We,!1)},Wn=(Pe,We)=>{const Kt=G(Pe),It=We.split(" ");return _e(Kt)&&ns(It,oo=>Nh(Kt,oo))},ys=Pe=>{kn(Pe,We=>Mh(oe.fromDom(We),"display"))},la=Pe=>{kn(Pe,We=>lc(oe.fromDom(We),"display","none"))},bc=Pe=>{const We=G(Pe);return _e(We)&&yt(Ur(We,"display"),"none")},Rc=Pe=>(Pe||"mce_")+u++,rc=Pe=>{const We=G(Pe);return _e(We)?bn(We.dom)?We.dom.outerHTML:Ry(We):""},Kr=(Pe,We)=>{kn(Pe,Kt=>{bn(Kt)&&(Kt.outerHTML=We)})},Yr=(Pe,We)=>{const Kt=Y(We);return kn(Pe,It=>{const oo=Kt?.parentNode,ks=Kt?.nextSibling;return oo&&(ks?oo.insertBefore(It,ks):oo.appendChild(It)),It})},gu=(Pe,We,Kt)=>kn(We,It=>{var oo;const ks=Ze(We)?Pe.cloneNode(!0):Pe;return Kt&&E1(AS(It.childNodes),ua=>{ks.appendChild(ua)}),(oo=It.parentNode)===null||oo===void 0||oo.replaceChild(ks,It),It}),rg=(Pe,We)=>{if(Pe.nodeName!==We.toUpperCase()){const Kt=Ft(We);return E1(Ee(Pe),It=>{Re(Kt,It.nodeName,xe(Pe,It.nodeName))}),gu(Kt,Pe,!0),Kt}else return Pe},qp=(Pe,We)=>{let Kt=Pe;for(;Kt;){let It=We;for(;It&&Kt!==It;)It=It.parentNode;if(Kt===It)break;Kt=Kt.parentNode}return!Kt&&Pe.ownerDocument?Pe.ownerDocument.documentElement:Kt},Eh=(Pe,We,Kt)=>Lo(We)?Ul(_,Pe,{...Kt,isContent:oo=>{const ks=oo.nodeName.toLowerCase();return!!We[ks]}}):Ul(_,Pe,Kt),lk=()=>e.createRange(),uk=(Pe,We,Kt)=>{let It=lk(),oo,ks;if(Pe&&We&&Pe.parentNode&&We.parentNode){const ua=Pe.parentNode;return It.setStart(ua,Mf(Pe)),It.setEnd(We.parentNode,Mf(We)),oo=It.extractContents(),It=lk(),It.setStart(We.parentNode,Mf(We)+1),It.setEnd(ua,Mf(Pe)+1),ks=It.extractContents(),ua.insertBefore(Qy(Ay,oo,_),Pe),Kt?ua.insertBefore(Kt,Pe):ua.insertBefore(We,Pe),ua.insertBefore(Qy(Ay,ks,_),Pe),ar(Pe),Kt||We}else return},eS=(Pe,We,Kt,It)=>{if(Ze(Pe)){let oo=Pe.length;const ks=[];for(;oo--;)ks[oo]=eS(Pe[oo],We,Kt,It);return ks}else return n.collect&&(Pe===e||Pe===r)&&S.push([Pe,We,Kt,It]),M.bind(Pe,We,Kt,It||Ay)},ag=(Pe,We,Kt)=>{if(Ze(Pe)){let It=Pe.length;const oo=[];for(;It--;)oo[It]=ag(Pe[It],We,Kt);return oo}else{if(S.length>0&&(Pe===e||Pe===r)){let It=S.length;for(;It--;){const[oo,ks,ua]=S[It];Pe===oo&&(!We||We===ks)&&(!Kt||Kt===ua)&&M.unbind(oo,ks,ua)}}return M.unbind(Pe,We,Kt)}},Ty=(Pe,We,Kt)=>M.dispatch(Pe,We,Kt),b5=(Pe,We,Kt)=>M.dispatch(Pe,We,Kt),dk=Pe=>{if(Pe&&dr(Pe)){const We=Pe.getAttribute("data-mce-contenteditable");return We&&We!=="inherit"?We:Pe.contentEditable!=="inherit"?Pe.contentEditable:null}else return null},Ay={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:v,boundEvents:S,styles:R,schema:_,events:M,isBlock:J,root:null,clone:Ie,getRoot:lt,getViewPort:Pt,getRect:xt,getSize:Le,getParent:Zo,getParents:lo,get:Y,getNext:_r,getPrev:Dr,select:Bt,is:Tn,add:xn,create:Ft,createHTML:uo,createFragment:Us,remove:ar,setStyle:et,getStyle:te,setStyles:De,removeAllAttribs:Pd,setAttrib:Re,setAttribs:vs,getAttrib:xe,getPos:Et,parseStyle:oi,serializeStyle:df,addStyle:Am,loadCSS:Dl,addClass:mf,removeClass:Ey,hasClass:Wn,toggleClass:fu,show:ys,hide:la,isHidden:bc,uniqueId:Rc,setHTML:$s,getOuterHTML:rc,setOuterHTML:Kr,decode:Qt,encode:eo,insertAfter:Yr,replace:gu,rename:rg,findCommonAncestor:qp,run:kn,getAttribs:Ee,isEmpty:Eh,createRng:lk,nodeIndex:Mf,split:uk,bind:eS,unbind:ag,fire:b5,dispatch:Ty,getContentEditable:dk,getContentEditableParent:Pe=>{const We=lt();let Kt=null;for(let It=Pe;It&&It!==We&&(Kt=dk(It),Kt===null);It=It.parentNode);return Kt},isEditable:Pe=>{if(_e(Pe)){const We=bn(Pe)?Pe:Pe.parentElement;return _e(We)&&dr(We)&&vl(oe.fromDom(We))}else return!1},destroy:()=>{if(S.length>0){let Pe=S.length;for(;Pe--;){const[We,Kt,It]=S[Pe];M.unbind(We,Kt,It)}}To(c,(Pe,We)=>{v.unload(We),delete c[We]})},isChildOf:(Pe,We)=>Pe===We||We.contains(Pe),dumpRng:Pe=>"startContainer: "+Pe.startContainer.nodeName+", startOffset: "+Pe.startOffset+", endContainer: "+Pe.endContainer.nodeName+", endOffset: "+Pe.endOffset},bI=Tk(R,n,it(Ay));return Ay};Ls.DOM=Ls(document),Ls.nodeIndex=Mf;const DS=Ls.DOM,OS=0,ql=1,$g=2,ls=3;class va{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}_setCrossOrigin(n){this.settings.crossOrigin=n}loadScript(n){return new Promise((o,r)=>{const c=DS;let u;const f=()=>{c.remove(S),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},v=()=>{f(),r("Failed to load script: "+n)},S=c.uniqueId();u=document.createElement("script"),u.id=S,u.type="text/javascript",u.src=kt._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy);const _=this.settings.crossOrigin;if(fe(_)){const R=_(n);R!==void 0&&c.setAttrib(u,"crossorigin",R)}u.onload=b,u.onerror=v,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===$g}markDone(n){this.states[n]=$g}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=OS),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(v,S)=>{xs(o.scriptLoadedCallbacks,S).each(_=>{ne(_,R=>R[v](S))}),delete o.scriptLoadedCallbacks[S]},c=v=>{const S=ye(v,_=>_.status==="rejected");return S.length>0?Promise.reject(_n(S,({reason:_})=>Ze(_)?_:[_])):Promise.resolve()},u=v=>Promise.allSettled(de(v,S=>o.states[S]===$g?(r("resolve",S),Promise.resolve()):o.states[S]===ls?(r("reject",S),Promise.reject(S)):(o.states[S]=ql,o.loadScript(S).then(()=>{o.states[S]=$g,r("resolve",S);const _=o.queue;return _.length>0?(o.queue=[],u(_).then(c)):Promise.resolve()},()=>(o.states[S]=ls,r("reject",S),Promise.reject(S)))))),f=v=>(o.loading=!0,u(v).then(S=>{o.loading=!1;const _=o.queueLoadedCallbacks.shift();return F.from(_).each(Ht),c(S)})),b=Rl(n);return o.loading?new Promise((v,S)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(v,S)})}):f(b)}}va.ScriptLoader=new va;const A1=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},kb=e=>Jt(e)&&no(e,"raw"),fr=e=>Ze(e)&&e.length>1,Jh={},_b=dn("en"),RS=()=>xs(Jh,_b.get()),Pu={getData:()=>ac(Jh,e=>({...e})),setCode:e=>{e&&_b.set(e)},getCode:()=>_b.get(),add:(e,n)=>{let o=Jh[e];o||(Jh[e]=o={});const r=de(sn(n),c=>c.toLowerCase());To(n,(c,u)=>{const f=u.toLowerCase();f!==u&&A1(r,f)?(no(n,f)||(o[f]=c),o[u]=c):o[f]=c})},translate:e=>{const n=RS().getOr({}),o=b=>fe(b)?Object.prototype.toString.call(b):r(b)?"":""+b,r=b=>b===""||b===null||b===void 0,c=b=>{const v=o(b);return no(n,v)?o(n[v]):xs(n,v.toLowerCase()).map(o).getOr(v)},u=b=>b.replace(/{context:\w+}$/,""),f=b=>b.replaceAll("...",pu);if(r(e))return"";if(kb(e))return f(o(e.raw));if(fr(e)){const b=e.slice(1),v=c(e[0]).replace(/\{([0-9]+)\}/g,(S,_)=>no(b,_)?o(b[_]):S);return f(u(v))}return f(u(c(e)))},isRtl:()=>RS().bind(e=>xs(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>no(Jh,e)},kc=()=>{const e=[],n={},o={},r=[],c=(Y,G)=>{const xe=ye(r,Ee=>Ee.name===Y&&Ee.state===G);ne(xe,Ee=>Ee.resolve())},u=Y=>no(n,Y),f=Y=>no(o,Y),b=Y=>{if(o[Y])return o[Y].instance},v=(Y,G)=>{const xe=Pu.getCode(),Ee=","+(G||"")+",";!xe||G&&Ee.indexOf(","+xe+",")===-1||va.ScriptLoader.add(n[Y]+"/langs/"+xe+".js")},S=(Y,G)=>{kc.languageLoad!==!1&&(u(Y)?v(Y,G):J(Y,"loaded").then(()=>v(Y,G)))},_=(Y,G)=>(e.push(G),o[Y]={instance:G},c(Y,"added"),G),R=Y=>{delete n[Y],delete o[Y]},M=(Y,G)=>ae(G)?ae(Y)?{prefix:"",resource:G,suffix:""}:{prefix:Y.prefix,resource:G,suffix:Y.suffix}:G,$=(Y,G)=>{if(n[Y])return Promise.resolve();let xe=ae(G)?G:G.prefix+G.resource+G.suffix;xe.indexOf("/")!==0&&xe.indexOf("://")===-1&&(xe=kc.baseURL+"/"+xe),n[Y]=xe.substring(0,xe.lastIndexOf("/"));const Ee=()=>(c(Y,"loaded"),Promise.resolve());return o[Y]?Ee():va.ScriptLoader.add(xe).then(Ee)},J=(Y,G="added")=>G==="added"&&f(Y)||G==="loaded"&&u(Y)?Promise.resolve():new Promise(xe=>{r.push({name:Y,state:G,resolve:xe})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:S,add:_,remove:R,createUrl:M,load:$,waitFor:J}};kc.languageLoad=!0,kc.baseURL="",kc.PluginManager=kc(),kc.ThemeManager=kc(),kc.ModelManager=kc();const $u=it("mce-annotation"),md=it("data-mce-annotation"),fd=it("data-mce-annotation-uid"),Ff=it("data-mce-annotation-active"),Xd=it("data-mce-annotation-classes"),Vm=it("data-mce-annotation-attrs"),r2=e=>n=>Qo(n,e),a2=(e,n)=>{const o=e.selection.getRng(),r=oe.fromDom(o.startContainer),c=oe.fromDom(e.getBody()),u=n.fold(()=>"."+$u(),v=>`[${md()}="${v}"]`),f=gl(r,o.startOffset).getOr(r);return dc(f,u,r2(c)).bind(v=>Ki(v,`${fd()}`).bind(S=>Ki(v,`${md()}`).map(_=>{const R=Db(e,S);return{uid:S,name:_,elements:R}})))},x5=e=>Tr(e)&&Nh(e,$u()),_k=(e,n)=>lr(e,"data-mce-bogus")||Ks(e,'[data-mce-bogus="all"]',r2(n)),Db=(e,n)=>{const o=oe.fromDom(e.getBody()),r=Ge(o,`[${fd()}="${n}"]`);return ye(r,c=>!_k(c,o))},Ob=(e,n)=>{const o=oe.fromDom(e.getBody()),r=Ge(o,`[${md()}="${n}"]`),c={};return ne(r,u=>{if(!_k(u,o)){const f=nr(u,fd()),b=xs(c,f).getOr([]);c[f]=b.concat([u])}}),c},PS=(e,n)=>{const o=dn({}),r=()=>({listeners:[],previous:is()}),c=(R,M)=>{u(R,$=>(M($),$))},u=(R,M)=>{const $=o.get(),J=xs($,R).getOrThunk(r),Y=M(J);$[R]=Y,o.set($)},f=(R,M,$)=>{c(R,J=>{ne(J.listeners,Y=>Y(!0,R,{uid:M,nodes:de($,G=>G.dom)}))})},b=R=>{c(R,M=>{ne(M.listeners,$=>$(!1,R))})},v=(R,M)=>{ne(Db(e,R),$=>{M?Cr($,Ff(),"true"):Qr($,Ff())})},S=Nc(()=>{const R=fn(n.getNames());ne(R,M=>{u(M,$=>{const J=$.previous.get();return a2(e,F.some(M)).fold(()=>{J.each(Y=>{b(M),$.previous.clear(),v(Y,!1)})},({uid:Y,name:G,elements:xe})=>{yt(J,Y)||(J.each(Ee=>v(Ee,!1)),f(G,Y,xe),$.previous.set(Y),v(Y,!0))}),{previous:$.previous,listeners:$.listeners}})})},30);return e.on("remove",()=>{S.cancel()}),e.on("NodeChange",()=>{S.throttle()}),{addListener:(R,M)=>{u(R,$=>({previous:$.previous,listeners:$.listeners.concat([M])}))}}},Rb=(e,n)=>{const o=md(),r=u=>F.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(fd(),null),u.attr(md(),null),u.attr(Ff(),null);const v=F.from(u.attr(Vm())).map(M=>M.split(",")).getOr([]),S=F.from(u.attr(Xd())).map(M=>M.split(",")).getOr([]);ne(v,M=>u.attr(M,null));const _=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],R=Ke(_,[$u()].concat(S));u.attr("class",R.length>0?R.join(" "):null),u.attr(Xd(),null),u.attr(Vm(),null)};e.serializer.addTempAttr(Ff()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},Nf=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>xs(e,c).map(u=>u.settings),getNames:()=>sn(e)}},k1=(e,n,o=Oe)=>{const r=new Qs(e,n),c=u=>{let f;do f=r[u]();while(f&&!St(f)&&!o(f));return F.from(f).filter(St)};return{current:()=>F.from(r.current()).filter(St),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},gd=(e,n)=>{const o=n||(f=>e.isBlock(f)||xr(f)||mr(f)),r=(f,b,v,S)=>{if(St(f)){const _=S(f,b,f.data);if(_!==-1)return F.some({container:f,offset:_})}return v().bind(_=>r(_.container,_.offset,v,S))};return{backwards:(f,b,v,S)=>{const _=k1(f,S??e.getRoot(),o);return r(f,b,()=>_.prev().map(R=>({container:R,offset:R.length})),v).getOrNull()},forwards:(f,b,v,S)=>{const _=k1(f,S??e.getRoot(),o);return r(f,b,()=>_.next().map(R=>({container:R,offset:0})),v).getOrNull()}}},Bb=["td","th"],Dk=["thead","tbody","tfoot"],Mb=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Fb=["li","dd","dt"],$S=["ul","ol","dl"],Ok=["pre","script","textarea","style"],Qh=e=>{let n;return o=>(n=n||At(e,ot),no(n,Bo(o)))},IS=e=>Bo(e)==="table",Jd=e=>Tr(e)&&Bo(e)==="br",ep=Qh(Mb),Nb=Qh($S),Qd=Qh(Fb),vi=Qh(Dk),el=Qh(Bb),tl=Qh(Ok),Pb=e=>{const n=[];let o=e.dom;for(;o;)n.push(oe.fromDom(o)),o=o.lastChild;return n},c2=e=>{const n=Ge(e,"br"),o=ye(Pb(e).slice(-1),Jd);n.length===o.length&&ne(o,Ws)},tp=()=>{const e=oe.fromTag("br");return Cr(e,"data-mce-bogus","1"),e},em=e=>{pl(e),gs(e,tp())},Rk=(e,n)=>{Vr(e).each(o=>{Zi(o).each(r=>{n.isBlock(Bo(e))&&Jd(o)&&n.isBlock(Bo(r))&&Ws(o)})})},ya=qa,$b=Ga,Bi=yc,LS=e=>e.insertContent(ya,{preserve_zwsp:!0}),HS=bn,Pf=St,Um=e=>(Pf(e)&&(e=e.parentNode),HS(e)&&e.hasAttribute("data-mce-caret")),Ts=e=>Pf(e)&&$b(e.data),Uc=e=>Um(e)||Ts(e),_1=e=>e.firstChild!==e.lastChild||!xr(e.firstChild),Ib=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ya),u=e.parentNode;if(n){const f=e.previousSibling;if(Pf(f)){if(Uc(f))return f;if($f(f))return f.splitText(f.data.length-1)}u?.insertBefore(c,e)}else{const f=e.nextSibling;if(Pf(f)){if(Uc(f))return f;if(tm(f))return f.splitText(1),f}e.nextSibling?u?.insertBefore(c,e.nextSibling):u?.appendChild(c)}return c},Lb=e=>{const n=e.container();return St(n)?n.data.charAt(e.offset())===ya||e.isAtStart()&&Ts(n.previousSibling):!1},D1=e=>{const n=e.container();return St(n)?n.data.charAt(e.offset()-1)===ya||e.isAtEnd()&&Ts(n.nextSibling):!1},zS=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(tp().dom);const f=n.parentNode;return o?f?.insertBefore(u,n):n.nextSibling?f?.insertBefore(u,n.nextSibling):f?.appendChild(u),u},tm=e=>Pf(e)&&e.data[0]===ya,$f=e=>Pf(e)&&e.data[e.data.length-1]===ya,i2=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];wg(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},El=e=>e&&e.hasAttribute("data-mce-caret")?(i2(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,np=e=>Um(e.startContainer),ra=Math.round,Mi=e=>e?{left:ra(e.left),top:ra(e.top),bottom:ra(e.bottom),right:ra(e.right),width:ra(e.width),height:ra(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Hb=(e,n)=>(e=Mi(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),VS=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,l2=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,If=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:l2(n.top-e.bottom,e,n)},Ig=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:l2(n.bottom-e.top,e,n),u2=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,d2=e=>Ne(e,(n,o)=>n.fold(()=>F.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return F.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),F.none()),O1=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},m2=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Lf=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Wm=(e,n)=>{if(bn(e)&&e.hasChildNodes()){const o=e.childNodes,r=Dn(n,0,o.length-1);return o[r]}else return e},US=(e,n)=>{if(!(n<0&&bn(e)&&e.hasChildNodes()))return Wm(e,n)},gc=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),WS=e=>ae(e)&&e.charCodeAt(0)>=768&&gc.test(e),Hf=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},ZS=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},zb=mi,f2=mr,R1=xr,g2=St,jS=Ja(["script","style","textarea"]),qS=Ja(["img","input","textarea","hr","iframe","video","audio","object","embed"]),B1=Ja(["table"]),Ca=Uc,gr=e=>Ca(e)?!1:g2(e)?!jS(e.parentNode):qS(e)||R1(e)||B1(e)||Ra(e),hc=e=>bn(e)&&e.getAttribute("unselectable")==="true",Ra=e=>!hc(e)&&f2(e),za=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Ra(o))return!1;if(zb(o))return!0}return!0},aa=e=>Ra(e)?!Ne(Eo(e.getElementsByTagName("*")),(n,o)=>n||zb(o),!1):!1,Vb=e=>qS(e)||aa(e),Ub=(e,n)=>gr(e)&&za(e,n),Wb=bn,GS=gr,Zb=jh("display","block table"),KS=jh("float","left right"),Lg=ZS(Wb,GS,dt(KS)),h2=dt(jh("white-space","pre pre-line pre-wrap")),Hg=St,jb=xr,p2=Ls.nodeIndex,qb=US,hd=e=>e?e.createRange():Ls.DOM.createRng(),M1=e=>ae(e)&&/[\r\n\t ]/.test(e),b2=e=>!!e.setStart&&!!e.setEnd,op=e=>{const n=e.startContainer,o=e.startOffset;if(M1(e.toString())&&h2(n.parentNode)&&St(n)){const r=n.data;if(M1(r[o-1])||M1(r[o+1]))return!0}return!1},F1=e=>{const n=e.ownerDocument,o=hd(n),r=n.createTextNode(ir),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Mi(o.getBoundingClientRect());return c.removeChild(r),u},Gb=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&St(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),Iu(u)}else return null},v2=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Iu=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Mi(r[0]):o=Mi(e.getBoundingClientRect()),!b2(e)&&jb(e)&&v2(o)?F1(e):v2(o)&&b2(e)&&(n=Gb(e))!==null&&n!==void 0?n:o},nm=(e,n)=>{const o=Hb(e,n);return o.width=1,o.right=o.left+1,o},sp=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&VS(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const v=hd(f.ownerDocument);if(b<f.data.length){if(WS(f.data[b]))return;if(WS(f.data[b-1])&&(v.setStart(f,b),v.setEnd(f,b+1),!op(v))){o(nm(Iu(v),!1));return}}b>0&&(v.setStart(f,b-1),v.setEnd(f,b),op(v)||o(nm(Iu(v),!1))),b<f.data.length&&(v.setStart(f,b),v.setEnd(f,b+1),op(v)||o(nm(Iu(v),!0)))},c=e.container(),u=e.offset();if(Hg(c))return r(c,u),n;if(Wb(c))if(e.isAtEnd()){const f=qb(c,u);Hg(f)&&r(f,f.data.length),Lg(f)&&!jb(f)&&o(nm(Iu(f),!1))}else{const f=qb(c,u);if(Hg(f)&&r(f,0),Lg(f)&&e.isAtEnd())return o(nm(Iu(f),!1)),n;const b=qb(e.container(),e.offset()-1);Lg(b)&&!jb(b)&&(Zb(b)||Zb(f)||!Lg(f))&&o(nm(Iu(b),!1)),Lg(f)&&o(nm(Iu(f),!0))}return n},qe=(e,n,o)=>{const r=()=>(Hg(e),n===0),c=()=>Hg(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const _=hd(e.ownerDocument);return _.setStart(e,n),_.setEnd(e,n),_},f=()=>(o||(o=sp(qe(e,n))),o),b=()=>f().length>0,v=_=>_&&e===_.container()&&n===_.offset(),S=_=>qb(e,_?n-1:n);return{container:it(e),offset:it(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:v,getNode:S}};qe.fromRangeStart=e=>qe(e.startContainer,e.startOffset),qe.fromRangeEnd=e=>qe(e.endContainer,e.endOffset),qe.after=e=>qe(e.parentNode,p2(e)+1),qe.before=e=>qe(e.parentNode,p2(e)),qe.isAbove=(e,n)=>Xt(to(n.getClientRects()),es(e.getClientRects()),If).getOr(!1),qe.isBelow=(e,n)=>Xt(es(n.getClientRects()),to(e.getClientRects()),Ig).getOr(!1),qe.isAtStart=e=>e?e.isAtStart():!1,qe.isAtEnd=e=>e?e.isAtEnd():!1,qe.isTextPosition=e=>e?St(e.container()):!1,qe.isElementPosition=e=>!qe.isTextPosition(e);const Fi=(e,n)=>{St(n)&&n.data.length===0&&e.remove(n)},rp=(e,n,o)=>{n.insertNode(o),Fi(e,o.previousSibling),Fi(e,o.nextSibling)},N1=(e,n,o)=>{const r=F.from(o.firstChild),c=F.from(o.lastChild);n.insertNode(o),r.each(u=>Fi(e,u.previousSibling)),c.each(u=>Fi(e,u.nextSibling))},Kb=(e,n,o)=>{Sg(o)?N1(e,n,o):rp(e,n,o)},pd=St,Wc=wg,P1=Ls.nodeIndex,YS=e=>{const n=e.parentNode;return Wc(n)?YS(n):n},Yb=e=>e?ll(e.childNodes,(n,o)=>(Wc(o)&&o.nodeName!=="BR"?n=n.concat(Yb(o)):n.push(o),n),[]):[],XS=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&pd(o);)n+=o.data.length;return n},zg=e=>n=>e===n,y2=e=>{let n,o;n=Yb(YS(e)),o=Qu(n,zg(e),e),n=n.slice(0,o+1);const r=ll(n,(c,u,f)=>(pd(u)&&pd(n[f-1])&&c++,c),0);return n=Ml(n,Ja([e.nodeName])),o=Qu(n,zg(e),e),o-r},om=e=>(pd(e)?"text()":e.nodeName.toLowerCase())+"["+y2(e)+"]",C2=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},JS=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(pd(r))u=XS(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(om(r));let f=C2(e,r);return f=Ml(f,dt(wg)),o=o.concat(Vi(f,b=>om(b))),o.reverse().join("/")+","+u},Zc=(e,n,o)=>{let r=Yb(e);return r=Ml(r,(c,u)=>!pd(c)||!pd(r[u-1])),r=Ml(r,Ja([n])),r[o]},bd=(e,n)=>{let o=e,r=0;for(;pd(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!pd(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return pd(e)&&n>e.data.length&&(n=e.data.length),qe(e,n)},nl=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=ll(r,(f,b)=>{const v=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return v?(v[1]==="text()"&&(v[1]="#text"),Zc(f,v[1],parseInt(v[2],10))):null},e);if(!u)return null;if(!pd(u)&&u.parentNode){let f;return c==="after"?f=P1(u)+1:f=P1(u),qe(u.parentNode,f)}return bd(u,parseInt(c,10))},Xb=mr,ap=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&St(c);c=c.previousSibling)r+=e(c.data).length;return r},QS=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],v=e.getRoot();if(St(u))b.push(o?ap(n,u,f):f);else{let S=0;const _=u.childNodes;f>=_.length&&_.length&&(S=1,f=Math.max(0,_.length-1)),b.push(e.nodeIndex(_[f],o)+S)}for(let S=u;S&&S!==v;S=S.parentNode)b.push(e.nodeIndex(S,o));return b},Bk=(e,n,o,r)=>{const c=n.dom,u=QS(c,e,o,r,!0),f=n.isForward(),b=np(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const v=QS(c,e,o,r,!1);return{start:u,end:v,forward:f,...b}}},w2=(e,n,o)=>{let r=0;return kt.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},ex=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(bn(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},zo=e=>(ex(e,!0),ex(e,!1),e),Bn=(e,n)=>{if(bn(e)&&(e=Wm(e,n),Xb(e)))return e;if(Uc(e)){St(e)&&Um(e)&&(e=e.parentNode);let o=e.previousSibling;if(Xb(o)||(o=e.nextSibling,Xb(o)))return o}},$1=e=>Bn(e.startContainer,e.startOffset)||Bn(e.endContainer,e.endOffset),Jb=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||Xb(r)){const f=r.nodeName;return{name:f,index:w2(o.dom,f,r)}}const u=$1(c);if(u){const f=u.tagName;return{name:f,index:w2(o.dom,f,u)}}return Bk(e,o,n,c)},S2=e=>{const n=e.getRng();return{start:JS(e.dom.getRoot(),qe.fromRangeStart(n)),end:JS(e.dom.getRoot(),qe.fromRangeEnd(n)),forward:e.isForward()}},Mk=e=>({rng:e.getRng(),forward:e.isForward()}),x2=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},hr=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,v=e.isForward();if(b==="IMG")return{name:b,index:w2(o,b,f)};const S=zo(r.cloneRange());if(!u){S.collapse(!1);const R=x2(o,c+"_end",n);Kb(o,S,R)}r=zo(r),r.collapse(!0);const _=x2(o,c+"_start",n);return Kb(o,r,_),e.moveToBookmark({id:c,keep:!0,forward:v}),{id:c,forward:v}},Qb=(e,n,o=!1)=>n===2?Jb(Bi,o,e):n===3?S2(e):n?Mk(e):hr(e,!1),I1=Ce(Jb,Mo,!0),Vg=e=>e===1,Ye=e=>e===-1,ev=e=>e.type==="inline-command"||e.type==="inline-format",tx=e=>e.type==="block-command"||e.type==="block-format",tv=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,nx=e=>{var n;const o=c=>ge.error({message:c,pattern:e}),r=(c,u,f)=>{if(e.format!==void 0){let b;if(Ze(e.format)){if(!ns(e.format,ae))return o(c+" pattern has non-string items in the `format` array");b=e.format}else if(ae(e.format))b=[e.format];else return o(c+" pattern has non-string `format` parameter");return ge.value(u(b))}else return e.cmd!==void 0?ae(e.cmd)?ge.value(f(e.cmd,e.value)):o(c+" pattern has non-string `cmd` parameter"):o(c+" pattern is missing both `format` and `cmd` parameters")};if(!Jt(e))return o("Raw pattern is not an object");if(!ae(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ae(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let c=e.start,u=e.end;return u.length===0&&(u=c,c=""),r("Inline",f=>({type:"inline-format",start:c,end:u,format:f}),(f,b)=>({type:"inline-command",start:c,end:u,cmd:f,value:b}))}else{if(e.replacement!==void 0)return ae(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):ge.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const c=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:c}),(u,f)=>({type:"block-command",start:e.start,cmd:u,value:f,trigger:c}))}}},Zm=e=>ye(e,tx),Ug=e=>ye(e,ev),Wg=(e,n)=>({inlinePatterns:Ug(e),blockPatterns:Zm(e),dynamicPatternsLookup:n}),E2=(e,n)=>({...e,blockPatterns:ye(e.blockPatterns,o=>tv(o,n))}),Zg=e=>{const n=Er(de(e,nx));return ne(n.errors,o=>console.error(o.message,o.pattern)),n.values},or=e=>n=>{const o=e(n);return Zg(o)},vd=(e,n)=>e.dispatch("PreProcess",n),ox=(e,n)=>e.dispatch("PostProcess",n),jm=e=>{e.dispatch("remove")},Lu=e=>{e.dispatch("detach")},Fk=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},Nk=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},T2=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},Pk=e=>{e.dispatch("PreInit")},$k=e=>{e.dispatch("PostRender")},Ik=e=>{e.dispatch("Init")},Lk=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},A2=(e,n,o)=>{e.dispatch(n,o)},Dt=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},sx=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},ec=(e,n)=>e.dispatch("BeforeSetContent",n),rx=(e,n)=>e.dispatch("SetContent",n),ax=(e,n)=>e.dispatch("BeforeGetContent",n),cx=(e,n)=>e.dispatch("GetContent",n),Hk=(e,n)=>{e.dispatch("AutocompleterStart",n)},ao=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},k2=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},ix=e=>{e.dispatch("AutocompleterEnd")},E5=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),zk=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),lx=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),T5=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),Vk=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),ux=e=>e.dispatch("CloseActiveTooltips"),_2=Ro().deviceType,co=_2.isTouch(),D2=Ls.DOM,qm=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Ne(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[cr(u)]=cr(f),o},{})},Tl=e=>_t(e,RegExp),en=e=>n=>n.options.get(e),jc=e=>ae(e)||Jt(e),L1=(e,n="")=>o=>{const r=ae(o);if(r)if(o.indexOf("=")!==-1){const c=qm(o);return{value:xs(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},H1=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("crossorigin",{processor:"function",default:it(void 0)}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.editorManager.documentBaseURL}),n("body_id",{processor:L1(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:L1(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ae(o)&&Js(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=j(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Rt(o)?{valid:!0,value:o}:ae(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ae(o)||Je(o,ae);return r?ae(o)?{value:de(o.split(","),cr),valid:r}:Ze(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:rv(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ae(o)||Je(o,ae);return r?{value:Ze(o)?o:de(o.split(","),cr),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("extended_mathml_attributes",{processor:"string[]"}),n("extended_mathml_elements",{processor:"string[]"}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Rt(o)||ae(o);return r?o===!1||_2.isiPhone()||_2.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!co}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("onboarding",{processor:"boolean",default:!0}),n("tiny_cloud_entry_url",{processor:"string"}),n("theme",{processor:o=>o===!1||ae(o)||fe(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ae(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:o=>Rt(o)?(e.initialized&&t0(e)!==o&&Promise.resolve().then(()=>{Vk(e,o)}),{valid:!0,value:o}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_html_in_comments",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=Je(o,ae);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:jc}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:jc}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:jc}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:jc}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ae(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Je(o,Jt)||o===!1?{value:Zg(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>fe(o)?{value:or(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Je(o,Tl)?{value:o,valid:!0}:Tl(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=j(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=j(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),n("user_id",{processor:"string",default:"Anonymous"}),n("fetch_users",{processor:o=>o===void 0?{valid:!0,value:void 0}:fe(o)?{valid:!0,value:o}:{valid:!1,message:"fetch_users must be a function that returns a Promise<ExpectedUser[]>"}}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Pu.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:D2.getAttrib(e.getElement(),"placeholder")})}),n("lists_indent_on_tab",{processor:"boolean",default:!0}),n("list_max_depth",{processor:o=>{const r=cs(o);if(r){if(o<0)throw new Error("list_max_depth cannot be set to lower than 0");return{value:o,valid:r}}else return{valid:!1,message:"Must be a number"}}})},nv=en("iframe_attrs"),cp=en("doctype"),z1=en("document_base_url"),Gm=en("body_id"),_c=en("body_class"),sm=en("content_security_policy"),Uk=en("br_in_pre"),pc=en("forced_root_block"),ip=en("forced_root_block_attrs"),Wk=en("newline_behavior"),as=en("br_newline_selector"),yd=en("no_newline_selector"),jg=en("keep_styles"),A5=en("end_container_on_empty_block"),qg=en("automatic_uploads"),us=en("images_reuse_filename"),k5=en("images_replace_blob_uris"),dx=en("icons"),_5=en("icons_url"),D5=en("images_upload_url"),V1=en("images_upload_base_path"),Zk=en("images_upload_credentials"),O5=en("images_upload_handler"),ov=en("content_css_cors"),O2=en("referrer_policy"),U1=en("crossorigin"),mx=en("language"),jk=en("language_url"),W1=en("indent_use_margin"),R2=en("indentation"),B2=en("content_css"),fx=en("content_style"),gx=en("font_css"),hx=en("directionality"),M2=en("inline_boundaries_selector"),F2=en("object_resizing"),ws=en("resize_img_proportional"),px=en("placeholder"),sv=en("event_root"),N2=en("service_message"),Gl=en("theme"),bx=en("theme_url"),P2=en("model"),qk=en("model_url"),rm=en("inline_boundaries"),Gk=en("formats"),Z1=en("preview_styles"),j1=en("format_empty_lines"),Kk=en("format_noneditable_selector"),zf=en("custom_ui_selector"),rv=en("inline"),vx=en("hidden_input"),Yk=en("submit_patch"),yx=en("add_form_submit_trigger"),R5=en("add_unload_trigger"),Cx=en("custom_undo_redo_levels"),wx=en("disable_nodechange"),q1=en("readonly"),G1=en("editable_root"),K1=en("content_css_cors"),Gg=en("plugins"),av=en("external_plugins"),Y1=en("block_unsupported_drop"),Km=en("visual"),X1=en("visual_table_class"),$2=en("visual_anchor_class"),cv=en("iframe_aria_text"),Sx=en("setup"),xx=en("init_instance_callback"),Ex=en("urlconverter_callback"),Xk=en("auto_focus"),iv=en("browser_spellcheck"),lp=en("protect"),Kg=en("paste_block_drop"),Yg=en("paste_data_images"),Tx=en("paste_preprocess"),Ax=en("paste_postprocess"),kx=en("newdocument_content"),lv=en("paste_webkit_styles"),_x=en("paste_remove_styles_if_webkit"),Jk=en("paste_merge_formats"),Dx=en("smart_paste"),uv=en("paste_as_text"),I2=en("paste_tab_spaces"),dv=en("allow_html_data_urls"),L2=en("text_patterns"),Qk=en("text_patterns_lookup"),H2=en("noneditable_class"),Ox=en("editable_class"),Rx=en("noneditable_regexp"),J1=en("preserve_cdata"),e4=en("highlight_on_focus"),z2=en("xss_sanitization"),V2=en("init_content_sync"),t4=e=>e.options.isSet("text_patterns_lookup"),n4=e=>kt.explode(e.options.get("font_size_style_values")),Xg=e=>kt.explode(e.options.get("font_size_classes")),Bx=e=>e.options.get("encoding")==="xml",Mx=e=>kt.explode(e.options.get("images_file_types")),o4=en("table_tab_navigation"),s4=en("details_initial_state"),r4=en("details_serialized_state"),mv=en("sandbox_iframes"),Q1=e=>e.options.get("sandbox_iframes_exclusions"),U2=en("convert_unsafe_embeds"),e0=en("license_key"),Fx=en("api_key"),t0=en("disabled"),a4=en("user_id"),fv=en("fetch_users"),c4=en("lists_indent_on_tab"),Nx=e=>F.from(e.options.get("list_max_depth")),B5=bn,i4=St,Jg=e=>{const n=e.parentNode;n&&n.removeChild(e)},gv=e=>{const n=Bi(e);return{count:e.length-n.length,text:n}},hv=e=>{let n;for(;(n=e.data.lastIndexOf(ya))!==-1;)e.deleteData(n,1)},Px=(e,n)=>(am(e),n),l4=(e,n)=>{const o=gv(e.data.substr(0,n.offset())),r=gv(e.data.substr(n.offset()));return(o.text+r.text).length>0?(hv(e),qe(e,n.offset()-o.count)):n},pv=(e,n)=>{const o=n.container(),r=ht(Eo(o.childNodes),e).map(c=>c<n.offset()?qe(o,n.offset()-1):n).getOr(n);return am(e),r},$x=(e,n)=>i4(e)&&n.container()===e?l4(e,n):Px(e,n),Ix=(e,n)=>n.container()===e.parentNode?pv(e,n):Px(e,n),bv=(e,n)=>qe.isTextPosition(n)?$x(e,n):Ix(e,n),am=e=>{B5(e)&&Uc(e)&&(_1(e)?e.removeAttribute("data-mce-caret"):Jg(e)),i4(e)&&(hv(e),e.data.length===0&&Jg(e))},Lx=mr,u4=Du,d4=Gd,m4="*[contentEditable=false],video,audio,embed,object",up=(e,n,o)=>{const r=Hb(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},Hx=e=>{var n,o;const r=Ge(oe.fromDom(e),m4);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if($f(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,tm(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},W2=(e,n,o,r)=>{const c=is();let u,f;const b=pc(e),v=e.dom,S=(Y,G)=>{let xe;if(_(),d4(G))return null;if(o(G)){const Ee=zS(b,G,Y),Re=up(n,G,Y);v.setStyle(Ee,"top",Re.top),v.setStyle(Ee,"caret-color","transparent"),f=Ee;const Ie=v.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});v.setStyles(Ie,{...Re}),v.add(n,Ie),c.set({caret:Ie,element:G,before:Y}),Y&&v.addClass(Ie,"mce-visual-caret-before"),R(),xe=G.ownerDocument.createRange(),xe.setStart(Ee,0),xe.setEnd(Ee,0)}else return f=Ib(G,Y),xe=G.ownerDocument.createRange(),Cd(f.nextSibling)?(xe.setStart(f,0),xe.setEnd(f,0)):(xe.setStart(f,1),xe.setEnd(f,1)),xe;return xe},_=()=>{Hx(n),f&&(am(f),f=null),c.on(Y=>{v.remove(Y.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},R=()=>{u=window.setInterval(()=>{c.on(Y=>{r()?v.toggleClass(Y.caret,"mce-visual-caret-hidden"):v.addClass(Y.caret,"mce-visual-caret-hidden")})},500)},M=()=>{c.on(Y=>{const G=up(n,Y.element,Y.before);v.setStyles(Y.caret,{...G})})},$=()=>clearInterval(u),J=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:c.isSet,show:S,hide:_,getCss:J,reposition:M,destroy:$}},vv=()=>Ho.browser.isFirefox(),Cd=e=>Lx(e)||u4(e),n0=e=>(Cd(e)||qd(e)&&vv())&&_i(oe.fromDom(e)).exists(vl),cm=mi,Z2=mr,zx=Du,Vx=jh("display","block table table-cell table-row table-caption list-item"),f4=Uc,Ux=Um,g4=bn,h4=St,p4=gr,dp=(e,n)=>{let o;for(;o=e(n);)if(!Ux(o))return o;return null},o0=(e,n,o,r,c)=>{const u=new Qs(e,r),f=Z2(e)||Ux(e);let b;if(Ye(n)){if(f&&(b=dp(u.prev.bind(u),!0),o(b)))return b;for(;b=dp(u.prev.bind(u),c);)if(o(b))return b}if(Vg(n)){if(f&&(b=dp(u.next.bind(u),!0),o(b)))return b;for(;b=dp(u.next.bind(u),c);)if(o(b))return b}return null},Wx=(e,n)=>{const o=c=>cm(c.dom),r=c=>c.dom===n;return Au(oe.fromDom(e),o,r).map(c=>c.dom).getOr(n)},im=(e,n)=>{for(;e&&e!==n;){if(Vx(e))return e;e=e.parentNode}return null},lm=(e,n,o)=>im(e.container(),o)===im(n.container(),o),j2=(e,n)=>{if(!n)return F.none();const o=n.container(),r=n.offset();return g4(o)?F.from(o.childNodes[r+e]):F.none()},yv=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},Zx=(e,n,o)=>im(n,e)===im(o,e),En=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&f4(u)&&(u=u[r]),Z2(u)||zx(u)){if(Zx(n,u,c))return u;break}if(p4(u))break;c=c.parentNode}return null},Vf=Ce(yv,!0),mp=Ce(yv,!1),q2=(e,n,o)=>{let r;const c=Ce(En,!0,n),u=Ce(En,!1,n),f=o.startContainer,b=o.startOffset;if(Um(f)){const v=h4(f)?f.parentNode:f,S=v.getAttribute("data-mce-caret");if(S==="before"&&(r=v.nextSibling,n0(r)))return Vf(r);if(S==="after"&&(r=v.previousSibling,n0(r)))return mp(r)}if(!o.collapsed)return o;if(St(f)){if(f4(f)){if(e===1){if(r=u(f),r)return Vf(r);if(r=c(f),r)return mp(r)}if(e===-1){if(r=c(f),r)return mp(r);if(r=u(f),r)return Vf(r)}return o}if($f(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?Vf(r):o;if(tm(f)&&b<=1)return e===-1&&(r=c(f),r)?mp(r):o;if(b===f.data.length)return r=u(f),r?Vf(r):o;if(b===0)return r=c(f),r?mp(r):o}return o},Cv=(e,n)=>j2(e?0:-1,n).filter(Z2),Ym=(e,n,o)=>{const r=q2(e,n,o);return e===-1?qe.fromRangeStart(r):qe.fromRangeEnd(r)},fp=e=>F.from(e.getNode()).map(oe.fromDom),s0=e=>F.from(e.getNode(!0)).map(oe.fromDom),Uf=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},gp=(e,n)=>{const o=lm(e,n);return!o&&xr(e.getNode())?!0:o},G2=mr,wd=St,K2=bn,wv=xr,Sd=gr,um=Vb,Wf=Ub,Qg=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},dm=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Y2=(e,n)=>{if(Vg(e)){if(Sd(n.previousSibling)&&!wd(n.previousSibling))return qe.before(n);if(wd(n))return qe(n,0)}if(Ye(e)){if(Sd(n.nextSibling)&&!wd(n.nextSibling))return qe.after(n);if(wd(n))return qe(n,n.data.length)}return Ye(e)?wv(n)?qe.before(n):qe.after(n):qe.before(n)},r0=(e,n)=>{const o=n.nextSibling;return o&&Sd(o)?wd(o)?qe(o,0):qe.before(o):xd(1,qe.after(n),e)},xd=(e,n,o)=>{let r,c,u,f;if(!K2(o)||!n)return null;if(n.isEqual(qe.after(o))&&o.lastChild){if(f=qe.after(o.lastChild),Ye(e)&&Sd(o.lastChild)&&K2(o.lastChild))return wv(o.lastChild)?qe.before(o.lastChild):f}else f=n;const b=f.container();let v=f.offset();if(wd(b)){if(Ye(e)&&v>0)return qe(b,--v);if(Vg(e)&&v<b.length)return qe(b,++v);r=b}else{if(Ye(e)&&v>0&&(c=dm(b,v-1),Sd(c)))return!um(c)&&(u=o0(c,e,Wf,c),u)?wd(u)?qe(u,u.data.length):qe.after(u):wd(c)?qe(c,c.data.length):qe.before(c);if(Vg(e)&&v<b.childNodes.length&&(c=dm(b,v),Sd(c)))return wv(c)?r0(o,c):!um(c)&&(u=o0(c,e,Wf,c),u)?wd(u)?qe(u,0):qe.before(u):wd(c)?qe(c,0):qe.after(c);r=c||f.getNode()}if(r&&(Vg(e)&&f.isAtEnd()||Ye(e)&&f.isAtStart())&&(r=o0(r,e,ot,o,!0),Wf(r,o)))return Y2(e,r);c=r&&o0(r,e,Wf,o);const S=H(ye(Qg(b,o),G2));return S&&(!c||!S.contains(c))?(Vg(e)?f=qe.after(S):f=qe.before(S),f):c?Y2(e,c):null},Ed=e=>({next:n=>xd(1,n,e),prev:n=>xd(-1,n,e)}),jx=(e,n,o)=>{const r=e?qe.before(o):qe.after(o);return qc(e,n,r)},X2=e=>xr(e)?qe.before(e):qe.after(e),J2=e=>qe.isTextPosition(e)?e.offset()===0:gr(e.getNode()),Q2=e=>{if(qe.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return gr(e.getNode(!0))},qx=(e,n)=>!qe.isTextPosition(e)&&!qe.isTextPosition(n)&&e.getNode()===n.getNode(!0),M5=e=>!qe.isTextPosition(e)&&xr(e.getNode()),b4=(e,n,o)=>e?!qx(n,o)&&!M5(n)&&Q2(n)&&J2(o):!qx(o,n)&&J2(n)&&Q2(o),qc=(e,n,o)=>{const r=Ed(n);return F.from(e?r.next(o):r.prev(o))},eh=(e,n,o)=>qc(e,n,o).bind(r=>lm(o,r,n)&&b4(e,o,r)?qc(e,n,r):F.some(r)),eC=(e,n,o,r)=>eh(e,n,o).bind(c=>r(c)?eC(e,n,c,r):F.some(c)),Zf=(e,n)=>{const o=e?n.firstChild:n.lastChild;return St(o)?F.some(qe(o,e?0:o.data.length)):o?gr(o)?F.some(e?qe.before(o):X2(o)):jx(e,n,o):F.none()},Gc=Ce(qc,!0),yi=Ce(qc,!1),Kc=Ce(Zf,!0),Hu=Ce(Zf,!1),Xm="_mce_caret",Ni=e=>bn(e)&&e.id===Xm,mm=(e,n)=>{let o=n;for(;o&&o!==e;){if(Ni(o))return o;o=o.parentNode}return null},Gx=e=>ae(e.start),F5=e=>no(e,"rng"),Kx=e=>no(e,"id"),io=e=>no(e,"name"),Sv=e=>kt.isArray(e.start),Kl=e=>!io(e)&&Rt(e.forward)?e.forward:!0,Yx=(e,n)=>(bn(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),v4=(e,n)=>{const o=F.from(nl(e.getRoot(),n.start)),r=F.from(nl(e.getRoot(),n.end));return Xt(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Kl(n)}})},y4=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ya);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},C4=e=>!e.hasChildNodes(),Xx=(e,n)=>Hu(e).fold(Oe,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),tC=(e,n,o)=>C4(n)&&mm(e,n)?(y4(n,o),!0):!1,a0=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let v=c.length-1;f&&v>=1;v--){const S=f.childNodes;if(tC(u,f,r))return!0;if(c[v]>S.length-1)return tC(u,f,r)?!0:Xx(f,r);f=S[c[v]]}St(f)&&(b=Math.min(c[0],f.data.length)),bn(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},Yl=e=>St(e)&&e.data.length>0,th=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r?.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):Yl(r.nextSibling)?(f=r.nextSibling,b=0):Yl(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):Yl(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const v=r.previousSibling,S=r.nextSibling;kt.each(kt.grep(r.childNodes),R=>{St(R)&&(R.data=R.data.replace(/\uFEFF/g,""))});let _;for(;_=e.get(o.id+"_"+n);)e.remove(_,!0);if(St(S)&&St(v)&&!Ho.browser.isOpera()){const R=v.data.length;v.appendData(S.data),e.remove(S),f=v,b=R}}return F.some(qe(f,b))}else return F.none()},w4=(e,n)=>{const o=e.createRng();return a0(e,!0,n,o)&&a0(e,!1,n,o)?F.some({range:o,forward:Kl(n)}):F.none()},xv=(e,n)=>{const o=th(e,"start",n),r=th(e,"end",n);return Xt(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(Yx(e,c.container()),c.offset()),f.setEnd(Yx(e,u.container()),u.offset()),{range:f,forward:Kl(n)}})},S4=(e,n)=>F.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),Ev=(e,n)=>{const o=e.dom;if(n){if(Sv(n))return w4(o,n);if(Gx(n))return v4(o,n);if(Kx(n))return xv(o,n);if(io(n))return S4(o,n);if(F5(n))return F.some({range:n.rng,forward:Kl(n)})}return F.none()},tc=(e,n,o)=>Qb(e,n,o),x4=(e,n)=>{Ev(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},ol=e=>bn(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Tv=(e=>n=>e===n)(ir),nh=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,nC=e=>!nh(e)&&!Tv(e)&&!Ga(e),oC=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},sC=e=>_n(e,n=>{const o=Lf(n);return o?[oe.fromDom(o)]:[]}),E4=e=>oC(e).length>1,Av=e=>ye(sC(e),el),Jx=e=>Ge(e,"td[data-mce-selected],th[data-mce-selected]"),kv=(e,n)=>{const o=Jx(n);return o.length>0?o:Av(e)},jf=e=>kv(oC(e.selection.getSel()),oe.fromDom(e.getBody())),hp=(e,n)=>Wr(e,"table",n),rC=e=>{const n=e.startContainer,o=e.startOffset;return St(n)?o===0?F.some(oe.fromDom(n)):F.none():F.from(n.childNodes[o]).map(oe.fromDom)},Qx=e=>{const n=e.endContainer,o=e.endOffset;return St(n)?o===n.data.length?F.some(oe.fromDom(n)):F.none():F.from(n.childNodes[o-1]).map(oe.fromDom)},Jm=e=>Aa(e).fold(it([e]),n=>[e].concat(Jm(n))),_v=e=>Vr(e).fold(it([e]),n=>Bo(n)==="br"?Zi(n).map(o=>[e].concat(_v(o))).getOr([]):[e].concat(_v(n))),aC=(e,n)=>Xt(rC(n),Qx(n),(o,r)=>{const c=Gt(Jm(e),Ce(Qo,o)),u=Gt(_v(e),Ce(Qo,r));return c.isSome()&&u.isSome()}).getOr(!1),Dv=(e,n,o,r)=>{const c=o,u=new Qs(o,c),f=Mc(e.schema.getMoveCaretBeforeOnEnterElements(),(v,S)=>!j(["td","th","table"],S.toLowerCase()));let b=o;do{if(St(b)&&kt.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},c0=e=>{const n=e.selection.getSel();return _e(n)&&n.rangeCount>0},cC=(e,n)=>{const o=jf(e);o.length>0?ne(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},i0=(e,n,o)=>{const r=hr(e,n);o(r),e.moveToBookmark(r)},iC=(e,n)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset===1&&n(e.startContainer.childNodes[e.startOffset]),T4=e=>iC(e,dr),A4=e=>iC(e,St),lC=e=>iC(e,_u),l0=e=>cs(e?.nodeType),uC=e=>bn(e)&&!ol(e)&&!Ni(e)&&!wg(e),eE=(e,n)=>{if(uC(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},Ov=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=mr(u);i0(r,!0,()=>{n()}),f&&mr(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&k4(c,r)},k4=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!eE(e,b)&&bn(u)){const v=u.childNodes,S=e.getRoot();let _;if(f<v.length){const R=v[f];_=new Qs(R,(o=e.getParent(R,e.isBlock))!==null&&o!==void 0?o:S)}else{const R=v[v.length-1];_=new Qs(R,(r=e.getParent(R,e.isBlock))!==null&&r!==void 0?r:S),_.next(!0)}for(let R=_.current();R;R=_.next()){if(e.getContentEditable(R)==="false")return;if(St(R)&&!mC(R)){c.setStart(R,0),n.setRng(c);return}}}},tE=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(bn(e)||!mC(e))return e}},dC=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||ft(e,n),pp=(e,n,o)=>e.schema.isValidChild(n,o),mC=(e,n=!1)=>{if(_e(e)&&St(e)){const o=n?e.data.replace(/ /g," "):e.data;return Fm(o)}else return!1},pr=e=>_e(e)&&St(e)&&e.length===0,nE=(e,n)=>{const o="[data-mce-cef-wrappable]",r=Kk(e),c=Ti(r)?o:`${o},${r}`;return ki(oe.fromDom(n),c)},oE=(e,n)=>{const o=e.dom;return uC(n)&&o.getContentEditable(n)==="false"&&nE(e,n)&&o.select('[contenteditable="true"]',n).length===0},l=(e,n)=>fe(e)?e(n):(_e(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),m=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),p=(e,n)=>{if(gn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=Mg(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},y=(e,n,o)=>{const r=e.getStyle(n,o);return p(r,o)},T=(e,n)=>{let o;return e.getParent(n,r=>bn(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},O=(e,n,o)=>e.getParents(n,o,e.getRoot()),P=(e,n,o)=>{const r=e.formatter.get(n);return _e(r)&&ce(r,o)},z=(e,n)=>P(e,n,r=>{const c=u=>fe(u)||u.length>1&&u.charAt(0)==="%";return ce(["styles","attributes"],u=>xs(r,u).exists(f=>{const b=Ze(f)?f:zr(f);return ce(b,c)}))}),ee=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>Mc(u,(f,b)=>ce(r,v=>v===b));return P(e,n,u=>{const f=c(u);return P(e,o,b=>{const v=c(b);return Za(f,v)})})},he=e=>rs(e,"block"),Me=e=>he(e)&&e.wrapper===!0,pt=e=>he(e)&&e.wrapper!==!0,Vt=e=>rs(e,"selector"),Ot=e=>rs(e,"inline"),An=e=>Vt(e)&&Ot(e)&&yt(xs(e,"mixed"),!0),Qe=e=>Vt(e)&&e.expand!==!1&&!Ot(e),bt=e=>{const n=[];let o=e;for(;o;){if(St(o)&&o.data!==ya||o.childNodes.length>1)return[];bn(o)&&n.push(o),o=o.firstChild}return n},Vn=e=>bt(e).length>0,bo=e=>Ni(e.dom)&&Vn(e.dom),on=ol,Ns=O,Ps=mC,xo=dC,ca=e=>xr(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Al=(e,n)=>{let o=n;for(;o;){if(bn(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},fm=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},qf=(e,n,o)=>fm(e,n,o,r=>Tv(r)||nh(r)),oh=(e,n,o)=>fm(e,n,o,nC),Vs=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,R=>fb(R)||e.isBlock(R)),v=_e(b)?b:n,S=(R,M,$)=>{const J=gd(e),Y=c?J.backwards:J.forwards;return F.from(Y(R,M,(G,xe)=>on(G.parentNode)?-1:(f=G,$(c,G,xe)),v))};return S(o,r,qf).bind(R=>u?S(R.container,R.offset+(c?-1:0),oh):F.some(R)).orThunk(()=>f?F.some({container:f,offset:c?0:f.length}):F.none())},Yc=(e,n,o,r,c)=>{const u=r[c];St(r)&&Ti(r.data)&&u&&(r=u);const f=Ns(e,r);for(let b=0;b<f.length;b++)for(let v=0;v<n.length;v++){const S=n[v];if(!(_e(S.collapsed)&&S.collapsed!==o.collapsed)&&Vt(S)&&e.is(f[b],S.selector))return f[b]}return r},Xc=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(he(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const v=(c=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&c!==void 0?c:f;u=e.getParent(St(o)?o.parentNode:o,S=>S!==f&&xo(e.schema,S),v)}if(u&&he(b)&&b.wrapper&&(u=Ns(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!m(u,"br")););return u||o},Xl=(e,n,o,r)=>{const c=o.parentNode;return _e(o[r])?!1:c===n||gn(c)||e.isBlock(c)?!0:Xl(e,n,c,r)},Jc=(e,n,o,r,c,u)=>{let f=o;const b=c?"previousSibling":"nextSibling",v=e.getRoot();if(St(o)&&!Ps(o)&&(c?r>0:r<o.data.length))return o;for(;f;){if(fb(f))return o;if(!n[0].block_expand&&e.isBlock(f))return u?f:o;for(let S=f[b];S;S=S[b]){const _=St(S)&&!Xl(e,v,S,b);if(!on(S)&&!ca(S)&&!Ps(S,_))return f}if(f===v||f.parentNode===v){o=f;break}f=f.parentNode}return o},Qm=e=>on(e.parentNode)||on(e),wa=(e,n,o,r={})=>{const{includeTrailingSpace:c=!1,expandToBlock:u=!0}=r,f=e.getParent(n.commonAncestorContainer,$=>fb($)),b=_e(f)?f:e.getRoot();let{startContainer:v,startOffset:S,endContainer:_,endOffset:R}=n;const M=o[0];return bn(v)&&v.hasChildNodes()&&(v=Wm(v,S),St(v)&&(S=0)),bn(_)&&_.hasChildNodes()&&(_=Wm(_,n.collapsed?R:R-1),St(_)&&(R=_.data.length)),v=Al(e,v),_=Al(e,_),Qm(v)&&(v=on(v)?v:v.parentNode,n.collapsed?v=v.previousSibling||v:v=v.nextSibling||v,St(v)&&(S=n.collapsed?v.length:0)),Qm(_)&&(_=on(_)?_:_.parentNode,n.collapsed?_=_.nextSibling||_:_=_.previousSibling||_,St(_)&&(R=n.collapsed?0:_.length)),n.collapsed&&(Vs(e,b,v,S,!0,c).each(({container:Y,offset:G})=>{v=Y,S=G}),Vs(e,b,_,R,!1,c).each(({container:Y,offset:G})=>{_=Y,R=G})),(Ot(M)||M.block_expand)&&((!Ot(M)||!St(v)||S===0)&&(v=Jc(e,o,v,S,!0,u)),(!Ot(M)||!St(_)||R===_.data.length)&&(_=Jc(e,o,_,R,!1,u))),Qe(M)&&(v=Yc(e,o,n,v,"previousSibling"),_=Yc(e,o,n,_,"nextSibling")),(he(M)||Vt(M))&&(v=Xc(e,o,v,"previousSibling"),_=Xc(e,o,_,"nextSibling"),he(M)&&(e.isBlock(v)||(v=Jc(e,o,v,S,!0,u),St(v)&&(S=0)),e.isBlock(_)||(_=Jc(e,o,_,R,!1,u),St(_)&&(R=_.data.length)))),bn(v)&&v.parentNode&&(S=e.nodeIndex(v),v=v.parentNode),bn(_)&&_.parentNode&&(R=e.nodeIndex(_)+1,_=_.parentNode),{startContainer:v,startOffset:S,endContainer:_,endOffset:R}},bp=(e,n,o)=>{var r;const c=n.startOffset,u=Wm(n.startContainer,c),f=n.endOffset,b=Wm(n.endContainer,f-1),v=G=>{const xe=G[0];St(xe)&&xe===u&&c>=xe.data.length&&G.splice(0,1);const Ee=G[G.length-1];return f===0&&G.length>0&&Ee===b&&St(Ee)&&G.splice(G.length-1,1),G},S=(G,xe,Ee)=>{const Re=[];for(;G&&G!==Ee;G=G[xe])Re.push(G);return Re},_=(G,xe)=>e.getParent(G,Ee=>Ee.parentNode===xe,xe),R=(G,xe,Ee)=>{const Re=Ee?"nextSibling":"previousSibling";for(let Ie=G,lt=Ie.parentNode;Ie&&Ie!==xe;Ie=lt){lt=Ie.parentNode;const Pt=S(Ie===G?Ie:Ie[Re],Re);Pt.length&&(Ee||Pt.reverse(),o(v(Pt)))}};if(u===b)return o(v([u]));const M=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return R(u,M,!0);if(e.isChildOf(b,u))return R(b,M);const $=_(u,M)||u,J=_(b,M)||b;R(u,$,!0);const Y=S($===u?$:$.nextSibling,"nextSibling",J===b?J.nextSibling:J);Y.length&&o(v(Y)),R(b,J)},u0=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],ef=e=>Es(e)&&uc(e)===ya,Qc=(e,n,o,r)=>_i(n).fold(()=>"skipping",c=>r==="br"||ef(n)?"valid":x5(n)?"existing":Ni(n.dom)?"caret":ce(u0,u=>ki(n,u))?"valid-block":!pp(e,o,r)||!pp(e,Bo(c),o)?"invalid-child":"valid"),_4=(e,n)=>{const o=wa(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},sE=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;ui(e,$u()),Cr(e,`${fd()}`,f),Cr(e,`${md()}`,r);const{attributes:v={},classes:S=[]}=c(f,b);if(Ya(e,v),vg(e,S),u){S.length>0&&Cr(e,`${Xd()}`,S.join(","));const _=sn(v);_.length>0&&Cr(e,`${Vm()}`,_.join(","))}},yn=e=>{Zr(e,$u()),Qr(e,`${fd()}`),Qr(e,`${md()}`),Qr(e,`${Ff()}`);const n=Ki(e,`${Vm()}`).map(r=>r.split(",")).getOr([]),o=Ki(e,`${Xd()}`).map(r=>r.split(",")).getOr([]);ne(n,r=>Qr(e,r)),Ph(e,o),Qr(e,`${Xd()}`),Qr(e,`${Vm()}`)},Jl=(e,n,o,r,c)=>{const u=oe.fromTag("span",e);return sE(u,n,o,r,c,!1),u},D4=(e,n,o,r,c,u)=>{const f=[],b=Jl(e.getDoc(),o,u,r,c),v=is(),S=()=>{v.clear()},_=()=>v.get().getOrThunk(()=>{const J=ta(b);return f.push(J),v.set(J),J}),R=J=>{ne(J,M)},M=J=>{switch(Qc(e,J,"span",Bo(J))){case"invalid-child":{S();const G=wr(J);R(G),S();break}case"valid-block":{S(),sE(J,o,u,r,c,!0);break}case"valid":{const G=_();Di(J,G);break}}},$=J=>{const Y=de(J,oe.fromDom);R(Y)};return bp(e.dom,n,J=>{S(),$(J)}),f},Rv=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=jf(e).length>0,b=Ko("mce-annotation");if(u.collapsed&&!f&&_4(e,u),c.getRng().collapsed&&!f){const v=Jl(e.getDoc(),b,r,n,o.decorate);sd(v,ir),c.getRng().insertNode(v.dom),c.select(v.dom)}else i0(c,!1,()=>{cC(e,v=>{D4(e,v,b,n,o.decorate,r)})})})},rE=e=>{const n=Nf();Rb(e,n);const o=PS(e,n),r=Jr("span"),c=u=>{ne(u,f=>{r(f)?ii(f):yn(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{Rv(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{a2(e,F.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();To(Ob(e,u),(b,v)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=Ob(e,u);return ac(f,b=>de(b,v=>v.dom))}}},gm=e=>({getBookmark:Ce(tc,e),moveToBookmark:Ce(x4,e)});gm.isBookmarkNode=ol;const P5=(e,n,o)=>o.collapsed?!1:ce(o.getClientRects(),r=>u2(r,e,n)),O4=(e,n)=>{const o=Es(n)?uc(n).length:wr(n).length+1;return e>o?o:e<0?0:e},$5=e=>jd.range(e.start,O4(e.soffset,e.start),e.finish,O4(e.foffset,e.finish)),aE=(e,n)=>!Hy(n.dom)&&(Ic(e,n)||Qo(e,n)),cE=e=>n=>aE(e,n.start)&&aE(e,n.finish),R4=e=>e.inline||Ho.browser.isFirefox(),wI=e=>jd.range(oe.fromDom(e.startContainer),e.startOffset,oe.fromDom(e.endContainer),e.endOffset),SI=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?F.none():F.from(n.getRangeAt(0))).map(wI)},xI=e=>{const n=Il(e);return SI(n.dom).filter(cE(e))},EI=(e,n)=>F.from(n).filter(cE(e)).map($5),B4=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),F.some(n)}catch{return F.none()}},fC=e=>{const n=R4(e)?xI(oe.fromDom(e.getBody())):F.none();e.bookmark=n.isSome()?n:e.bookmark},M4=e=>(e.bookmark?e.bookmark:F.none()).bind(o=>EI(oe.fromDom(e.getBody()),o)).bind(B4),I5=e=>{M4(e).each(n=>e.selection.setRng(n))},iE={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},TI=(e,n)=>(cs(n)||(n=0),window.setTimeout(e,n)),AI=(e,n)=>(cs(n)||(n=0),window.setInterval(e,n)),Td={setEditorTimeout:(e,n,o)=>TI(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=AI(()=>{e.removed?window.clearInterval(r):n()},o);return r}},L5=(e,n)=>e.view(n).fold(it([]),r=>{const c=e.owner(r),u=L5(e,c);return[r].concat(u)}),kI=(e,n)=>{const o=n.owner(e);return L5(n,o)};var z5=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?F.none():F.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(oe.fromDom)},owner:e=>fl(e)});const F4=e=>{const n=a1(),o=d1(n),r=kI(e,z5),c=bg(e),u=Ae(r,(f,b)=>{const v=bg(b);return{left:f.left+v.left,top:f.top+v.top}},{left:0,top:0});return zl(u.left+c.left+o.left,u.top+c.top+o.top)},DI=e=>e.type==="nodechange"&&e.selectionChange,OI=(e,n)=>{const o=()=>{n.throttle()};Ls.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Ls.DOM.unbind(document,"mouseup",o)})},RI=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},lE=(e,n)=>{RI(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{DI(o)||fC(e)})},V5=e=>{const n=Ut(()=>{fC(e)},0);e.on("init",()=>{e.inline&&OI(e,n),lE(e,n)}),e.on("remove",()=>{n.cancel()})};let d0;const N4=Ls.DOM,BI=e=>bn(e)&&iE.isEditorUIElement(e),U5=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},P4=(e,n)=>{const o=zf(e);return N4.getParent(n,c=>BI(c)||(o?e.dom.is(c,o):!1))!==null},W5=e=>{try{const n=ka(oe.fromDom(e.getElement()));return hl(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},MI=(e,n)=>{const o=n.editor;V5(o);const r=(u,f)=>{if(e4(u)&&u.inline!==!0){const b=oe.fromDom(u.getContainer());f(b,"tox-edit-focus")}},c=u=>{if(!u.iframeElement)return;const b=oe.fromDom(u.iframeElement),v=F4(b),S=db(window);(v.top<S.y||v.top>S.bottom-25)&&b.dom.scrollIntoView({block:"center"})};o.on("focusin",()=>{const u=e.focusedEditor;if(U5(W5(o))&&r(o,ui),u!==o){u&&u.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:u}),o.focus(!0);const f=Ro().browser;o.inline!==!0&&(f.isSafari()||f.isChromium())&&c(o)}}),o.on("focusout",()=>{Td.setEditorTimeout(o,()=>{const u=e.focusedEditor;(!U5(W5(o))||u!==o)&&r(o,Zr),!P4(o,W5(o))&&u===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),d0||(d0=u=>{const f=e.activeEditor;f&&s1(u).each(b=>{const v=b;v.ownerDocument===document&&v!==document.body&&!P4(f,v)&&e.focusedEditor===f&&(f.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},N4.bind(document,"focusin",d0))},WK=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&d0&&(N4.unbind(document,"focusin",d0),d0=null)},FI=e=>{e.on("AddEditor",Ce(MI,e)),e.on("RemoveEditor",Ce(WK,e))},NI=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),ZK=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,PI=e=>e.collapsed?F.from(Wm(e.startContainer,e.startOffset)).map(oe.fromDom):F.none(),Ar=(e,n)=>PI(n).bind(o=>vi(o)?F.some(o):Ic(e,o)?F.none():F.some(e)),uE=(e,n)=>{Ar(oe.fromDom(e.getBody()),n).bind(o=>Kc(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},m0=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},dE=e=>wu(e)||c1(e).isSome(),sh=e=>_e(e.iframeElement)&&wu(oe.fromDom(e.iframeElement)),mE=e=>{const n=e.getBody();return n&&dE(oe.fromDom(n))},Bv=e=>{const n=ka(oe.fromDom(e.getElement()));return hl(n).filter(o=>!U5(o.dom)&&P4(e,o.dom)).isSome()},f0=e=>e.inline?mE(e):sh(e),$4=e=>f0(e)||Bv(e),$I=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const c=f=>{M4(f).each(b=>{f.selection.setRng(b),r=b})};!f0(e)&&e.hasEditableRoot()&&c(e);const u=NI(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){ZK(e,u)||m0(o),m0(u),e.hasEditableRoot()||c(e),uE(e,r),fE(e);return}e.inline||(Ho.browser.isOpera()||m0(o),e.getWin().focus()),(Ho.browser.isFirefox()||e.inline)&&(m0(o),uE(e,r)),fE(e)},fE=e=>e.editorManager.setActive(e),II=(e,n)=>{e.removed||(n?fE(e):$I(e))},Yt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Yt.metaKeyPressed(e),metaKeyPressed:e=>Ho.os.isMacOS()||Ho.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Gf="data-mce-selected",vp="table,img,figure.image,hr,video,span.mce-preview-object,details",yp=Math.abs,gC=Math.round,I4={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},LI=e=>e.type==="longpress"||e.type.indexOf("touch")===0,Z5=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,v,S,_,R,M,$,J,Y,G,xe,Ee,Re,Ie;const lt=xn=>_e(xn)&&(Wy(xn)||o.is(xn,"figure.image")),Pt=xn=>Du(xn)||o.hasClass(xn,"mce-preview-object"),Et=(xn,Ft)=>{if(LI(xn)){const Qt=xn.touches[0];return lt(xn.target)&&!P5(Qt.clientX,Qt.clientY,Ft)}else return lt(xn.target)&&!P5(xn.clientX,xn.clientY,Ft)},et=xn=>{const Ft=xn.target;Et(xn,n.selection.getRng())&&!xn.isDefaultPrevented()&&n.selection.select(Ft)},De=xn=>o.hasClass(xn,"mce-preview-object")&&_e(xn.firstElementChild)?[xn,xn.firstElementChild]:o.is(xn,"figure.image")?[xn.querySelector("img")]:[xn],te=xn=>{const Ft=F2(n);return!Ft||n.mode.isReadOnly()||xn.getAttribute("data-mce-resize")==="false"||xn===n.getBody()?!1:o.hasClass(xn,"mce-preview-object")&&_e(xn.firstElementChild)?ki(oe.fromDom(xn.firstElementChild),Ft):ki(oe.fromDom(xn),Ft)},Le=(xn,Ft)=>{if(Pt(Ft))return xn.create("img",{src:Ho.transparentSrc});if(qd(Ft)){const eo=Kn(S.name,"n")?to:es,uo=Ft.cloneNode(!0);return eo(xn.select("tr",uo)).each(Us=>{const ar=xn.select("td,th",Us);xn.setStyle(Us,"height",null),ne(ar,Pd=>xn.setStyle(Pd,"height",null))}),uo}else return Ft.cloneNode(!0)},xt=(xn,Ft,Qt)=>{if(_e(Qt)){const eo=De(xn);ne(eo,uo=>{uo.style[Ft]||!n.schema.isValid(uo.nodeName.toLowerCase(),Ft)?o.setStyle(uo,Ft,Qt):o.setAttrib(uo,Ft,""+Qt)})}},Tn=(xn,Ft,Qt)=>{xt(xn,"width",Ft),xt(xn,"height",Qt)},lo=xn=>{let Ft,Qt,eo,uo,Us;Ft=xn.screenX-R,Qt=xn.screenY-M,xe=Ft*S[2]+$,Ee=Qt*S[3]+J,xe=xe<5?5:xe,Ee=Ee<5?5:Ee,(lt(f)||Pt(f))&&ws(n)!==!1?eo=!Yt.modifierPressed(xn):eo=Yt.modifierPressed(xn),eo&&(yp(Ft)>yp(Qt)?(Ee=gC(xe*Y),xe=gC(Ee/Y)):(xe=gC(Ee/Y),Ee=gC(xe*Y))),Tn(b,xe,Ee),uo=S.startPos.x+Ft,Us=S.startPos.y+Qt,uo=uo>0?uo:0,Us=Us>0?Us:0,o.setStyles(v,{left:uo,top:Us,display:"block"}),v.innerHTML=xe+" &times; "+Ee,Ft=u.scrollWidth-Re,Qt=u.scrollHeight-Ie,Ft+Qt!==0&&o.setStyles(v,{left:uo-Ft,top:Us-Qt}),G||(Nk(n,f,$,J,"corner-"+S.name),G=!0)},Zo=()=>{const xn=G;G=!1,xn&&(xt(f,"width",xe),xt(f,"height",Ee)),o.unbind(r,"mousemove",lo),o.unbind(r,"mouseup",Zo),c!==r&&(o.unbind(c,"mousemove",lo),o.unbind(c,"mouseup",Zo)),o.remove(b),o.remove(v),o.remove(_),ds(f),xn&&(T2(n,f,xe,Ee,"corner-"+S.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},ds=xn=>{kn();const Ft=o.getPos(xn,u),Qt=Ft.x,eo=Ft.y,uo=xn.getBoundingClientRect(),Us=uo.width||uo.right-uo.left,ar=uo.height||uo.bottom-uo.top;f!==xn&&(Dr(),f=xn,xe=Ee=0);const Pd=n.dispatch("ObjectSelected",{target:xn});te(xn)&&!Pd.isDefaultPrevented()?To(I4,(oi,df)=>{const Am=fu=>{const mf=De(f)[0];R=fu.screenX,M=fu.screenY,$=mf.clientWidth,J=mf.clientHeight,Y=J/$,S=oi,S.name=df,S.startPos={x:Us*oi[0]+Qt,y:ar*oi[1]+eo},Re=u.scrollWidth,Ie=u.scrollHeight,_=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(_,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=Le(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:Qt,top:eo,margin:0}),Tn(b,Us,ar),b.removeAttribute(Gf),u.appendChild(b),o.bind(r,"mousemove",lo),o.bind(r,"mouseup",Zo),c!==r&&(o.bind(c,"mousemove",lo),o.bind(c,"mouseup",Zo)),v=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},$+" &times; "+J)};let Dl=o.get("mceResizeHandle"+df);Dl&&o.remove(Dl),Dl=o.add(u,"div",{id:"mceResizeHandle"+df,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+df+"-resize; margin:0; padding:0"}),o.bind(Dl,"mousedown",fu=>{fu.stopImmediatePropagation(),fu.preventDefault(),Am(fu)}),oi.elm=Dl,o.setStyles(Dl,{left:Us*oi[0]+Qt-Dl.offsetWidth/2,top:ar*oi[1]+eo-Dl.offsetHeight/2})}):Dr(!1)},_r=Ut(ds,0),Dr=(xn=!0)=>{_r.cancel(),kn(),f&&xn&&f.removeAttribute(Gf),To(I4,(Ft,Qt)=>{const eo=o.get("mceResizeHandle"+Qt);eo&&(o.unbind(eo),o.remove(eo))})},Oc=(xn,Ft)=>o.isChildOf(xn,Ft),Bt=xn=>{if(G||n.removed||n.composing)return;const Ft=xn.type==="mousedown"?xn.target:e.getNode(),Qt=dc(oe.fromDom(Ft),vp).map(uo=>uo.dom).filter(uo=>o.isEditable(uo.parentElement)||uo.nodeName==="IMG"&&o.isEditable(uo)).getOrUndefined(),eo=_e(Qt)?o.getAttrib(Qt,Gf,"1"):"1";if(ne(o.select(`img[${Gf}],hr[${Gf}]`),uo=>{uo.removeAttribute(Gf)}),_e(Qt)&&Oc(Qt,u)&&$4(n)){vs();const uo=e.getStart(!0);if(Oc(uo,Qt)&&Oc(e.getEnd(!0),Qt)){o.setAttrib(Qt,Gf,eo),_r.throttle(Qt);return}}Dr()},kn=()=>{To(I4,xn=>{xn.elm&&(o.unbind(xn.elm),delete xn.elm)})},vs=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{vs(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Bt),n.on("keyup compositionend",xn=>{f&&f.nodeName==="TABLE"&&Bt(xn)}),n.on("hide blur",Dr),n.on("contextmenu longpress",et,!0)}),n.on("remove",kn),{isResizable:te,showResizeRect:ds,hideResizeRect:Dr,updateResizeRect:Bt,destroy:()=>{_r.cancel(),f=b=_=null}}},j5=(e,n,o)=>{const r=Il(oe.fromDom(o));return Af(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},L4=(e,n)=>_e(e)&&_e(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,HI=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},H4=(e,n,o)=>HI(e,n,o)!==null,zI=(e,n,o)=>H4(e,n,r=>r.nodeName===o),VI=(e,n)=>Uc(e)&&!H4(e,n,Ni),q5=(e,n,o)=>{const r=n.parentNode;if(r){const c=new Qs(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(xr(u))return!0}return!1},jK=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},UI=(e,n)=>{let o=n;for(;o&&o!==e;){if(mr(o))return!0;o=o.parentNode}return!1},nc=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let v,S;if(!b)return F.none();const _=e.getParent(b,e.isBlock)||u;if(r&&xr(c)&&n&&e.isEmpty(_))return F.some(qe(b,e.nodeIndex(c)));const R=new Qs(c,_);for(;S=R[r?"prev":"next"]();){if(e.getContentEditableParent(S)==="false"||VI(S,u))return F.none();if(St(S)&&S.data.length>0)return zI(S,u,"A")?F.none():F.some(qe(S,r?S.data.length:0));if(e.isBlock(S)||f[S.nodeName.toLowerCase()])return F.none();v=S}return $r(v)?F.none():o&&v?F.some(qe(v,0)):F.none()},hC=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,v=o?r.startOffset:r.endOffset;const S=bn(b)&&v===b.childNodes.length,_=e.schema.getNonEmptyElements();let R=o;if(Uc(b))return F.none();if(bn(b)&&v>b.childNodes.length-1&&(R=!1),Vo(b)&&(b=c,v=0),b===c){if(R&&(u=b.childNodes[v>0?v-1:0],u&&(Uc(u)||_[u.nodeName]||qd(u))))return F.none();if(b.hasChildNodes()){if(v=Math.min(!R&&v>0?v-1:v,b.childNodes.length-1),b=b.childNodes[v],v=St(b)&&S?b.data.length:0,!n&&b===c.lastChild&&qd(b)||UI(c,b)||Uc(b)||hb(b))return F.none();if(b.hasChildNodes()&&!qd(b)){u=b;const M=new Qs(b,c);do{if(mr(u)||Uc(u)){f=!1;break}if(St(u)&&u.data.length>0){v=R?0:u.data.length,b=u,f=!0;break}if(_[u.nodeName.toLowerCase()]&&!Zy(u)){v=e.nodeIndex(u),b=u.parentNode,R||v++,f=!0;break}}while(u=R?M.next():M.prev())}}}return n&&(St(b)&&v===0&&nc(e,S,n,!0,b).each(M=>{b=M.container(),v=M.offset(),f=!0}),bn(b)&&(u=b.childNodes[v],u||(u=b.childNodes[v-1]),u&&xr(u)&&!jK(u,"A")&&!q5(e,u,!1)&&!q5(e,u,!0)&&nc(e,S,n,!0,u).each(M=>{b=M.container(),v=M.offset(),f=!0}))),R&&!n&&St(b)&&v===b.data.length&&nc(e,S,n,!1,b).each(M=>{b=M.container(),v=M.offset(),f=!0}),f&&b?F.some(qe(b,v)):F.none()},oc=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=qe.fromRangeStart(n);return hC(e,o,!0,r).each(u=>{(!o||!qe.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||hC(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),L4(n,r)?F.none():F.some(r)},Ql=(e,n)=>e.splitText(n),gE=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&St(n)){if(o>0&&o<n.data.length)if(r=Ql(n,o),n=r.previousSibling,c>o){c=c-o;const u=Ql(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(St(n)&&o>0&&o<n.data.length&&(n=Ql(n,o),o=0),St(r)&&c>0&&c<r.data.length){const u=Ql(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},tf=e=>({walk:(u,f)=>bp(e,u,f),split:gE,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=wa(e,u,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),v=e.createRng();return v.setStart(b.startContainer,b.startOffset),v.setEnd(b.endContainer,b.endOffset),v}return u},normalize:u=>oc(e,u).fold(Oe,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});tf.compareRanges=L4,tf.getCaretRangeFromPoint=j5,tf.getSelectedNode=Lf,tf.getNode=Wm;const z4=e=>Bo(e)==="textarea",V4=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),WI=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},G5=(e,n)=>{const o=wr(e);if(o.length===0||z4(e))return{element:e,offset:n};if(n<o.length&&!z4(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return z4(r)?{element:e,offset:n}:Bo(r)==="img"?{element:r,offset:1}:Es(r)?{element:r,offset:uc(r).length}:{element:r,offset:wr(r).length}}},K5=(e,n)=>{const o=pg(e),r=By(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},ZI=(e,n)=>{const o=G5(e,n),r=oe.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+ya+"</span>");return Ka(o.element,r),K5(r,()=>Ws(r))},jI=e=>K5(oe.fromDom(e),rt),eu=(e,n,o,r)=>{U4(e,(c,u)=>qK(e,n,o,r),o)},Pi=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(V4(e,u))return;const f=d1(n).top;o(e,n,f,r,c),WI(e,u)},qK=(e,n,o,r)=>{const c=oe.fromDom(e.getBody()),u=oe.fromDom(e.getDoc());l1(c);const f=ZI(oe.fromDom(o.startContainer),o.startOffset);Pi(e,u,n,f,r),f.cleanup()},hm=(e,n,o,r)=>{const c=oe.fromDom(e.getDoc());Pi(e,c,o,jI(n),r)},U4=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(oe.fromDom(r),oe.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},W4=(e,n,o,r,c)=>{const u=n.pos,f=30;if(r)rb(u.left,Math.max(0,u.top-f),c);else{const b=u.top-o+n.height+f;rb(-e.getBody().getBoundingClientRect().left,b,c)}},Y5=(e,n,o,r,c,u)=>{const f=r+o,b=c.pos.top,v=c.bottom,S=v-b>=r;b<o?W4(e,c,r,u!==!1,n):b>f?W4(e,c,r,S?u!==!1:u===!0,n):v>f&&!S&&W4(e,c,r,u===!0,n)},Z4=(e,n,o,r,c)=>{const u=Il(n).dom.innerHeight;Y5(e,n,o,u,r,c)},X5=(e,n,o,r,c)=>{const u=Il(n).dom.innerHeight;Y5(e,n,o,u,r,c);const f=F4(r.element),b=db(window);f.top<b.y?bl(r.element,c!==!1):f.top>b.bottom&&bl(r.element,c===!0)},J5=(e,n,o)=>eu(e,Z4,n,o),qI=(e,n,o)=>hm(e,n,Z4,o),j4=(e,n,o)=>eu(e,X5,n,o),GI=(e,n,o)=>hm(e,n,X5,o),KI=(e,n,o)=>{(e.inline?qI:GI)(e,n,o)},pC=(e,n,o)=>{(e.inline?J5:j4)(e,n,o)},Q5=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),q4=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return F.from(u).map(oe.fromDom).map(b=>!r||!n.collapsed?gl(b,c(b,f)).getOr(b):b).bind(b=>Tr(b)?F.some(b):Lc(b).filter(Tr)).map(b=>b.dom).getOr(e)},hE=(e,n,o=!1)=>q4(e,n,!0,o,(r,c)=>Math.min(Ld(r),c)),G4=(e,n,o=!1)=>q4(e,n,!1,o,(r,c)=>c>0?c-1:c),pE=(e,n)=>{const o=e;for(;e&&St(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},YI=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),St(o)&&St(r)&&(o.length===c?o=pE(o.nextSibling,!0):o=o.parentNode,u===0?r=pE(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=St(f)?f.parentNode:f;return dr(b)?b:e},GK=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||hE(u,n,n.collapsed),e.isBlock),b=e.getParent(r||G4(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let v;const S=new Qs(f,u);for(;(v=S.next())&&v!==b;)e.isBlock(v)&&c.push(v)}return b&&f!==b&&b!==u&&c.push(b),c},KK=(e,n,o)=>F.from(n).bind(r=>F.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(Dv(e,f,r,!0),Dv(e,f,r,!1)),f})),K4=(e,n)=>de(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),eB={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},bE=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},XI=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Fm(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},tB=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class $i{static create(n,o){const r=new $i(n,eB[n]||1);return o&&To(o,(c,u)=>{r.attr(u,c)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ae(n))return _e(n)&&To(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new $i(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=bE(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=bE(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(tB(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||tB(f))return!1}if(f.type===8||f.type===3&&!XI(f)||f.type===3&&f.parent&&o[f.parent.name]&&Fm((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=bE(f,u));return!0}walk(n){return bE(this,null,n)}}const YK=kt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),Y4=e=>ae(e.nodeValue)&&e.nodeValue.includes(ya),X4=e=>`${e.length===0?"":`${de(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,JI=(e,n)=>n.querySelectorAll(X4(e)),nB=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>Y4(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),oB=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(Y4(n)){const o=n.parentNode;return o&&no(YK,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),XK=e=>nB(e).nextNode()!==null,JK=e=>oB(e).nextNode()!==null,QK=(e,n)=>n.querySelector(X4(e))!==null,QI=(e,n)=>{ne(JI(e,n),o=>{const r=oe.fromDom(o);nr(r,"data-mce-bogus")==="all"?Ws(r):ne(e,c=>{lr(r,c)&&Qr(r,c)})})},eL=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},tL=k(eL,nB),g0=k(eL,oB),sB=(e,n)=>{const o=[{condition:Ce(QK,n),action:Ce(QI,n)},{condition:XK,action:tL},{condition:JK,action:g0}];let r=e,c=!1;return ne(o,({condition:u,action:f})=>{u(r)&&(c||(r=e.cloneNode(!0),c=!0),f(r))}),r},J4=e=>{const n=Ge(e,"[data-mce-bogus]");ne(n,o=>{nr(o,"data-mce-bogus")==="all"?Ws(o):Jd(o)?(Ka(o,oe.fromText(qa)),Ws(o)):ii(o)})},Q4=e=>{const n=Ge(e,"input");ne(n,o=>{Qr(o,"name")})},rB=(e,n)=>{const o=pc(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},aB=(e,n)=>{const o=e.getDoc(),r=ka(oe.fromDom(e.getBody())),c=oe.fromTag("div",o);Cr(c,"data-mce-bogus","all"),li(c,{position:"fixed",left:"-9999999px",top:"0"}),sd(c,n.innerHTML),J4(c),Q4(c);const u=nb(r);gs(u,c);const f=Bi(c.dom.innerText);return Ws(c),f},e3=(e,n,o)=>{let r;return n.format==="raw"?r=kt.trim(Bi(sB(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=aB(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=rB(e,e.serializer.serialize(o,n)),n.format!=="text"&&!tl(oe.fromDom(o))&&ae(r)?kt.trim(r):r},eY=(e,n)=>F.from(e.getBody()).fold(it(n.format==="tree"?new $i("body",11):""),o=>e3(e,n,o)),cB=kt.makeMap,nL=e=>{const n=[];e=e||{};const o=e.indent,r=cB(e.indent_before||""),c=cB(e.indent_after||""),u=Ag.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,v,S)=>{if(o&&r[b]&&n.length>0){const _=n[n.length-1];_.length>0&&_!==`
`&&n.push(`
`)}if(n.push("<",b),v)for(let _=0,R=v.length;_<R;_++){const M=v[_];n.push(" ",M.name,'="',u(M.value,!0),'"')}if(!S||f?n[n.length]=">":n[n.length]=" />",S&&o&&c[b]&&n.length>0){const _=n[n.length-1];_.length>0&&_!==`
`&&n.push(`
`)}},end:b=>{let v;n.push("</",b,">"),o&&c[b]&&n.length>0&&(v=n[n.length-1],v.length>0&&v!==`
`&&n.push(`
`))},text:(b,v)=>{b.length>0&&(n[n.length]=v?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,v)=>{v?n.push("<?",b," ",u(v),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Cp=(e={},n=Fu())=>{const o=nL(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:v=>{var S;o.text((S=v.value)!==null&&S!==void 0?S:"",v.raw)},8:v=>{var S;o.comment((S=v.value)!==null&&S!==void 0?S:"")},7:v=>{o.pi(v.name,v.value)},10:v=>{var S;o.doctype((S=v.value)!==null&&S!==void 0?S:"")},4:v=>{var S;o.cdata((S=v.value)!==null&&S!==void 0?S:"")},11:v=>{let S=v;if(S=S.firstChild)do b(S);while(S=S.next)}};o.reset();const b=v=>{var S;const _=f[v.type];if(_)_(v);else{const R=v.name,M=R in n.getVoidElements();let $=v.attributes;if(u&&$&&$.length>1){const J=[];J.map={};const Y=n.getElementRule(v.name);if(Y){for(let G=0,xe=Y.attributesOrder.length;G<xe;G++){const Ee=Y.attributesOrder[G];if(Ee in $.map){const Re=$.map[Ee];J.map[Ee]=Re,J.push({name:Ee,value:Re})}}for(let G=0,xe=$.length;G<xe;G++){const Ee=$[G].name;if(!(Ee in J.map)){const Re=$.map[Ee];J.map[Ee]=Re,J.push({name:Ee,value:Re})}}$=J}}if(o.start(R,$,M),gi(R))ae(v.value)&&o.text(v.value,!0),o.end(R);else if(!M){let J=v.firstChild;if(J){(R==="pre"||R==="textarea")&&J.type===3&&((S=J.value)===null||S===void 0?void 0:S[0])===`
`&&o.text(`
`,!0);do b(J);while(J=J.next)}o.end(R)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},iB=new Set;ne(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{iB.add(n)});const vE=new Set;ne(["background-color"],n=>{vE.add(n)});const t3=["font","text-decoration","text-emphasis"],tY=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),bC=(e,n)=>sn(tY(e,n)),nY=e=>iB.has(e),oL=e=>vE.has(e),sL=(e,n)=>ce(bC(e,n),o=>nY(o)),rL=(e,n)=>sL(e,n)&&ce(bC(e,n),o=>oL(o)),lB=e=>ye(e,n=>ce(t3,o=>Kn(n,o))),aL=(e,n,o)=>{const r=bC(e,n),c=bC(e,o),u=f=>{var b,v;const S=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",_=(v=e.getStyle(o,f))!==null&&v!==void 0?v:"";return Js(S)&&Js(_)&&S!==_};return ce(r,f=>{const b=v=>ce(v,S=>S===f);if(!b(c)&&b(t3)){const v=lB(c);return ce(v,u)}else return u(f)})},n3=(e,n,o)=>F.from(o.container()).filter(St).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),uB=Ce(n3,!0,nh),o3=Ce(n3,!1,nh),dB=e=>{const n=e.container();return St(n)&&(n.data.length===0||$b(n.data)&&gm.isBookmarkNode(n.parentNode))},wp=(e,n)=>o=>j2(e?0:-1,o).filter(n).isSome(),mB=e=>Wy(e)&&Pr(oe.fromDom(e),"display")==="block",fB=e=>mr(e)&&!iS(e),cL=wp(!0,mB),iL=wp(!1,mB),vC=wp(!0,Du),yC=wp(!1,Du),gB=wp(!0,qd),s3=wp(!1,qd),Sp=wp(!0,fB),xp=wp(!1,fB),lL=e=>e.slice(0,-1),uL=(e,n,o)=>Ic(n,e)?lL(ic(e,r=>o(r)||Qo(r,n))):[],hB=(e,n)=>uL(e,n,Oe),jt=(e,n)=>[e].concat(hB(e,n)),pm=(e,n,o)=>eC(e,n,o,dB),oY=e=>n=>e.isBlock(Bo(n)),pB=(e,n,o)=>Gt(jt(oe.fromDom(n.container()),e),oY(o)),yE=(e,n,o,r)=>pm(e,n.dom,o).forall(c=>pB(n,o,r).fold(()=>!lm(c,o,n.dom),u=>!lm(c,o,n.dom)&&Ic(u,oe.fromDom(c.container())))),r3=(e,n,o,r)=>pB(n,o,r).fold(()=>pm(e,n.dom,o).forall(c=>!lm(c,o,n.dom)),c=>pm(e,c.dom,o).isNone()),CE=Ce(r3,!1),wE=Ce(r3,!0),dL=Ce(yE,!1),bB=Ce(yE,!0),mL=e=>fp(e).exists(Jd),SE=(e,n,o,r)=>{const c=ye(jt(oe.fromDom(o.container()),n),f=>r.isBlock(Bo(f))),u=to(c).getOr(n);return qc(e,u.dom,o).filter(mL)},a3=(e,n,o)=>fp(n).exists(Jd)||SE(!0,e,n,o).isSome(),xE=(e,n,o)=>s0(n).exists(Jd)||SE(!1,e,n,o).isSome(),vB=Ce(SE,!1),EE=Ce(SE,!0),yB=e=>qe.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),CB=(e,n,o)=>{const r=ye(jt(oe.fromDom(n.container()),e),c=>o.isBlock(Bo(c)));return to(r).getOr(e)},wB=(e,n,o)=>yB(n)?o3(n):o3(n)||yi(CB(e,n,o).dom,n).exists(o3),SB=(e,n,o)=>yB(n)?uB(n):uB(n)||Gc(CB(e,n,o).dom,n).exists(uB),fL=e=>j(["pre","pre-wrap"],e),TE=e=>fp(e).bind(n=>Hs(n,Tr)).exists(n=>fL(Pr(n,"white-space"))),AE=(e,n)=>yi(e.dom,n).isNone(),gL=(e,n)=>Gc(e.dom,n).isNone(),hL=(e,n,o)=>AE(e,n)||gL(e,n)||CE(e,n,o)||wE(e,n,o)||xE(e,n,o)||a3(e,n,o),pL=e=>_e(e)&&mr(e)&&Vx(e),xB=(e,n)=>o=>pL(new Qs(o,e)[n]()),bL=(e,n)=>{const o=Gc(e.dom,n).getOr(n),r=xB(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},vL=(e,n)=>{const o=yi(e.dom,n).getOr(n),r=xB(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},EB=(e,n,o)=>TE(n)?!1:hL(e,n,o)||wB(e,n,o)||SB(e,n,o),CC=(e,n,o)=>TE(n)?!1:CE(e,n,o)||dL(e,n,o)||xE(e,n,o)||wB(e,n,o)||vL(e,n),yL=e=>{const n=e.container(),o=e.offset();return St(n)&&o<n.data.length?qe(n,o+1):e},wC=(e,n,o)=>TE(n)?!1:wE(e,n,o)||bB(e,n,o)||a3(e,n,o)||SB(e,n,o)||bL(e,n),c3=(e,n,o)=>CC(e,n,o)||wC(e,yL(n),o),TB=(e,n)=>Tv(e.charAt(n)),AB=(e,n)=>nh(e.charAt(n)),CL=e=>{const n=e.container();return St(n)&&er(n.data,ir)},kB=e=>{const n=e.split("");return de(n,(o,r)=>Tv(o)&&r>0&&r<n.length-1&&nC(n[r-1])&&nC(n[r+1])?" ":o).join("")},_B=(e,n,o,r)=>{const c=n.data,u=qe(n,0);return!o&&TB(c,0)&&!c3(e,u,r)?(n.data=" "+c.slice(1),!0):o&&AB(c,0)&&CC(e,u,r)?(n.data=ir+c.slice(1),!0):!1},wL=e=>{const n=e.data,o=kB(n);return o!==n?(e.data=o,!0):!1},SC=(e,n,o,r)=>{const c=n.data,u=qe(n,c.length-1);return!o&&TB(c,c.length-1)&&!c3(e,u,r)?(n.data=c.slice(0,-1)+" ",!0):o&&AB(c,c.length-1)&&wC(e,u,r)?(n.data=c.slice(0,-1)+ir,!0):!1},h0=(e,n,o)=>{const r=n.container();if(!St(r))return F.none();if(CL(n)){const c=_B(e,r,!1,o)||wL(r)||SC(e,r,!1,o);return os(c,n)}else if(c3(e,n,o)){const c=_B(e,r,!0,o)||SC(e,r,!0,o);return os(c,n)}else return F.none()},kE=e=>{const n=oe.fromDom(e.getBody());e.selection.isCollapsed()&&h0(n,qe.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},DB=(e,n,o,r)=>{if(o===0)return;const c=oe.fromDom(e),u=Au(c,S=>r.isBlock(Bo(S))).getOr(c),f=e.data.slice(n,n+o),b=n+o>=e.data.length&&wC(u,qe(e,e.data.length),r),v=n===0&&CC(u,qe(e,0),r);e.replaceData(n,o,Ly(f,4,v,b))},_E=(e,n,o)=>{const r=e.data.slice(n),c=r.length-Yu(r).length;DB(e,n,c,o)},i3=(e,n,o)=>{const r=e.data.slice(0,n),c=r.length-hu(r).length;DB(e,n-c,c,o)},l3=(e,n,o,r,c=!0)=>{const u=hu(e.data).length,f=c?e:n,b=c?n:e;return c?f.appendData(b.data):f.insertData(0,b.data),Ws(oe.fromDom(b)),r&&_E(f,u,o),f},OB=(e,n)=>{const o=e.container(),r=e.offset();return!qe.isTextPosition(e)&&o===n.parentNode&&r>qe.before(n).offset()},SL=(e,n)=>OB(n,e)?qe(n.container(),n.offset()-1):n,xL=e=>St(e)?qe(e,0):qe.before(e),RB=e=>St(e)?qe(e,e.data.length):qe.after(e),BB=e=>gr(e.previousSibling)?F.some(RB(e.previousSibling)):e.previousSibling?Hu(e.previousSibling):F.none(),u3=e=>gr(e.nextSibling)?F.some(xL(e.nextSibling)):e.nextSibling?Kc(e.nextSibling):F.none(),EL=(e,n)=>F.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>yi(e,qe.before(o))).orThunk(()=>Gc(e,qe.after(n))),TL=(e,n)=>Gc(e,qe.after(n)).orThunk(()=>yi(e,qe.before(n))),AL=(e,n)=>BB(n).orThunk(()=>u3(n)).orThunk(()=>EL(e,n)),MB=(e,n)=>u3(n).orThunk(()=>BB(n)).orThunk(()=>TL(e,n)),d3=(e,n,o)=>e?MB(n,o):AL(n,o),FB=(e,n,o)=>d3(e,n,o).map(Ce(SL,o)),NB=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},kL=e=>n=>n.dom===e,DE=(e,n)=>n&&no(e.schema.getBlockElements(),Bo(n)),_L=(e,n,o)=>{if(fi(e,n)){const r=oe.fromHtml('<br data-mce-bogus="1">');return o?ne(wr(n),c=>{bo(c)||Ws(c)}):pl(n),gs(n,r),F.some(qe.before(r.dom))}else return F.none()},PB=(e,n,o,r)=>{const c=Zi(e).filter(Es),u=Hc(e).filter(Es);return Ws(e),Co(c,u,n,(f,b,v)=>{const S=f.dom,_=b.dom,R=S.data.length;return l3(S,_,o,r),v.container()===_?qe(S,R):v}).orThunk(()=>(r&&(c.each(f=>i3(f.dom,f.dom.length,o)),u.each(f=>_E(f.dom,0,o))),n))},m3=(e,n)=>no(e.schema.getTextInlineElements(),Bo(n)),rh=(e,n,o,r=!0,c=!1)=>{const u=FB(n,e.getBody(),o.dom),f=Au(o,Ce(DE,e),kL(e.getBody())),b=PB(o,u,e.schema,m3(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(v=>_L(e.schema,v,c)).fold(()=>{r&&NB(e,n,b)},v=>{r&&NB(e,n,F.some(v))})},DL=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,OL=e=>DL.test(e),Kf=(e,n)=>ki(oe.fromDom(n),M2(e))&&!ft(e.schema,n)&&e.dom.isEditable(n),f3=e=>{var n;return Ls.DOM.getStyle(e,"direction",!0)==="rtl"||OL((n=e.textContent)!==null&&n!==void 0?n:"")},$B=(e,n,o)=>ye(Ls.DOM.getParents(o.container(),"*",n),e),ah=(e,n,o)=>{const r=$B(e,n,o);return F.from(r[r.length-1])},IB=(e,n,o)=>{const r=im(n,e),c=im(o,e);return _e(r)&&r===c},LB=e=>Lb(e)||D1(e),zu=(e,n)=>{const o=n.container(),r=n.offset();return e?Ts(o)?St(o.nextSibling)?qe(o.nextSibling,0):qe.after(o):Lb(n)?qe(o,r+1):n:Ts(o)?St(o.previousSibling)?qe(o.previousSibling,o.previousSibling.data.length):qe.before(o):D1(n)?qe(o,r-1):n},g3=Ce(zu,!0),h3=Ce(zu,!1),p3=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},HB=e=>{e.execCommand("delete")},OE=e=>p3(e,"Delete"),zB=e=>p3(e,"ForwardDelete"),RL=e=>n=>yt(Lc(n),e,Qo),BL=e=>ep(e)||Qd(e),RE=(e,n)=>Ic(e,n)?Hs(n,BL,RL(e)):F.none(),b3=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},VB=(e,n,o)=>Xt(Kc(o),Hu(o),(r,c)=>{const u=zu(!0,r),f=zu(!1,c),b=zu(!1,n);return e?Gc(o,b).exists(v=>v.isEqual(f)&&n.isEqual(u)):yi(o,b).exists(v=>v.isEqual(u)&&n.isEqual(f))}).getOr(!0),UB=e=>(Pl(e)?Zi(e):Vr(e)).bind(UB).orThunk(()=>F.some(e)),WB=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=UB(o).getOr(o),f=oe.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?b3(e,r):fi(e.schema,f,{checkRootAsContent:!1})&&(em(f),r&&e.selection.setCursorLocation(f.dom,0)),!Qo(o,f)){const b=yt(Lc(f),o)?[]:_s(f);ne(b.concat(wr(o)),v=>{!Qo(v,f)&&!Ic(v,f)&&fi(e.schema,v)&&Ws(v)})}},ML=e=>n=>Qo(e,n),BE=e=>Ge(e,"td,th"),FL=(e,n)=>hp(oe.fromDom(e),n),sY=e=>Xt(e.startTable,e.endTable,(n,o)=>{const r=po(n,u=>Qo(u,o)),c=po(o,u=>Qo(u,n));return!r&&!c?e:{...e,startTable:r?F.none():e.startTable,endTable:c?F.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),NL=e=>sY(e),rY=(e,n)=>{const o=FL(e.startContainer,n),r=FL(e.endContainer,n),c=o.isSome(),u=r.isSome(),f=Xt(o,r,Qo).getOr(!1);return NL({startTable:o,endTable:r,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u})},v3=(e,n)=>({start:e,end:n}),Ci=(e,n,o)=>({rng:e,table:n,cells:o}),xC=ja.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),y3=(e,n)=>dc(oe.fromDom(e),"td,th",n),ZB=e=>!Qo(e.start,e.end),jB=(e,n)=>hp(e.start,n).bind(o=>hp(e.end,n).bind(r=>os(Qo(o,r),o))),tu=(e,n)=>!ZB(e)&&jB(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),aY=(e,n)=>{const o=y3(e.startContainer,n),r=y3(e.endContainer,n);return Xt(o,r,v3)},PL=e=>n=>hp(n,e).bind(o=>es(BE(o)).map(r=>v3(n,r))),cY=e=>n=>hp(n,e).bind(o=>to(BE(o)).map(r=>v3(r,n))),C3=e=>n=>jB(n,e).map(o=>Ci(n,o,BE(o))),qB=(e,n,o,r)=>{if(o.collapsed||!e.forall(ZB))return F.none();if(n.isSameTable){const c=e.bind(C3(r));return F.some({start:c,end:c})}else{const c=y3(o.startContainer,r),u=y3(o.endContainer,r),f=c.bind(PL(r)).bind(C3(r)),b=u.bind(cY(r)).bind(C3(r));return F.some({start:f,end:b})}},$L=(e,n)=>go(e,o=>Qo(o,n)),w3=e=>Xt($L(e.cells,e.rng.start),$L(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),nu=(e,n,o)=>e.exists(r=>tu(r,o)&&aC(r.start,n)),S3=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},GB=(e,n,o,r)=>qB(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=w3(c).getOr([]);if(u&&c.cells.length===f.length)return F.some(xC.fullTable(c.table));if(f.length>0){if(u)return F.some(xC.partialTable(f,F.none()));{const b=S3(o,n);return F.some(xC.partialTable(f,F.some({...n,rng:b})))}}else return F.none()}),IL=(e,n,o,r)=>qB(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(w3).getOr([]),b=u.bind(w3).getOr([]);if(f.length>0&&b.length>0){const v=S3(o,n);return F.some(xC.multiTable(f,b,v))}else return F.none()}),LL=(e,n)=>{const o=ML(e),r=aY(n,o),c=rY(n,o);return nu(r,n,o)?r.map(u=>xC.singleCellTable(n,u.start)):c.isMultiTable?IL(r,c,n,o):GB(r,c,n,o)},x3=e=>ne(e,n=>{Qr(n,"contenteditable"),em(n)}),KB=(e,n)=>F.from(e.dom.getParent(n,e.dom.isBlock)).map(oe.fromDom),HL=(e,n,o)=>{o.each(r=>{n?Ws(r):(em(r),e.selection.setCursorLocation(r.dom,0))})},E3=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),T3(e,c,n,!1).each(u=>u())},YB=e=>{const n=jf(e),o=oe.fromDom(e.selection.getNode());Gd(o.dom)&&fi(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&ce(n,r=>Qo(r,o))&&Cr(o,"data-mce-selected","1")},XB=(e,n,o)=>F.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=KB(e,f?u.endContainer:u.startContainer);u.deleteContents(),HL(e,f,b.filter(Ce(fi,e.schema)));const v=f?n[0]:n[n.length-1];return E3(e,v,r,f),fi(e.schema,v)?F.none():F.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);x3(c),YB(e)}),JB=(e,n,o,r)=>F.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];E3(e,u,c,!0),E3(e,f,c,!1);const b=fi(e.schema,u)?n:n.slice(1),v=fi(e.schema,f)?o:o.slice(0,-1);x3(b.concat(v)),r.deleteContents(),YB(e)}),T3=(e,n,o,r=!0)=>F.some(()=>{WB(e,n,o,r)}),QB=(e,n)=>F.some(()=>rh(e,!1,n)),zL=(e,n,o)=>LL(n,o).bind(r=>r.fold(Ce(T3,e),Ce(QB,e),Ce(XB,e),Ce(JB,e))),iY=(e,n)=>Ep(e,n),VL=(e,n,o,r)=>A3(n,r).fold(()=>zL(e,n,o),c=>iY(e,c)),UL=(e,n,o)=>{const r=oe.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?XB(e,o,F.none()):VL(e,r,c,n)},WL=(e,n)=>Gt(jt(n,e),el),A3=(e,n)=>Gt(jt(n,e),Jr("caption")),hs=(e,n,o,r,c)=>eh(o,e.getBody(),c).bind(u=>WL(n,oe.fromDom(u.getNode())).bind(f=>Qo(f,r)?F.none():F.some(rt))),Ep=(e,n)=>F.some(()=>{em(n),e.selection.setCursorLocation(n.dom,0)}),ch=(e,n,o,r)=>Kc(e.dom).bind(c=>Hu(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),p0=(e,n)=>Ep(e,n),ME=(e,n,o)=>A3(e,oe.fromDom(o.getNode())).fold(()=>F.some(rt),r=>os(!Qo(r,n),rt)),k3=(e,n,o,r,c)=>eh(o,e.getBody(),c).fold(()=>F.some(rt),u=>ch(r,o,c,u)?p0(e,r):ME(n,r,u)),_3=(e,n,o,r)=>{const c=qe.fromRangeStart(e.selection.getRng());return WL(o,r).bind(u=>fi(e.schema,u,{checkRootAsContent:!1})?Ep(e,u):hs(e,o,n,u,c))},eM=(e,n,o,r)=>{const c=qe.fromRangeStart(e.selection.getRng());return fi(e.schema,r)?Ep(e,r):k3(e,o,n,r,c)},tM=(e,n)=>e?gB(n):s3(n),nM=(e,n)=>{const o=qe.fromRangeStart(e.selection.getRng());return tM(n,o)||qc(n,e.getBody(),o).exists(r=>tM(n,r))},oM=(e,n,o)=>{const r=oe.fromDom(e.getBody());return A3(r,o).fold(()=>_3(e,n,r,o).orThunk(()=>os(nM(e,n),rt)),c=>eM(e,n,r,c))},D3=(e,n)=>{const o=oe.fromDom(e.selection.getStart(!0)),r=jf(e);return e.selection.isCollapsed()&&r.length===0?oM(e,n,o):UL(e,o,r)},b0=(e,n)=>{let o=n;for(;o&&o!==e;){if(mi(o)||mr(o))return o;o=o.parentNode}return null},ZL=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],jL=kt.each,O3=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=S=>{const _={};return jL(n.getAttribs(S),R=>{const M=R.nodeName.toLowerCase();M!=="style"&&!c(M)&&(_[M]=n.getAttrib(S,M))}),_},v=(S,_)=>{for(const R in S)if(no(S,R)){const M=_[R];if(Zn(M)||S[R]!==M)return!1;delete _[R]}for(const R in _)if(no(_,R))return!1;return!0};return bn(u)&&bn(f)&&(!v(b(u),b(f))||!v(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!ol(u)&&!ol(f)},c=u=>ce(ZL,f=>Kn(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},sM=(e,n)=>{if(St(e))return{container:e,offset:n};const o=tf.getNode(e,n);return St(o)?{container:o,offset:n>=e.childNodes.length?o.data.length:0}:o.previousSibling&&St(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&St(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:n}},rM=e=>{const n=e.cloneRange(),o=sM(e.startContainer,e.startOffset);n.setStart(o.container,o.offset);const r=sM(e.endContainer,e.endOffset);return n.setEnd(r.container,r.offset),n},Mv=Ls.DOM,lY=()=>Mv.create("span",{"data-mce-type":"bookmark"}),qL=(e,n,o)=>{if(bn(e)){const r=o();return e.hasChildNodes()?n===e.childNodes.length?e.appendChild(r):e.insertBefore(r,e.childNodes[n]):e.appendChild(r),{container:r,offset:0}}else return{container:e,offset:n}},GL=(e,n)=>{const o=r=>{var c;let u=(c=r.parentNode)===null||c===void 0?void 0:c.firstChild,f=0;for(;u;){if(u===r)return f;(!bn(u)||u.getAttribute("data-mce-type")!=="bookmark")&&f++,u=u.nextSibling}return-1};if(bn(e)&&_e(e.parentNode)){const r=e;n=o(e),e=e.parentNode,Mv.remove(r),!e.hasChildNodes()&&Mv.isBlock(e)&&e.appendChild(Mv.create("br"))}return{container:e,offset:n}},aM=(e,n,o,r)=>{const c=Mv.createRng();return c.setStart(e,n),c.setEnd(o,r),rM(c)},Tp=(e,n=lY)=>{const{container:o,offset:r}=qL(e.startContainer,e.startOffset,n);if(e.collapsed)return{startContainer:o,startOffset:r};{const{container:c,offset:u}=qL(e.endContainer,e.endOffset,n);return{startContainer:o,startOffset:r,endContainer:c,endOffset:u}}},Ap=e=>{const{container:n,offset:o}=GL(e.startContainer,e.startOffset);if(!Zn(e.endContainer)&&!Zn(e.endOffset)){const{container:r,offset:c}=GL(e.endContainer,e.endOffset);return aM(n,o,r,c)}else return aM(n,o,n,o)},cM=(e,n,o,r)=>{if(kt.each(o.styles,(c,u)=>{e.setStyle(n,u,l(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},Fv=(e,n,o,r,c)=>{const u=e.dom;fe(o.onformat)&&o.onformat(n,o,r,c),cM(u,n,o,r),kt.each(o.attributes,(f,b)=>{u.setAttrib(n,b,l(f,r))}),kt.each(o.classes,f=>{const b=l(f,r);u.hasClass(n,b)||u.addClass(n,b)})},uY=e=>!Ze(e.attributes)&&!Ze(e.styles),R3=m,sl=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Vt(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},iM=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>sl(e,b,o)?!0:b.parentNode===u||!!bm(e,b,o,r,!0));return!!bm(e,f,o,r,c)},FE=(e,n,o)=>Ot(o)&&R3(n,o.inline)||he(o)&&R3(n,o.block)?!0:Vt(o)?bn(n)&&e.is(n,o.selector):!1,B3=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(fe(o.onmatch))return o.onmatch(n,o,r);if(f){if(Ju(f)){for(let v=0;v<f.length;v++)if(b?e.getAttrib(n,f[v]):y(e,n,f[v]))return!0}else for(const v in f)if(no(f,v)){const S=b?e.getAttrib(n,v):y(e,n,v),_=l(f[v],u),R=gn(S)||Ti(S);if(R&&gn(_))continue;if(c&&R&&!o.exact||(!c||o.exact)&&!R3(S,p(_,v)))return!1}}return!0},bm=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&bn(n))for(let b=0;b<u.length;b++){const v=u[b];if(FE(e.dom,n,v)&&B3(f,n,v,"attributes",c,r)&&B3(f,n,v,"styles",c,r)){const S=v.classes;if(S){for(let _=0;_<S.length;_++)if(!e.dom.hasClass(n,l(S[_],r)))return}return v}}},M3=(e,n,o,r,c)=>{if(r)return iM(e,r,n,o,c);if(r=e.selection.getNode(),iM(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&iM(e,u,n,o,c))},KL=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const v=n[b];!c[v]&&bm(e,f,v,o)&&(c[v]=!0,r.push(v))}},e.dom.getRoot()),r},YL=(e,n)=>{const o=c=>Qo(c,oe.fromDom(e.getBody())),r=(c,u)=>bm(e,c.dom,u)?F.some(u):F.none();return F.from(e.selection.getStart(!0)).bind(c=>zc(oe.fromDom(c),u=>Ds(n,f=>r(u,f)),o)).getOrNull()},F3=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=O(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Vt(b))return!0;for(let v=u.length-1;v>=0;v--)if(r.is(u[v],b.selector))return!0}}return!1},dY=(e,n,o)=>Ne(o,(r,c)=>{const u=z(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),EC=ya,XL=(e,n)=>e.importNode(n,!0),Ys=e=>{if(e){const n=new Qs(e,e);for(let o=n.current();o;o=n.next())if(St(o))return o}return null},N3=e=>{const n=oe.fromTag("span");return Ya(n,{id:Xm,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&gs(n,oe.fromText(EC)),n},JL=e=>{const n=Ys(e);return n&&n.data.charAt(0)===EC&&n.deleteData(0,1),n},v0=(e,n,o)=>{const r=e.dom,c=e.selection;if(Vn(n))rh(e,!1,oe.fromDom(n),o,!0);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,v=u.startOffset,S=u.endContainer,_=u.endOffset,R=JL(n);r.remove(n,!0),b===R&&v>0&&u.setStart(R,v-1),S===R&&_>0&&u.setEnd(R,_-1),f&&r.isEmpty(f)&&em(oe.fromDom(f)),c.setRng(u)}},NE=(e,n,o)=>{const r=e.dom,c=e.selection;if(n)v0(e,n,o);else if(n=mm(e.getBody(),c.getStart()),!n)for(;n=r.get(Xm);)v0(e,n,o)},QL=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,Ce(dC,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(c2(oe.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},lM=(e,n)=>(e.appendChild(n),n),uM=(e,n)=>{var o;const r=Ae(e,(u,f)=>lM(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return lM(r,c.createTextNode(EC))},dM=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,v=ye(sn(f.get()),R=>R!==r&&!er(R,"removeformat")),S=dY(e,o,v);if(ye(S,R=>!ee(e,R,r)).length>0){const R=o.cloneNode(!1);return b.add(n,R),f.remove(r,c,R,u),b.remove(R),F.some(R)}else return F.none()},mM=e=>m1(e,uc(e).replace(new RegExp(`${ir}$`)," ")),e9=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&Zi(oe.fromDom(n)).each(r=>{Es(r)?mM(r):xf(r,c=>Es(c)).each(c=>{Es(c)&&mM(c)})})};e.once("input",r=>{r.data&&!nh(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},mY=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const S=f.startContainer.nodeValue;r=mm(e.getBody(),c.getStart());const _=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(S&&b>0&&b<S.length&&_.test(S.charAt(b))&&_.test(S.charAt(b-1))){const R=c.getBookmark();f.collapse(!0);let M=wa(e.dom,f,u);M=gE(M),e.formatter.apply(n,o,M),c.moveToBookmark(R)}else{let R=r?Ys(r):null;(!r||R?.data!==EC)&&(r=XL(e.getDoc(),N3(!0).dom),R=r.firstChild,f.insertNode(r),b=1,e9(e,r)),e.formatter.apply(n,o,r),c.setCursorLocation(R,b)}},t9=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const v=u.getRng(),S=v.startContainer,_=v.startOffset;let R=S;St(S)&&(_!==S.data.length&&(f=!0),R=R.parentNode);const M=[];let $;for(;R;){if(bm(e,R,n,o,r)){$=R;break}R.nextSibling&&(f=!0),M.push(R),R=R.parentNode}if($)if(f){const J=u.getBookmark();v.collapse(!0);let Y=wa(c,v,b,{includeTrailingSpace:!0});Y=gE(Y),e.formatter.remove(n,o,Y,r),u.moveToBookmark(J)}else{const J=mm(e.getBody(),$),Y=_e(J)?c.getParents($.parentNode,ot,J):[],G=N3(!1).dom;QL(e,G,J??$);const xe=dM(e,G,$,n,o,r),Ee=uM([...M,...xe.toArray(),...Y],G);J&&v0(e,J,_e(J)),u.setCursorLocation(Ee,1),e9(e,G),c.isEmpty($)&&c.remove($)}},n9=(e,n,o)=>{const r=e.selection,c=e.getBody();NE(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===EC&&NE(e,mm(c,r.getStart()),!0),(n===37||n===39)&&NE(e,mm(c,r.getStart()),!0)},o9=e=>St(e)&&fa(e.data,ir),s9=e=>{e.on("mouseup keydown",n=>{n9(e,n.keyCode,o9(e.selection.getRng().endContainer))})},P3=e=>{const n=N3(!1),o=uM(e,n.dom);return{caretContainer:n,caretPosition:qe(o,0)}},fM=(e,n)=>{const{caretContainer:o,caretPosition:r}=P3(n);return Ka(oe.fromDom(e),o),Ws(oe.fromDom(e)),r},ts=(e,n)=>{const{caretContainer:o,caretPosition:r}=P3(n);return e.insertNode(o.dom),r},$3=(e,n)=>{if(Ni(n.dom))return!1;const o=e.schema.getTextInlineElements();return no(o,Bo(n))&&!Ni(n.dom)&&!wg(n.dom)},Nv=["fontWeight","fontStyle","color","fontSize","fontFamily"],TC=e=>Jt(e.styles)&&ce(sn(e.styles),n=>j(Nv,n)),AC=e=>Gt(e,n=>Ot(n)&&n.inline==="span"&&TC(n)),Pv=(e,n)=>{const o=e.get(n);return Ze(o)?AC(o):F.none()},I3=(e,n)=>yi(n,qe.fromRangeStart(e)).isNone(),r9=(e,n)=>Gc(n,qe.fromRangeEnd(e)).exists(o=>!xr(o.getNode())||Gc(n,o).isSome())===!1,a9=e=>n=>jy(n)&&e.isEditable(n),fY=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return I3(o,n[0])&&r9(o,n[0])?n:[];{const r=to(n).filter(f=>I3(o,f)).toArray(),c=es(n).filter(f=>r9(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},gY=e=>ye(fY(e),a9(e.dom)),gM=e=>ye(e.getSelectedBlocks(),a9(e.dom)),hM=kt.each,L3=e=>bn(e)&&!ol(e)&&!Ni(e)&&!wg(e),pM=(e,n)=>{for(let o=e;o;o=o[n]){if(St(o)&&Js(o.data))return e;if(bn(o)&&!ol(o))return o}return e},c9=(e,n,o)=>{const r=O3(e),c=dr(n)&&e.dom.isEditable(n),u=dr(o)&&e.dom.isEditable(o);if(c&&u){const f=pM(n,"previousSibling"),b=pM(o,"nextSibling");if(r.compare(f,b)){for(let v=f.nextSibling;v&&v!==b;){const S=v;v=v.nextSibling,f.appendChild(S)}return e.dom.remove(b),kt.each(kt.grep(b.childNodes),v=>{f.appendChild(v)}),f}}return o},bM=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=c9(e,tE(r),r))!==null&&c!==void 0?c:r;c9(e,u,tE(u,!0))}},br=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";hM(e.select(r,o),c=>{L3(c)&&e.isEditable(c)&&hM(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},vM=(e,n,o)=>{hM(e.childNodes,r=>{L3(r)&&(n(r)&&o(r),r.hasChildNodes()&&vM(r,n,o))})},hY=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},yM=(e,n)=>o=>!!(o&&y(e,o,n)),$v=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),hY(e,r)},y0=ja.generate([{keep:[]},{rename:["name"]},{removed:[]}]),i9=/^(src|href|style)$/,nf=kt.each,ps=m,sc=e=>/^(TR|TH|TD)$/.test(e.nodeName),of=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),CM=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(bn(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return St(r)&&o&&c>=r.data.length&&(r=new Qs(r,e.getBody()).next()||r),St(r)&&!o&&c===0&&(r=new Qs(r,e.getBody()).prev()||r),r},wM=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return sc(e)&&r?e.nodeName==="TR"&&r[o]||r:e},H3=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},SM=(e,n,o,r,c)=>{const u=oe.fromDom(n),f=oe.fromDom(e.create(r,c)),b=o?Ta(u):Pa(u);return Gi(f,b),o?(Ka(u,f),Su(f,u)):(qi(u,f),gs(f,u)),f.dom},xM=(e,n)=>n.links&&e.nodeName==="A",Iv=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=pc(e);he(o)&&r===u.getRoot()&&(!o.list_block||!ps(n,o.list_block))&&ne(Eo(n.childNodes),b=>{pp(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=H3(u,b,f),u.setAttribs(c,ip(e))):c=null}),!(An(o)&&!ps(o.inline,n))&&u.remove(n,!0)},z3=(e,n,o)=>cs(e)?{name:n,value:null}:{name:e,value:l(n,o)},V3=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},EM=(e,n,o,r,c)=>{let u=!1;nf(o.styles,(f,b)=>{const{name:v,value:S}=z3(b,f,r),_=p(S,v);(o.remove_similar||q(S)||!bn(c)||ps(y(e,c,v),_))&&e.setStyle(n,v,""),u=!0}),u&&V3(e,n)},l9=(e,n,o)=>{n==="removeformat"?ne(gM(e.selection),r=>{ne(Nv,c=>e.dom.setStyle(r,c,"")),V3(e.dom,r)}):Pv(e.formatter,n).each(r=>{ne(gM(e.selection),c=>EM(e.dom,c,r,o,null))})},U3=(e,n,o,r,c)=>{const u=e.dom,f=O3(e),b=e.schema;if(Ot(n)&&Ac(b,n.inline)&&ft(b,r)&&r.parentElement===e.getBody())return Iv(e,r,n),y0.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!FE(u,r,n)&&!xM(r,n))return y0.keep();const v=r,S=n.preserve_attributes;if(Ot(n)&&n.remove==="all"&&Ze(S)){const _=ye(u.getAttribs(v),R=>j(S,R.name.toLowerCase()));if(u.removeAllAttribs(v),ne(_,R=>u.setAttrib(v,R.name,R.value)),_.length>0)return y0.rename("span")}if(n.remove!=="all"){EM(u,v,n,o,c),nf(n.attributes,(R,M)=>{const{name:$,value:J}=z3(M,R,o);if(n.remove_similar||q(J)||!bn(c)||ps(u.getAttrib(c,$),J)){if($==="class"){const Y=u.getAttrib(v,$);if(Y){let G="";if(ne(Y.split(/\s+/),xe=>{/mce\-\w+/.test(xe)&&(G+=(G?" ":"")+xe)}),G){u.setAttrib(v,$,G);return}}}if(i9.test($)&&v.removeAttribute("data-mce-"+$),$==="style"&&Ja(["li"])(v)&&u.getStyle(v,"list-style-type")==="none"){v.removeAttribute($),u.setStyle(v,"list-style-type","none");return}$==="class"&&v.removeAttribute("className"),v.removeAttribute($)}}),nf(n.classes,R=>{R=l(R,o),(!bn(c)||u.hasClass(c,R))&&u.removeClass(v,R)});const _=u.getAttribs(v);for(let R=0;R<_.length;R++){const M=_[R].nodeName;if(!f.isAttributeInternal(M))return y0.keep()}}return n.remove!=="none"?(Iv(e,v,n),y0.removed()):y0.keep()},TM=(e,n,o,r,c)=>{let u;return n.parentNode&&ne(O(e.dom,n.parentNode).reverse(),f=>{if(!u&&bn(f)&&f.id!=="_start"&&f.id!=="_end"){const b=bm(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},u9=(e,n,o,r)=>U3(e,n,o,r,r).fold(it(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),it(null)),d9=(e,n,o,r,c,u,f,b)=>{var v,S;let _,R;const M=e.dom;if(o){const $=o.parentNode;for(let J=r.parentNode;J&&J!==$;J=J.parentNode){let Y=M.clone(J,!1);for(let G=0;G<n.length&&(Y=u9(e,n[G],b,Y),Y!==null);G++);Y&&(_&&Y.appendChild(_),R||(R=Y),_=Y)}(!f.mixed||!M.isBlock(o))&&(r=(v=M.split(o,r))!==null&&v!==void 0?v:r),_&&R&&((S=c.parentNode)===null||S===void 0||S.insertBefore(_,c),R.appendChild(c),Ot(f)&&bM(e,f,b,_))}return r},m9=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,v=e.selection,S=Y=>{const G=TM(e,Y,n,o,c);return d9(e,u,G,Y,Y,!0,f,o)},_=Y=>ol(Y)&&bn(Y)&&(Y.id==="_start"||Y.id==="_end"),R=Y=>ce(u,G=>Lv(e,G,o,Y,Y)),M=Y=>{const G=Eo(Y.childNodes),Ee=R(Y)||ce(u,lt=>FE(b,Y,lt)),Re=Y.parentNode;if(!Ee&&_e(Re)&&Qe(f)&&R(Re),f.deep&&G.length)for(let lt=0;lt<G.length;lt++)M(G[lt]);ne(["underline","line-through","overline"],lt=>{bn(Y)&&e.dom.getStyle(Y,"text-decoration")===lt&&Y.parentNode&&T(b,Y.parentNode)===lt&&Lv(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:lt}},void 0,Y)})},$=Y=>{const G=b.get(Y?"_start":"_end");if(G){let xe=G[Y?"firstChild":"lastChild"];return _(xe)&&(xe=xe[Y?"firstChild":"lastChild"]),St(xe)&&xe.data.length===0&&(xe=Y?G.previousSibling||G.nextSibling:G.nextSibling||G.previousSibling),b.remove(G,!0),xe}else return null},J=Y=>{let G,xe,Ee=wa(b,Y,u,{includeTrailingSpace:Y.collapsed});if(f.split){if(Ee=gE(Ee),G=CM(e,Ee,!0),xe=CM(e,Ee),G!==xe){if(G=wM(G,!0),xe=wM(xe,!1),of(b,G,xe)){const Ie=F.from(G.firstChild).getOr(G);S(SM(b,Ie,!0,"span",{id:"_start","data-mce-type":"bookmark"})),$(!0);return}if(of(b,xe,G)){const Ie=F.from(xe.lastChild).getOr(xe);S(SM(b,Ie,!1,"span",{id:"_end","data-mce-type":"bookmark"})),$(!1);return}G=H3(b,G,"span",{id:"_start","data-mce-type":"bookmark"}),xe=H3(b,xe,"span",{id:"_end","data-mce-type":"bookmark"});const Re=b.createRng();Re.setStartAfter(G),Re.setEndBefore(xe),bp(b,Re,Ie=>{ne(Ie,lt=>{!ol(lt)&&!ol(lt.parentNode)&&S(lt)})}),S(G),S(xe),G=$(!0),xe=$()}else G=xe=S(G);Ee.startContainer=G.parentNode?G.parentNode:G,Ee.startOffset=b.nodeIndex(G),Ee.endContainer=xe.parentNode?xe.parentNode:xe,Ee.endOffset=b.nodeIndex(xe)+1}bp(b,Ee,Re=>{ne(Re,M)})};if(r){if(l0(r)){const Y=b.createRng();Y.setStartBefore(r),Y.setEndAfter(r),J(Y)}else J(r);sx(e,n,r,o);return}!v.isCollapsed()||!Ot(f)||jf(e).length?(Ov(e,()=>cC(e,J),Y=>Ot(f)&&M3(e,n,o,Y)),e.nodeChanged()):t9(e,n,o,c),l9(e,n,o),sx(e,n,r,o)},AM=(e,n,o,r,c)=>{(r||e.selection.isEditable())&&m9(e,n,o,r,c)},W3=(e,n,o,r)=>U3(e,n,o,r).fold(()=>F.some(r),c=>F.some(e.dom.rename(r,c)),F.none),Lv=(e,n,o,r,c)=>U3(e,n,o,r,c).fold(Oe,u=>(e.dom.rename(r,u),!0),ot),PE=["fontsize","subscript","superscript"],pY=["strikethrough",...PE],ei=(e,n,o)=>_e(e.matchNode(n.dom,o,{},o==="fontsize")),Z3=(e,n)=>ce(PE,o=>ei(e,n,o)),bY=e=>j(pY,e),f9=(e,n,o,r,c)=>{const u=ic(n,e).filter(Tr);return ko(u,o).map(f=>{const b=u[f],v=r(b),S=[...c(ta(b)).toArray(),..._n(u.slice(0,f),_=>o(_)?c(_).toArray():[ta(_)])];return{container:b,innerWrapper:v,outerWrappers:S}})},g9=(e,n,o,r)=>{ne(wr(e),c=>{Tr(c)&&o(c)&&r(c).isNone()&&ii(c)}),ne(wr(e),c=>gs(n,c)),Su(e,n)},h9=(e,n)=>{if(n.length>0){const o=n[n.length-1];Ka(e,o);const r=Ne(n.slice(0,n.length-1),(c,u)=>(gs(c,u),u),o);gs(r,e)}},p9=(e,n,o,r,c)=>{const u=f=>Qo(oe.fromDom(e.getRoot()),f)||e.isBlock(f.dom);ne(n,f=>{f9(u,f,o,r,c).each(({container:b,innerWrapper:v,outerWrappers:S})=>{e.split(b.dom,f.dom),g9(f,v,o,c),h9(f,S)})})},j3=(e,n,o)=>{const r=b=>_e(bm(e,b.dom,n)),c=b=>{const v=oe.fromTag(Bo(b)),S=bm(e,b.dom,n,{});return _e(S)&&uY(S)&&Fv(e,v.dom,S),v},u=b=>{const v=bm(e,b.dom,n,{});return _e(v)?W3(e,v,{},b.dom).map(oe.fromDom):F.some(b)},f=Tp(e.selection.getRng());p9(e.dom,o,r,c,u),e.selection.setRng(Ap(f))},kC=(e,n)=>_n(n,o=>{const r=X(o,c=>Z3(e,c));return Z3(e,o)?[o,...r]:r}),b9=(e,n,o)=>{if(bY(n)){const r=kC(e.formatter,o);j3(e,"strikethrough",r)}},kM=(e,n)=>{const o=ye(n,r=>Z3(e.formatter,r));j3(e,"strikethrough",o)},_M=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),C0=e=>e.name==="summary",DM=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},q3=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const v=r.nodes[c];v?v.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],v=b.name;if(v in o.attributes.map){const S=r.attributes[v];S?S.nodes.push(o):r.attributes[v]={filter:b,nodes:[o]}}}},OM=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&DM(o,c=>{q3(e,n,c,r)}),r},G3=(e,n)=>{const o=(r,c)=>{To(r,u=>{const f=Eo(u.nodes);ne(u.filter.callbacks,b=>{for(let v=f.length-1;v>=0;v--){const S=f[v];(!(c?S.attr(u.filter.name)!==void 0:S.name===u.filter.name)||gn(S.parent))&&f.splice(v,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},K3=(e,n,o,r={})=>{const c=OM(e,n,o);G3(c,r)},Y3=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new $i("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new $i("#text",3)).value=ir},RM=e=>{var n;return BM(e,"#text")&&((n=e?.firstChild)===null||n===void 0?void 0:n.value)===ir},BM=(e,n)=>{const o=e?.firstChild;return _e(o)&&o===e.lastChild&&o.name===n},v9=(e,n)=>{const o=e.getElementRule(n.name);return o?.paddEmpty===!0},_C=(e,n,o,r)=>r.isEmpty(n,o,c=>v9(e,c)),y9=(e,n)=>_e(e)&&(n(e)||e.name==="br"),C9=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return F.from(n)},vY=e=>{const n=[];for(let o=e.firstChild;_e(o);o=o.walk())n.push(o);return n},X3=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&X3(c,n,o);e.unwrap()}},MM=(e,n,o,r=rt)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=kt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),v=new Set,S=_=>_!==o&&!b[_.name];for(let _=0;_<e.length;_++){const R=e[_];let M,$,J;if(!R.parent||v.has(R))continue;if(c[R.name]&&R.parent.name==="li"){let G=R.next;for(;G&&c[G.name];){G.name="li",v.add(G),R.parent.insert(G,R.parent);G=G.next}R.unwrap();continue}const Y=[R];for(M=R.parent;M&&!n.isValidChild(M.name,R.name)&&S(M);M=M.parent)Y.push(M);if(M&&Y.length>1)if(J3(n,R,M))X3(R,n);else{Y.reverse(),$=Y[0].clone(),r($);let G=$;for(let xe=0;xe<Y.length-1;xe++){n.isValidChild(G.name,Y[xe].name)&&xe>0?(J=Y[xe].clone(),r(J),G.append(J)):J=G;for(let Ee=Y[xe].firstChild;Ee&&Ee!==Y[xe+1];){const Re=Ee.next;J.append(Ee),Ee=Re}G=J}_C(n,u,f,$)?M.insert(R,Y[0],!0):(M.insert($,Y[0],!0),M.insert(R,$)),M=Y[0],(_C(n,u,f,M)||BM(M,"br"))&&M.empty().remove()}else if(R.parent){if(R.name==="li"){let G=R.prev;if(G&&(G.name==="ul"||G.name==="ol")){G.append(R);continue}if(G=R.next,G&&(G.name==="ul"||G.name==="ol")&&G.firstChild){G.insert(R,G.firstChild,!0);continue}const xe=new $i("ul",1);r(xe),R.wrap(xe);continue}if(n.isValidChild(R.parent.name,"div")&&n.isValidChild("div",R.name)){const G=new $i("div",1);r(G),R.wrap(G)}else X3(R,n)}}},yY=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},J3=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&yY(o,"a")?!0:C0(o)&&_M(n)?!(o?.firstChild===n&&o?.lastChild===n):!1:!1,Q3=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},e_=e=>{const n=qe.fromRangeStart(e),o=qe.fromRangeEnd(e),r=e.commonAncestorContainer;return qc(!1,r,o).map(c=>!lm(n,o,r)&&lm(n,c,r)?Q3(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},$E=e=>e.collapsed?e:e_(e),w9=kt.explode,FM=()=>{const e={};return{addFilter:(c,u)=>{ne(w9(c),f=>{no(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>zr(e),removeFilter:(c,u)=>{ne(w9(c),f=>{if(no(e,f))if(_e(u)){const b=e[f],v=ye(b.callbacks,S=>S!==u);v.length>0?b.callbacks=v:delete e[f]}else delete e[f]})}}},S9=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),x9=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),E9=(e,n)=>{ne(n,o=>{e.attr(o,null)})},T9=(e,n,o)=>{e.addNodeFilter("font",r=>{ne(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),v=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),v&&Xu(v).each(S=>{u["font-size"]=o[S-1]}),c.name="span",c.attr("style",n.serialize(u)),E9(c,["color","face","size"])})})},A9=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";ne(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},k9=(e,n,o)=>{var r;const c=Fg();n.convert_fonts_to_spans&&T9(e,c,kt.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),A9(e,o,c)},NM=(e,n,o)=>{n.inline_styles&&k9(e,n,o)},_9=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),D9=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},ih=e=>{try{return decodeURIComponent(e)}catch{return e}},t_=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=ih(r),b=u?D9(f):f;return F.some({type:c[1],data:b,base64Encoded:u})}else return F.none()},n_=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return F.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return F.some(new Blob([c],{type:e}))},O9=e=>new Promise((n,o)=>{t_(e).bind(({type:r,data:c,base64Encoded:u})=>n_(r,c,u)).fold(()=>o("Invalid data URI"),n)}),R9=e=>Kn(e,"blob:")?_9(e):Kn(e,"data:")?O9(e):Promise.reject("Unknown URI format"),o_=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let PM=0;const $M=e=>"blobid"+PM++,s_=(e,n,o)=>t_(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return F.none();{const f=u?r:btoa(r);return o(f,c)}}),IM=(e,n,o)=>{const r=e.create($M(),n,o);return e.add(r),r},LM=(e,n,o=!1)=>s_(n,o,(r,c)=>F.from(e.getByData(r,c)).orThunk(()=>n_(c,r).map(u=>IM(e,u,r)))),B9=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Kn(n,"blob:")){const r=e.getByUri(n);return _e(r)?Promise.resolve(r):R9(n).then(c=>o_(c).then(u=>s_(u,!1,f=>F.some(IM(e,c,f))).getOrThunk(o)))}else return Kn(n,"data:")?LM(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},M9=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,F9=e=>F.from(e.match(M9)).bind(n=>an(n,1)).map(n=>Kn(n,"www.")?n.substring(4):n),kp=(e,n)=>{F.from(e.attr("src")).bind(F9).forall(o=>!j(n,o))&&e.attr("sandbox","")},IE=(e,n)=>Kn(e,`${n}/`),N9=e=>Zn(e)?"iframe":IE(e,"image")?"img":IE(e,"video")?"video":IE(e,"audio")?"audio":"iframe",P9=({type:e,src:n,width:o,height:r}={},c,u)=>{const f=N9(e),b=new $i(f,1);return b.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&c&&kp(b,u),b},r_=e=>_e(e.attr("data-mce-bogus")),$9=e=>e.attr("src")===Ho.transparentSrc||_e(e.attr("data-mce-placeholder")),a_=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");$9(c)||r_(c)||gn(u)||LM(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>ne(c,r))}},HM=(e,n)=>{var o,r;const c=e.schema;e.addAttributeFilter("href",v=>{let S=v.length;const _=M=>M.split(" ").filter(J=>J.length>0).concat(["noopener"]).sort().join(" "),R=M=>{const $=M?kt.trim(M):"";return/\b(noopener)\b/g.test($)?$:_($)};if(!n.allow_unsafe_link_target)for(;S--;){const M=v[S];M.name==="a"&&M.attr("target")==="_blank"&&M.attr("rel",R(M.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",v=>{let S=v.length,_,R,M,$;for(;S--;)if($=v[S],$.name==="a"&&$.firstChild&&!$.attr("href"))for(M=$.parent,_=$.lastChild;_&&M;)R=_.prev,M.insert(_,$),_=R}),n.fix_list_elements&&e.addNodeFilter("ul,ol",v=>{let S=v.length,_,R;for(;S--;)if(_=v[S],R=_.parent,R&&(R.name==="ul"||R.name==="ol"))if(_.prev&&_.prev.name==="li")_.prev.append(_);else{const M=new $i("li",1);M.attr("style","list-style-type: none"),_.wrap(M)}});const u=c.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",v=>{var S;let _=v.length;for(;_--;){const R=v[_],M=(S=R.attr("class"))!==null&&S!==void 0?S:"",$=kt.explode(M," ");let J="";for(let Y=0;Y<$.length;Y++){const G=$[Y];let xe=!1,Ee=u["*"];Ee&&Ee[G]&&(xe=!0),Ee=u[R.name],!xe&&Ee&&Ee[G]&&(xe=!0),xe&&(J&&(J+=" "),J+=G)}J.length||(J=null),R.attr("class",J)}}),a_(e,n);const f=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,b=Xs((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",v=>ne(v,S=>{S.replace(P9({type:S.attr("type"),src:S.name==="object"?S.attr("data"):S.attr("src"),width:S.attr("width"),height:S.attr("height")},f,b))})),f&&e.addNodeFilter("iframe",v=>ne(v,S=>kp(S,b)))};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:zM,setPrototypeOf:VM,isFrozen:LE,getPrototypeOf:I9,getOwnPropertyDescriptor:UM}=Object;let{freeze:ou,seal:Ad,create:c_}=Object,{apply:HE,construct:i_}=typeof Reflect<"u"&&Reflect;ou||(ou=function(n){return n}),Ad||(Ad=function(n){return n}),HE||(HE=function(n,o,r){return n.apply(o,r)}),i_||(i_=function(n,o){return new n(...o)});const DC=ru(Array.prototype.forEach),L9=ru(Array.prototype.lastIndexOf),WM=ru(Array.prototype.pop),OC=ru(Array.prototype.push),su=ru(Array.prototype.splice),RC=ru(String.prototype.toLowerCase),l_=ru(String.prototype.toString),u_=ru(String.prototype.match),BC=ru(String.prototype.replace),H9=ru(String.prototype.indexOf),z9=ru(String.prototype.trim),kl=ru(Object.prototype.hasOwnProperty),ti=ru(RegExp.prototype.test),zE=V9(TypeError);function ru(e){return function(n){n instanceof RegExp&&(n.lastIndex=0);for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return HE(e,n,r)}}function V9(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i_(e,o)}}function As(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:RC;VM&&VM(e,null);let r=n.length;for(;r--;){let c=n[r];if(typeof c=="string"){const u=o(c);u!==c&&(LE(n)||(n[r]=u),c=u)}e[c]=!0}return e}function U9(e){for(let n=0;n<e.length;n++)kl(e,n)||(e[n]=null);return e}function lh(e){const n=c_(null);for(const[o,r]of zM(e))kl(e,o)&&(Array.isArray(r)?n[o]=U9(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=lh(r):n[o]=r);return n}function _p(e,n){for(;e!==null;){const r=UM(e,n);if(r){if(r.get)return ru(r.get);if(typeof r.value=="function")return ru(r.value)}e=I9(e)}function o(){return null}return o}const ZM=ou(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),MC=ou(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),FC=ou(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),jM=ou(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),d_=ou(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),CY=ou(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),uh=ou(["#text"]),qM=ou(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),m_=ou(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),GM=ou(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Io=ou(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),W9=Ad(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Z9=Ad(/<%[\w\W]*|[\w\W]*%>/gm),KM=Ad(/\$\{[\w\W]*/gm),j9=Ad(/^data-[\-\w.\u00B7-\uFFFF]+$/),q9=Ad(/^aria-[\-\w]+$/),qr=Ad(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G9=Ad(/^(?:\w+script|data):/i),K9=Ad(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),YM=Ad(/^html$/i),Y9=Ad(/^[a-z][.\w]*(-[.\w]+)+$/i);var kr=Object.freeze({__proto__:null,ARIA_ATTR:q9,ATTR_WHITESPACE:K9,CUSTOM_ELEMENT:Y9,DATA_ATTR:j9,DOCTYPE_NAME:YM,ERB_EXPR:Z9,IS_ALLOWED_URI:qr,IS_SCRIPT_OR_DATA:G9,MUSTACHE_EXPR:W9,TMPLIT_EXPR:KM});const Hv={element:1,text:3,progressingInstruction:7,comment:8,document:9},XM=function(){return typeof window>"u"?null:window},X9=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}},f_=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function JM(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:XM();const n=ss=>JM(ss);if(n.version="3.2.6",n.removed=[],!e||!e.document||e.document.nodeType!==Hv.document||!e.Element)return n.isSupported=!1,n;let{document:o}=e;const r=o,c=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:v,NodeFilter:S,NamedNodeMap:_=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:R,DOMParser:M,trustedTypes:$}=e,J=v.prototype,Y=_p(J,"cloneNode"),G=_p(J,"remove"),xe=_p(J,"nextSibling"),Ee=_p(J,"childNodes"),Re=_p(J,"parentNode");if(typeof f=="function"){const ss=o.createElement("template");ss.content&&ss.content.ownerDocument&&(o=ss.content.ownerDocument)}let Ie,lt="";const{implementation:Pt,createNodeIterator:Et,createDocumentFragment:et,getElementsByTagName:De}=o,{importNode:te}=r;let Le=f_();n.isSupported=typeof zM=="function"&&typeof Re=="function"&&Pt&&Pt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:xt,ERB_EXPR:Tn,TMPLIT_EXPR:lo,DATA_ATTR:Zo,ARIA_ATTR:ds,IS_SCRIPT_OR_DATA:_r,ATTR_WHITESPACE:Dr,CUSTOM_ELEMENT:Oc}=kr;let{IS_ALLOWED_URI:Bt}=kr,kn=null;const vs=As({},[...ZM,...MC,...FC,...d_,...uh]);let $s=null;const xn=As({},[...qM,...m_,...GM,...Io]);let Ft=Object.seal(c_(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Qt=null,eo=null,uo=!0,Us=!0,ar=!1,Pd=!0,oi=!1,df=!0,Am=!1,Dl=!1,fu=!1,mf=!1,Ey=!1,Wn=!1,ys=!0,la=!1;const bc="user-content-";let Rc=!0,rc=!1,Kr={},Yr=null;const gu=As({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let rg=null;const qp=As({},["audio","video","img","source","image","track"]);let Eh=null;const lk=As({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),uk="http://www.w3.org/1998/Math/MathML",eS="http://www.w3.org/2000/svg",ag="http://www.w3.org/1999/xhtml";let Ty=ag,b5=!1,dk=null;const ZY=As({},[uk,eS,ag],l_);let v5=As({},["mi","mo","mn","ms","mtext"]),y5=As({},["annotation-xml"]);const jY=As({},["title","style","font","a","script"]);let mk=null;const Ay=["application/xhtml+xml","text/html"],bI="text/html";let Pe=null,We=null;const Kt=o.createElement("form"),It=function(je){return je instanceof RegExp||je instanceof Function},oo=function(){let je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(We&&We===je)){if((!je||typeof je!="object")&&(je={}),je=lh(je),mk=Ay.indexOf(je.PARSER_MEDIA_TYPE)===-1?bI:je.PARSER_MEDIA_TYPE,Pe=mk==="application/xhtml+xml"?l_:RC,kn=kl(je,"ALLOWED_TAGS")?As({},je.ALLOWED_TAGS,Pe):vs,$s=kl(je,"ALLOWED_ATTR")?As({},je.ALLOWED_ATTR,Pe):xn,dk=kl(je,"ALLOWED_NAMESPACES")?As({},je.ALLOWED_NAMESPACES,l_):ZY,Eh=kl(je,"ADD_URI_SAFE_ATTR")?As(lh(lk),je.ADD_URI_SAFE_ATTR,Pe):lk,rg=kl(je,"ADD_DATA_URI_TAGS")?As(lh(qp),je.ADD_DATA_URI_TAGS,Pe):qp,Yr=kl(je,"FORBID_CONTENTS")?As({},je.FORBID_CONTENTS,Pe):gu,Qt=kl(je,"FORBID_TAGS")?As({},je.FORBID_TAGS,Pe):lh({}),eo=kl(je,"FORBID_ATTR")?As({},je.FORBID_ATTR,Pe):lh({}),Kr=kl(je,"USE_PROFILES")?je.USE_PROFILES:!1,uo=je.ALLOW_ARIA_ATTR!==!1,Us=je.ALLOW_DATA_ATTR!==!1,ar=je.ALLOW_UNKNOWN_PROTOCOLS||!1,Pd=je.ALLOW_SELF_CLOSE_IN_ATTR!==!1,oi=je.SAFE_FOR_TEMPLATES||!1,df=je.SAFE_FOR_XML!==!1,Am=je.WHOLE_DOCUMENT||!1,mf=je.RETURN_DOM||!1,Ey=je.RETURN_DOM_FRAGMENT||!1,Wn=je.RETURN_TRUSTED_TYPE||!1,fu=je.FORCE_BODY||!1,ys=je.SANITIZE_DOM!==!1,la=je.SANITIZE_NAMED_PROPS||!1,Rc=je.KEEP_CONTENT!==!1,rc=je.IN_PLACE||!1,Bt=je.ALLOWED_URI_REGEXP||qr,Ty=je.NAMESPACE||ag,v5=je.MATHML_TEXT_INTEGRATION_POINTS||v5,y5=je.HTML_INTEGRATION_POINTS||y5,Ft=je.CUSTOM_ELEMENT_HANDLING||{},je.CUSTOM_ELEMENT_HANDLING&&It(je.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ft.tagNameCheck=je.CUSTOM_ELEMENT_HANDLING.tagNameCheck),je.CUSTOM_ELEMENT_HANDLING&&It(je.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ft.attributeNameCheck=je.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),je.CUSTOM_ELEMENT_HANDLING&&typeof je.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ft.allowCustomizedBuiltInElements=je.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),oi&&(Us=!1),Ey&&(mf=!0),Kr&&(kn=As({},uh),$s=[],Kr.html===!0&&(As(kn,ZM),As($s,qM)),Kr.svg===!0&&(As(kn,MC),As($s,m_),As($s,Io)),Kr.svgFilters===!0&&(As(kn,FC),As($s,m_),As($s,Io)),Kr.mathMl===!0&&(As(kn,d_),As($s,GM),As($s,Io))),je.ADD_TAGS&&(kn===vs&&(kn=lh(kn)),As(kn,je.ADD_TAGS,Pe)),je.ADD_ATTR&&($s===xn&&($s=lh($s)),As($s,je.ADD_ATTR,Pe)),je.ADD_URI_SAFE_ATTR&&As(Eh,je.ADD_URI_SAFE_ATTR,Pe),je.FORBID_CONTENTS&&(Yr===gu&&(Yr=lh(Yr)),As(Yr,je.FORBID_CONTENTS,Pe)),Rc&&(kn["#text"]=!0),Am&&As(kn,["html","head","body"]),kn.table&&(As(kn,["tbody"]),delete Qt.tbody),je.TRUSTED_TYPES_POLICY){if(typeof je.TRUSTED_TYPES_POLICY.createHTML!="function")throw zE('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof je.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw zE('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ie=je.TRUSTED_TYPES_POLICY,lt=Ie.createHTML("")}else Ie===void 0&&(Ie=X9($,c)),Ie!==null&&typeof lt=="string"&&(lt=Ie.createHTML(""));ou&&ou(je),We=je}},ks=As({},[...MC,...FC,...jM]),ua=As({},[...d_,...CY]),Th=function(je){let Nn=Re(je);(!Nn||!Nn.tagName)&&(Nn={namespaceURI:Ty,tagName:"template"});const jo=RC(je.tagName),vc=RC(Nn.tagName);return dk[je.namespaceURI]?je.namespaceURI===eS?Nn.namespaceURI===ag?jo==="svg":Nn.namespaceURI===uk?jo==="svg"&&(vc==="annotation-xml"||v5[vc]):!!ks[jo]:je.namespaceURI===uk?Nn.namespaceURI===ag?jo==="math":Nn.namespaceURI===eS?jo==="math"&&y5[vc]:!!ua[jo]:je.namespaceURI===ag?Nn.namespaceURI===eS&&!y5[vc]||Nn.namespaceURI===uk&&!v5[vc]?!1:!ua[jo]&&(jY[jo]||!ks[jo]):!!(mk==="application/xhtml+xml"&&dk[je.namespaceURI]):!1},cg=function(je){OC(n.removed,{element:je});try{Re(je).removeChild(je)}catch{G(je)}},fk=function(je,Nn){try{OC(n.removed,{attribute:Nn.getAttributeNode(je),from:Nn})}catch{OC(n.removed,{attribute:null,from:Nn})}if(Nn.removeAttribute(je),je==="is")if(mf||Ey)try{cg(Nn)}catch{}else try{Nn.setAttribute(je,"")}catch{}},qY=function(je){let Nn=null,jo=null;if(fu)je="<remove></remove>"+je;else{const il=u_(je,/^[\r\n\t ]+/);jo=il&&il[0]}mk==="application/xhtml+xml"&&Ty===ag&&(je='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+je+"</body></html>");const vc=Ie?Ie.createHTML(je):je;if(Ty===ag)try{Nn=new M().parseFromString(vc,mk)}catch{}if(!Nn||!Nn.documentElement){Nn=Pt.createDocument(Ty,"template",null);try{Nn.documentElement.innerHTML=b5?lt:vc}catch{}}const Gu=Nn.body||Nn.documentElement;return je&&jo&&Gu.insertBefore(o.createTextNode(jo),Gu.childNodes[0]||null),Ty===ag?De.call(Nn,Am?"html":"body")[0]:Am?Nn.documentElement:Gu},GY=function(je){return Et.call(je.ownerDocument||je,je,S.SHOW_ELEMENT|S.SHOW_COMMENT|S.SHOW_TEXT|S.SHOW_PROCESSING_INSTRUCTION|S.SHOW_CDATA_SECTION,null)},IK=function(je){return je instanceof R&&(typeof je.nodeName!="string"||typeof je.textContent!="string"||typeof je.removeChild!="function"||!(je.attributes instanceof _)||typeof je.removeAttribute!="function"||typeof je.setAttribute!="function"||typeof je.namespaceURI!="string"||typeof je.insertBefore!="function"||typeof je.hasChildNodes!="function")},KY=function(je){return typeof b=="function"&&je instanceof b};function X0(ss,je,Nn){DC(ss,jo=>{jo.call(n,je,Nn,We)})}const YY=function(je){let Nn=null;if(X0(Le.beforeSanitizeElements,je,null),IK(je))return cg(je),!0;const jo=Pe(je.nodeName);if(X0(Le.uponSanitizeElement,je,{tagName:jo,allowedTags:kn}),df&&je.hasChildNodes()&&!KY(je.firstElementChild)&&ti(/<[/\w!]/g,je.innerHTML)&&ti(/<[/\w!]/g,je.textContent)||je.nodeType===Hv.progressingInstruction||df&&je.nodeType===Hv.comment&&ti(/<[/\w]/g,je.data))return cg(je),!0;if(!kn[jo]||Qt[jo]){if(!Qt[jo]&&JY(jo)&&(Ft.tagNameCheck instanceof RegExp&&ti(Ft.tagNameCheck,jo)||Ft.tagNameCheck instanceof Function&&Ft.tagNameCheck(jo)))return!1;if(Rc&&!Yr[jo]){const vc=Re(je)||je.parentNode,Gu=Ee(je)||je.childNodes;if(Gu&&vc){const il=Gu.length;for(let km=il-1;km>=0;--km){const J0=Y(Gu[km],!0);J0.__removalCount=(je.__removalCount||0)+1,vc.insertBefore(J0,xe(je))}}}return cg(je),!0}return je instanceof v&&!Th(je)||(jo==="noscript"||jo==="noembed"||jo==="noframes")&&ti(/<\/no(script|embed|frames)/i,je.innerHTML)?(cg(je),!0):(oi&&je.nodeType===Hv.text&&(Nn=je.textContent,DC([xt,Tn,lo],vc=>{Nn=BC(Nn,vc," ")}),je.textContent!==Nn&&(OC(n.removed,{element:je.cloneNode()}),je.textContent=Nn)),X0(Le.afterSanitizeElements,je,null),!1)},XY=function(je,Nn,jo){if(ys&&(Nn==="id"||Nn==="name")&&(jo in o||jo in Kt))return!1;if(!(Us&&!eo[Nn]&&ti(Zo,Nn))){if(!(uo&&ti(ds,Nn))){if(!$s[Nn]||eo[Nn]){if(!(JY(je)&&(Ft.tagNameCheck instanceof RegExp&&ti(Ft.tagNameCheck,je)||Ft.tagNameCheck instanceof Function&&Ft.tagNameCheck(je))&&(Ft.attributeNameCheck instanceof RegExp&&ti(Ft.attributeNameCheck,Nn)||Ft.attributeNameCheck instanceof Function&&Ft.attributeNameCheck(Nn))||Nn==="is"&&Ft.allowCustomizedBuiltInElements&&(Ft.tagNameCheck instanceof RegExp&&ti(Ft.tagNameCheck,jo)||Ft.tagNameCheck instanceof Function&&Ft.tagNameCheck(jo))))return!1}else if(!Eh[Nn]){if(!ti(Bt,BC(jo,Dr,""))){if(!((Nn==="src"||Nn==="xlink:href"||Nn==="href")&&je!=="script"&&H9(jo,"data:")===0&&rg[je])){if(!(ar&&!ti(_r,BC(jo,Dr,"")))){if(jo)return!1}}}}}}return!0},JY=function(je){return je!=="annotation-xml"&&u_(je,Oc)},QY=function(je){X0(Le.beforeSanitizeAttributes,je,null);const{attributes:Nn}=je;if(!Nn||IK(je))return;const jo={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$s,forceKeepAttr:void 0};let vc=Nn.length;for(;vc--;){const Gu=Nn[vc],{name:il,namespaceURI:km,value:J0}=Gu,C5=Pe(il),LK=J0;let Ku=il==="value"?LK:z9(LK);if(jo.attrName=C5,jo.attrValue=Ku,jo.keepAttr=!0,jo.forceKeepAttr=void 0,X0(Le.uponSanitizeAttribute,je,jo),Ku=jo.attrValue,la&&(C5==="id"||C5==="name")&&(fk(il,je),Ku=bc+Ku),df&&ti(/((--!?|])>)|<\/(style|title)/i,Ku)){fk(il,je);continue}if(jo.forceKeepAttr)continue;if(!jo.keepAttr){fk(il,je);continue}if(!Pd&&ti(/\/>/i,Ku)){fk(il,je);continue}oi&&DC([xt,Tn,lo],tX=>{Ku=BC(Ku,tX," ")});const eX=Pe(je.nodeName);if(!XY(eX,C5,Ku)){fk(il,je);continue}if(Ie&&typeof $=="object"&&typeof $.getAttributeType=="function"&&!km)switch($.getAttributeType(eX,C5)){case"TrustedHTML":{Ku=Ie.createHTML(Ku);break}case"TrustedScriptURL":{Ku=Ie.createScriptURL(Ku);break}}if(Ku!==LK)try{km?je.setAttributeNS(km,il,Ku):je.setAttribute(il,Ku),IK(je)?cg(je):WM(n.removed)}catch{fk(il,je)}}X0(Le.afterSanitizeAttributes,je,null)},jJ=function ss(je){let Nn=null;const jo=GY(je);for(X0(Le.beforeSanitizeShadowDOM,je,null);Nn=jo.nextNode();)X0(Le.uponSanitizeShadowNode,Nn,null),YY(Nn),QY(Nn),Nn.content instanceof u&&ss(Nn.content);X0(Le.afterSanitizeShadowDOM,je,null)};return n.sanitize=function(ss){let je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Nn=null,jo=null,vc=null,Gu=null;if(b5=!ss,b5&&(ss="<!-->"),typeof ss!="string"&&!KY(ss))if(typeof ss.toString=="function"){if(ss=ss.toString(),typeof ss!="string")throw zE("dirty is not a string, aborting")}else throw zE("toString is not a function");if(!n.isSupported)return ss;if(Dl||oo(je),n.removed=[],typeof ss=="string"&&(rc=!1),rc){if(ss.nodeName){const J0=Pe(ss.nodeName);if(!kn[J0]||Qt[J0])throw zE("root node is forbidden and cannot be sanitized in-place")}}else if(ss instanceof b)Nn=qY("<!---->"),jo=Nn.ownerDocument.importNode(ss,!0),jo.nodeType===Hv.element&&jo.nodeName==="BODY"||jo.nodeName==="HTML"?Nn=jo:Nn.appendChild(jo);else{if(!mf&&!oi&&!Am&&ss.indexOf("<")===-1)return Ie&&Wn?Ie.createHTML(ss):ss;if(Nn=qY(ss),!Nn)return mf?null:Wn?lt:""}Nn&&fu&&cg(Nn.firstChild);const il=GY(rc?ss:Nn);for(;vc=il.nextNode();)YY(vc),QY(vc),vc.content instanceof u&&jJ(vc.content);if(rc)return ss;if(mf){if(Ey)for(Gu=et.call(Nn.ownerDocument);Nn.firstChild;)Gu.appendChild(Nn.firstChild);else Gu=Nn;return($s.shadowroot||$s.shadowrootmode)&&(Gu=te.call(r,Gu,!0)),Gu}let km=Am?Nn.outerHTML:Nn.innerHTML;return Am&&kn["!doctype"]&&Nn.ownerDocument&&Nn.ownerDocument.doctype&&Nn.ownerDocument.doctype.name&&ti(YM,Nn.ownerDocument.doctype.name)&&(km="<!DOCTYPE "+Nn.ownerDocument.doctype.name+`>
`+km),oi&&DC([xt,Tn,lo],J0=>{km=BC(km,J0," ")}),Ie&&Wn?Ie.createHTML(km):km},n.setConfig=function(){let ss=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};oo(ss),Dl=!0},n.clearConfig=function(){We=null,Dl=!1},n.isValidAttribute=function(ss,je,Nn){We||oo({});const jo=Pe(ss),vc=Pe(je);return XY(jo,vc,Nn)},n.addHook=function(ss,je){typeof je=="function"&&OC(Le[ss],je)},n.removeHook=function(ss,je){if(je!==void 0){const Nn=L9(Le[ss],je);return Nn===-1?void 0:su(Le[ss],Nn,1)[0]}return WM(Le[ss])},n.removeHooks=function(ss){Le[ss]=[]},n.removeAllHooks=function(){Le=f_()},n}var sf=JM();const VE=kt.each,J9=kt.trim,Q9=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],g_={ftp:21,http:80,https:443,mailto:25},eH=["img","video"],tH=(e,n)=>_e(e)?!e:_e(n)?!j(eH,n):!0,Va=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},QM=(e,n,o)=>{const r=Va(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?tH(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class wi{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=Ag.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!QM(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=J9(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new wi(document.location.href).directory;if(r?.protocol==="")n="//mce_host"+c.toAbsPath(b,n);else{const v=/([^#?]*)([#?]?.*)/.exec(n);v&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,v[1])+v[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&VE(Q9,(b,v)=>{let S=f[v];S&&(S=S.replace(/\(mce_at\)/g,"@@")),c[b]=S}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new wi(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new wi(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?g_[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),v=o.split("/");if(b.length>=v.length){for(u=0,f=b.length;u<f;u++)if(u>=v.length||b[u]!==v[u]){r=u+1;break}}if(b.length<v.length){for(u=0,f=v.length;u<f;u++)if(u>=b.length||b[u]!==v[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=v.length;u<f;u++)u!==r-1?c+="/"+v[u]:c+=v[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];VE(u,R=>{R&&b.push(R)});const v=[];for(let R=f.length-1;R>=0;R--)if(!(f[R].length===0||f[R]===".")){if(f[R]===".."){r++;continue}if(r>0){r--;continue}v.push(f[R])}const S=b.length-r;let _;return S<=0?_=Ln(v).join("/"):_=b.slice(0,S).join("/")+"/"+Ln(v).join("/"),_.indexOf("/")!==0&&(_="/"+_),c&&_.lastIndexOf("/")!==_.length-1&&(_+=c),_}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const nH=kt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),h_="data-mce-type";let eF=0;const tF=(e,n,o,r,c)=>{var u,f,b,v;const S=n.validate,_=o.getSpecialElements();e.nodeType===ci&&(!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue),n.sanitize&&n.allow_html_in_comments&&ae(e.nodeValue)&&(e.nodeValue=S9(e.nodeValue)));const R=(f=c?.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){_e(c)&&(c.allowedTags[R]=!0);return}if(e.nodeType!==fg||R==="body")return;const M=oe.fromDom(e),$=lr(M,h_),J=nr(M,"data-mce-bogus");if(!$&&ae(J)){J==="all"?Ws(M):ii(M);return}const Y=o.getElementRule(R);if(S&&!Y){no(_,R)?Ws(M):ii(M);return}else _e(c)&&(c.allowedTags[R]=!0);if(S&&Y&&!$){if(ne((b=Y.attributesForced)!==null&&b!==void 0?b:[],G=>{Cr(M,G.name,G.value==="{$uid}"?`mce_${eF++}`:G.value)}),ne((v=Y.attributesDefault)!==null&&v!==void 0?v:[],G=>{lr(M,G.name)||Cr(M,G.name,G.value==="{$uid}"?`mce_${eF++}`:G.value)}),Y.attributesRequired&&!ce(Y.attributesRequired,G=>lr(M,G))){ii(M);return}if(Y.removeEmptyAttrs&&vf(M)){ii(M);return}Y.outputName&&Y.outputName!==R&&od(M,Y.outputName)}},oH=(e,n,o,r,c)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=nF(n,o,r,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,sF(f,o)&&(c.attrValue=f),n.allow_svg_data_urls&&Kn(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):oF(e,f)&&(c.forceKeepAttr=!0)},nF=(e,n,o,r,c,u)=>o!=="html"&&!gi(r)?!0:!(c in nH&&QM(e,u,r))&&(!e.validate||n.isValid(r,c)||Kn(c,"data-")||Kn(c,"aria-")),oF=(e,n)=>e.hasAttribute(h_)&&(n==="id"||n==="class"||n==="style"),sF=(e,n)=>e in n.getBoolAttrs(),sH=(e,n,o,r)=>{const{attributes:c}=e;for(let u=c.length-1;u>=0;u--){const f=c[u],b=f.name,v=f.value;!nF(n,o,r,e.tagName.toLowerCase(),b,v)&&!oF(e,b)?e.removeAttribute(b):sF(b,o)&&e.setAttribute(b,b)}},UE=(e,n,o)=>{const r=sf();return r.addHook("uponSanitizeElement",(c,u)=>{tF(c,e,n,o.track(c),u)}),r.addHook("uponSanitizeAttribute",(c,u)=>{oH(c,e,n,o.current(),u)}),r},rH=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body","html"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},aH=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};sf().sanitize(e,o)},wY=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=sf(),c=n.allow_mathml_annotation_encodings,u=Ze(c)&&c.length>0,f=v=>{const S=v.getAttribute("encoding");return u&&ae(S)&&j(c,S)},b=(v,S)=>u&&S==="semantics"?F.some(!0):S==="annotation"?F.some(bn(v)&&f(v)):Ze(n.extended_mathml_elements)&&n.extended_mathml_elements.includes(S)?F.from(!0):F.none();r.addHook("uponSanitizeElement",(v,S)=>{var _;const R=(_=S.tagName)!==null&&_!==void 0?_:v.nodeName.toLowerCase();b(v,R).each($=>{S.allowedTags[R]=$,!$&&n.sanitize&&bn(v)&&v.remove()})}),r.addHook("uponSanitizeAttribute",(v,S)=>{Ze(n.extended_mathml_attributes)&&n.extended_mathml_attributes.includes(S.attrName)&&(S.forceKeepAttr=!0)}),r.sanitize(e,o)},NC=e=>n=>{const o=dS(n);if(o==="svg")aH(n);else if(o==="math")wY(n,e);else throw new Error("Not a namespace element")},cH=(e,n)=>{const o=bb();if(e.sanitize){const r=UE(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,rH(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:NC(e)}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let v;for(;v=b.nextNode();){const S=o.track(v);tF(v,e,n,S),bn(v)&&sH(v,e,n,S)}o.reset()},sanitizeNamespaceElement:rt}},WE=["script","style","template","param"],rF=kt.makeMap,aF=kt.extend,cF=(e,n,o,r,c)=>{const u=e.name,f=u in o&&u!=="title"&&u!=="textarea"&&u!=="noscript",b=n.childNodes;for(let v=0,S=b.length;v<S;v++){const _=b[v],R=new $i(_.nodeName.toLowerCase(),_.nodeType);if(bn(_)){const M=_.attributes;for(let $=0,J=M.length;$<J;$++){const Y=M[$];R.attr(Y.name,Y.value)}gi(R.name)&&(r(_),R.value=_.innerHTML)}else St(_)?(R.value=_.data,f&&(R.raw=!0)):$r(_)?R.value=c?x9(_.data):_.data:(Vy(_)||Uy(_))&&(R.value=_.data);if(gb(_)){const M=$i.create("#text");M.value=_.innerHTML,M.raw=!0,R.append(M)}else gi(R.name)||cF(R,_,o,r,c);e.append(R)}},iH=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;ne(n,b=>b(f)),gn(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];ne(o,f=>f(u))}},w0=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=aF(rF(WE),n.getBlockElements()),v=CS(n),S=/[ \t\r\n]+/g,_=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,M=Ee=>{let Re=Ee.parent;for(;_e(Re);){if(Re.name in f)return!0;Re=Re.parent}return!1},$=Ee=>{let Re=Ee;for(;_e(Re);){if(Re.name in v)return _C(n,u,f,Re);Re=Re.parent}return!1},J=Ee=>Ee.name in b||v1(n,Ee)||gi(Ee.name)&&Ee.parent===e,Y=(Ee,Re)=>{const Ie=Re?Ee.prev:Ee.next;return _e(Ie)||gn(Ee.parent)?!1:J(Ee.parent)&&(Ee.parent!==e||r.isRootContent===!0)};return[Ee=>{var Re;if(Ee.type===3&&!M(Ee)){let Ie=(Re=Ee.value)!==null&&Re!==void 0?Re:"";Ie=Ie.replace(S," "),(y9(Ee.prev,J)||Y(Ee,!0))&&(Ie=Ie.replace(_,"")),Ie.length===0||Ie===" "&&Ee.prev&&Ee.prev.type===ci&&Ee.next&&Ee.next.type===ci?Ee.remove():Ee.value=Ie}},Ee=>{var Re;if(Ee.type===1){const Ie=n.getElementRule(Ee.name);if(c&&Ie){const lt=_C(n,u,f,Ee);Ie.paddInEmptyBlock&&lt&&$(Ee)?Y3(o,r,J,Ee):Ie.removeEmpty&&lt?J(Ee)?Ee.remove():Ee.unwrap():Ie.paddEmpty&&(lt||RM(Ee))&&Y3(o,r,J,Ee)}}else if(Ee.type===3&&!M(Ee)){let Ie=(Re=Ee.value)!==null&&Re!==void 0?Re:"";(Ee.next&&J(Ee.next)||Y(Ee,!1))&&(Ie=Ie.replace(R,"")),Ie.length===0?Ee.remove():Ee.value=Ie}}]},S0=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},PC=' xmlns="http://www.w3.org/1999/xhtml"',dh=(e={},n=Fu())=>{const o=FM(),r=FM(),c={validate:!0,root_name:"body",sanitize:!0,allow_html_in_comments:!1,...e},u=new DOMParser,f=cH(c,n),b=(Re,Ie,lt="html",Pt=!1)=>{const Et=lt==="xhtml",et=Et?"application/xhtml+xml":"text/html",De=no(n.getSpecialElements(),Ie.toLowerCase()),te=De?`<${Ie}>${Re}</${Ie}>`:Re,Le=()=>/^[\s]*<head/i.test(Re)||/^[\s]*<html/i.test(Re)||/^[\s]*<!DOCTYPE/i.test(Re)?`<html${Et?PC:""}>${te}</html>`:Et?`<html${PC}><head></head><body>${te}</body></html>`:`<body>${te}</body>`,xt=u.parseFromString(Le(),et),Tn=Pt?xt.documentElement:xt.body;return f.sanitizeHtmlElement(Tn,et),De?Tn.firstChild:Tn},v=o.addFilter,S=o.getFilters,_=o.removeFilter,R=r.addFilter,M=r.getFilters,$=r.removeFilter,J=(Re,Ie)=>{J3(n,Re)&&Ie.push(Re)},Y=(Re,Ie)=>{const lt=ae(Ie.attr(h_)),Pt=Ie.type===1&&!no(Re,Ie.name)&&!v1(n,Ie)&&!gi(Ie.name);return Ie.type===3||Pt&&!lt},G=(Re,Ie)=>{const lt=aF(rF(WE),n.getBlockElements()),Pt=/^[ \t\r\n]+/,Et=/[ \t\r\n]+$/;let et=Re.firstChild,De=null;const te=Le=>{var xt,Tn;Le&&(et=Le.firstChild,et&&et.type===3&&(et.value=(xt=et.value)===null||xt===void 0?void 0:xt.replace(Pt,"")),et=Le.lastChild,et&&et.type===3&&(et.value=(Tn=et.value)===null||Tn===void 0?void 0:Tn.replace(Et,"")))};if(n.isValidChild(Re.name,Ie.toLowerCase())){for(;et;){const Le=et.next;Y(lt,et)?(De||(De=new $i(Ie,1),De.attr(c.forced_root_block_attrs),Re.insert(De,et)),De.append(et)):(te(De),De=null),et=Le}te(De)}},Ee={schema:n,addAttributeFilter:R,getAttributeFilters:M,removeAttributeFilter:$,addNodeFilter:v,getNodeFilters:S,removeNodeFilter:_,parse:(Re,Ie={})=>{var lt,Pt;const Et=c.validate,et=((lt=Ie.context)!==null&&lt!==void 0?lt:c.root_name)==="#document",De=(Pt=Ie.context)!==null&&Pt!==void 0?Pt:et?"html":c.root_name,te=b(Re,De,Ie.format,et);Df(n,te);const Le=new $i(De,11);cF(Le,te,n.getSpecialElements(),f.sanitizeNamespaceElement,c.sanitize&&c.allow_html_in_comments),te.innerHTML="";const[xt,Tn]=w0(Le,n,c,Ie),lo=[],Zo=Et?Oc=>J(Oc,lo):rt,ds={nodes:{},attributes:{}},_r=Oc=>q3(S(),M(),Oc,ds);iH(Le,[xt,_r],[Tn,Zo]),lo.reverse(),Et&&lo.length>0&&(Ie.context?Ie.invalid=!0:MM(lo,n,Le,_r));const Dr=S0(c,Ie);return Dr&&(Le.name==="body"||Ie.isRootContent)&&G(Le,Dr),Ie.invalid||G3(ds,Ie),Le}};return HM(Ee,c),NM(Ee,c,n),Ee},Yf=e=>e instanceof $i,x0=e=>Yf(e)?Cp({validate:!1}).serialize(e):e,$C=(e,n,o)=>{const r=x0(e),c=n(r);if(c.isDefaultPrevented())return c;if(Yf(e))if(c.content!==r){const u=dh({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},IC=e=>({sanitize:z2(e),sandbox_iframes:mv(e),sandbox_iframes_exclusions:Q1(e)}),p_=(e,n)=>{if(n.no_events)return ge.value(n);{const o=ax(e,n);return o.isDefaultPrevented()?ge.error(cx(e,{content:"",...o}).content):ge.value(o)}},ZE=(e,n,o)=>o.no_events?n:$C(n,c=>cx(e,{...o,content:c}),IC(e)).content,LC=(e,n)=>{if(n.no_events)return ge.value(n);{const o=$C(n.content,r=>ec(e,{...n,content:r}),IC(e));return o.isDefaultPrevented()?(rx(e,o),ge.error(void 0)):ge.value(o)}},jE=(e,n,o)=>{o.no_events||rx(e,{...o,content:n})},iF="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),zv=["content_css_cors"],lF="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),b_=[{name:"export",replacedWith:"Export to PDF"}],v_=(e,n)=>{const o=ye(n,r=>no(e,r));return fn(o)},qE=e=>{const n=v_(e,iF),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),fn(n)},uF=e=>v_(e,zv),y_=(e,n)=>{const o=kt.makeMap(e.plugins," "),c=ye(n,u=>no(o,u));return fn(c)},dF=e=>y_(e,lF),mF=e=>y_(e,b_.map(n=>n.name)),mh=(e,n)=>{const o=qE(e),r=dF(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const v=f?`

Themes:
- mobile`:"",S=c?`

Plugins:
- ${r.join(`
- `)}`:"",_=u?`

Options:
- ${o.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 8.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/8/migration-from-7x/ for more information."+v+S+_)}},Dp=e=>Gt(b_,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),vm=(e,n)=>{const o=uF(e),r=mF(n),c=r.length>0,u=o.length>0;if(c||u){const b=c?`

Plugins:
- ${r.map(Dp).join(`
- `)}`:"",v=u?`

Options:
- ${o.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+v)}},lH=(e,n)=>{mh(e,n),vm(e,n)},uH={fire:'The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',selectionSetContent:'The "editor.selection.setContent" method has been deprecated and will be removed in TinyMCE 9. Use "editor.insertContent" instead.'},fF=e=>{console.warn(uH[e],new Error().stack)},gF=e=>e.dom.length===0?(Ws(e),F.none()):F.some(e),dH=(e,n)=>e.filter(o=>gm.isBookmarkNode(o.dom)).bind(n?Hc:Zi),mH=(e,n,o,r,c)=>{const u=e.dom,f=n.dom,b=r?u.length:f.length;r?(l3(u,f,c,!1,!r),o.setStart(f,b)):(l3(f,u,c,!1,!r),o.setEnd(f,b))},fH=(e,n,o)=>{Lc(e).each(r=>{const c=e.dom;n&&CC(r,qe(c,0),o)?_E(c,0,o):!n&&wC(r,qe(c,c.length),o)&&i3(c,c.length,o)})},hF=(e,n,o,r,c)=>{e.bind(u=>((r?i3:_E)(u.dom,r?u.dom.length:0,c),n.filter(Es).map(b=>mH(u,b,o,r,c)))).orThunk(()=>dH(n,r).or(n).filter(Es).map(f=>fH(f,r,c)))},gH=(e,n,o)=>{const r=F.from(n.firstChild).map(oe.fromDom),c=F.from(n.lastChild).map(oe.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(Zi).filter(Es).bind(gF),f=c.bind(Hc).filter(Es).bind(gF);hF(u,r,e,!0,o),hF(f,c,e,!1,o),e.collapse(!1)},hH=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),pH=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return Cp({validate:!1},e.schema).serialize(u)}else return n.content},GE=(e,n,o={})=>{const r=hH(o,n);LC(e,r).each(c=>{const u=pH(e,c),f=e.selection.getRng();gH(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),pC(e,f),jE(e,u,c)})},C_=(e,n,o={})=>{fF("selectionSetContent"),GE(e,n,o)},w_=e=>_e(e.firstChild)&&e.firstChild===e.lastChild,pF=e=>e.name==="br"||e.value===ir,bH=(e,n)=>e.getBlockElements()[n.name]&&w_(n)&&pF(n.firstChild),vH=(e,n)=>{const o=e.getNonEmptyElements();return _e(n)&&(n.isEmpty(o)||bH(e,n))},bF=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),vH(e,r)&&(r=r?.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},vF=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},S_=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return vF(c)},yF=e=>{var n;return ye((n=e?.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},CF=e=>e.data===ir||xr(e),x_=e=>_e(e?.firstChild)&&e.firstChild===e.lastChild&&CF(e.firstChild),yH=e=>!e.firstChild||x_(e),CH=e=>e.length>0&&yH(e[e.length-1])?e.slice(0,-1):e,ym=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},Cm=(e,n)=>!!ym(e,n),KE=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},wF=(e,n)=>{const o=qe.before(e),c=Ed(n).next(o);return c?c.toRange():null},HC=(e,n)=>{const o=qe.after(e),c=Ed(n).prev(o);return c?c.toRange():null},SF=(e,n,o,r)=>{const c=KE(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),kt.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),HC(n[n.length-1],o)},xF=(e,n,o)=>{const r=e.parentNode;return r&&kt.each(n,c=>{r.insertBefore(c,e)}),wF(e,o)},EF=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),HC(n[0],o)),TF=(e,n,o,r)=>{const c=S_(n,e,r),u=ym(n,o.startContainer),f=CH(yF(c.firstChild)),b=1,v=2,S=n.getRoot(),_=R=>{const M=qe.fromRangeStart(o),$=Ed(n.getRoot()),J=R===b?$.prev(M):$.next(M),Y=J?.getNode();return Y?ym(n,Y)!==u:!0};return u?_(b)?xF(u,f,S):_(v)?EF(u,f,S,n):SF(u,f,S,o):null},AF=["pre"],kF=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,v=u===b,S=j(AF,u.name);if(v&&S){const _=u.attr("contenteditable")!=="false",R=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,M=F.from(b0(r,o)).forall(mi);return _&&R&&M}else return!1},Vv=Gd,E_=(e,n,o)=>{if(_e(o)){const r=e.getParent(n.endContainer,Vv);return o===r&&aC(oe.fromDom(o),n)}else return!1},wH=(e,n)=>{if(e.isBlock(n)&&e.isEditable(n)){const o=n.childNodes;return o.length===1&&xr(o[0])||o.length===0}else return!1},SH=(e,n,o)=>{var r;o.getAttribute("data-mce-bogus")==="all"?(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o):wH(e.dom,o)?e.dom.setHTML(o,n):GE(e,n,{no_events:!0})},xH=(e,n,o)=>{F.from(e.getParent(n,"td,th")).map(oe.fromDom).each(r=>Rk(r,o))},EH=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=O3(e),f="*[data-mce-fragment]",b=r.select(f);kt.each(b,v=>{const S=M=>_e(o[M.nodeName.toLowerCase()]),_=M=>M.childNodes.length===1;if((M=>!(sL(r,M)||rL(r,M)))(v)&&S(v)&&_(v)){const M=bC(r,v),$=(xe,Ee)=>ns(xe,Re=>j(Ee,Re)),J=xe=>_(v)&&r.is(xe,f)&&S(xe)&&(xe.nodeName===v.nodeName&&$(M,bC(r,xe))||J(xe.children[0])),Y=xe=>_e(xe)&&xe!==c&&(u.compare(v,xe)||Y(xe.parentElement)),G=xe=>_e(xe)&&xe!==c&&r.is(xe,f)&&(aL(r,v,xe)||G(xe.parentElement));(J(v.children[0])||Y(v.parentElement)&&!G(v.parentElement))&&r.remove(v,!0)}}),kM(e,Vd(b))}},_F=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},TH=e=>{kt.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},AH=e=>!!e.getAttribute("data-mce-fragment"),T_=(e,n)=>_e(n)&&!e.schema.getVoidElements()[n.nodeName],kH=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const v=b0(e.getBody(),n);if(v&&f.getContentEditable(v)==="false"){f.remove(n),b.select(v);return}let S=f.createRng();const _=n.previousSibling;if(St(_)){S.setStart(_,(r=(o=_.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const $=n.nextSibling;St($)&&(_.appendData($.data),(c=$.parentNode)===null||c===void 0||c.removeChild($))}else S.setStartBefore(n),S.setEndBefore(n);const R=$=>{let J=qe.fromRangeStart($);return J=Ed(e.getBody()).next(J),J?.toRange()},M=f.getParent(n,f.isBlock);if(f.remove(n),M&&f.isEmpty(M)){const $=Vv(M);pl(oe.fromDom(M)),S.setStart(M,0),S.setEnd(M,0),!$&&!AH(M)&&(u=R(S))?(S=u,f.remove(M)):f.add(M,f.create("br",$?{}:{"data-mce-bogus":"1"}))}b.setRng(S)},_H=e=>{const n=e.dom,o=$E(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,Vv);E_(n,o,r)?T3(e,o,oe.fromDom(r)):lC(o)||A4(o)?o.deleteContents():e.getDoc().execCommand("Delete",!1)},DH=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return F.some(n);return F.none()},OH=(e,n,o)=>{var r;return ce(o.children(),_M)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},RH=(e,n,o)=>{var r;const c=e.selection,u=e.dom,f=e.parser,b=o.merge,v=Cp({validate:!0},e.schema),S='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Bi(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,S);let _=c.getRng();const R=_.startContainer,M=e.getBody();R===M&&c.isCollapsed()&&u.isBlock(M.firstChild)&&T_(e,M.firstChild)&&u.isEmpty(M.firstChild)&&(_=u.createRng(),_.setStart(M.firstChild,0),_.setEnd(M.firstChild,0),c.setRng(_)),c.isCollapsed()||_H(e);const $=c.getNode(),J={context:$.nodeName.toLowerCase(),data:o.data,insert:!0},Y=f.parse(n,J);if(o.paste===!0&&bF(e.schema,Y)&&Cm(u,$))return _=TF(v,u,c.getRng(),Y),_&&c.setRng(_),n;o.paste===!0&&kF(u,Y,$,e.getBody())&&((r=Y.firstChild)===null||r===void 0||r.unwrap()),_F(Y);let G=Y.lastChild;if(G&&G.attr("id")==="mce_marker"){const xe=G;for(G=G.prev;G&&G.name!=="table";G=G.walk(!0))if(G.type===3||!u.isBlock(G.name)){G.parent&&e.schema.isValidChild(G.parent.name,"span")&&G.parent.insert(xe,G,G.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer($),!J.invalid&&!OH(u,$,Y))n=v.serialize(Y),SH(e,n,$);else{GE(e,S);let xe=c.getNode(),Ee;const Re=e.getBody();for(Vo(xe)?xe=Ee=Re:Ee=xe;Ee&&Ee!==Re;)xe=Ee,Ee=Ee.parentNode;n=xe===Re?Re.innerHTML:u.getOuterHTML(xe);const Ie=f.parse(n),lt=DH(Ie),Pt=lt.bind(C9).getOr(Ie);lt.each(De=>De.replace(Y));const Et=vY(Y);Y.unwrap();const et=ye(Et,De=>J3(e.schema,De));MM(et,e.schema,Pt),K3(f.getNodeFilters(),f.getAttributeFilters(),Ie),n=v.serialize(Ie),xe===Re?u.setHTML(Re,n):u.setOuterHTML(xe,n)}return EH(e,b),kH(e,u.get("mce_marker")),TH(e.getBody()),xH(u,c.getStart(),e.schema),Tg(e.schema,e.getBody(),c.getStart()),n},BH=e=>{f0(e)&&Kc(e.getBody()).each(n=>{const o=n.getNode(),r=qd(o)?Kc(o).getOr(n):n;e.selection.setRng(r.toRange())})},A_=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&BH(e)},YE=(e,n,o,r)=>{if(o=Bi(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=pc(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,ip(e),o)):o||(o=c),A_(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Cp({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=tl(oe.fromDom(n))?o:kt.trim(o);return A_(e,c,r.no_selection),{content:c,html:c}}},k_=(e,n,o,r)=>{K3(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=Cp({validate:!1},e.schema).serialize(o),u=Bi(tl(oe.fromDom(n))?c:kt.trim(c));return A_(e,u,r.no_selection),{content:o,html:u}},MH=(e,n,o)=>F.from(e.getBody()).map(r=>Yf(n)?k_(e,r,n,o):YE(e,r,n,o)).getOr({content:n,html:Yf(o.content)?"":o.content}),zC={},DF=Ja(["pre"]),FH=(e,n)=>{zC[e]||(zC[e]=[]),zC[e].push(n)},OF=(e,n)=>{no(zC,e)&&ne(zC[e],o=>{o(n)})};FH("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return DF(f)&&j(c,f)},r=(c,u)=>{const f=oe.fromDom(u),b=fl(f).dom;Ws(f),Gi(oe.fromDom(c),[oe.fromTag("br",b),oe.fromTag("br",b),...wr(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=ye(ye(c,DF),o(c));ne(u,f=>{r(f.previousSibling,f)})}});const RF=kt.each,NH=(e,n,o,r)=>{const c=u=>{if(dr(u)&&bn(u.parentNode)&&e.isEditable(u)){const f=T(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(kt.walk(r,c,"childNodes"),c(r))},__=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=yM(e,"fontSize");vM(r,u=>c(u)&&e.isEditable(u),$v(e,"backgroundColor",l(n.styles.backgroundColor,o)))}},PH=(e,n,o,r)=>{if(Ot(n)&&(n.inline==="sub"||n.inline==="sup")){const c=yM(e,"fontSize");vM(r,f=>c(f)&&e.isEditable(f),$v(e,"fontSize",""));const u=ye(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},$H=(e,n,o,r)=>{RF(n,c=>{Ot(c)&&RF(e.dom.select(c.inline,r),u=>{L3(u)&&Lv(e,c,o,u,c.exact?u:null)}),br(e.dom,c,r)})},IH=(e,n,o,r,c)=>{const u=c.parentNode;bm(e,u,o,r)&&Lv(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>bm(e,f,o,r)?(Lv(e,n,r,c),!0):!1)},LH=kt.each,HH=(e,n,o,r)=>{if(j1(e)&&Ot(n)&&o.parentNode){const c=CS(e.schema),u=vn(oe.fromDom(o),f=>Ni(f.dom));return rs(c,r)&&Ul(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},zH=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,v=e.selection,S=($,J)=>{let Y=!1;return LH($,G=>Vt(G)?b.getContentEditable(J)==="false"&&!G.ceFalseOverride||_e(G.collapsed)&&G.collapsed!==f?!0:b.is(J,G.selector)&&!Ni(J)?(Fv(e,J,G,o,J),Y=!0,!1):!0:!1),Y},_=$=>{if(ae($)){const J=b.create($);return Fv(e,J,u,o,r),J}else return null},R=($,J,Y)=>{const G=[];let xe=!0;const Ee=u.inline||u.block,Re=_(Ee),Ie=Et=>Me(u)&&bm(e,Et,n,o),lt=(Et,et,De)=>{const te=pt(u)&&dC(e.schema,Et)&&pp(e,et,Ee);return De&&te},Pt=(Et,et,De,te)=>{const Le=Et.nodeName.toLowerCase(),xt=pp(e,Ee,Le)&&pp(e,et,Ee),Tn=!Y&&St(Et)&&$b(Et.data),lo=Ni(Et),Zo=!Ot(u)||!$.isBlock(Et);return(De||te)&&xt&&!Tn&&!lo&&Zo};bp($,J,Et=>{let et;const De=te=>{let Le=!1,xt=xe,Tn=!1;const lo=te.parentNode,Zo=lo.nodeName.toLowerCase(),ds=$.getContentEditable(te);_e(ds)&&(xt=xe,xe=ds==="true",Le=!0,Tn=oE(e,te));const _r=xe&&!Le;if(xr(te)&&!HH(e,u,te,Zo)){et=null,he(u)&&$.remove(te);return}if(Ie(te)){et=null;return}if(lt(te,Zo,_r)){const Dr=$.rename(te,Ee);Fv(e,Dr,u,o,te),G.push(Dr),et=null;return}if(Vt(u)){let Dr=S(c,te);if(!Dr&&_e(lo)&&Qe(u)&&(Dr=S(c,lo)),!Ot(u)||Dr){et=null;return}}_e(Re)&&Pt(te,Zo,_r,Tn)?(et||(et=$.clone(Re,!1),lo.insertBefore(et,te),G.push(et)),Tn&&Le&&(xe=xt),et.appendChild(te)):(et=null,ne(Eo(te.childNodes),De),Le&&(xe=xt),et=null)};ne(Et,De)}),u.links===!0&&ne(G,Et=>{const et=De=>{De.nodeName==="A"&&Fv(e,De,u,o,r),ne(Eo(De.childNodes),et)};et(Et)}),b9(e,n,Vd(G)),ne(G,Et=>{const et=Le=>{let xt=0;return ne(Le.childNodes,Tn=>{!pr(Tn)&&!ol(Tn)&&xt++}),xt},De=Le=>Gt(Le.childNodes,uC).filter(Tn=>$.getContentEditable(Tn)!=="false"&&FE($,Tn,u)).map(Tn=>{const lo=$.clone(Tn,!1);return Fv(e,lo,u,o,Le),$.replace(lo,Le,!0),$.remove(Tn,!0),lo}).getOr(Le),te=et(Et);if((G.length>1||!$.isBlock(Et))&&te===0){$.remove(Et,!0);return}(Ot(u)||he(u)&&u.wrapper)&&(!u.exact&&te===1&&(Et=De(Et)),$H(e,c,o,Et),IH(e,u,n,o,Et),__($,u,o,Et),NH($,u,o,Et),PH($,u,o,Et),bM(e,u,o,Et))})},M=l0(r)?r:v.getNode();if(b.getContentEditable(M)==="false"&&!oE(e,M)){r=M,S(c,r),Dt(e,n,r,o);return}if(u){if(r)if(l0(r)){if(!S(c,r)){const $=b.createRng();$.setStartBefore(r),$.setEndAfter(r),R(b,wa(b,$,c),!0)}}else R(b,r,!0);else!f||!Ot(u)||jf(e).length?(v.setRng($E(v.getRng())),Ov(e,()=>{cC(e,($,J)=>{const Y=J?$:wa(b,$,c);R(b,Y,!1)})},ot),e.nodeChanged()):mY(e,n,o),Pv(e.formatter,n).each($=>{ne(gY(e.selection),J=>cM(b,J,$,o))});OF(n,e)}Dt(e,n,r,o)},BF=(e,n,o,r)=>{(r||e.selection.isEditable())&&zH(e,n,o,r)},VC=e=>no(e,"vars"),XE=(e,n)=>{e.set({}),n.on("NodeChange",o=>{NF(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=F.from(o.node).map(c=>l0(c)?c:c.startContainer).bind(c=>bn(c)?F.some(c):F.from(c.parentElement)).getOrThunk(()=>MF(n));NF(n,r,e.get())})},MF=e=>e.selection.getStart(),FF=(e,n,o,r,c)=>un(n,b=>{const v=e.formatter.matchNode(b,o,c??{},r);return!Zn(v)},b=>sl(e,b,o)?!0:r?!1:_e(e.formatter.matchNode(b,o,c,!0))),UC=(e,n)=>{const o=n??MF(e);return ye(O(e.dom,o),r=>bn(r)&&!wg(r))},NF=(e,n,o)=>{const r=UC(e,n);To(o,(c,u)=>{const f=b=>{const v=FF(e,r,u,b.similar,VC(b)?b.vars:void 0),S=v.isSome();if(b.state.get()!==S){b.state.set(S);const _=v.getOr(n);VC(b)?b.callback(S,{node:_,format:u,parents:r}):ne(b.callbacks,R=>R(S,{node:_,format:u,parents:r}))}};ne([c.withSimilar,c.withoutSimilar],f),ne(c.withVars,f)})},VH=(e,n,o,r,c,u)=>{const f=n.get();ne(o.split(","),b=>{const v=xs(f,b).getOrThunk(()=>{const _={withSimilar:{state:dn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:dn(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=_,_}),S=()=>{const _=UC(e);return FF(e,_,b,c,u).isSome()};if(Zn(u)){const _=c?v.withSimilar:v.withoutSimilar;_.callbacks.push(r),_.callbacks.length===1&&_.state.set(S())}else v.withVars.push({state:dn(S()),similar:c,vars:u,callback:r})}),n.set(f)},UH=(e,n,o)=>{const r=e.get();ne(n.split(","),c=>xs(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:ye(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:ye(u.withoutSimilar.callbacks,f=>f!==o)},withVars:ye(u.withVars,f=>f.callback!==o)}})),e.set(r)},WH=(e,n,o,r,c,u)=>(VH(e,n,o,r,c,u),{unbind:()=>UH(n,o,r)}),ZH=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(M3(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?AM(e,n,o,r):BF(e,n,o,r))},D_=(e,n,o)=>({element:e,width:n,rows:o}),PF=(e,n)=>({element:e,cells:n}),jH=(e,n)=>({x:e,y:n}),$F=(e,n)=>Ki(e,n).bind(Xu).getOr(1),qH=(e,n,o,r,c)=>{const u=$F(c,"rowspan"),f=$F(c,"colspan"),b=e.rows;for(let v=o;v<o+u;v++){b[v]||(b[v]=PF(xu(r),[]));for(let S=n;S<n+f;S++){const _=b[v].cells;_[S]=v===o&&S===n?c:ta(c)}}},GH=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},SY=(e,n,o)=>{for(;GH(e,n,o);)n++;return n},kd=e=>Ne(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),O_=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(Qo(c[u],n))return F.some(jH(u,r))}return F.none()},IF=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const v=f[b].cells,S=n<r?v.slice(n,r+1):v.slice(r,n+1);u.push(PF(f[b].element,S))}return u},LF=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?IF(e,r,c,u,f):IF(e,r,f,u,c);return D_(e.element,kd(b),b)},KH=(e,n)=>{const o=ta(e.element),r=oe.fromTag("tbody");return Gi(r,n),gs(o,r),o},YH=e=>de(e.rows,n=>{const o=de(n.cells,c=>{const u=xu(c);return Qr(u,"colspan"),Qr(u,"rowspan"),u}),r=ta(n.element);return Gi(r,o),r}),xY=e=>{const n=D_(ta(e),0,[]);return ne(Ge(e,"tr"),(o,r)=>{ne(Ge(o,"td,th"),(c,u)=>{qH(n,SY(n,u,r),r,o,c)})}),D_(n.element,kd(n.rows),n.rows)},Si=e=>KH(e,YH(e)),XH=(e,n,o)=>O_(e,n).bind(r=>O_(e,o).map(c=>LF(e,r,c))),R_=e=>Gt(e,n=>Bo(n)==="ul"||Bo(n)==="ol"),HF=(e,n)=>Gt(e,o=>Bo(o)==="li"&&aC(o,n)).fold(it([]),o=>R_(e).map(r=>{const c=oe.fromTag(Bo(r)),u=Mc(wf(r),(f,b)=>Kn(b,"list-style"));return li(c,u),[oe.fromTag("li"),c]}).getOr([])),JE=(e,n)=>{const o=Ne(n,(r,c)=>(gs(c,r),c),e);return n.length>0?Wd([o]):o},JH=e=>Qd(e)?Lc(e).filter(Nb).fold(it([]),n=>[e,n]):Nb(e)?[e]:[],QH=(e,n,o)=>{const r=oe.fromDom(n.commonAncestorContainer),c=jt(r,e),u=ye(c,v=>o.isWrapper(Bo(v))),f=HF(c,n),b=u.concat(f.length?f:JH(r));return de(b,ta)},zF=()=>Wd([]),ez=(e,n,o)=>JE(oe.fromDom(n.cloneContents()),QH(e,n,o)),tz=(e,n)=>Wr(n,"table",Ce(Qo,e)),VF=(e,n)=>tz(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=xY(o);return XH(u,r,c).map(f=>Wd([Si(f)]))}).getOrThunk(zF),nz=(e,n,o)=>n.length>0&&n[0].collapsed?zF():ez(e,n[0],o),UF=(e,n,o)=>{const r=kv(n,e);return r.length>0?VF(e,r):nz(e,n,o)},WC=(e,n)=>n>=0&&n<e.length&&nh(e.charAt(n)),WF=e=>Bi(e.innerText),oz=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),sz=e=>F.from(e.selection.getRng()).map(n=>{var o;const r=F.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=oz(r),f=oe.fromDom(n.cloneContents());J4(f),Q4(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),v=WF(b),S=Bi((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),WC(S,0)||WC(S,S.length-1)){const _=r.getOr(c),R=WF(_),M=R.indexOf(v);if(M===-1)return v;{const $=WC(R,M-1),J=WC(R,M+v.length);return($?" ":"")+v+(J?" ":"")}}else return v}).getOr(""),rz=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=K4(e,oC(c)),f=n.contextual?UF(oe.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},az=(e,n)=>{if(n.format==="text")return sz(e);{const o=rz(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},QE=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),ZF=(e,n,o={})=>{const r=QE(o,n);return p_(e,r).fold(Mo,c=>{const u=az(e,c);return ZE(e,u,c)})},eT=0,jF=1,B_=2,cz=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(_,R,M)=>({start:_,end:R,diag:M}),f=(_,R,M,$,J)=>{const Y=v(_,R,M,$);if(Y===null||Y.start===R&&Y.diag===R-$||Y.end===_&&Y.diag===_-M){let G=_,xe=M;for(;G<R||xe<$;)G<R&&xe<$&&e[G]===n[xe]?(J.push([eT,e[G]]),++G,++xe):R-_>$-M?(J.push([B_,e[G]]),++G):(J.push([jF,n[xe]]),++xe)}else{f(_,Y.start,M,Y.start-Y.diag,J);for(let G=Y.start;G<Y.end;++G)J.push([eT,e[G]]);f(Y.end,R,Y.end-Y.diag,$,J)}},b=(_,R,M,$)=>{let J=_;for(;J-R<$&&J<M&&e[J]===n[J-R];)++J;return u(_,J,R)},v=(_,R,M,$)=>{const J=R-_,Y=$-M;if(J===0||Y===0)return null;const G=J-Y,xe=Y+J,Ee=(xe%2===0?xe:xe+1)/2;r[1+Ee]=_,c[1+Ee]=R+1;let Re,Ie,lt,Pt,Et;for(Re=0;Re<=Ee;++Re){for(Ie=-Re;Ie<=Re;Ie+=2){for(lt=Ie+Ee,Ie===-Re||Ie!==Re&&r[lt-1]<r[lt+1]?r[lt]=r[lt+1]:r[lt]=r[lt-1]+1,Pt=r[lt],Et=Pt-_+M-Ie;Pt<R&&Et<$&&e[Pt]===n[Et];)r[lt]=++Pt,++Et;if(G%2!==0&&G-Re<=Ie&&Ie<=G+Re&&c[lt-G]<=r[lt])return b(c[lt-G],Ie+_-M,R,$)}for(Ie=G-Re;Ie<=G+Re;Ie+=2){for(lt=Ie+Ee-G,Ie===G-Re||Ie!==G+Re&&c[lt+1]<=c[lt-1]?c[lt]=c[lt+1]-1:c[lt]=c[lt-1],Pt=c[lt]-1,Et=Pt-_+M-Ie;Pt>=_&&Et>=M&&e[Pt]===n[Et];)c[lt]=Pt--,Et--;if(G%2===0&&-Re<=Ie&&Ie<=Re&&c[lt]<=r[lt+G])return b(c[lt],Ie+_-M,R,$)}}return null},S=[];return f(0,e.length,0,n.length,S),S},qF=e=>bn(e)?e.outerHTML:St(e)?Ag.encodeRaw(e.data,!1):$r(e)?"<!--"+e.data+"-->":"",iz=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},M_=(e,n,o)=>{const r=iz(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},F_=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},lz=(e,n)=>{let o=0;ne(e,r=>{r[0]===eT?o++:r[0]===jF?(M_(n,r[1],o),o++):r[0]===B_&&F_(n,o)})},N_=(e,n)=>ye(de(Eo(e.childNodes),k(Bi,qF)),o=>o.length>0),uz=(e,n)=>{const o=de(Eo(n.childNodes),qF);return lz(cz(o,e),n),n},dz=Fa(()=>document.implementation.createHTMLDocument("undo")),mz=e=>e.querySelector("iframe")!==null,fz=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),gz=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),tT=e=>{const n=e.serializer.getTempAttrs(),o=sB(e.getBody(),n);return mz(o)?fz(N_(o)):gz(Bi(o.innerHTML))},nT=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?uz(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:_e(r)&&Sv(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},P_=e=>e.type==="fragmented"?e.fragments.join(""):e.content,GF=e=>{const n=oe.fromTag("body",dz());return sd(n,P_(e)),ne(Ge(n,"*[data-mce-bogus]"),ii),Xa(n)},hz=(e,n)=>P_(e)===P_(n),pz=(e,n)=>GF(e)===GF(n),$_=(e,n)=>!e||!n?!1:hz(e,n)?!0:pz(e,n),I_=e=>e.get()===0,oT=(e,n,o)=>{I_(o)&&(e.typing=n)},E0=(e,n)=>{e.typing&&(oT(e,!1,n),e.add())},sT=e=>{e.typing&&(e.typing=!1,e.add())},KF=(e,n,o)=>{I_(n)&&o.set(I1(e.selection))},YF=(e,n,o,r,c,u,f)=>{const b=tT(e),v=kt.extend(u||{},b);if(!I_(r)||e.removed)return null;const S=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:v,lastLevel:S,originalEvent:f}).isDefaultPrevented()||S&&$_(S,v))return null;n.data[o.get()]&&c.get().each(M=>{n.data[o.get()].beforeBookmark=M});const _=Cx(e);if(_&&n.data.length>_){for(let M=0;M<n.data.length-1;M++)n.data[M]=n.data[M+1];n.data.length--,o.set(n.data.length)}v.bookmark=I1(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(v),o.set(n.data.length-1);const R={level:v,lastLevel:S,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",R),e.dispatch("change",R)):e.dispatch("AddUndo",R),v},bz=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},vz=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];nT(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},L_=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],nT(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},yz=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,oT(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],nT(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},Cz=e=>{e.clear(),e.add()},wz=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!$_(tT(e),n.data[0]),Sz=(e,n)=>n.get()<e.data.length-1&&!e.typing,xz=(e,n,o)=>(E0(e,n),e.beforeChange(),e.ignore(o),e.add()),rT=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},ZC=(e,n)=>{const o=e.dom,r=_e(n)?n:e.getBody();ne(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=X1(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,v=$2(e);b&&e.hasVisual?o.addClass(c,v):o.removeClass(c,v)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},XF=e=>({init:{bindEvents:rt},undoManager:{beforeChange:(n,o)=>KF(e,n,o),add:(n,o,r,c,u,f)=>YF(e,n,o,r,c,u,f),undo:(n,o,r)=>yz(e,n,o,r),redo:(n,o)=>L_(e,n,o),clear:(n,o)=>bz(e,n,o),reset:n=>Cz(n),hasUndo:(n,o)=>wz(e,n,o),hasRedo:(n,o)=>Sz(n,o),transact:(n,o,r)=>xz(n,o,r),ignore:(n,o)=>rT(n,o),extra:(n,o,r,c)=>vz(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>M3(e,n,o,r,c),matchAll:(n,o)=>KL(e,n,o),matchNode:(n,o,r,c)=>bm(e,n,o,r,c),canApply:n=>F3(e,n),closest:n=>YL(e,n),apply:(n,o,r)=>BF(e,n,o,r),remove:(n,o,r,c)=>AM(e,n,o,r,c),toggle:(n,o,r)=>ZH(e,n,o,r),formatChanged:(n,o,r,c,u)=>WH(e,n,o,r,c,u)},editor:{getContent:n=>eY(e,n),setContent:(n,o)=>MH(e,n,o),insertContent:(n,o)=>RH(e,n,o),addVisual:n=>ZC(e,n)},selection:{getContent:(n,o)=>ZF(e,n,o)},autocompleter:{addDecoration:rt,removeDecoration:rt},raw:{getModel:()=>F.none()}}),Uv=e=>{const n=S=>Jt(S)?S:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:v}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(S,_,R)=>r.transact(R),ignore:(S,_)=>r.ignore(_),extra:(S,_,R,M)=>r.extra(R,M)},formatter:{match:(S,_,R,M)=>c.match(S,n(_),M),matchAll:c.matchAll,matchNode:c.matchNode,canApply:S=>c.canApply(S),closest:S=>c.closest(S),apply:(S,_,R)=>c.apply(S,n(_)),remove:(S,_,R,M)=>c.remove(S,n(_)),toggle:(S,_,R)=>c.toggle(S,n(_)),formatChanged:(S,_,R,M,$)=>c.formatChanged(_,R,M,$)},editor:{getContent:S=>u.getContent(S),setContent:(S,_)=>({content:u.setContent(S,_),html:""}),insertContent:(S,_)=>(u.insertContent(S),""),addVisual:u.addVisual},selection:{getContent:(S,_)=>f.getContent(_)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>F.some(v.getRawModel())}}},Vu=()=>{const e=it(null),n=it("");return{init:{bindEvents:rt},undoManager:{beforeChange:rt,add:e,undo:e,redo:e,clear:rt,reset:rt,hasUndo:Oe,hasRedo:Oe,transact:e,ignore:rt,extra:rt},formatter:{match:Oe,matchAll:it([]),matchNode:it(void 0),canApply:Oe,closest:n,apply:rt,remove:rt,toggle:rt,formatChanged:it({unbind:rt})},editor:{getContent:n,setContent:it({content:"",html:""}),insertContent:it(""),addVisual:rt},selection:{getContent:n},autocompleter:{addDecoration:rt,removeDecoration:rt},raw:{getModel:it(F.none())}}},Uu=e=>no(e.plugins,"rtc"),js=e=>xs(e.plugins,"rtc").bind(n=>F.from(n.setup)),jC=e=>{const n=e;return js(e).fold(()=>(n.rtcInstance=XF(e),F.none()),o=>(n.rtcInstance=Vu(),F.some(()=>o().then(r=>(n.rtcInstance=Uv(r),r.rtc.isRemote)))))},aT=e=>e.rtcInstance?e.rtcInstance:XF(e),Ua=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},cT=(e,n,o)=>{Ua(e).undoManager.beforeChange(n,o)},H_=(e,n,o,r,c,u,f)=>Ua(e).undoManager.add(n,o,r,c,u,f),z_=(e,n,o,r)=>Ua(e).undoManager.undo(n,o,r),V_=(e,n,o)=>Ua(e).undoManager.redo(n,o),U_=(e,n,o)=>{Ua(e).undoManager.clear(n,o)},iT=(e,n)=>{Ua(e).undoManager.reset(n)},W_=(e,n,o)=>Ua(e).undoManager.hasUndo(n,o),JF=(e,n,o)=>Ua(e).undoManager.hasRedo(n,o),QF=(e,n,o,r)=>Ua(e).undoManager.transact(n,o,r),e6=(e,n,o)=>{Ua(e).undoManager.ignore(n,o)},t6=(e,n,o,r,c)=>{Ua(e).undoManager.extra(n,o,r,c)},n6=(e,n,o,r,c)=>Ua(e).formatter.match(n,o,r,c),T0=(e,n,o)=>Ua(e).formatter.matchAll(n,o),o6=(e,n,o,r,c)=>Ua(e).formatter.matchNode(n,o,r,c),Z_=(e,n)=>Ua(e).formatter.canApply(n),Ez=(e,n)=>Ua(e).formatter.closest(n),Tz=(e,n,o,r)=>{Ua(e).formatter.apply(n,o,r)},s6=(e,n,o,r,c)=>{Ua(e).formatter.remove(n,o,r,c)},r6=(e,n,o,r)=>{Ua(e).formatter.toggle(n,o,r)},a6=(e,n,o,r,c,u)=>Ua(e).formatter.formatChanged(n,o,r,c,u),lT=(e,n)=>aT(e).editor.getContent(n),c6=(e,n,o)=>aT(e).editor.setContent(n,o),i6=(e,n,o)=>aT(e).editor.insertContent(n,o),l6=(e,n,o)=>Ua(e).selection.getContent(n,o),u6=(e,n)=>Ua(e).editor.addVisual(n),j_=e=>Ua(e).init.bindEvents(),d6=(e,n={})=>{const o=n.format?n.format:"html";return l6(e,o,n)},q_=(e,n,o)=>{if(no(e,n)){const r=ye(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var m6=(e,n)=>{let o,r;const c=(b,v)=>Gt(v,S=>e.is(S,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const v=b.element,S=u(v),_={};To(o,(R,M)=>{c(M,S).each($=>{r[M]||(ne(R,J=>{J(!0,{node:$,selector:M,parents:S})}),r[M]=R),_[M]=R})}),To(r,(R,M)=>{_[M]||(delete r[M],ne(R,$=>{$(!1,{node:v,selector:M,parents:S})}))})})};return{selectorChangedWithUnbind:(b,v)=>(o||f(),o[b]||(o[b]=[]),o[b].push(v),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{q_(o,b,v),q_(r,b,v)}})}};const G_=e=>!!(e&&e.ownerDocument)&&Ic(oe.fromDom(e.ownerDocument),oe.fromDom(e)),f6=e=>e?G_(e.startContainer)&&G_(e.endContainer):!1,uT=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=m6(e,r),b=(Bt,kn)=>{const vs=e.createRng();_e(Bt)&&_e(kn)?(vs.setStart(Bt,kn),vs.setEnd(Bt,kn),Ie(vs),xe(!1)):(Dv(e,vs,r.getBody(),!0),Ie(vs))},v=Bt=>d6(r,Bt),S=(Bt,kn)=>C_(r,Bt,kn),_=Bt=>hE(r.getBody(),Re(),Bt),R=Bt=>G4(r.getBody(),Re(),Bt),M=(Bt,kn)=>Dr.getBookmark(Bt,kn),$=Bt=>Dr.moveToBookmark(Bt),J=(Bt,kn)=>(KK(e,Bt,kn).each(Ie),Bt),Y=()=>{const Bt=Re(),kn=Ee();return!Bt||Bt.item?!1:Bt.compareEndPoints?Bt.compareEndPoints("StartToEnd",Bt)===0:!kn||Bt.collapsed},G=()=>{if(r.mode.isReadOnly())return!1;const Bt=Re(),kn=r.getBody().querySelectorAll('[data-mce-selected="1"]');return kn.length>0?ns(kn,vs=>e.isEditable(vs.parentElement)):Q5(e,Bt)},xe=Bt=>{const kn=Re();kn.collapse(!!Bt),Ie(kn)},Ee=()=>n.getSelection?n.getSelection():n.document.selection,Re=()=>{let Bt;const kn=($s,xn,Ft)=>{try{return xn.compareBoundaryPoints($s,Ft)}catch{return-1}},vs=n.document;if(_e(r.bookmark)&&!f0(r)){const $s=M4(r);if($s.isSome())return $s.map(xn=>K4(r,[xn])[0]).getOr(vs.createRange())}try{const $s=Ee();$s&&!Hy($s.anchorNode)&&($s.rangeCount>0?Bt=$s.getRangeAt(0):Bt=vs.createRange(),Bt=K4(r,[Bt])[0])}catch{}if(Bt||(Bt=vs.createRange()),Vo(Bt.startContainer)&&Bt.collapsed){const $s=e.getRoot();Bt.setStart($s,0),Bt.setEnd($s,0)}return c&&u&&(kn(Bt.START_TO_START,Bt,c)===0&&kn(Bt.END_TO_END,Bt,c)===0?Bt=u:(c=null,u=null)),Bt},Ie=(Bt,kn)=>{if(!f6(Bt))return;const vs=Ee();if(Bt=r.dispatch("SetSelectionRange",{range:Bt,forward:kn}).range,vs){u=Bt;try{vs.removeAllRanges(),vs.addRange(Bt)}catch{}kn===!1&&vs.extend&&(vs.collapse(Bt.endContainer,Bt.endOffset),vs.extend(Bt.startContainer,Bt.startOffset)),c=vs.rangeCount>0?vs.getRangeAt(0):null}if(!Bt.collapsed&&Bt.startContainer===Bt.endContainer&&vs?.setBaseAndExtent&&Bt.endOffset-Bt.startOffset<2&&Bt.startContainer.hasChildNodes()){const xn=Bt.startContainer.childNodes[Bt.startOffset];xn&&xn.nodeName==="IMG"&&(vs.setBaseAndExtent(Bt.startContainer,Bt.startOffset,Bt.endContainer,Bt.endOffset),(vs.anchorNode!==Bt.startContainer||vs.focusNode!==Bt.endContainer)&&vs.setBaseAndExtent(xn,0,xn,1))}r.dispatch("AfterSetSelectionRange",{range:Bt,forward:kn})},lt=Bt=>(GE(r,e.getOuterHTML(Bt)),Bt),Pt=()=>YI(r.getBody(),Re()),Et=(Bt,kn)=>GK(e,Re(),Bt,kn),et=()=>{const Bt=Ee(),kn=Bt?.anchorNode,vs=Bt?.focusNode;if(!Bt||!kn||!vs||Hy(kn)||Hy(vs))return!0;const $s=e.createRng(),xn=e.createRng();try{$s.setStart(kn,Bt.anchorOffset),$s.collapse(!0),xn.setStart(vs,Bt.focusOffset),xn.collapse(!0)}catch{return!0}return $s.compareBoundaryPoints($s.START_TO_START,xn)<=0},_r={dom:e,win:n,serializer:o,editor:r,expand:(Bt={type:"word"})=>Ie(tf(e).expand(Re(),Bt)),collapse:xe,setCursorLocation:b,getContent:v,setContent:S,getBookmark:M,moveToBookmark:$,select:J,isCollapsed:Y,isEditable:G,isForward:et,setNode:lt,getNode:Pt,getSel:Ee,setRng:Ie,getRng:Re,getStart:_,getEnd:R,getSelectedBlocks:Et,normalize:()=>{const Bt=Re(),kn=Ee();if(!E4(kn)&&c0(r)){const vs=oc(e,Bt);return vs.each($s=>{Ie($s,et())}),vs.getOr(Bt)}return Bt},selectorChanged:(Bt,kn)=>(f(Bt,kn),_r),selectorChangedWithUnbind:f,getScrollContainer:()=>{let Bt,kn=e.getRoot();for(;kn&&kn.nodeName!=="BODY";){if(kn.scrollHeight>kn.clientHeight){Bt=kn;break}kn=kn.parentNode}return Bt},scrollIntoView:(Bt,kn)=>{_e(Bt)?KI(r,Bt,kn):pC(r,Re(),kn)},placeCaretAt:(Bt,kn)=>Ie(j5(Bt,kn,r.getDoc())),getBoundingClientRect:()=>{const Bt=Re();return Bt.collapsed?qe.fromRangeStart(Bt).getClientRects()[0]:Bt.getBoundingClientRect()},destroy:()=>{n=c=u=null,Oc.destroy()}},Dr=gm(_r),Oc=Z5(_r,r);return _r.bookmarkManager=Dr,_r.controlSelection=Oc,_r},g6=(e,n,o)=>{n.addNodeFilter("br",(r,c,u)=>{const f=kt.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),v=o.getWhitespaceElements();f.body=1;const S=_=>_.name in f||v1(o,_);for(let _=0,R=r.length;_<R;_++){let M=r[_],$=M.parent;if($&&S($)&&M===$.lastChild){let J=M.prev;for(;J;){const Y=J.name;if(Y!=="span"||J.attr("data-mce-type")!=="bookmark"){Y==="br"&&(M=null);break}J=J.prev}if(M&&(M.remove(),_C(o,b,v,$))){const Y=o.getElementRule($.name);Y&&(Y.removeEmpty?$.remove():Y.paddEmpty&&Y3(e,u,S,$))}}else{let J=M;for(;$&&$.firstChild===J&&$.lastChild===J&&(J=$,!f[$.name]);)$=$.parent;if(J===$){const Y=new $i("#text",3);Y.value=ir,M.replace(Y)}}}})},h6=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let v=r.length;for(;v--;){const S=r[v];let _=S.attr(u);_!==void 0?(S.attr(c,_.length>0?_:null),S.attr(u,null)):(_=S.attr(c),c==="style"?_=o.serializeStyle(o.parseStyle(_),S.name):f&&(_=f.call(b,_,c,S.name)),S.attr(c,_.length>0?_:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(F.from(b.firstChild).exists(S=>{var _;return!$b((_=S.value)!==null&&_!==void 0?_:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=v=>v.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const v=r[b],S=v.firstChild,_=(u=S?.value)!==null&&u!==void 0?u:"";if(c==="script"){const R=v.attr("type");R&&v.attr("type",R==="mce-no/type"?null:R.replace(/^mce\-/,"")),n.element_format==="xhtml"&&S&&_.length>0&&(S.value=`// <![CDATA[
`+f(_)+`
// ]]>`)}else n.element_format==="xhtml"&&S&&_.length>0&&(S.value=`<!--
`+f(_)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&f?.indexOf("[CDATA[")===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):f?.indexOf("mce:protected ")===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{ne(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.remove_trailing_brs&&g6(n,e,e.schema)},p6=e=>{const n=r=>r?.name==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},b6=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");kt.each(u.nodeName==="BODY"?u.childNodes:[u],v=>{b.body.appendChild(b.importNode(v,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return vd(e,{...o,node:u}),r&&(c.doc=r),u},v6=(e,n)=>_e(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,y6=(e,n,o)=>v6(e,o)?b6(e,n,o):n,C6=(e,n,o)=>{kt.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},K_=(e,n,o)=>!n.no_events&&e?ox(e,{...n,content:o}).content:o,dT=(e,n,o)=>{const r=Bi(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||tl(oe.fromDom(n))?r:kt.trim(r)},w6=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return p6(c),c},Az=(e,n,o)=>Cp(e,n).serialize(o),S6=(e,n,o,r,c)=>{const u=Az(n,o,r);return K_(e,c,u)},mT=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=n&&n.dom?n.dom:Ls.DOM,u=n&&n.schema?n.schema:Fu(r),f=dh(r,u);h6(f,r,c);const b=(v,S={})=>{const{indent:_,entity_encoding:R,...M}=S,$={format:"html",...M},J=y6(n,v,$),Y=dT(c,J,$),G=w6(f,Y,$);if($.format==="tree")return G;const xe={...r,..._e(_)?{indent:_}:{},..._e(R)?{entity_encoding:R}:{}};return S6(n,xe,u,G,$)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Ce(C6,f,o),getTempAttrs:it(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},fT=(e,n)=>{const o=mT(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},qC="html",Y_=(e,n)=>({...e,format:n,get:!0,getInner:!0}),x6=(e,n={})=>{const o=n.format?n.format:qC,r=Y_(n,o);return p_(e,r).fold(Mo,c=>{const u=lT(e,c);return ZE(e,u,c)})},Wv="html",X_=(e,n)=>({format:Wv,...e,set:!0,content:n}),GC=(e,n,o={})=>{const r=X_(o,n);LC(e,r).each(c=>{const u=c6(e,c.content,c);jE(e,u.html,c)})},fh=Ls.DOM,Op=e=>{fh.setStyle(e.id,"display",e.orgDisplay)},KC=e=>F.from(e).each(n=>n.destroy()),kz=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},_z=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),fh.unbind(n,"submit reset",e.formEventDelegate))},E6=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&_e(c?.nextSibling)&&fh.remove(c.nextSibling),jm(e),e.editorManager.remove(e),!e.inline&&r&&Op(e),Lu(e),fh.remove(e.getContainer()),KC(n),KC(o),e.destroy()}},T6=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),KC(o),KC(r)),_z(e),kz(e),e.destroyed=!0}},gT=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>no(e,c)}})(),_d=kc.ModelManager,Rp=(e,n)=>n.dom[e],J_=(e,n)=>parseInt(Pr(n,e),10),A6=Ce(Rp,"clientWidth"),Oz=Ce(Rp,"clientHeight"),Rz=Ce(J_,"margin-top"),Bz=Ce(J_,"margin-left"),au=e=>e.dom.getBoundingClientRect(),wm=(e,n,o)=>{const r=A6(e),c=Oz(e);return n>=0&&o>=0&&n<=r&&o<=c},k6=(e,n,o,r)=>{const c=au(n),u=e?c.left+n.dom.clientLeft+Bz(n):0,f=e?c.top+n.dom.clientTop+Rz(n):0,b=o-u,v=r-f;return{x:b,y:v}},Q_=(e,n,o)=>{const r=oe.fromDom(e.getBody()),c=e.inline?r:oa(r),u=k6(e.inline,c,n,o);return wm(c,u.x,u.y)},eD=e=>F.from(e).map(oe.fromDom),hT=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return eD(n).map(Ms).getOr(!1)};var Mz=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const tD=e=>{const n=[],o=()=>{const M=e.theme;return M&&M.getNotificationManagerImpl?M.getNotificationManagerImpl():Mz()},r=()=>F.from(n[0]),c=(M,$)=>M.type===$.type&&M.text===$.text&&!M.progressBar&&!M.timeout&&!$.progressBar&&!$.timeout,u=()=>{r().each(M=>{M.reposition()})},f=M=>{n.push(M)},b=M=>{go(n,$=>$===M).each($=>{n.splice($,1)})},v=(M,$=!0)=>e.removed||!hT(e)?{}:($&&e.dispatch("BeforeOpenNotification",{notification:M}),Gt(n,J=>c(o().getArgs(J),M)).getOrThunk(()=>{e.editorManager.setActive(e);const J=o().open(M,()=>{b(J)},()=>$4(e));return f(J),u(),e.dispatch("OpenNotification",{notification:{...J}}),J})),S=()=>{r().each(M=>{o().close(M),b(M),u()})},_=it(n);return(M=>{M.on("SkinLoaded",()=>{const $=N2(M);$&&v({text:$,type:"warning",timeout:0},!1),u()}),M.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),M.on("remove",()=>{ne(n.slice(),$=>{o().close($)})}),M.on("keydown",$=>{var J;const Y=((J=$.key)===null||J===void 0?void 0:J.toLowerCase())==="f12"||$.keyCode===123;$.altKey&&Y&&($.preventDefault(),r().map(G=>oe.fromDom(G.getEl())).each(G=>gg(G)))})})(e),{open:v,close:S,getNotifications:_}},Xf=kc.PluginManager,A0=kc.ThemeManager;var pT=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const bT=e=>{let n=[];const o=()=>{const G=e.theme;return G&&G.getWindowManagerImpl?G.getWindowManagerImpl():pT()},r=(G,xe)=>(...Ee)=>xe?xe.apply(G,Ee):void 0,c=G=>{e.dispatch("OpenWindow",{dialog:G})},u=G=>{e.dispatch("CloseWindow",{dialog:G})},f=(G,xe)=>{n.push({instanceApi:G,triggerElement:xe}),c(G)},b=G=>{u(G);const xe=Ds(n,({instanceApi:Ee,triggerElement:Re})=>Ee===G?Re:F.none());n=ye(n,({instanceApi:Ee})=>Ee!==G),n.length===0?e.focus():xe.filter(Ms).each(gg)},v=()=>F.from(n[n.length-1]),S=G=>{e.editorManager.setActive(e),fC(e);const xe=hl();e.ui.show();const Ee=G();return f(Ee,xe),Ee},_=(G,xe)=>S(()=>o().open(G,xe,b)),R=G=>S(()=>o().openUrl(G,b)),M=G=>{n.length!==0&&G.each(xe=>gg(xe))},$=(G,xe,Ee)=>{const Re=hl(),Ie=o();Ie.alert(G,r(Ee||Ie,()=>{M(Re),xe?.()}))},J=(G,xe,Ee)=>{const Re=hl(),Ie=o();Ie.confirm(G,r(Ee||Ie,lt=>{M(Re),xe?.(lt)}))},Y=()=>{v().each(({instanceApi:G})=>{o().close(G),b(G)})};return e.on("remove",()=>{ne(n,({instanceApi:G})=>{o().close(G)})}),{open:_,openUrl:R,alert:$,confirm:J,close:Y}},nD=(e,n)=>{e.notificationManager.open({type:"error",text:n})},Bp=(e,n)=>{e._skinLoaded?nD(e,n):e.on("SkinLoaded",()=>{nD(e,n)})},Fz=(e,n)=>{Bp(e,Pu.translate(["Failed to upload image: {0}",n]))},Zv=(e,n,o)=>{A2(e,n,{message:o}),console.error(o)},_l=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,cu=(e,n,o)=>{Zv(e,"PluginLoadError",_l("plugin",n,o))},YC=(e,n,o)=>{Zv(e,"IconsLoadError",_l("icons",n,o))},iu=(e,n,o)=>{Zv(e,"LanguageLoadError",_l("language",n,o))},Nz=(e,n,o)=>{Zv(e,"ThemeLoadError",_l("theme",n,o))},sr=(e,n,o)=>{Zv(e,"ModelLoadError",_l("model",n,o))},Pz=(e,n)=>{Zv(e,"LicenseKeyManagerLoadError",_l("license key manager",n))},gh=(e,n,o)=>{const r=Pu.translate(["Failed to initialize plugin: {0}",n]);A2(e,"PluginLoadError",{message:r}),Mp(r,o),Bp(e,r)},Mp=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},oD=new WeakMap,sD=e=>{if(oD.has(e))return;oD.set(e,!0);const n=()=>{e.on("SwitchMode",r=>{const{mode:c}=r;c!=="readonly"&&e.mode.set("readonly")})},o=()=>{e.on("DisabledStateChange",r=>{const{state:c}=r;c||r.preventDefault()},!0)};e.initialized?(e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)):e.on("init",()=>{e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)}),o(),n()},vT=(e,n)=>{const{type:o,message:r}=n;e.notificationManager.open({type:o,text:r})},$z=e=>{switch(e){case"error":return console.error;case"info":return console.info;case"warn":return console.warn;case"log":default:return console.log}},rD=e=>{$z(e.type)(e.message)},aD=(e,n)=>{const{console:o,editor:r}=n;_e(r)&&(e._skinLoaded?vT(e,r):e.on("SkinLoaded",()=>{vT(e,r)})),_e(o)&&rD(o)},yT="Read more: https://www.tiny.cloud/docs/tinymce/latest/license-key/",cD="Make sure to provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms.",_6=e=>{const n="The editor is disabled because a TinyMCE license key has not been provided.";aD(e,{console:{type:"error",message:[`${n}`,cD,yT].join(" ")},editor:{type:"warning",message:`${n}`}})},CT=(e,n)=>{const o=`${n==="online"?"API":"license"} key`,r=`The editor is disabled because the TinyMCE ${o} could not be validated.`;aD(e,{console:{type:"error",message:[`${r}`,`The TinyMCE Commercial License Key Manager plugin is required for the provided ${o} to be validated but could not be loaded.`,yT].join(" ")},editor:{type:"warning",message:`${r}`}})},D6=(e,n)=>{const o=`The "${n}" plugin requires a valid TinyMCE license key.`;aD(e,{console:{type:"error",message:[`${o}`,yT].join(" ")}})},O6="licensekeymanager",Lz=e=>ae(Fx(e))?"online":"offline",Hz=e=>{var n;const o=(n=e0(e))===null||n===void 0?void 0:n.toLowerCase();return o==="gpl"?"gpl":gn(o)?"no_key":"non_gpl"},R6=e=>{const n=Lz(e),o=Hz(e),r=new Set(Gg(e)).has(O6);return o!=="gpl"||n==="online"||r?{type:"use_plugin",onlineStatus:n,licenseKeyType:o,forcePlugin:r}:{type:"use_gpl",onlineStatus:n,licenseKeyType:o,forcePlugin:r}},B6=e=>({validate:n=>{const{plugin:o}=n;return ae(o)&&D6(e,o),Promise.resolve(!1)}}),zz=e=>({validate:n=>{const{plugin:o}=n,r=ae(o);return r&&D6(e,o),Promise.resolve(!r)}}),wT="manager",M6=O6,ST=(()=>{const e=kc();return{load:(c,u)=>{if(R6(c).type==="use_plugin"){const b=`plugins/${M6}/plugin${u}.js`;e.load(wT,b).catch(()=>{Pz(c,b)})}},add:c=>{e.add(wT,c)},init:c=>{const u=v=>{Object.defineProperty(c,"licenseKeyManager",{value:v,writable:!1,configurable:!1,enumerable:!0})},f=R6(c),b=e.get(wT);if(_e(b)){const v=b(c,e.urls[wT]);u(v)}else switch(f.type){case"use_gpl":{u(zz(c));break}case"use_plugin":{sD(c),u(B6(c)),f.onlineStatus==="offline"&&f.licenseKeyType==="no_key"?_6(c):CT(c,f.onlineStatus);break}}c.licenseKeyManager.validate({})}}})(),XC=e=>{F.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},iD=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},Vz=(e,n)=>{iD(e,"StyleWithCSS",n),iD(e,"enableInlineTableEditing",n),iD(e,"enableObjectResizing",n)},F6=e=>{e.selection.setRng(e.selection.getRng())},lD=(e,n,o)=>{Nh(e,n)&&!o?Zr(e,n):o&&ui(e,n)},N6=e=>{const n=oe.fromDom(e.getBody());lD(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),XC(e)},uD=e=>{const n=oe.fromDom(e.getBody());lD(n,"mce-content-readonly",!1),e.hasEditableRoot()&&x(n,!0),Vz(e,!1),$4(e)&&e.focus(),F6(e),e.nodeChanged()},ia=e=>t0(e),k0="data-mce-contenteditable",P6=e=>{ne(Ge(e,'*[contenteditable="true"]'),n=>{Cr(n,k0,"true"),x(n,!1)})},dD=e=>{ne(Ge(e,`*[${k0}="true"]`),n=>{Qr(n,k0),x(n,!0)})},xT=(e,n)=>{const o=oe.fromDom(e.getBody());n?(N6(e),x(o,!1),P6(o)):(dD(o),uD(e))},$6=e=>{e.serializer?mD(e):e.on("PreInit",()=>{mD(e)})},mD=e=>{e.parser.addAttributeFilter("contenteditable",n=>{ia(e)&&ne(n,o=>{o.attr(k0,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(k0,n=>{ia(e)&&ne(n,o=>{o.attr("contenteditable",o.attr(k0))})}),e.serializer.addTempAttr(k0)},Uz=e=>e.type==="click",Wz=["copy"],I6=e=>j(Wz,e.type),L6=(e,n)=>dc(n,"a",r=>Qo(r,oe.fromDom(e.getBody()))).bind(r=>Ki(r,"href")),Wu=(e,n)=>{if(Uz(n)&&!Yt.metaKeyPressed(n)){const o=oe.fromDom(n.target);L6(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${Hi(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else I6(n)&&e.dispatch(n.type,n)},Zz=e=>{e.on("ShowCaret ObjectSelected",n=>{ia(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||xT(e,n.state)})},jz=e=>{$6(e),Zz(e)},TY=e=>/^[a-z0-9\-]+$/i.test(e),JC=e=>"content/"+e+"/content.css",qz=e=>tinymce.Resource.has(JC(e)),AY=e=>ET(e,B2(e)),Gz=e=>ET(e,gx(e)),ET=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return de(n,u=>qz(u)?u:TY(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},Sm=e=>{e.contentCSS=e.contentCSS.concat(AY(e),Gz(e))},fD=e=>e?Eo(e.getElementsByTagName("img")):[],TT=(e,n)=>{const o={};return{findAll:(c,u=ot)=>{const f=ye(fD(c),v=>{const S=v.src;return v.hasAttribute("data-mce-bogus")||v.hasAttribute("data-mce-placeholder")||!S||S===Ho.transparentSrc?!1:Kn(S,"blob:")?!e.isUploaded(S)&&u(v):Kn(S,"data:")?u(v):!1}),b=de(f,v=>{const S=v.src;if(no(o,S))return o[S].then(_=>ae(_)?_:{image:v,blobInfo:_.blobInfo});{const _=B9(n,S).then(R=>(delete o[S],{image:v,blobInfo:R})).catch(R=>(delete o[S],R));return o[S]=_,_}});return Promise.all(b)}}},AT=()=>{let o={};const r=(M,$)=>({status:M,resultUri:$}),c=M=>M in o;return{hasBlobUri:c,getResultUri:M=>{const $=o[M];return $?$.resultUri:null},isPending:M=>c(M)?o[M].status===1:!1,isUploaded:M=>c(M)?o[M].status===2:!1,markPending:M=>{o[M]=r(1,null)},markUploaded:(M,$)=>{o[M]=r(2,$)},removeFailed:M=>{delete o[M]},destroy:()=>{o={}}}};let Kz=0;const gD=()=>{const e=()=>Math.round(Gn()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},Yz=e=>e+Kz+++gD(),H6=()=>{let e=[];const n=R=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[R.toLowerCase()]||"dat",o=(R,M,$,J,Y)=>{if(ae(R))return r({id:R,name:J,filename:Y,blob:M,base64:$});if(Jt(R))return r(R);throw new Error("Unknown input type")},r=R=>{if(!R.blob||!R.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const M=R.id||Yz("blobid"),$=R.name||M,J=R.blob;return{id:it(M),name:it($),filename:it(R.filename||$+"."+n(J.type)),blob:it(J),base64:it(R.base64),blobUri:it(R.blobUri||URL.createObjectURL(J)),uri:it(R.uri)}},c=R=>{f(R.id())||e.push(R)},u=R=>Gt(e,R).getOrUndefined(),f=R=>u(M=>M.id()===R);return{create:o,add:c,get:f,getByUri:R=>u(M=>M.blobUri()===R),getByData:(R,M)=>u($=>$.base64()===R&&$.blob().type===M),findFirst:u,removeByUri:R=>{e=ye(e,M=>M.blobUri()===R?(URL.revokeObjectURL(M.blobUri()),!1):!0)},destroy:()=>{ne(e,R=>{URL.revokeObjectURL(R.blobUri())}),e=[]}}},Xz=(e,n)=>{const o={},r=(Y,G)=>Y?Y.replace(/\/$/,"")+"/"+G.replace(/^\//,""):G,c=(Y,G)=>new Promise((xe,Ee)=>{const Re=new XMLHttpRequest;Re.open("POST",n.url),Re.withCredentials=n.credentials,Re.upload.onprogress=lt=>{G(lt.loaded/lt.total*100)},Re.onerror=()=>{Ee("Image upload failed due to a XHR Transport error. Code: "+Re.status)},Re.onload=()=>{if(Re.status<200||Re.status>=300){Ee("HTTP Error: "+Re.status);return}const lt=JSON.parse(Re.responseText);if(!lt||!ae(lt.location)){Ee("Invalid JSON: "+Re.responseText);return}xe(r(n.basePath,lt.location))};const Ie=new FormData;Ie.append("file",Y.blob(),Y.filename()),Re.send(Ie)}),u=fe(n.handler)?n.handler:c,f=()=>new Promise(Y=>{Y([])}),b=(Y,G)=>({url:G,blobInfo:Y,status:!0}),v=(Y,G)=>({url:"",blobInfo:Y,status:!1,error:G}),S=(Y,G)=>{kt.each(o[Y],xe=>{xe(G)}),delete o[Y]},_=(Y,G,xe)=>(e.markPending(Y.blobUri()),new Promise(Ee=>{let Re,Ie;try{const lt=()=>{Re&&(Re.close(),Ie=rt)},Pt=et=>{lt(),e.markUploaded(Y.blobUri(),et),S(Y.blobUri(),b(Y,et)),Ee(b(Y,et))},Et=et=>{lt(),e.removeFailed(Y.blobUri()),S(Y.blobUri(),v(Y,et)),Ee(v(Y,et))};Ie=et=>{et<0||et>100||F.from(Re).orThunk(()=>F.from(xe).map(Ve)).each(De=>{Re=De,De.progressBar.value(et)})},G(Y,Ie).then(Pt,et=>{Et(ae(et)?{message:et}:et)})}catch(lt){Ee(v(Y,lt))}})),R=Y=>Y===c,M=Y=>{const G=Y.blobUri();return new Promise(xe=>{o[G]=o[G]||[],o[G].push(xe)})},$=(Y,G)=>(Y=kt.grep(Y,xe=>!e.isUploaded(xe.blobUri())),Promise.all(kt.map(Y,xe=>e.isPending(xe.blobUri())?M(xe):_(xe,u,G))));return{upload:(Y,G)=>!n.url&&R(u)?f():$(Y,G)}},z6=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),kT=(e,n)=>Xz(n,{url:D5(e),basePath:V1(e),credentials:Zk(e),handler:O5(e)}),Jz=e=>{const n=AT(),o=kT(e,n);return{upload:(r,c=!0)=>o.upload(r,c?z6(e):void 0)}},V6=(e,n)=>e.dom.isEmpty(n.dom)&&_e(e.schema.getTextBlockElements()[Bo(n)]),Qz=e=>n=>{V6(e,n)&&gs(n,oe.fromHtml('<br data-mce-bogus="1" />'))},_0=e=>{const n=H6();let o,r;const c=AT(),u=[],f=Re=>Ie=>e.selection?Re(Ie):[],b=Re=>Re+(Re.indexOf("?")===-1?"?":"&")+new Date().getTime(),v=(Re,Ie,lt)=>{let Pt=0;do Pt=Re.indexOf(Ie,Pt),Pt!==-1&&(Re=Re.substring(0,Pt)+lt+Re.substr(Pt+Ie.length),Pt+=lt.length-Ie.length+1);while(Pt!==-1);return Re},S=(Re,Ie,lt)=>{const Pt=`src="${lt}"${lt===Ho.transparentSrc?' data-mce-placeholder="1"':""}`;return Re=v(Re,`src="${Ie}"`,Pt),Re=v(Re,'data-mce-src="'+Ie+'"','data-mce-src="'+lt+'"'),Re},_=(Re,Ie)=>{ne(e.undoManager.data,lt=>{lt.type==="fragmented"?lt.fragments=de(lt.fragments,Pt=>S(Pt,Re,Ie)):lt.content=S(lt.content,Re,Ie)})},R=(Re,Ie)=>{const lt=e.convertURL(Ie,"src");_(Re.src,Ie),Ya(oe.fromDom(Re),{src:us(e)?b(Ie):Ie,"data-mce-src":lt})},M=()=>(o||(o=kT(e,c)),G().then(f(Re=>{const Ie=de(Re,lt=>lt.blobInfo);return o.upload(Ie,z6(e)).then(f(lt=>{const Pt=[];let Et=!1;const et=de(lt,(De,te)=>{const{blobInfo:Le,image:xt}=Re[te];let Tn=!1;return De.status&&k5(e)?(De.url&&!er(xt.src,De.url)&&(Et=!0),n.removeByUri(xt.src),Uu(e)||R(xt,De.url)):De.error&&(De.error.remove&&(_(xt.src,Ho.transparentSrc),Pt.push(xt),Tn=!0),Fz(e,De.error.message)),{element:xt,status:De.status,uploadUri:De.url,blobInfo:Le,removed:Tn}});return Pt.length>0&&!Uu(e)?e.undoManager.transact(()=>{ne(Vd(Pt),De=>{const te=Lc(De);Ws(De),te.each(Qz(e)),n.removeByUri(De.dom.src)})}):Et&&e.undoManager.dispatchChange(),et}))}))),$=()=>qg(e)?M():Promise.resolve([]),J=Re=>ns(u,Ie=>Ie(Re)),Y=Re=>{u.push(Re)},G=()=>(r||(r=TT(c,n)),r.findAll(e.getBody(),J).then(f(Re=>{const Ie=ye(Re,lt=>ae(lt)?(Bp(e,lt),!1):lt.uriType!=="blob");return Uu(e)||ne(Ie,lt=>{_(lt.image.src,lt.blobInfo.blobUri()),lt.image.src=lt.blobInfo.blobUri(),lt.image.removeAttribute("data-mce-src")}),Ie}))),xe=()=>{n.destroy(),c.destroy(),r=o=null},Ee=Re=>Re.replace(/src="(blob:[^"]+)"/g,(Ie,lt)=>{const Pt=c.getResultUri(lt);if(Pt)return'src="'+Pt+'"';let Et=n.getByUri(lt);return Et||(Et=Ne(e.editorManager.get(),(et,De)=>et||De.editorUpload&&De.editorUpload.blobCache.getByUri(lt),void 0)),Et?'src="data:'+Et.blob().type+";base64,"+Et.base64()+'"':Ie});return e.on("SetContent",()=>{qg(e)?$():G()}),e.on("RawSaveContent",Re=>{Re.content=Ee(Re.content)}),e.on("GetContent",Re=>{Re.source_view||Re.format==="raw"||Re.format==="tree"||(Re.content=Ee(Re.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Re=>{ne(Re,Ie=>{const lt=Ie.attr("src");if(!lt||n.getByUri(lt))return;const Pt=c.getResultUri(lt);Pt&&Ie.attr("src",Pt)})})}),{blobCache:n,addFilter:Y,uploadImages:M,uploadImagesAuto:$,scanForImages:G,destroy:xe}},U6=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>bn(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{kt.each(f,(b,v)=>{n.setAttrib(c,v,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c?.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return kt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},W6={remove_similar:!0,inherit:!1},D0={selector:"td,th",...W6},eV={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...D0},tablecellverticalalign:{styles:{"vertical-align":"%value"},...D0},tablecellbordercolor:{styles:{borderColor:"%value"},...D0},tablecellclass:{classes:["%value"],...D0},tableclass:{selector:"table",classes:["%value"],...W6},tablecellborderstyle:{styles:{borderStyle:"%value"},...D0},tablecellborderwidth:{styles:{borderWidth:"%value"},...D0}},tV=it(eV),nV=e=>{const n={},o=f=>_e(f)?n[f]:n,r=f=>no(n,f),c=(f,b)=>{f&&(ae(f)?(Ze(b)||(b=[b]),ne(b,v=>{Zn(v.deep)&&(v.deep=!Vt(v)),Zn(v.split)&&(v.split=!Vt(v)||Ot(v)),Zn(v.remove)&&Vt(v)&&!Ot(v)&&(v.remove="none"),Vt(v)&&Ot(v)&&(v.mixed=!0,v.block_expand=!0),ae(v.classes)&&(v.classes=v.classes.split(/\s+/))}),n[f]=b):To(f,(v,S)=>{c(S,v)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(U6(e)),c(tV()),c(Gk(e)),{get:o,has:r,register:c,unregister:u}},_T=kt.each,Dd=Ls.DOM,DT=e=>_e(e)&&Jt(e),Z6=(e,n)=>{const o=n&&n.schema||Fu({}),r=(v,S)=>{S.classes.length>0&&Dd.addClass(v,S.classes.join(" ")),Dd.setAttribs(v,S.attrs)},c=v=>{const S=ae(v)?{name:v,classes:[],attrs:{}}:v,_=Dd.create(S.name);return r(_,S),_},u=(v,S)=>{const _=o.getElementRule(v.nodeName.toLowerCase()),R=_?.parentsRequired;return R&&R.length?S&&j(R,S)?S:R[0]:!1},f=(v,S,_)=>{let R;const M=S[0],$=DT(M)?M.name:void 0,J=u(v,$);if(J)$===J?(R=M,S=S.slice(1)):R=J;else if(M)R=M,S=S.slice(1);else if(!_)return v;const Y=R?c(R):Dd.create("div");Y.appendChild(v),_&&kt.each(_,xe=>{const Ee=c(xe);Y.insertBefore(Ee,v)});const G=DT(R)?R.siblings:void 0;return f(Y,S,G)},b=Dd.create("div");if(e.length>0){const v=e[0],S=c(v),_=DT(v)?v.siblings:void 0;b.appendChild(f(S,e.slice(1),_))}return b},hD=e=>{e=kt.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":kt.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const v=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);v&&(o.attrs[v[1]]=v[2])}return""})),o.name=n||"div",o},Fp=e=>ae(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),kt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=kt.map(n.split(/(?:~\+|~|\+)/),hD),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],oV=(e,n)=>{let o="",r=Z1(e);if(r==="")return"";const c=M=>ae(M)?M.replace(/%(\w+)/g,""):"",u=(M,$)=>Dd.getStyle($??e.getBody(),M,!0);if(ae(n)){const M=e.formatter.get(n);if(!M)return"";n=M[0]}if("preview"in n){const M=n.preview;if(M===!1)return"";r=M||r}let f=n.block||n.inline||"span",b;const v=Fp(n.selector);v.length>0?(v[0].name||(v[0].name=f),f=n.selector,b=Z6(v,e)):b=Z6([f],e);const S=Dd.select(f,b)[0]||b.firstChild;_T(n.styles,(M,$)=>{const J=c(M);J&&Dd.setStyle(S,$,J)}),_T(n.attributes,(M,$)=>{const J=c(M);J&&Dd.setAttrib(S,$,J)}),_T(n.classes,M=>{const $=c(M);Dd.hasClass(S,$)||Dd.addClass(S,$)}),e.dispatch("PreviewFormats"),Dd.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const _=u("fontSize"),R=/px$/.test(_)?parseInt(_,10):0;return _T(r.split(" "),M=>{let $=u(M,S);if(!(M==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test($)&&($=u(M),Mg($).toLowerCase()==="#ffffff"))&&!(M==="color"&&Mg($).toLowerCase()==="#000000")){if(M==="font-size"&&/em|%$/.test($)){if(R===0)return;$=parseFloat($)/(/%$/.test($)?100:1)*R+"px"}M==="border"&&$&&(o+="padding:0 2px;"),o+=M+":"+$+";"}}),e.dispatch("AfterPreviewFormats"),Dd.remove(b),o},sV=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},jv=e=>{const n=nV(e),o=dn({});return sV(e),s9(e),Uu(e)||XE(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{Tz(e,r,c,u)},remove:(r,c,u,f)=>{s6(e,r,c,u,f)},toggle:(r,c,u)=>{r6(e,r,c,u)},match:(r,c,u,f)=>n6(e,r,c,u,f),closest:r=>Ez(e,r),matchAll:(r,c)=>T0(e,r,c),matchNode:(r,c,u,f)=>o6(e,r,c,u,f),canApply:r=>Z_(e,r),formatChanged:(r,c,u,f)=>a6(e,o,r,c,u,f),getCssText:Ce(oV,e)}},pD=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},j6=(e,n,o)=>{const r=dn(!1),c=v=>{oT(n,!1,o),n.add({},v)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",v=>{const S=v.command;pD(S)||(E0(n,o),n.beforeChange())}),e.on("ExecCommand",v=>{const S=v.command;pD(S)||c(v)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",v=>{const S=v.keyCode;if(v.isDefaultPrevented())return;const _=Ho.os.isMacOS()&&v.key==="Meta";(S>=33&&S<=36||S>=37&&S<=40||S===45||v.ctrlKey||_)&&(c(),e.nodeChanged()),(S===46||S===8)&&e.nodeChanged(),r.get()&&n.typing&&!$_(tT(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",v=>{const S=v.keyCode;if(v.isDefaultPrevented())return;if(S>=33&&S<=36||S>=37&&S<=40||S===45){n.typing&&c(v);return}const _=v.ctrlKey&&!v.altKey||v.metaKey;if((S<16||S>20)&&S!==224&&S!==91&&!n.typing&&!_){n.beforeChange(),oT(n,!0,o),n.add({},v),r.set(!0);return}(Ho.os.isMacOS()?v.metaKey:v.ctrlKey&&!v.altKey)&&n.beforeChange()}),e.on("mousedown",v=>{n.typing&&c(v)});const u=v=>v.inputType==="insertReplacementText",f=v=>v.inputType==="insertText"&&v.data===null,b=v=>v.inputType==="insertFromPaste"||v.inputType==="insertFromDrop";e.on("input",v=>{v.inputType&&(u(v)||f(v)||b(v))&&c(v)}),e.on("AddUndo Undo Redo ClearUndos",v=>{v.isDefaultPrevented()||e.nodeChanged()})},q6=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},QC=e=>{const n=is(),o=dn(0),r=dn(0),c={data:[],typing:!1,beforeChange:()=>{cT(e,o,n)},add:(u,f)=>H_(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=tT(e);u.bookmark=I1(e.selection),e.dispatch("change",{level:u,lastLevel:an(c.data,r.get()).getOrUndefined()})},undo:()=>z_(e,c,o,r),redo:()=>V_(e,r,c.data),clear:()=>{U_(e,c,r)},reset:()=>{iT(e,c)},hasUndo:()=>W_(e,c,r),hasRedo:()=>JF(e,c,r),transact:u=>QF(e,c,o,u),ignore:u=>{e6(e,o,u)},extra:(u,f)=>{t6(e,c,r,u,f)}};return Uu(e)||j6(e,c,o),q6(e),c},G6=[9,27,Yt.HOME,Yt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Yt.DOWN,Yt.UP,Yt.LEFT,Yt.RIGHT].concat(Ho.browser.isFirefox()?[224]:[]),K6="data-mce-placeholder",bD=e=>e.type==="keydown"||e.type==="keyup",Y6=e=>{const n=e.keyCode;return n===Yt.BACKSPACE||n===Yt.DELETE},rV=e=>{if(bD(e)){const n=e.keyCode;return!Y6(e)&&(Yt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||j(G6,n))}else return!1},OT=e=>bD(e)&&!(Y6(e)||e.type==="keyup"&&e.keyCode===229),X6=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},J6=e=>{var n;const o=e.dom,r=pc(e),c=(n=px(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(rV(f))return;const v=e.getBody(),S=OT(f)?!1:X6(o,v,r);(o.getAttrib(v,K6)!==""!==S||b)&&(o.setAttrib(v,K6,S?c:null),Lk(e,S),e.on(S?"keydown":"keyup",u),e.off(S?"keyup":"keydown",u))};Js(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Td.setEditorTimeout(e,()=>u(b)))})},RT=e=>n=>_e(n)&&n.nodeName.toLowerCase()===e,BT=e=>n=>_e(n)&&e.test(n.nodeName),Jf=e=>_e(e)&&e.nodeType===3,Q6=e=>_e(e)&&e.nodeType===1,Zu=BT(/^(OL|UL|DL)$/),vD=BT(/^(OL|UL)$/),MT=BT(/^(LI|DT|DD)$/),eN=BT(/^(DT|DD)$/),O0=RT("br"),aV=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},yD=(e,n)=>_e(n)&&n.nodeName in e.schema.getTextBlockElements(),R0=(e,n)=>_e(e)&&e.nodeName in n,rf=(e,n)=>_e(n)&&n.nodeName in e.schema.getVoidElements(),cV=(e,n)=>O0(n)?e.isBlock(n.nextSibling)&&!O0(n.previousSibling):!1,hh=(e,n,o)=>{const r=e.isEmpty(n);return o&&e.select("span[data-mce-type=bookmark]",n).length>0?!1:r},Hr=(e,n)=>e.isChildOf(n,e.getRoot()),FT=Ls.DOM,NT=(e,n)=>{const o=n.parentElement;if(o&&o.nodeName==="LI"&&o.firstChild===n){const r=o.previousSibling;r&&r.nodeName==="LI"?(r.appendChild(n),hh(e,o)&&FT.remove(o)):FT.setStyle(o,"listStyleType","none")}if(Zu(o)){const r=o.previousSibling;r&&r.nodeName==="LI"&&r.appendChild(n)}},af=(e,n)=>{const o=kt.grep(e.select("ol,ul",n));kt.each(o,r=>{NT(e,r)})},CD=(e,n)=>{if(Jf(e))return{container:e,offset:n};const o=tf.getNode(e,n);return Jf(o)?{container:o,offset:n>=e.childNodes.length?o.data.length:0}:o.previousSibling&&Jf(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&Jf(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:n}},ew=e=>{const n=e.cloneRange(),o=CD(e.startContainer,e.startOffset);n.setStart(o.container,o.offset);const r=CD(e.endContainer,e.endOffset);return n.setEnd(r.container,r.offset),n},tN=["OL","UL","DL"],B0=tN.join(","),tw=(e,n)=>{const o=e.selection.getStart(!0);return e.dom.getParent(o,B0,cf(e,o))},iV=(e,n)=>_e(e)&&n.length===1&&n[0]===e,qv=e=>ye(e.querySelectorAll(B0),Zu),lV=e=>{const n=tw(e),o=e.selection.getSelectedBlocks();return iV(n,o)?qv(n):ye(o,r=>Zu(r)&&n!==r)},M0=(e,n)=>{const o=kt.map(n,r=>{const c=e.dom.getParent(r,"li,dd,dt",cf(e,r));return c||r});return Xs(o)},wD=e=>{const n=e.selection.getSelectedBlocks();return ye(M0(e,n),MT)},Np=e=>ye(wD(e),eN),SD=(e,n)=>{const o=e.dom.getParents(n,"TD,TH");return o.length>0?o[0]:e.getBody()},Od=(e,n)=>!Zu(n)&&!MT(n)&&ce(tN,o=>e.isValidChild(n.nodeName,o)),cf=(e,n)=>{const o=e.dom.getParents(n,e.dom.isBlock),r=u=>u.nodeName.toLowerCase()!==pc(e);return Gt(o,u=>r(u)&&Od(e.schema,u)).getOr(e.getBody())},uV=e=>Lc(e).exists(n=>MT(n.dom)&&Aa(n).exists(o=>!Zu(o.dom))&&Vr(n).exists(o=>!Zu(o.dom))),Gv=(e,n)=>{const o=e.dom.getParents(n,"ol,ul",cf(e,n));return es(o)},xD=e=>{const n=Gv(e,e.selection.getStart()),o=ye(e.selection.getSelectedBlocks(),vD);return n.toArray().concat(o)},dV=e=>{const n=e.selection.getStart();return e.dom.getParents(n,"ol,ul",cf(e,n))},Kv=e=>{const n=xD(e),o=dV(e);return Gt(o,r=>uV(oe.fromDom(r))).fold(()=>mV(e,n),r=>[r])},mV=(e,n)=>{const o=de(n,r=>Gv(e,r).getOr(r));return Xs(o)},lu=e=>/\btox\-/.test(e.className),nw=(e,n)=>n!==null&&!e.dom.isEditable(n),nN=e=>{const n=tw(e);return nw(e,n)||!e.selection.isEditable()},ow=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return nw(e,o)||!e.selection.isEditable()},ph=(e,n,o)=>e.dispatch("ListMutation",{action:n,element:o}),Pp=(e,n,o={})=>{const r=e.dom,c=e.schema.getBlockElements(),u=r.createFragment(),f=pc(e),b=ip(e);let v,S,_=!1;for(S=r.create(f,{...b,...o.style?{style:o.style}:{}}),R0(n.firstChild,c)||u.appendChild(S);v=n.firstChild;){const R=v.nodeName;!_&&(R!=="SPAN"||v.getAttribute("data-mce-type")!=="bookmark")&&(_=!0),R0(v,c)?(u.appendChild(v),S=null):(S||(S=r.create(f,b),u.appendChild(S)),S.appendChild(v))}return!_&&S&&S.appendChild(r.create("br",{"data-mce-bogus":"1"})),u},F0=e=>bf(e,"OL,UL"),fV=e=>bf(e,"LI"),oN=e=>Aa(e).exists(F0),gV=e=>Vr(e).exists(F0),hV=(e,n)=>Nx(e).map(o=>o>=n).getOr(!0),N0=e=>"listAttributes"in e,sN=e=>"isComment"in e,Yv=e=>"isFragment"in e,xm=e=>e.depth>0,pV=e=>e.isSelected,bV=e=>{const n=wr(e),o=gV(e)?n.slice(0,-1):n;return de(o,xu)},vV=(e,n,o)=>Lc(e).filter(Tr).map(r=>({depth:n,dirty:!1,isSelected:o,content:bV(e),itemAttributes:Wo(e),listAttributes:Wo(r),listType:Bo(r),isInPreviousLi:!1})),rN=(e,n)=>{gs(e.item,n.list)},yV=e=>{for(let n=1;n<e.length;n++)rN(e[n-1],e[n])},CV=(e,n)=>{Xt(es(e),to(n),rN)},wV=(e,n)=>{const o={list:oe.fromTag(n,e),item:oe.fromTag("li",e)};return gs(o.list,o.item),o},SV=(e,n,o)=>{const r=[];for(let c=0;c<o;c++)r.push(wV(e,N0(n)?n.listType:n.parentListType));return r},xV=(e,n)=>{for(let o=0;o<e.length-1;o++)lc(e[o].item,"list-style-type","none");es(e).each(o=>{N0(n)&&(Ya(o.list,n.listAttributes),Ya(o.item,n.itemAttributes)),Gi(o.item,n.content)})},kY=(e,n)=>{Bo(e.list)!==n.listType&&(e.list=od(e.list,n.listType)),Ya(e.list,n.listAttributes)},EV=(e,n,o)=>{const r=oe.fromTag("li",e);return Ya(r,n),Gi(r,o),r},TV=(e,n)=>{gs(e.list,n),e.item=n},aN=(e,n,o)=>{const r=n.slice(0,o.depth);return es(r).each(c=>{if(N0(o)){const u=EV(e,o.itemAttributes,o.content);TV(c,u),kY(c,o)}else if(Yv(o))Gi(c.item,o.content);else{const u=oe.fromHtml(`<!--${o.content}-->`);gs(c.list,u)}}),r},AV=(e,n,o)=>{const r=SV(e,o,o.depth-n.length);return yV(r),xV(r,o),CV(n,r),n.concat(r)},kV=(e,n)=>{let o=F.none();const r=Ne(n,(c,u,f)=>sN(u)?f===0?(o=F.some(u),c):aN(e,c,u):u.depth>c.length?AV(e,c,u):aN(e,c,u),[]);return o.each(c=>{const u=oe.fromHtml(`<!--${c.content}-->`);to(r).each(f=>{Su(f.list,u)})}),to(r).map(c=>c.list)},_V=(e,n,o)=>{switch(n){case"Indent":if(hV(e,o.depth))o.depth++;else return;break;case"Outdent":o.depth--;break;case"Flatten":o.depth=0}o.dirty=!0},$p=(e,n)=>{N0(e)&&N0(n)&&(e.listType=n.listType,e.listAttributes={...n.listAttributes})},DV=e=>{e.listAttributes=Mc(e.listAttributes,(n,o)=>o!=="start")},OV=(e,n)=>{const o=e[n].depth,r=u=>u.depth===o&&!u.dirty,c=u=>u.depth<o;return un(Ln(e.slice(0,n)),r,c).orThunk(()=>un(e.slice(n+1),r,c))},PT=e=>(ne(e,(n,o)=>{OV(e,o).fold(()=>{n.dirty&&N0(n)&&DV(n)},r=>$p(n,r))}),e),ED=(e,n,o,r)=>{var c;if(Pl(r))return[{depth:e+1,content:(c=r.dom.nodeValue)!==null&&c!==void 0?c:"",dirty:!1,isSelected:!1,isComment:!0}];n.each(b=>{Qo(b.start,r)&&o.set(!0)});const u=vV(r,e,o.get());n.each(b=>{Qo(b.end,r)&&o.set(!1)});const f=Vr(r).filter(F0).map(b=>$T(e,n,o,b)).getOr([]);return u.toArray().concat(f)},TD=(e,n,o,r)=>Aa(r).filter(F0).fold(()=>ED(e,n,o,r),c=>{const u=Ne(wr(r),(f,b,v)=>{if(v===0)return f;if(fV(b))return f.concat(ED(e,n,o,b));{const S={isFragment:!0,depth:e,content:[b],isSelected:!1,dirty:!1,parentListType:Bo(c)};return f.concat(S)}},[]);return $T(e,n,o,c).concat(u)}),$T=(e,n,o,r)=>_n(wr(r),c=>{const u=F0(c)?$T:TD,f=e+1;return u(f,n,o,c)}),RV=(e,n)=>{const o=dn(!1),r=0;return de(e,c=>({sourceList:c,entries:$T(r,n,o,c)}))},BV=(e,n)=>{const o=PT(n);return de(o,r=>{const c=sN(r)?Wd([oe.fromHtml(`<!--${r.content}-->`)]):Wd(r.content),u=N0(r)?r.itemAttributes:{};return oe.fromDom(Pp(e,c.dom,u))})},MV=(e,n)=>{const o=PT(n);return kV(e.contentDocument,o).toArray()},FV=(e,n)=>_n(wt(n,xm),o=>to(o).exists(xm)?MV(e,o):BV(e,o)),NV=(e,n,o)=>{ne(ye(n,pV),r=>_V(e,o,r))},PV=e=>{const n=de(wD(e),oe.fromDom);return Xt(Gt(n,dt(oN)),Gt(Ln(n),dt(oN)),(o,r)=>({start:o,end:r}))},$V=(e,n,o)=>{const r=RV(n,PV(e));ne(r,c=>{NV(e,c.entries,o);const u=FV(e,c.entries);ne(u,f=>{ph(e,o==="Indent"?"IndentList":"OutdentList",f.dom)}),ob(c.sourceList,u),Ws(c.sourceList)})},IV=e=>Nx(e).forall(n=>{const o=e.selection.getSelectedBlocks();return ce(o,r=>dc(oe.fromDom(r),"li").forall(c=>Se(c,"ol,ul").length<=n))}),Ip=Ls.DOM,LV=(e,n,o)=>{const r=S=>{const _=S.parentNode;_&&kt.each(c,R=>{_.insertBefore(R,o.parentNode)}),Ip.remove(S)},c=Ip.select('span[data-mce-type="bookmark"]',n),u=Pp(e,o),f=Ip.createRng();f.setStartAfter(o),f.setEndAfter(n);const b=f.extractContents();for(let S=b.firstChild;S;S=S.firstChild)if(S.nodeName==="LI"&&e.dom.isEmpty(S)){Ip.remove(S);break}e.dom.isEmpty(b)||Ip.insertAfter(b,n),Ip.insertAfter(u,n);const v=o.parentElement;v&&hh(e.dom,v)&&r(v),Ip.remove(o),hh(e.dom,n)&&Ip.remove(n)},HV=Jr("dd"),cN=Jr("dt"),zV=(e,n)=>{HV(n)?od(n,"dt"):cN(n)&&_i(n).each(o=>LV(e,o.dom,n.dom))},VV=e=>{cN(e)&&od(e,"dd")},UV=(e,n,o)=>{n==="Indent"?ne(o,VV):ne(o,r=>zV(e,r))},WV=(e,n)=>{const o=Vd(Kv(e)),r=Vd(Np(e));let c=!1;if(o.length||r.length){const u=e.selection.getBookmark();$V(e,o,n),UV(e,n,r),e.selection.moveToBookmark(u),e.selection.setRng(ew(e.selection.getRng())),e.nodeChanged(),c=!0}return c},AD=(e,n)=>!nN(e)&&WV(e,n),iN=e=>AD(e,"Indent"),kD=e=>AD(e,"Outdent"),sw=e=>AD(e,"Flatten"),Xv=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},ZV=(e,n,o)=>{const r=o["list-style-type"]?o["list-style-type"]:null;e.setStyle(n,"list-style-type",r)},lN=(e,n)=>{kt.each(n,(o,r)=>{e.setAttribute(r,o)})},jV=(e,n,o)=>{lN(n,o["list-attributes"]),kt.each(e.select("li",n),r=>{lN(r,o["list-item-attributes"])})},Jv=(e,n,o)=>{ZV(e,n,o),jV(e,n,o)},qV=(e,n,o)=>{kt.each(o,r=>e.setStyle(n,r,""))},IT=(e,n)=>_e(n)&&!R0(n,e.schema.getBlockElements()),_D=(e,n,o,r)=>{let c=n[o?"startContainer":"endContainer"];const u=n[o?"startOffset":"endOffset"];Q6(c)&&(c=c.childNodes[Math.min(u,c.childNodes.length-1)]||c),!o&&O0(c.nextSibling)&&(c=c.nextSibling);const f=v=>{for(;!e.dom.isBlock(v)&&v.parentNode&&r!==v;)v=v.parentNode;return v},b=(v,S)=>{var _;const R=new Qs(v,f(v)),M=S?"next":"prev";let $;for(;$=R[M]();)if(!(rf(e,$)||Ga($.textContent)||((_=$.textContent)===null||_===void 0?void 0:_.length)===0))return F.some($);return F.none()};if(o&&Jf(c))if(Ga(c.textContent))c=b(c,!1).getOr(c);else for(c.parentNode!==null&&IT(e,c.parentNode)&&(c=c.parentNode);c.previousSibling!==null&&(IT(e,c.previousSibling)||Jf(c.previousSibling));)c=c.previousSibling;if(!o&&Jf(c))if(Ga(c.textContent))c=b(c,!0).getOr(c);else for(c.parentNode!==null&&IT(e,c.parentNode)&&(c=c.parentNode);c.nextSibling!==null&&(IT(e,c.nextSibling)||Jf(c.nextSibling));)c=c.nextSibling;for(;c.parentNode!==r;){const v=c.parentNode;if(yD(e,c)||/^(TD|TH)$/.test(v.nodeName))return c;c=v}return c},uN=(e,n,o)=>{const r=[],c=e.dom,u=_D(e,n,!0,o),f=_D(e,n,!1,o);let b;const v=[];for(let S=u;S&&(v.push(S),S!==f);S=S.nextSibling);return kt.each(v,S=>{var _;if(yD(e,S)){r.push(S),b=null;return}if(c.isBlock(S)||O0(S)){O0(S)&&c.remove(S),b=null;return}const R=S.nextSibling;if(gm.isBookmarkNode(S)&&(Zu(R)||yD(e,R)||!R&&S.parentNode===o)){b=null;return}b||(b=c.create("p"),(_=S.parentNode)===null||_===void 0||_.insertBefore(b,S),r.push(b)),b.appendChild(S)}),r},GV=(e,n,o)=>{const r=e.getStyle(n,"list-style-type");let c=o?o["list-style-type"]:"";return c=c===null?"":c,r===c},KV=(e,n)=>{const o=e.selection.getStart(!0),r=_D(e,n,!0,e.getBody());return $o(oe.fromDom(r),oe.fromDom(n.commonAncestorContainer))?n.commonAncestorContainer:o},DD=(e,n,o)=>{const r=e.selection.getRng();let c="LI";const u=cf(e,KV(e,r)),f=e.dom;if(f.getContentEditable(e.selection.getNode())==="false")return;n=n.toUpperCase(),n==="DL"&&(c="DT");const b=Tp(r),v=ye(uN(e,r,u),e.dom.isEditable);kt.each(v,S=>{let _;const R=S.previousSibling,M=S.parentNode;MT(M)||(R&&Zu(R)&&R.nodeName===n&&GV(f,R,o)?(_=R,S=f.rename(S,c),R.appendChild(S)):(_=f.create(n),M.insertBefore(_,S),_.appendChild(S),S=f.rename(S,c)),qV(f,S,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Jv(f,_,o),OD(e.dom,_))}),e.selection.setRng(Ap(b))},YV=(e,n)=>Zu(e)&&e.nodeName===n?.nodeName,XV=(e,n,o)=>{const r=e.getStyle(n,"list-style-type",!0),c=e.getStyle(o,"list-style-type",!0);return r===c},JV=(e,n)=>e.className===n.className,dN=(e,n,o)=>YV(n,o)&&XV(e,n,o)&&JV(n,o),OD=(e,n)=>{let o,r=n.nextSibling;if(dN(e,n,r)){const c=r;for(;o=c.firstChild;)n.appendChild(o);e.remove(c)}if(r=n.previousSibling,dN(e,n,r)){const c=r;for(;o=c.lastChild;)n.insertBefore(o,n.firstChild);e.remove(c)}},QV=(e,n,o,r)=>{if(n.nodeName!==o){const c=e.dom.rename(n,o);Jv(e.dom,c,r),ph(e,Xv(o),c)}else Jv(e.dom,n,r),ph(e,Xv(o),n)},mN=(e,n,o,r)=>{if(n.classList.forEach((c,u,f)=>{c.startsWith("tox-")&&(f.remove(c),f.length===0&&n.removeAttribute("class"))}),n.nodeName!==o){const c=e.dom.rename(n,o);Jv(e.dom,c,r),ph(e,Xv(o),c)}else Jv(e.dom,n,r),ph(e,Xv(o),n)},fN=(e,n,o,r,c)=>{const u=Zu(n);if(u&&n.nodeName===r&&!RD(c)&&!lu(n))sw(e);else{DD(e,r,c);const f=Tp(e.selection.getRng()),b=u?[n,...o]:o,v=u&&lu(n)?mN:QV;kt.each(b,S=>{v(e,S,r,c)}),e.selection.setRng(Ap(f))}},RD=e=>"list-style-type"in e,_Y=(e,n,o,r)=>{if(n!==e.getBody())if(n)if(n.nodeName===o&&!RD(r)&&!lu(n))sw(e);else{const c=Tp(e.selection.getRng());lu(n)&&n.classList.forEach((f,b,v)=>{f.startsWith("tox-")&&(v.remove(f),v.length===0&&n.removeAttribute("class"))}),Jv(e.dom,n,r);const u=e.dom.rename(n,o);OD(e.dom,u),e.selection.setRng(Ap(c)),DD(e,o,r),ph(e,Xv(o),u)}else DD(e,o,r),ph(e,Xv(o),n)},LT=(e,n,o)=>{const r=tw(e);if(ow(e,r))return;const c=lV(e),u=Jt(o)?o:{};c.length>0?fN(e,r,c,n,u):_Y(e,r,n,u)},gN=(e,n,o,r)=>{let c=n.startContainer;const u=n.startOffset;if(Jf(c)&&(o?u<c.data.length:u>0))return c;const f=e.schema.getNonEmptyElements();Q6(c)&&(c=tf.getNode(c,u));const b=new Qs(c,r);o&&cV(e.dom,c)&&b.next();const v=o?b.next.bind(b):b.prev2.bind(b);for(;c=v();)if(c.nodeName==="LI"&&!c.hasChildNodes()||f[c.nodeName]||Jf(c)&&c.data.length>0)return c;return null},BD=(e,n)=>{const o=n.childNodes;return o.length===1&&!Zu(o[0])&&e.isBlock(o[0])},eU=e=>F.from(e).map(oe.fromDom).filter($l).exists(n=>vl(n)&&!j(["details"],Bo(n))),tU=(e,n)=>{BD(e,n)&&eU(n.firstChild)&&e.remove(n.firstChild,!0)},hN=(e,n,o)=>{let r;const c=BD(e,o)?o.firstChild:o;if(tU(e,n),!hh(e,n,!0))for(;r=n.firstChild;)c.appendChild(r)},MD=(e,n,o)=>{let r;const c=n.parentNode;if(!Hr(e,n)||!Hr(e,o))return;Zu(o.lastChild)&&(r=o.lastChild),c===o.lastChild&&O0(c.previousSibling)&&e.remove(c.previousSibling);const u=o.lastChild;u&&O0(u)&&n.hasChildNodes()&&e.remove(u),hh(e,o,!0)&&pl(oe.fromDom(o)),hN(e,n,o),r&&o.appendChild(r);const b=Ic(oe.fromDom(o),oe.fromDom(n))?e.getParents(n,Zu,o):[];e.remove(n),ne(b,v=>{hh(e,v)&&v!==e.getRoot()&&e.remove(v)})},nU=(e,n,o)=>{pl(oe.fromDom(o)),MD(e.dom,n,o),e.selection.setCursorLocation(o,0)},oU=(e,n,o,r)=>{const c=e.dom;if(c.isEmpty(r))nU(e,o,r);else{const u=Tp(n);MD(c,o,r),e.selection.setRng(Ap(u))}},FD=(e,n,o,r)=>{const c=Tp(n);MD(e.dom,o,r);const u=Ap(c);e.selection.setRng(u)},ND=(e,n)=>{const o=e.dom,r=e.selection,c=r.getStart(),u=SD(e,c),f=o.getParent(r.getStart(),"LI",u);if(f){const b=f.parentElement;if(b===e.getBody()&&hh(o,b))return!0;const v=ew(r.getRng()),S=o.getParent(gN(e,v,n,u),"LI",u),_=S&&(n?o.isChildOf(f,S):o.isChildOf(S,f));if(S&&S!==f&&!_)return e.undoManager.transact(()=>{n?oU(e,v,S,f):aV(f)?kD(e):FD(e,v,f,S)}),!0;if(_&&!n&&S!==f){const R=v.commonAncestorContainer.parentElement;return!R||o.isChildOf(S,R)?!1:(e.undoManager.transact(()=>{const M=Tp(v);hN(o,R,S),R.remove();const $=Ap(M);e.selection.setRng($)}),!0)}else if(!S&&!n&&v.startOffset===0&&v.endOffset===0)return e.undoManager.transact(()=>{sw(e)}),!0}return!1},sU=(e,n,o)=>{const r=e.getParent(n.parentNode,e.isBlock,o);e.remove(n),r&&e.isEmpty(r)&&e.remove(r)},pN=(e,n)=>{const o=e.dom,r=e.selection.getStart(),c=SD(e,r),u=o.getParent(r,o.isBlock,c);if(u&&o.isEmpty(u,void 0,{checkRootAsContent:!0})){const f=ew(e.selection.getRng()),b=gN(e,f,n,c),v=o.getParent(b,"LI",c);if(b&&v){const S=$=>j(["td","th","caption"],Bo($)),_=$=>$.dom===c,R=Hs(oe.fromDom(v),S,_),M=Hs(oe.fromDom(f.startContainer),S,_);return On(R,M,Qo)?(e.undoManager.transact(()=>{const $=v.parentNode;sU(o,u,c),OD(o,$),e.selection.select(b,!0),e.selection.collapse(n)}),!0):!1}}return!1},rU=(e,n)=>ND(e,n)||pN(e,n),PD=e=>{const n=e.selection.getStart(),o=SD(e,n),r=e.dom.getParent(n,"LI,DT,DD",o);return _e(r)||wD(e).length>0},aU=e=>PD(e)?(e.undoManager.transact(()=>{let n=!0;const o=()=>n=!1;e.on("input",o),e.execCommand("Delete"),e.off("input",o),n&&e.dispatch("input"),af(e.dom,e.getBody())}),!0):!1,$D=(e,n)=>{const o=e.selection;return!ow(e,o.getNode())&&(o.isCollapsed()?rU(e,n):aU(e))},cU=(e,n)=>({block:e,position:n}),iU=(e,n)=>({from:e,to:n}),ID=(e,n)=>{const o=oe.fromDom(e),r=oe.fromDom(n.container());return RE(o,r).map(c=>cU(c,n))},lU=e=>!(Ic(e.to.block,e.from.block)||Ic(e.from.block,e.to.block)),uU=e=>!Qo(e.from.block,e.to.block),bN=(e,n)=>Hs(n,c=>el(c)||mi(c.dom),c=>Qo(c,e)).filter(Tr).getOr(e),LD=(e,n)=>{const o=oe.fromDom(e);return Qo(bN(o,n.from.block),bN(o,n.to.block))},dU=e=>mr(e.from.block.dom)===!1&&mr(e.to.block.dom)===!1,mU=e=>{const n=o=>ep(o)||La(o.dom)||Qd(o);return n(e.from.block)&&n(e.to.block)},fU=(e,n,o,r)=>xr(r.position.getNode())&&!fi(e,r.block)?Zf(!1,r.block.dom).bind(c=>c.isEqual(r.position)?qc(o,n,c).bind(u=>ID(n,u)):F.some(r)).getOr(r):r,gU=(e,n,o,r)=>{const c=ID(n,qe.fromRangeStart(r)),u=c.bind(f=>qc(o,n,f.position).bind(b=>ID(n,b).map(v=>fU(e,n,o,v))));return Xt(c,u,iU).filter(f=>uU(f)&&LD(n,f)&&dU(f)&&mU(f)&&lU(f))},hU=(e,n,o,r)=>r.collapsed?gU(e,n,o,r):F.none(),vN=(e,n)=>{const o=wr(e);return go(o,r=>n.isBlock(Bo(r))).fold(it(o),r=>o.slice(0,r))},Lp=(e,n)=>{const o=vN(e,n);return ne(o,Ws),o},HD=(e,n,o)=>{const r=jt(o,n);return Gt(r.reverse(),c=>fi(e,c)).each(Ws)},pU=(e,n)=>ye(Pa(n),o=>!fi(e,o)).length===0,bU=(e,n,o,r,c)=>{if(fi(r,o))return em(o),Kc(o.dom);pU(r,c)&&fi(r,n)&&Ka(c,oe.fromTag("br"));const u=yi(o.dom,qe.before(c.dom));return ne(Lp(n,r),f=>{Ka(c,f)}),HD(r,e,n),u},vU=(e,n)=>e.isInline(Bo(n)),yU=(e,n,o,r)=>{if(fi(r,o)){if(fi(r,n)){const f=Ae((b=>{const v=(S,_)=>Aa(S).fold(()=>_,R=>vU(r,R)?v(R,_.concat(ta(R))):_);return v(b,[])})(o),(b,v)=>(Di(b,v),v),tp());pl(n),gs(n,f)}return Ws(o),Kc(n.dom)}const c=Hu(o.dom);return ne(Lp(n,r),u=>{gs(o,u)}),HD(r,e,n),c},Qv=(e,n)=>{const o=jt(n,e);return F.from(o[o.length-1])},CU=(e,n)=>Ic(n,e)?Qv(n,e):F.none(),HT=(e,n)=>{Zf(e,n.dom).bind(o=>F.from(o.getNode())).map(oe.fromDom).filter(Jd).each(Ws)},zT=(e,n,o,r)=>(HT(!0,n),HT(!1,o),CU(n,o).fold(Ce(yU,e,n,o,r),Ce(bU,e,n,o,r))),yN=(e,n,o,r,c)=>n?zT(e,r,o,c):zT(e,o,r,c),VT=(e,n)=>{const o=oe.fromDom(e.getBody());return hU(e.schema,o.dom,n,e.selection.getRng()).map(c=>()=>{yN(o,n,c.from.block,c.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},UT=(e,n,o)=>{const r=n.getRng();return Xt(RE(e,oe.fromDom(r.startContainer)),RE(e,oe.fromDom(r.endContainer)),(c,u)=>Qo(c,u)?F.none():F.some(()=>{r.deleteContents(),yN(e,!0,c,u,o).each(f=>{n.setRng(f.toRange())})})).getOr(F.none())},CN=(e,n)=>{const o=oe.fromDom(n),r=Ce(Qo,e);return Au(o,el,r).isSome()},wU=(e,n)=>CN(e,n.startContainer)||CN(e,n.endContainer),SU=(e,n)=>{const o=yi(e.dom,qe.fromRangeStart(n)).isNone(),r=Gc(e.dom,qe.fromRangeEnd(n)).isNone();return!wU(e,n)&&o&&r},xU=e=>F.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),EU=e=>{const n=oe.fromDom(e.getBody()),o=e.selection.getRng();return SU(n,o)?xU(e):UT(n,e.selection,e.schema)},rw=(e,n)=>e.selection.isCollapsed()?F.none():EU(e),bh=(e,n,o,r,c)=>F.from(n._selectionOverrides.showCaret(e,o,r,c)),TU=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},aw=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?F.none():F.some(TU(n)),AU=(e,n,o)=>{const r=q2(1,e.getBody(),n),c=qe.fromRangeStart(r),u=c.getNode();if(Cd(u))return bh(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(Cd(f))return bh(1,e,f,!1,!1);const b=b0(e.dom.getRoot(),c.getNode());return Cd(b)?bh(1,e,b,!1,o):F.none()},zD=(e,n,o)=>n.collapsed?AU(e,n,o).getOr(n):n,kU=e=>Sp(e)||vC(e),_U=e=>xp(e)||yC(e),DU=(e,n)=>{St(n)&&n.data.length===0&&e.remove(n)},wN=(e,n,o,r,c,u)=>{bh(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),DU(e.dom,o)},OU=(e,n)=>{const o=e.selection.getRng();if(!St(o.commonAncestorContainer))return F.none();const r=n?1:-1,c=Ed(e.getBody()),u=Ce(Uf,n?c.next:c.prev),f=n?kU:_U,b=Ym(r,e.getBody(),o),v=u(b),S=v&&zu(n,v);if(!S||!gp(b,S))return F.none();if(f(S))return F.some(()=>wN(e,o,b.getNode(),r,n,S));const _=u(S);return _&&f(_)&&gp(S,_)?F.some(()=>wN(e,o,b.getNode(),r,n,_)):F.none()},VD=(e,n)=>OU(e,n),UD=(e,n)=>{const o=e.getBody();return n?Kc(o).filter(Sp):Hu(o).filter(xp)},WD=e=>{const n=e.selection.getRng();return!n.collapsed&&(UD(e,!0).exists(o=>o.isEqual(qe.fromRangeStart(n)))||UD(e,!1).exists(o=>o.isEqual(qe.fromRangeEnd(n))))},RU=e=>_e(e)&&(el(oe.fromDom(e))||Qd(oe.fromDom(e))),uu=ja.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),BU=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return bn(o)&&o.getAttribute("data-mce-caret")===r},MU=(e,n,o,r,c)=>{const u=f=>c.isInline(f.nodeName.toLowerCase())&&!lm(o,r,e);return Cv(!n,o).fold(()=>Cv(n,r).fold(Oe,u),u)},SN=(e,n,o,r,c)=>{const u=c.getNode(!o);return RE(oe.fromDom(n),oe.fromDom(r.getNode())).map(f=>fi(e,f)?uu.remove(f.dom):uu.moveToElement(u)).orThunk(()=>F.some(uu.moveToElement(u)))},xN=(e,n,o,r)=>qc(n,e,o).bind(c=>RU(c.getNode())||MU(e,n,o,c,r)?F.none():n&&mr(c.getNode())||!n&&mr(c.getNode(!0))?SN(r,e,n,o,c):n&&xp(o)||!n&&Sp(o)?F.some(uu.moveToPosition(c)):F.none()),FU=(e,n)=>gn(n)?F.none():e&&mr(n.nextSibling)?F.some(uu.moveToElement(n.nextSibling)):!e&&mr(n.previousSibling)?F.some(uu.moveToElement(n.previousSibling)):F.none(),ZD=(e,n,o)=>o.fold(r=>F.some(uu.remove(r)),r=>F.some(uu.moveToElement(r)),r=>lm(n,r,e)?F.none():F.some(uu.moveToPosition(r))),NU=(e,n,o,r)=>BU(n,o)?FU(n,o.getNode(!n)).orThunk(()=>xN(e,n,o,r)):xN(e,n,o,r).bind(c=>ZD(e,o,c)),PU=(e,n,o,r)=>{const c=q2(n?1:-1,e,o),u=qe.fromRangeStart(c),f=oe.fromDom(e);return!n&&xp(u)?F.some(uu.remove(u.getNode(!0))):n&&Sp(u)?F.some(uu.remove(u.getNode())):!n&&Sp(u)&&xE(f,u,r)?vB(f,u,r).map(b=>uu.remove(b.getNode())):n&&xp(u)&&a3(f,u,r)?EE(f,u,r).map(b=>uu.remove(b.getNode())):NU(e,n,u,r)},$U=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),rh(e,n,oe.fromDom(o)),!0),IU=(e,n)=>o=>{const r=n?qe.before(o):qe.after(o);return e.selection.setRng(r.toRange()),!0},LU=e=>n=>(e.selection.setRng(n.toRange()),!0),EN=(e,n)=>F.from(b0(e.getBody(),n)),HU=(e,n)=>{const o=e.selection.getNode();return EN(e,o).filter(mr).fold(()=>PU(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold($U(e,n),IU(e,n),LU(e))),()=>F.some(rt))},zU=e=>{ne(Ge(e,".mce-offscreen-selection"),Ws)},VU=(e,n)=>{const o=e.selection.getNode();return mr(o)&&!Gd(o)?EN(e,o.parentNode).filter(mr).fold(()=>F.some(()=>{zU(oe.fromDom(e.getBody())),rh(e,n,oe.fromDom(e.selection.getNode())),b3(e)}),()=>F.some(rt)):WD(e)?F.some(()=>{WB(e,e.selection.getRng(),oe.fromDom(e.getBody()))}):F.none()},TN=e=>{const n=e.dom,o=e.selection,r=b0(e.getBody(),o.getNode());if(mi(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(qe.before(c).toRange())}return!0},jD=(e,n)=>e.selection.isCollapsed()?HU(e,n):VU(e,n),qD=(e,n)=>{var o;const r=e.dom,c=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),f=e.getBody();if(((o=c?.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&c&&u&&c===f.firstChild&&u===f.lastChild&&!r.isEmpty(f)){const v=c.cloneNode(!1),S=()=>{if(n?zB(e):OE(e),f.firstChild!==c){const _=Tp(e.selection.getRng(),()=>document.createElement("span"));Array.from(f.childNodes).forEach(R=>v.appendChild(R)),f.appendChild(v),e.selection.setRng(Ap(_))}};return F.some(S)}return F.none()},UU=(e,n)=>{const o=qe.fromRangeStart(e.selection.getRng());return qc(n,e.getBody(),o).filter(r=>n?cL(r):iL(r)).bind(r=>j2(n?0:-1,r)).map(r=>()=>e.selection.select(r))},GD=(e,n)=>e.selection.isCollapsed()?UU(e,n):F.none(),ey=St,AN=e=>ey(e)&&e.data[0]===ya,kN=e=>ey(e)&&e.data[e.data.length-1]===ya,_N=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(ya)},WU=e=>{var n;if(ey(e.previousSibling))return kN(e.previousSibling)||e.previousSibling.appendData(ya),e.previousSibling;if(ey(e))return AN(e)||e.insertData(0,ya),e;{const o=_N(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},ZU=e=>{var n,o;if(ey(e.nextSibling))return AN(e.nextSibling)||e.nextSibling.insertData(0,ya),e.nextSibling;if(ey(e))return kN(e)||e.appendData(ya),e;{const r=_N(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},WT=(e,n)=>e?WU(n):ZU(n),DN=Ce(WT,!0),jU=Ce(WT,!1),ON=(e,n)=>St(e.container())?WT(n,e.container()):WT(n,e.getNode()),KD=(e,n)=>{const o=n.get();return o&&e.container()===o&&Ts(o)},YD=(e,n)=>n.fold(o=>{am(e.get());const r=DN(o);return e.set(r),F.some(qe(r,r.length-1))},o=>Kc(o).map(r=>{if(KD(r,e)){const c=e.get();return qe(c,1)}else{am(e.get());const c=ON(r,!0);return e.set(c),qe(c,1)}}),o=>Hu(o).map(r=>{if(KD(r,e)){const c=e.get();return qe(c,c.length-1)}else{am(e.get());const c=ON(r,!1);return e.set(c),qe(c,c.length-1)}}),o=>{am(e.get());const r=jU(o);return e.set(r),F.some(qe(r,1))}),RN=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return F.none()},rl=ja.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),BN=(e,n)=>{const o=im(n,e);return o||e},XD=(e,n,o)=>{const r=g3(o),c=BN(n,r.container());return ah(e,c,r).fold(()=>Gc(c,r).bind(Ce(ah,e,c)).map(u=>rl.before(u)),F.none)},MN=(e,n)=>mm(e,n)===null,qU=(e,n,o)=>ah(e,n,o).filter(Ce(MN,n)),cw=(e,n,o)=>{const r=h3(o);return qU(e,n,r).bind(c=>yi(c,r).isNone()?F.some(rl.start(c)):F.none())},DY=(e,n,o)=>{const r=g3(o);return qU(e,n,r).bind(c=>Gc(c,r).isNone()?F.some(rl.end(c)):F.none())},OY=(e,n,o)=>{const r=h3(o),c=BN(n,r.container());return ah(e,c,r).fold(()=>yi(c,r).bind(Ce(ah,e,c)).map(u=>rl.after(u)),F.none)},GU=e=>!f3(ju(e)),vh=(e,n,o)=>RN([XD,cw,DY,OY],[e,n,o]).filter(GU),ju=e=>e.fold(Mo,Mo,Mo,Mo),ty=e=>e.fold(it("before"),it("start"),it("end"),it("after")),qu=e=>e.fold(rl.before,rl.before,rl.after,rl.after),yh=e=>e.fold(rl.start,rl.start,rl.end,rl.end),JD=(e,n)=>ty(e)===ty(n)&&ju(e)===ju(n),FN=(e,n,o,r,c,u)=>Xt(ah(n,o,r),ah(n,o,c),(f,b)=>f!==b&&IB(o,f,b)?rl.after(e?f:b):u).getOr(u),iw=(e,n)=>e.fold(ot,o=>!JD(o,n)),KU=(e,n,o,r,c)=>{const u=zu(e,c);return qc(e,o,u).map(Ce(zu,e)).fold(()=>r.map(qu),v=>vh(n,o,v).map(Ce(FN,e,n,o,u,v)).filter(Ce(iw,r))).filter(GU)},NN=(e,n)=>e?n.fold(k(F.some,rl.start),F.none,k(F.some,rl.after),F.none):n.fold(F.none,k(F.some,rl.before),F.none,k(F.some,rl.end)),RY=(e,n,o,r)=>{const c=zu(e,r),u=vh(n,o,c);return vh(n,o,c).bind(Ce(NN,e)).orThunk(()=>KU(e,n,o,u,r))},YU=e=>fe(e.selection.getSel().modify),ny=(e,n,o)=>{const r=e?1:-1;return n.setRng(qe(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},PN=(e,n)=>{const o=n.selection.getRng(),r=e?qe.fromRangeEnd(o):qe.fromRangeStart(o);return YU(n)?e&&Lb(r)?ny(!0,n.selection,r):!e&&D1(r)?ny(!1,n.selection,r):!1:!1};var vr;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(vr||(vr={}));const ZT=(e,n)=>e===-1?Ln(n):n,XU=(e,n,o)=>e===1?n.next(o):n.prev(o),oy=(e,n,o,r)=>xr(r.getNode(n===1))?vr.Br:lm(o,r)===!1?vr.Block:vr.Wrap,Hp=(e,n,o,r)=>{const c=Ed(o);let u=r;const f=[];for(;u;){const b=XU(n,c,u);if(!b)break;if(xr(b.getNode(!1)))return n===1?{positions:ZT(n,f).concat([b]),breakType:vr.Br,breakAt:F.some(b)}:{positions:ZT(n,f),breakType:vr.Br,breakAt:F.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const v=oy(o,n,u,b);return{positions:ZT(n,f),breakType:v,breakAt:F.some(b)}}f.push(b),u=b}return{positions:ZT(n,f),breakType:vr.Eol,breakAt:F.none()}},zp=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===-1?u.concat(c):[c].concat(u)}).getOr([]),QD=(e,n)=>Ne(e,(o,r)=>o.fold(()=>F.some(r),c=>Xt(to(c.getClientRects()),to(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),F.none()),jT=(e,n)=>to(n.getClientRects()).bind(o=>QD(e,o.left)),P0=Ce(Hp,qe.isAbove,-1),$0=Ce(Hp,qe.isBelow,1),eO=Ce(zp,-1,P0),tO=Ce(zp,1,$0),nO=(e,n)=>P0(e,n).breakAt.isNone(),oO=(e,n)=>$0(e,n).breakAt.isNone(),sO=e=>Kc(e).map(n=>[n].concat($0(e,n).positions)).getOr([]),JU=e=>Hu(e).map(n=>P0(e,n).positions.concat(n)).getOr([]),$N=(e,n)=>jT(eO(e,n),n),IN=(e,n)=>jT(tO(e,n),n),QU=mr,LN=(e,n)=>Math.abs(e.left-n),qT=(e,n)=>Math.abs(e.right-n),HN=e=>rs(e,"node"),zN=(e,n)=>ll(e,(o,r)=>{const c=Math.min(LN(o,n),qT(o,n)),u=Math.min(LN(r,n),qT(r,n));return u===c&&HN(r)&&QU(r.node)||u<c?r:o}),eW=e=>{const n=o=>de(o,r=>{const c=Mi(r);return c.node=e,c});if(bn(e))return n(e.getClientRects());if(St(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},I0=e=>_n(e,eW);var Vp;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Vp||(Vp={}));const tW=(e,n,o,r)=>{let c=r;for(;c=o0(c,e,Ub,n);)if(o(c))return},rO=(e,n,o,r,c,u)=>{let f=0;const b=[],v=R=>{let M=I0([R]);e===Vp.Up&&(M=M.reverse());for(let $=0;$<M.length;$++){const J=M[$];if(!o(J,S)){if(b.length>0&&n(J,H(b))&&f++,J.line=f,c(J))return!0;b.push(J)}}return!1},S=H(u.getClientRects());if(!S)return b;const _=u.getNode();return _&&(v(_),tW(e,r,v,_)),b},nW=(e,n)=>n.line>e,VN=(e,n)=>n.line===e,oW=Ce(rO,Vp.Up,If,Ig),UN=Ce(rO,Vp.Down,Ig,If),aO=e=>H(e.getClientRects()),WN=(e,n,o,r)=>{const c=Ed(n);let u,f,b,v;const S=[];let _=0;e===Vp.Down?(u=c.next,f=Ig,b=If,v=qe.after(r)):(u=c.prev,f=If,b=Ig,v=qe.before(r));const R=aO(v);do{if(!v.isVisible())continue;const M=aO(v);if(b(M,R))continue;S.length>0&&f(M,H(S))&&_++;const $=Mi(M);if($.position=v,$.line=_,o($))return S;S.push($)}while(v=u(v));return S},cO=e=>n=>nW(e,n),GT=e=>n=>VN(e,n),lf=(e,n)=>{e.selection.setRng(n),pC(e,e.selection.getRng())},iO=(e,n,o)=>F.some(zD(e,n,o)),ZN=(e,n,o,r,c,u)=>{const f=n===1,b=Ed(e.getBody()),v=Ce(Uf,f?b.next:b.prev),S=f?r:c;if(!o.collapsed){const J=Lf(o);if(u(J))return bh(n,e,J,n===-1,!1);if(WD(e)){const Y=o.cloneRange();return Y.collapse(n===-1),F.from(Y)}}const _=Ym(n,e.getBody(),o);if(S(_))return aw(e,_.getNode(!f));let R=v(_);const M=np(o);if(R)R=zu(f,R);else return M?F.some(o):F.none();if(S(R))return bh(n,e,R.getNode(!f),f,!1);const $=v(R);return $&&S($)&&gp(R,$)?bh(n,e,$.getNode(!f),f,!1):M?iO(e,R.toRange(),!1):F.none()},jN=(e,n,o,r,c,u)=>{const f=Ym(n,e.getBody(),o),b=H(f.getClientRects()),v=n===Vp.Down,S=e.getBody();if(!b)return F.none();if(WD(e)){const G=v?qe.fromRangeEnd(o):qe.fromRangeStart(o);return(v?IN:$N)(S,G).orThunk(()=>F.from(G)).map(Ee=>Ee.toRange())}const R=(v?UN:oW)(S,cO(1),f),M=ye(R,GT(1)),$=b.left,J=zN(M,$);if(J&&u(J.node)){const G=Math.abs($-J.left),xe=Math.abs($-J.right);return bh(n,e,J.node,G<xe,!1)}let Y;if(r(f)?Y=f.getNode():c(f)?Y=f.getNode(!0):Y=Lf(o),Y){const G=WN(n,S,cO(1),Y);let xe=zN(ye(G,GT(1)),$);if(xe||(xe=H(ye(G,GT(0))),xe))return iO(e,xe.position.toRange(),!1)}return M.length===0?lw(e,v).filter(v?c:r).map(G=>zD(e,G.toRange(),!1)):F.none()},lw=(e,n)=>{const o=e.selection.getRng(),r=n?qe.fromRangeEnd(o):qe.fromRangeStart(o),c=Wx(r.container(),e.getBody());if(n){const u=$0(c,r);return es(u.positions)}else{const u=P0(c,r);return to(u.positions)}},sy=(e,n,o)=>lw(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),Up=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},KT=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},lO=(e,n,o)=>YD(n,o).map(r=>(Up(e,r),o)),qN=(e,n,o)=>{const r=qe.fromRangeStart(e);if(e.collapsed)return r;{const c=qe.fromRangeEnd(e);return o?yi(n,c).getOr(c):Gc(n,r).getOr(r)}},YT=(e,n,o)=>{const r=e.getBody(),c=qN(e.selection.getRng(),r,o),u=Ce(Kf,e);return RY(o,u,r,c).bind(b=>lO(e,n,b))},sW=(e,n,o)=>{const r=de(Ge(oe.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=ye(r,e),u=ye(o,e);ne(Ke(c,u),Ce(KT,!1)),ne(Ke(u,c),Ce(KT,!0))},rW=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=qe.fromRangeStart(e.selection.getRng());qe.isTextPosition(r)&&!LB(r)&&(Up(e,bv(o,r)),n.set(null))}},L0=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=ye(r,e);ne(c,u=>{const f=qe.fromRangeStart(n.selection.getRng());vh(e,n.getBody(),f).bind(b=>lO(n,o,b))})}},XT=(e,n,o)=>rm(e)?YT(e,n,o).isSome():!1,uO=(e,n,o)=>rm(n)?PN(e,n):!1,uw=e=>{const n=dn(null),o=Ce(Kf,e);return e.on("NodeChange",r=>{rm(e)&&(sW(o,e.dom,r.parents),rW(e,n),L0(o,e,n,r.parents))}),n},GN=Ce(uO,!0),dO=Ce(uO,!1),dw=(e,n,o)=>{if(rm(e)){const r=lw(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?qe.fromRangeEnd(c):qe.fromRangeStart(c)});return vh(Ce(Kf,e),e.getBody(),r).exists(c=>{const u=qu(c);return YD(o,u).exists(f=>(Up(e,f),!0))})}else return!1},KN=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},aW=e=>Xt(Kc(e),Hu(e),(n,o)=>{const r=zu(!0,n),c=zu(!1,o);return Gc(e,r).forall(u=>u.isEqual(c))}).getOr(!0),mO=(e,n)=>o=>YD(n,o).map(r=>()=>Up(e,r)),YN=(e,n,o,r)=>{const c=e.getBody(),u=Ce(Kf,e);e.undoManager.ignore(()=>{e.selection.setRng(KN(o,r)),OE(e),vh(u,c,qe.fromRangeStart(e.selection.getRng())).map(yh).bind(mO(e,n)).each(Ht)}),e.nodeChanged()},cW=(e,n)=>{const o=im(n,e);return o||e},iW=(e,n,o,r)=>{const c=cW(e.getBody(),r.container()),u=Ce(Kf,e),f=vh(u,c,r);return f.bind(v=>o?v.fold(it(F.some(yh(v))),F.none,it(F.some(qu(v))),F.none):v.fold(F.none,it(F.some(qu(v))),F.none,it(F.some(yh(v))))).map(mO(e,n)).getOrThunk(()=>{const v=eh(o,c,r),S=v.bind(_=>vh(u,c,_));return Xt(f,S,()=>ah(u,c,r).bind(_=>aW(_)?F.some(()=>{rh(e,o,oe.fromDom(_))}):F.none())).getOrThunk(()=>S.bind(()=>v.map(_=>()=>{o?YN(e,n,r,_):YN(e,n,_,r)})))})},fO=(e,n,o)=>{if(e.selection.isCollapsed()&&rm(e)){const r=qe.fromRangeStart(e.selection.getRng());return iW(e,n,o,r)}return F.none()},gO=e=>Ld(e)>1,XN=(e,n)=>{const o=oe.fromDom(e.getBody()),r=oe.fromDom(e.selection.getStart()),c=jt(r,o);return go(c,n).fold(it(c),u=>c.slice(0,u))},JN=e=>Ld(e)===1,lW=e=>XN(e,n=>e.schema.isBlock(Bo(n))||gO(n)),uW=e=>XN(e,n=>e.schema.isBlock(Bo(n))),QN=(e,n)=>{const o=Ce($3,e);return _n(n,r=>o(r)?[r.dom]:[])},hO=e=>{const n=uW(e);return QN(e,n)},dW=(e,n,o,r)=>{const c=QN(n,r);if(c.length===0)rh(n,e,o);else{const u=fM(o.dom,c);n.selection.setRng(u.toRange())}},mW=(e,n)=>{const o=ye(lW(e),JN);return es(o).bind(r=>{const c=qe.fromRangeStart(e.selection.getRng());return VB(n,c,r.dom)&&!bo(r)?F.some(()=>dW(n,e,r,o)):F.none()})},fW=(e,n)=>{const o=n.parentElement;return xr(n)&&!q(o)&&e.dom.isEmpty(o)},gW=e=>bo(oe.fromDom(e)),eP=(e,n)=>{const o=e.selection.getStart(),r=fW(e,o)||gW(o)?fM(o,n):ts(e.selection.getRng(),n);e.selection.setRng(r.toRange())},tP=(e,n)=>{const o=Ke(n,hO(e));o.length>0&&eP(e,o)},nP=e=>St(e.startContainer),oP=e=>e.startOffset===0&&nP(e),hW=(e,n)=>{const o=n.startContainer.parentElement;return!q(o)&&$3(e,oe.fromDom(o))},JT=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!q(n)&&!q(o)&&n.isEqualNode(o)},Ii=e=>{const n=e.endContainer;return e.endOffset===(St(n)?n.length:n.childNodes.length)},pW=e=>JT(e)&&Ii(e),QT=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),H0=e=>pW(e)||QT(e),sP=e=>{const n=e.selection.getRng();return oP(n)&&hW(e,n)&&H0(n)},du=e=>{if(sP(e)){const n=hO(e);return F.some(()=>{OE(e),tP(e,n)})}else return F.none()},Ch=(e,n)=>e.selection.isCollapsed()?mW(e,n):du(e),rP=(e,n)=>zt(e,o=>Ni(o.dom),o=>n.isBlock(Bo(o))),bW=e=>rP(oe.fromDom(e.selection.getStart()),e.schema),aP=e=>{const n=e.selection.getRng();return n.collapsed&&(nP(n)||e.dom.isEmpty(n.startContainer))&&!bW(e)},mw=e=>(aP(e)&&eP(e,[]),!0),eA=(e,n,o)=>_e(o)?F.some(()=>{e._selectionOverrides.hideFakeCaret(),rh(e,n,oe.fromDom(o))}):F.none(),pO=(e,n)=>{const o=n?vC:yC,c=Ym(n?1:-1,e.getBody(),e.selection.getRng());return o(c)?eA(e,n,c.getNode(!n)):F.from(zu(n,c)).filter(u=>o(u)&&gp(c,u)).bind(u=>eA(e,n,u.getNode(!n)))},bO=(e,n)=>{const o=e.selection.getNode();return Du(o)?eA(e,n,o):F.none()},vO=(e,n)=>e.selection.isCollapsed()?pO(e,n):bO(e,n),vW=e=>Hs(e,n=>mi(n.dom)||mr(n.dom)).exists(n=>mi(n.dom)),tA=e=>Xu(e??"").getOr(0),Em=(e,n)=>{const o=e||IS(n)?"margin":"padding",r=Pr(n,"direction")==="rtl"?"-right":"-left";return o+r},yO=(e,n,o,r,c,u)=>{const f=Em(o,oe.fromDom(u)),b=tA(e.getStyle(u,f));if(n==="outdent"){const v=Math.max(0,b-r);e.setStyle(u,f,v?v+c:"")}else{const v=b+r+c;e.setStyle(u,f,v)}},yW=(e,n)=>ns(n,o=>{const r=Em(W1(e),o),c=Ur(o,r).map(tA).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),fw=e=>{const n=SO(e);return!e.mode.isReadOnly()&&(n.length>1||yW(e,n))},CO=e=>!e.mode.isReadOnly()&&IV(e),wO=e=>Nb(e)||Qd(e),cP=e=>Lc(e).exists(wO),SO=e=>ye(Vd(e.selection.getSelectedBlocks()),n=>!wO(n)&&!cP(n)&&vW(n)),iP=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:c}=e,u=R2(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=tA(u),v=W1(e);ne(SO(e),S=>{yO(c,n,v,b,f,S.dom)}),n==="indent"?iN(e):kD(e)},CW=e=>iP(e,"indent"),lP=e=>iP(e,"outdent"),uP=e=>{if(e.selection.isCollapsed()&&fw(e)){const n=e.dom,o=e.selection.getRng(),r=qe.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&CE(oe.fromDom(c),r,e.schema))return F.some(()=>lP(e))}return F.none()},wW=(e,n)=>{const o=$E(e.selection.getRng());return T4(o)?F.some(()=>rh(e,n,oe.fromDom(e.selection.getNode()))):F.none()},nA=(e,n)=>e.selection.isCollapsed()?F.none():wW(e,n),dP=(e,n,o)=>Ds([uP,jD,VD,(r,c)=>fO(r,n,c),VT,D3,GD,vO,rw,Ch,qD,nA],r=>r(e,o)).filter(r=>e.selection.isEditable()),xO=(e,n)=>{dP(e,n,!1).fold(()=>{e.selection.isEditable()&&(OE(e),b3(e))},Ht),PD(e)&&af(e.dom,e.getBody())},SW=(e,n)=>{dP(e,n,!0).fold(()=>{e.selection.isEditable()&&zB(e)},Ht),PD(e)&&af(e.dom,e.getBody())},mP=(e,n)=>{e.addCommand("delete",()=>{xO(e,n)}),e.addCommand("forwardDelete",()=>{SW(e,n)})},oA=5,EO=400,TO=e=>e.touches===void 0||e.touches.length!==1?F.none():F.some(e.touches[0]),AO=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>oA||r>oA},fP=e=>{const n=is(),o=dn(!1),r=Nc(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},EO);e.on("touchstart",c=>{TO(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),TO(c).each(u=>{n.on(f=>{AO(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},sA=(e,n)=>no(e,n.nodeName),kO=(e,n)=>St(n)?!0:bn(n)?!sA(e.getBlockElements(),n)&&!ol(n)&&!ft(e,n)&&!xg(n)&&!gb(n):!1,gP=(e,n,o)=>ce(hB(oe.fromDom(o),oe.fromDom(n)),r=>sA(e,r.dom)),hP=(e,n)=>{if(St(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||sA(e,n.nextSibling)||xg(n.nextSibling)}return!1},rA=e=>e.dom.create(pc(e),ip(e)),xW=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,v,S=null;const _=pc(e);if(!u||!bn(u))return;const R=f.nodeName.toLowerCase();if(!r.isValidChild(R,_.toLowerCase())||gP(c,f,u))return;if(f.firstChild===f.lastChild&&xr(f.firstChild)){b=rA(e),b.appendChild(tp().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let M=f.firstChild;for(;M;)if(bn(M)&&hi(r,M),kO(r,M)){if(hP(c,M)){v=M,M=M.nextSibling,n.remove(v);continue}if(!b){if(!S&&e.hasFocus()&&(S=Tp(e.selection.getRng(),()=>document.createElement("span"))),!M.parentNode){M=null;break}b=rA(e),f.insertBefore(b,M)}v=M,M=M.nextSibling,b.appendChild(v)}else b=null,M=M.nextSibling;S&&(e.selection.setRng(Ap(S)),e.nodeChanged())},pP=(e,n,o)=>{const r=oe.fromDom(rA(e)),c=tp();gs(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},aA=e=>{e.on("NodeChange",()=>xW(e))},bP=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,gw=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},EW=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],gw(e,c,H2(e)));o.content=c}},TW=(e,n)=>ns(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),AW=e=>{const n="contenteditable",o=" "+kt.trim(Ox(e))+" ",r=" "+kt.trim(H2(e))+" ",c=bP(o),u=bP(r),f=Rx(e);f.length>0&&e.on("BeforeSetContent",b=>{EW(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let v=b.length;for(;v--;){const S=b[v];c(S)?S.attr(n,"true"):u(S)&&S.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let v=b.length;for(;v--;){const S=b[v];if(!c(S)&&!u(S))continue;const _=S.attr("data-mce-content");f.length>0&&_?TW(f,_)?(S.name="#text",S.type=3,S.raw=!0,S.value=_):S.remove():S.attr(n,null)}})},kW=e=>ku(oe.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),_O=(e,n)=>{n.hasAttribute("data-mce-caret")&&(El(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},vP=(e,n)=>{const o=kW(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),_O(e,o);return}_1(o)&&(_O(e,o),e.undoManager.add())}},_W=e=>{e.on("keyup compositionstart",Ce(vP,e))},yP=mr,DW=(e,n,o)=>ZN(n,e,o,Sp,xp,yP),OW=(e,n,o)=>jN(n,e,o,u=>Sp(u)||gB(u),u=>xp(u)||s3(u),yP),RW=e=>{const n=e.dom.create(pc(e));return n.innerHTML='<br data-mce-bogus="1">',n},DO=(e,n,o)=>{const r=Ed(e.getBody()),c=Ce(Uf,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(qe.fromRangeStart(o))){const b=oe.fromDom(RW(e));n===1?qi(oe.fromDom(u),b):Ka(oe.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},BY=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return DW(o,e,r).orThunk(()=>(DO(e,o,r),F.none()))},BW=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return OW(o,e,r).orThunk(()=>(DO(e,o,r),F.none()))},MW=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return f3(o)?!n:n},CP=(e,n)=>BY(e,MW(e.selection,n)).exists(o=>(lf(e,o),!0)),wP=(e,n)=>BW(e,n).exists(o=>(lf(e,o),!0)),SP=(e,n)=>sy(e,n,n?xp:Sp),cA=(e,n)=>UD(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(lf(e,o),!0)),xP=(e,n)=>{const o=f=>Qo(f,n),r=f=>mi(f.dom),c=oe.fromDom(e.container());return Hs(c,r,o).filter(f=>!o(f))},EP=(e,n,o)=>(o?IN:$N)(e.getBody(),n).map(c=>c.toRange()),FW=(e,n)=>{const o=qe.fromRangeStart(e.selection.getRng()),r=qe.fromRangeEnd(e.selection.getRng()),c=oe.fromDom(e.getBody());return Uo(Xt(xP(o,c),xP(r,c),(f,b)=>Qo(f,b)?F.some(f):F.none())).fold(Oe,f=>n&&oO(f.dom,r)||!n&&nO(f.dom,o)?EP(e,n?r:o,n).exists(b=>(lf(e,b),!0)):!1)},TP=(e,n)=>FW(e,n),NW=e=>j(["figcaption"],Bo(e)),PW=(e,n,o)=>{const r=Ce(Qo,n);return Hs(oe.fromDom(e.container()),c=>o.isBlock(Bo(c)),r).filter(NW)},$W=(e,n,o)=>n?oO(e.dom,o):nO(e.dom,o),IW=(e,n)=>{const o=oe.fromDom(e.getBody()),r=qe.fromRangeStart(e.selection.getRng());return PW(r,o,e.schema).exists(()=>{if($W(o,n,r)){const u=pP(e,o,n?gs:Su);return e.selection.setRng(u),!0}else return!1})},AP=(e,n)=>e.selection.isCollapsed()?IW(e,n):!1,LW=(e,n,o)=>{const r=e.selection.getRng(),c=qe.fromRangeStart(r);return e.getBody().firstChild===n&&nO(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},HW=(e,n)=>{const o=e.selection.getRng(),r=qe.fromRangeStart(o);return e.getBody().lastChild===n&&oO(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},zW=(e,n)=>n?F.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>HW(e,o)).getOr(!1):F.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>F.from(e.dom.getParent(o,"details")).map(r=>LW(e,r,o))).getOr(!1),OO=(e,n)=>zW(e,n),kP={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},VW=e=>de(e,n=>({...kP,...n})),UW=e=>de(e,n=>({...kP,...n})),hw=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,WW=(e,n)=>_n(VW(e),o=>hw(o,n)?[o]:[]),ZW=(e,n)=>_n(UW(e),o=>hw(o,n)?[o]:[]),ro=(e,...n)=>()=>e.apply(null,n),z0=(e,n)=>Gt(WW(e,n),o=>o.action()),_P=(e,n)=>Ds(ZW(e,n),o=>o.action()),DP=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return ZN(e,o,r,vC,yC,Du).exists(c=>(lf(e,c),!0))},jW=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return jN(e,o,r,vC,yC,Du).exists(c=>(lf(e,c),!0))},OP=(e,n)=>sy(e,n,n?yC:vC),qW=(e,n)=>RP(e,n,ot),RP=(e,n,o)=>_n(wr(e),r=>ki(r,n)?o(r)?[r]:[]:RP(r,n,o)),pw=(e,n,o=Oe)=>{if(o(n))return F.none();if(j(e,Bo(n)))return F.some(n);const r=c=>ki(c,"table")||o(c);return Wr(n,e.join(","),r)},GW=(e,n)=>pw(["td","th"],e,n),KW=e=>qW(e,"th,td"),BP=(e,n)=>dc(e,"table",n),RO=ja.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),ni={...RO,none:e=>RO.none(e)},iA=(e,n,o,r,c=ot)=>{const u=r===1;if(!u&&o<=0)return ni.first(e[0]);if(u&&o>=e.length-1)return ni.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?ni.middle(n,b):iA(e,n,f,r,c)}},ry=(e,n)=>BP(e,n).bind(o=>{const r=KW(o);return go(r,u=>Qo(e,u)).map(u=>({index:u,all:r}))}),Wp=(e,n,o)=>ry(e,o).fold(()=>ni.none(e),c=>iA(c.all,e,c.index,1,n)),Qf=(e,n,o)=>ry(e,o).fold(()=>ni.none(),c=>iA(c.all,e,c.index,-1,n));var bw=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],BO=()=>{const e=S=>oe.fromDom(S.dom.cloneNode(!1)),n=S=>fl(S).dom,o=S=>Tr(S)?Bo(S)==="body"?!0:j(bw,Bo(S)):!1,r=S=>Tr(S)?j(["br","img","hr","input"],Bo(S)):!1,c=S=>Tr(S)&&nr(S,"contenteditable")==="false",u=(S,_)=>S.dom.compareDocumentPosition(_.dom),f=(S,_)=>{const R=Wo(S);Ya(_,R)},b=S=>{const _=Bo(S);return j(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],_)},v=S=>Tr(S)?Ki(S,"lang"):F.none();return{up:it({selector:Wr,closest:dc,predicate:Au,all:ic}),down:it({selector:Ge,predicate:X}),styles:it({get:Pr,getRaw:Ur,set:lc,remove:Mh}),attrs:it({get:nr,set:Cr,remove:Qr,copyTo:f}),insert:it({before:Ka,after:qi,afterAll:hg,append:gs,appendAll:Gi,prepend:Su,wrap:Di}),remove:it({unwrap:ii,remove:Ws}),create:it({nu:oe.fromTag,clone:e,text:oe.fromText}),query:it({comparePosition:u,prevSibling:Zi,nextSibling:Hc}),property:it({children:wr,name:Bo,parent:Lc,document:n,isText:Es,isComment:Pl,isElement:Tr,isSpecial:b,getLanguage:v,getText:uc,setText:m1,isBoundary:o,isEmptyTag:r,isNonEditable:c}),eq:Qo,is:bf}};const vw=(e,n)=>({element:e,offset:n}),MO=(e,n)=>{if(e.property().isText(n))return vw(n,e.property().getText(n).length);{const o=e.property().children(n);return o.length>0?MO(e,o[o.length-1]):vw(n,o.length)}},FO=(e,n,o)=>{const r=e.property().children(n);return r.length>0&&o<r.length?FO(e,r[o],0):r.length>0&&e.property().isElement(n)&&r.length===o?MO(e,r[r.length-1]):vw(n,o)},YW=FO,XW=BO(),MP=(e,n)=>YW(XW,e,n),NO=Ko("image"),FP=e=>{const n=e;return F.from(n[NO])},JW=(e,n)=>{const o=e;o[NO]=n},NP=Ko("event"),MY=e=>{const n=e;return F.from(n[NP])},PO=e=>n=>{const o=n;o[NP]=e},Tm=(e,n)=>PO(n)(e),PP=PO(0),QW=PO(2),U0=PO(1),tZ=(e=>n=>{const o=n;return F.from(o[NP]).exists(r=>r===e)})(0),lA=()=>Object.freeze({length:0,item:e=>null}),yw=Ko("mode"),$P=e=>{const n=e;return F.from(n[yw])},Cw=e=>n=>{const o=n;o[yw]=e},IP=(e,n)=>Cw(n)(e),$O=Cw(0),uA=Cw(2),LP=Cw(1),dA=e=>n=>{const o=n;return F.from(o[yw]).exists(r=>r===e)},ay=dA(0),HP=dA(1),nZ=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(ay(e))if(ae(o)){if(!Zn(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{ay(e)&&n.remove(o)},clear:()=>{ay(e)&&n.clear()}}),oZ=["none","copy","link","move"],sZ=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],IO=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(c){j(oZ,c)&&(n=c)},get effectAllowed(){return o},set effectAllowed(c){tZ(r)&&j(sZ,c)&&(o=c)},get items(){return nZ(r,e.items)},get files(){return HP(r)?lA():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{ay(r)&&(JW(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>HP(r)?"":e.getData(c),setData:(c,u)=>{ay(r)&&e.setData(c,u)},clearData:c=>{ay(r)&&e.clearData(c)}};return $O(r),r},rZ=e=>{const n=IO(),o=$P(e);return uA(e),PP(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,FP(e).each(r=>n.setDragImage(r.image,r.x,r.y)),ne(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),ne(e.files,r=>n.items.add(r)),MY(e).each(r=>{Tm(n,r)}),o.each(r=>{IP(e,r),IP(n,r)}),n},aZ=e=>{const n=e.getData("text/html");return n===""?F.none():F.some(n)},LO=(e,n)=>e.setData("text/html",n),cZ=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),wh=(e,n)=>_n(n,o=>{const r=cZ(Mi(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),HO=(e,n,o)=>Ne(e,(r,c)=>r.fold(()=>F.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return F.some(b<f?c:u)}),F.none()),zP=(e,n,o,r,c)=>{const u=Ge(oe.fromDom(o),"td,th,caption").map(b=>b.dom),f=ye(wh(e,u),b=>n(b,c));return HO(f,r,c).map(b=>b.cell)},iZ=e=>e.bottom,lZ=e=>e.top,zO=(e,n)=>e.y<n,VO=(e,n)=>e.y>n,VP=Ce(zP,iZ,zO),UP=Ce(zP,lZ,VO),WP=(e,n)=>to(n.getClientRects()).bind(o=>VP(e,o.left,o.top)).bind(o=>jT(JU(o),n)),uZ=(e,n)=>es(n.getClientRects()).bind(o=>UP(e,o.left,o.top)).bind(o=>jT(sO(o),n)),ww=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),mA=e=>e.breakType===vr.Wrap&&e.positions.length===0,ZP=e=>e.breakType===vr.Br&&e.positions.length===1,UO=(e,n,o)=>{const r=e(n,o);return mA(r)||!xr(o.getNode())&&ZP(r)?!ww(e,n,r):r.breakAt.isNone()},jP=Ce(UO,P0),qP=Ce(UO,$0),fA=(e,n,o)=>{const r=qe.fromRangeStart(n);return Zf(!e,o).exists(c=>c.isEqual(r))},WO=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return vv()&&fA(n,c,o)?(bh(u,e,o,!n,!1).each(f=>{lf(e,f)}),!0):!1},Sw=(e,n,o)=>WP(n,o).orThunk(()=>to(o.getClientRects()).bind(r=>QD(eO(e,qe.before(n)),r.left))).getOr(qe.before(n)),dZ=(e,n,o)=>uZ(n,o).orThunk(()=>to(o.getClientRects()).bind(r=>QD(tO(e,qe.after(n)),r.left))).getOr(qe.after(n)),ZO=(e,n)=>{const o=n.getNode(e);return qd(o)?F.some(o):F.none()},mZ=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?qi:Ka,c=pP(n,oe.fromDom(o),r);lf(n,c)})},GP=(e,n,o)=>{const r=ZO(!!n,o),c=n===!1;r.fold(()=>lf(e,o.toRange()),u=>Zf(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>lf(e,o.toRange()),f=>mZ(n,e,u)))},KP=(e,n,o,r)=>{const c=e.selection.getRng(),u=qe.fromRangeStart(c),f=e.getBody();if(!n&&jP(r,u)){const b=Sw(f,o,u);return GP(e,n,b),!0}else if(n&&qP(r,u)){const b=dZ(f,o,u);return GP(e,n,b),!0}else return!1},YP=(e,n,o)=>F.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>F.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),jO=(e,n)=>YP(e,n,WO),XP=(e,n)=>YP(e,n,KP),fZ=e=>{const n=jd.exact(e,0,e,0);return Iy(n)},gZ=e=>gA(e)||_s(e).some(n=>$l(n)&&gA(n)),JP=(e,n,o)=>o.fold(F.none,F.none,(r,c)=>Ef(c).map(u=>fZ(u)),r=>e.mode.isReadOnly()||!hZ(r)||!gZ(r)?F.none():(e.execCommand("mceTableInsertRowAfter"),QP(e,n,r))),hZ=e=>Hs(e,Jr("table")).exists(vl),QP=(e,n,o)=>JP(e,n,Wp(o,gA)),pZ=(e,n,o)=>JP(e,n,Qf(o,gA)),gA=e=>vl(e)||po(e,qO),qO=e=>$l(e)&&vl(e),e8=(e,n)=>{const o=["table","li","dl"],r=oe.fromDom(e.getBody()),c=b=>{const v=Bo(b);return Qo(b,r)||j(o,v)},u=e.selection.getRng(),f=oe.fromDom(n?u.endContainer:u.startContainer);return GW(f,c).map(b=>(BP(b,c).each(_=>{e.model.table.clearSelectedCells(_.dom)}),e.selection.collapse(!n),(n?QP:pZ)(e,c,b).each(_=>{e.selection.setRng(_)}),!0)).getOr(!1)},Zp=(e,n,o)=>{const r=Ho.os.isMacOS()||Ho.os.isiOS(),c=Ho.browser.isFirefox();z0([{keyCode:Yt.RIGHT,action:ro(CP,e,!0)},{keyCode:Yt.LEFT,action:ro(CP,e,!1)},{keyCode:Yt.UP,action:ro(wP,e,!1)},{keyCode:Yt.DOWN,action:ro(wP,e,!0)},...r?[{keyCode:Yt.UP,action:ro(cA,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Yt.DOWN,action:ro(cA,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Yt.RIGHT,action:ro(jO,e,!0)},{keyCode:Yt.LEFT,action:ro(jO,e,!1)},{keyCode:Yt.UP,action:ro(XP,e,!1)},{keyCode:Yt.DOWN,action:ro(XP,e,!0)},{keyCode:Yt.UP,action:ro(XP,e,!1)},{keyCode:Yt.UP,action:ro(OO,e,!1)},{keyCode:Yt.DOWN,action:ro(OO,e,!0)},{keyCode:Yt.RIGHT,action:ro(DP,e,!0)},{keyCode:Yt.LEFT,action:ro(DP,e,!1)},{keyCode:Yt.UP,action:ro(jW,e,!1)},{keyCode:Yt.DOWN,action:ro(jW,e,!0)},{keyCode:Yt.RIGHT,action:ro(XT,e,n,!0)},{keyCode:Yt.LEFT,action:ro(XT,e,n,!1)},{keyCode:Yt.RIGHT,ctrlKey:!r,altKey:r,action:ro(GN,e,n)},{keyCode:Yt.LEFT,ctrlKey:!r,altKey:r,action:ro(dO,e,n)},{keyCode:Yt.UP,action:ro(AP,e,!1)},{keyCode:Yt.DOWN,action:ro(AP,e,!0)},...c?[{keyCode:Yt.UP,action:ro(TP,e,!1)},{keyCode:Yt.DOWN,action:ro(TP,e,!0)}]:[]],o).each(u=>{o.preventDefault()})},t8=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Zp(e,n,o)})},Rd=(e,n)=>({container:e,offset:n}),xw=Ls.DOM,cy=e=>n=>e===n?-1:0,jp=e=>n=>e.isBlock(n)||j(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",hA=(e,n,o)=>{if(St(e)&&n>=0)return F.some(Rd(e,n));{const r=gd(xw);return F.from(r.backwards(e,n,cy(e),o)).map(c=>Rd(c.container,c.container.data.length))}},Bd=(e,n,o)=>{if(St(e)&&n>=e.length)return F.some(Rd(e,n));{const r=gd(xw);return F.from(r.forwards(e,n,cy(e),o)).map(c=>Rd(c.container,0))}},Sh=(e,n,o)=>{if(!St(e))return F.none();const r=e.data;if(n>=0&&n<=r.length)return F.some(Rd(e,n));{const c=gd(xw);return F.from(c.backwards(e,n,cy(e),o)).bind(u=>{const f=u.container.data;return Sh(u.container,n+f.length,o)})}},GO=(e,n,o)=>{if(!St(e))return F.none();const r=e.data;if(n<=r.length)return F.some(Rd(e,n));{const c=gd(xw);return F.from(c.forwards(e,n,cy(e),o)).bind(u=>GO(u.container,n-r.length,o))}},Ew=(e,n,o,r,c)=>{const u=gd(e,jp(e));return F.from(u.backwards(n,o,r,c))},bZ=e=>e.collapsed&&St(e.startContainer),n8=e=>Bi(e.toString().replace(/\u00A0/g," ")),o8=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,vZ=(e,n)=>e.substring(n.length),yZ=(e,n,o,r=!1)=>{let c;const u=o.charAt(0);for(c=n-1;c>=0;c--){const f=e.charAt(c);if(!r&&o8(f))return F.none();if(u===f&&er(e,o,c,n))break}return F.some(c)},KO=(e,n,o,r=!1)=>{if(!bZ(n))return F.none();const c={text:"",offset:0},u=(b,v,S)=>(c.text=S+c.text,c.offset+=v,yZ(c.text,c.offset,o,r).getOr(v)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return Ew(e,n.startContainer,n.startOffset,u,f).bind(b=>{const v=n.cloneRange();if(v.setStart(b.container,b.offset),v.setEnd(n.endContainer,n.endOffset),v.collapsed)return F.none();const S=n8(v);return S.lastIndexOf(o)!==0?F.none():F.some({text:vZ(S,o),range:v,trigger:o})})},CZ=e=>e.nodeType===t1,s8=e=>e.nodeType===fg,r8=e=>{if(CZ(e))return Rd(e,e.data.length);{const n=e.childNodes;return n.length>0?r8(n[n.length-1]):Rd(e,n.length)}},a8=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?a8(o[n],0):o.length>0&&s8(e)&&o.length===n?r8(o[o.length-1]):Rd(e,n)},iy=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return Ew(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!o8(u)}).isSome()},pA=e=>n=>{const o=a8(n.startContainer,n.startOffset);return!iy(e,o)},c8=(e,n,o)=>Ds(o.triggers,r=>KO(e,n,r)),i8=(e,n)=>{const o=n(),r=e.selection.getRng();return c8(e.dom,r,o).bind(c=>bA(e,n,c))},bA=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",v=ye(u.lookupByTrigger(o.trigger),_=>o.text.length>=_.minChars&&_.matches.getOrThunk(()=>pA(e.dom))(o.range,b,o.text));if(v.length===0)return F.none();const S=Promise.all(de(v,_=>_.fetch(o.text,_.maxResults,r).then(M=>({matchText:o.text,items:M,columns:_.columns,onAction:_.onAction,highlightOn:_.highlightOn}))));return F.some({lookupData:S,context:o})};var uf;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(uf||(uf={}));const YO=(e,n,o)=>e.stype===uf.Error?n(e.serror):o(e.svalue),wZ=e=>{const n=[],o=[];return ne(e,r=>{YO(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},l8=(e,n)=>e.stype===uf.Error?{stype:uf.Error,serror:n(e.serror)}:e,vA=(e,n)=>e.stype===uf.Value?{stype:uf.Value,svalue:n(e.svalue)}:e,u8=(e,n)=>e.stype===uf.Value?n(e.svalue):e,yA=(e,n)=>e.stype===uf.Error?n(e.serror):e,d8=e=>({stype:uf.Value,svalue:e}),XO=e=>({stype:uf.Error,serror:e}),al={fromResult:e=>e.fold(XO,d8),toResult:e=>YO(e,ge.error,ge.value),svalue:d8,partition:wZ,serror:XO,bind:u8,bindError:yA,map:vA,mapError:l8,fold:YO},JO=e=>Jt(e)&&sn(e).length>100?" removed due to size":JSON.stringify(e,null,2),SZ=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:it("... (only showing first ten failures)")}]):e;return de(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},m8=(e,n)=>al.serror([{path:e,getErrorInfo:n}]),f8=(e,n,o)=>m8(e,()=>'Could not find valid *required* value for "'+n+'" in '+JO(o)),Tw=(e,n)=>m8(e,it(n)),g8=e=>{const n=(r,c)=>al.bindError(e(c),u=>Tw(r,u)),o=it("val");return{extract:n,toString:o}},h8=g8(al.svalue),CA=it(h8),wA=(e,n)=>g8(o=>{const r=typeof o;return e(o)?al.svalue(o):al.serror(`Expected type: ${n} but got: ${r}`)}),QO=wA(cs,"number"),SA=wA(ae,"string"),p8=wA(fe,"function"),eR=()=>({tag:"required",process:{}}),xZ=e=>({tag:"defaultedThunk",process:e}),b8=e=>xZ(it(e)),v8=()=>({tag:"option",process:{}}),tR=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),y8=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},EZ=(e,n)=>al.svalue(at(n,Zt.apply(void 0,e))),Aw=e=>k(al.serror,_o)(e),w8={consolidateObj:(e,n)=>{const o=al.partition(e);return o.errors.length>0?Aw(o.errors):EZ(o.values,n)},consolidateArr:e=>{const n=al.partition(e);return n.errors.length>0?Aw(n.errors):al.svalue(n.values)}},S8=(e,n,o,r)=>xs(n,o).fold(()=>f8(e,o,n),r),nR=(e,n,o,r)=>{const c=xs(e,n).getOrThunk(()=>o(e));return r(c)},TZ=(e,n,o)=>o(xs(e,n)),AZ=(e,n,o,r)=>{const c=xs(e,n).map(u=>u===!0?o(e):u);return r(c)},kZ=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>al.svalue(F.none()),v=>{const S=c.extract(n.concat([r]),v);return al.map(S,F.some)});switch(e.tag){case"required":return S8(n,o,r,u);case"defaultedThunk":return nR(o,r,e.process,u);case"option":return TZ(o,r,f);case"defaultedOptionThunk":return AZ(o,r,e.process,f);case"mergeWithThunk":return nR(o,r,it({}),b=>{const v=at(e.process(o),b);return u(v)})}},_Z=(e,n,o)=>{const r={},c=[];for(const u of o)y8(u,(f,b,v,S)=>{const _=kZ(v,e,n,f,S);al.fold(_,R=>{c.push(...R)},R=>{r[b]=R})},(f,b)=>{r[f]=b(n)});return c.length>0?al.serror(c):al.svalue(r)},kw=e=>({extract:(r,c)=>_Z(r,c,e),toString:()=>`obj{
`+de(e,c=>y8(c,(u,f,b,v)=>u+" -> "+v.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),DZ=e=>({extract:(r,c)=>{const u=de(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return w8.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),OZ=(e,n,o)=>{const r=n.extract([e],o);return al.mapError(r,c=>({input:o,errors:c}))},x8=(e,n,o)=>al.toResult(OZ(e,n,o)),xA=e=>`Errors: 
`+SZ(e.errors).join(`
`)+`

Input object: `+JO(e.input),ly=tR,RZ=e=>ly(e,e,eR(),CA()),oR=(e,n)=>ly(e,e,eR(),n),E8=e=>oR(e,SA),T8=e=>oR(e,p8),BZ=e=>ly(e,e,v8(),CA()),A8=(e,n)=>ly(e,e,v8(),n),k8=e=>A8(e,SA),MZ=e=>A8(e,p8),sR=(e,n)=>ly(e,e,b8(n),CA()),_8=(e,n,o)=>ly(e,e,b8(n),o),rR=(e,n)=>_8(e,n,QO),FZ=(e,n,o)=>_8(e,n,DZ(o)),NZ=E8("type"),PZ=T8("fetch"),$Z=T8("onAction"),Wa=e=>sR("columns",e),IZ=kw([NZ,E8("trigger"),rR("minChars",1),Wa(1),rR("maxResults",10),MZ("matches"),PZ,$Z,FZ("highlightOn",[],SA)]),LZ=e=>x8("Autocompleter",IZ,e),HZ=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},v={},S=($,J)=>(Y,G)=>{$[Y.toLowerCase()]={...G,type:J}},_=($,J)=>(Y,G)=>{$[Y.toLowerCase()]={type:J,...G}},R=($,J)=>r[$.toLowerCase()]=J,M=($,J)=>f[$.toLowerCase()]=J;return{addButton:S(e,"button"),addGroupToolbarButton:S(e,"grouptoolbarbutton"),addToggleButton:S(e,"togglebutton"),addMenuButton:S(e,"menubutton"),addSplitButton:S(e,"splitbutton"),addMenuItem:S(n,"menuitem"),addNestedMenuItem:S(n,"nestedmenuitem"),addToggleMenuItem:S(n,"togglemenuitem"),addAutocompleter:S(o,"autocompleter"),addContextMenu:S(c,"contextmenu"),addContextToolbar:S(u,"contexttoolbar"),addContextForm:_(u,"contextform"),addSidebar:S(b,"sidebar"),addView:S(v,"views"),addIcon:R,addContext:M,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:b,views:v,contexts:f})}},D8=e=>{const n=e.ui.registry.getAll().popups,o=ac(n,f=>LZ(f).fold(b=>{throw new Error(xA(b))},Mo)),r=Rl(Ma(o,f=>f.trigger)),c=zr(o);return{dataset:o,triggers:r,lookupByTrigger:f=>ye(c,b=>b.trigger===f)}},aR=(e,n)=>{const o=Nc(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),n.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},O8=e=>{const n=is(),o=dn(!1),r=n.isSet,c=()=>{r()&&(ix(e),o.set(!1),n.clear())},u=R=>{r()||n.set({trigger:R.trigger,matchLength:R.text.length})},f=Fa(()=>D8(e)),b=R=>n.get().map(M=>KO(e.dom,e.selection.getRng(),M.trigger,!0).bind($=>bA(e,f,$,R))).getOrThunk(()=>i8(e,f)),v=R=>{b(R).fold(c,M=>{u(M.context),M.lookupData.then($=>{n.get().map(J=>{const Y=M.context;J.trigger===Y.trigger&&(n.set({...J,matchLength:Y.text.length}),o.get()?(k2(e,{range:Y.range}),ao(e,{lookupData:$})):(o.set(!0),k2(e,{range:Y.range}),Hk(e,{lookupData:$})))})})})},S=(R,M)=>{const $=R.compareBoundaryPoints(window.Range.START_TO_START,M),J=R.compareBoundaryPoints(window.Range.END_TO_END,M);return $>=0&&J<=0},_=()=>n.get().bind(({trigger:R})=>{const M=e.selection.getRng();return KO(e.dom,M,R,o.get()).filter(({range:$})=>S(M,$)).map(({range:$})=>$)});e.addCommand("mceAutocompleterReload",(R,M)=>{const $=Jt(M)?M.fetchOptions:{};v($)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{_().each(R=>{k2(e,{range:R})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>_().isSome()),aR(e,{cancelIfNecessary:c,load:v})},zZ=Ro().browser.isSafari(),R8=e=>em(oe.fromDom(e)),B8=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},TA=(e,n)=>F.from(e.getParent(n.container(),"details")),M8=(e,n)=>TA(e,n).isSome(),VZ=(e,n)=>{const o=F.from(e.getParent(n.startContainer,"details")),r=F.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>F.from(e.select("summary",u)[0]));return F.some({startSummary:c,startDetails:o,endDetails:r})}else return F.none()},UZ=(e,n)=>Kc(n).exists(o=>o.isEqual(e)),WZ=(e,n)=>Hu(n).exists(o=>xr(o.getNode())&&yi(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),ZZ=(e,n)=>n.startSummary.exists(o=>UZ(e,o)),jZ=(e,n)=>n.startSummary.exists(o=>WZ(e,o)),qZ=(e,n)=>n.startDetails.exists(o=>yi(o,e).forall(r=>n.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),GZ=(e,n,o)=>o.startDetails.exists(r=>Gc(e,n).forall(c=>!r.contains(c.container()))),F8=(e,n)=>{const o=n.getNode();Zn(o)||e.selection.setCursorLocation(o,n.offset())},N8=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?Kc(c):Hu(c)).each(f=>F8(e,f))}else F8(e,n)},P8=(e,n)=>{const o=v=>v.contains(e.startContainer),r=v=>v.contains(e.endContainer),c=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(v=>n.endDetails.forall(S=>v!==S));return(c||u)&&!(c&&u)||f},cR=(e,n,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const f=qe.fromRangeStart(c.getRng()),b=r.getParent(f.container(),r.isBlock),v=TA(r,f),S=b&&r.isEmpty(b),_=q(b?.previousSibling),R=q(b?.nextSibling);return S&&(n?R:_)&&eh(!n,u,f).exists(J=>M8(r,J)&&!On(v,TA(r,J)))?!0:eh(n,u,f).fold(Oe,M=>{const $=TA(r,M);if(M8(r,M)&&!On(v,$)){if(n||N8(e,M,!1),b&&S){if(n&&_)return!0;if(!n&&R)return!0;N8(e,M,n),e.dom.remove(b)}return!0}else return!1})}else return!1},$8=(e,n,o,r)=>{const u=e.selection.getRng(),f=qe.fromRangeStart(u),b=e.getBody();return r==="selection"?P8(u,n):o?jZ(f,n)||GZ(b,f,n):ZZ(f,n)||qZ(f,n)},KZ=(e,n,o)=>VZ(e.dom,e.selection.getRng()).fold(()=>cR(e,n,o),r=>$8(e,r,n,o)||cR(e,n,o)),YZ=(e,n,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=qe.fromRangeStart(u);return qy(c)?(o==="selection"&&B8(u,c)||VB(n,f,c)?R8(c):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:v,anchorOffset:S,focusNode:_,focusOffset:R}=b??{};const M=()=>{_e(v)&&_e(S)&&_e(_)&&_e(R)&&b?.setBaseAndExtent(v,S,_,R)},$=()=>{v=b?.anchorNode,S=b?.anchorOffset,_=b?.focusNode,R=b?.focusOffset},J=(G,xe)=>{ne(G.childNodes,Ee=>{l0(Ee)&&xe.appendChild(Ee)})},Y=e.dom.create("span",{"data-mce-bogus":"1"});J(c,Y),c.appendChild(Y),M(),(o==="word"||o==="line")&&b?.modify("extend",n?"right":"left",o),!r.isCollapsed()&&B8(r.getRng(),Y)?R8(c):(e.execCommand(n?"ForwardDelete":"Delete"),$(),J(Y,c),M()),e.dom.remove(Y)}),!0):!1},W0=(e,n,o)=>KZ(e,n,o)||zZ&&YZ(e,n,o)?F.some(rt):F.none(),I8=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:rt,inputType:o},f=S1(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},uy=I8("input"),AA=I8("beforeinput"),iR=Ro(),L8=iR.os,lR=L8.isMacOS()||L8.isiOS(),JZ=iR.browser.isFirefox(),QZ=(e,n,o)=>{const r=o.keyCode===Yt.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",f=b=>c?b?"word":"line":"selection";_P([{keyCode:Yt.BACKSPACE,action:ro(uP,e)},{keyCode:Yt.BACKSPACE,action:ro(jD,e,!1)},{keyCode:Yt.DELETE,action:ro(jD,e,!0)},{keyCode:Yt.BACKSPACE,action:ro(VD,e,!1)},{keyCode:Yt.DELETE,action:ro(VD,e,!0)},{keyCode:Yt.BACKSPACE,action:ro(fO,e,n,!1)},{keyCode:Yt.DELETE,action:ro(fO,e,n,!0)},{keyCode:Yt.BACKSPACE,action:ro(D3,e,!1)},{keyCode:Yt.DELETE,action:ro(D3,e,!0)},{keyCode:Yt.BACKSPACE,action:ro(W0,e,!1,u)},{keyCode:Yt.DELETE,action:ro(W0,e,!0,u)},...lR?[{keyCode:Yt.BACKSPACE,altKey:!0,action:ro(W0,e,!1,f(!0))},{keyCode:Yt.DELETE,altKey:!0,action:ro(W0,e,!0,f(!0))},{keyCode:Yt.BACKSPACE,metaKey:!0,action:ro(W0,e,!1,f(!1))}]:[{keyCode:Yt.BACKSPACE,ctrlKey:!0,action:ro(W0,e,!1,f(!0))},{keyCode:Yt.DELETE,ctrlKey:!0,action:ro(W0,e,!0,f(!0))}],{keyCode:Yt.BACKSPACE,action:ro(GD,e,!1)},{keyCode:Yt.DELETE,action:ro(GD,e,!0)},{keyCode:Yt.BACKSPACE,action:ro(vO,e,!1)},{keyCode:Yt.DELETE,action:ro(vO,e,!0)},{keyCode:Yt.BACKSPACE,action:ro(rw,e,!1)},{keyCode:Yt.DELETE,action:ro(rw,e,!0)},{keyCode:Yt.BACKSPACE,action:ro(VT,e,!1)},{keyCode:Yt.DELETE,action:ro(VT,e,!0)},{keyCode:Yt.BACKSPACE,action:ro(Ch,e,!1)},{keyCode:Yt.DELETE,action:ro(Ch,e,!0)},{keyCode:Yt.BACKSPACE,action:ro(qD,e,!1)},{keyCode:Yt.DELETE,action:ro(qD,e,!0)},{keyCode:Yt.BACKSPACE,action:ro(nA,e,!1)},{keyCode:Yt.DELETE,action:ro(nA,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),AA(e,r).isDefaultPrevented()||(b(),uy(e,r))})},ej=(e,n,o,r)=>z0([{keyCode:Yt.BACKSPACE,action:ro(TN,e)},{keyCode:Yt.DELETE,action:ro(TN,e)},...lR?[{keyCode:Yt.BACKSPACE,altKey:!0,action:ro(mw,e)},{keyCode:Yt.DELETE,altKey:!0,action:ro(mw,e)},...o?[{keyCode:JZ?224:91,action:ro(()=>(tP(e,r),mw(e)))}]:[]]:[{keyCode:Yt.BACKSPACE,ctrlKey:!0,action:ro(mw,e)},{keyCode:Yt.DELETE,ctrlKey:!0,action:ro(mw,e)}]],n),tj=(e,n)=>{let o=!1,r=[];e.on("keydown",c=>{o=c.keyCode===Yt.BACKSPACE,r=hO(e),c.isDefaultPrevented()||QZ(e,n,c)}),e.on("keyup",c=>{c.isDefaultPrevented()||(ej(e,c,o,r),r.length=0),o=!1})},H8=(e,n)=>{const o=oe.fromDom(e),r=oe.fromDom(n),c=Jr("span"),u=Ce(Qo,o),f=v=>Tr(v)&&Ur(v,"font-size").isSome(),b=[...f(r)?[r]:[],...A(r,f,u)];ne(b.slice(1),v=>{Mh(v,"font-size"),Qr(v,"data-mce-style"),c(v)&&vf(v)&&ii(v)})},nj=e=>{for(;e;){if(bn(e)||St(e)&&e.data&&/[\r\n\s]/.test(e.data))return F.from(oe.fromDom(e));e=e.nextSibling}return F.none()},dy=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=v=>/^(ul|ol|dl)$/.test(Bo(v)),f=v=>u(v)?F.from(v):xf(v,u),b=v=>o.isEmpty(v.dom);nj(n.firstChild).each(v=>{f(v).fold(()=>{if(b(v)){const S=MP(v,0).element;Tr(S)&&!Jd(S)&&gs(S,oe.fromText(ir))}},S=>{Ka(S,oe.fromText(ir))})})}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Qs(n,n);let f=n,b;for(;b=u.current();){if(St(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else xr(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),pC(e,c)},my=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},uR=e=>F.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),oj=e=>uR(e).fold(it(""),n=>n.nodeName.toUpperCase()),z8=e=>uR(e).filter(n=>Qd(oe.fromDom(n))).isSome(),dR=e=>{e.innerHTML='<br data-mce-bogus="1">'},sj=(e,n,o)=>{const r=e.dom;F.from(o.style).map(r.parseStyle).each(v=>{const _={...wf(oe.fromDom(n)),...v};r.setStyles(n,_)});const c=F.from(o.class).map(v=>v.split(/\s+/)),u=F.from(n.className).map(v=>ye(v.split(/\s+/),S=>S!==""));Xt(c,u,(v,S)=>{const _=ye(S,M=>!j(v,M)),R=[...v,..._];r.setAttrib(n,"class",R.join(" "))});const f=["style","class"],b=Mc(o,(v,S)=>!j(f,S));r.setAttribs(n,b)},_w=(e,n)=>{if(pc(e).toLowerCase()===n.tagName.toLowerCase()){const r=ip(e);sj(e,n,r)}},mR=(e,n,o,r,c=!0,u,f)=>{const b=e.dom,v=e.schema,S=pc(e),_=o?o.nodeName.toUpperCase():"";let R=n;const M=v.getTextInlineElements();let $;u||_==="TABLE"||_==="HR"?$=b.create(u||S,f||{}):$=o.cloneNode(!1);let J=$;if(!c)b.setAttrib($,"style",null),b.setAttrib($,"class",null);else{do if(M[R.nodeName]){if(Ni(R)||ol(R))continue;const Y=R.cloneNode(!1);b.setAttrib(Y,"id",""),$.hasChildNodes()?(Y.appendChild($.firstChild),$.appendChild(Y)):(J=Y,$.appendChild(Y))}while((R=R.parentNode)&&R!==r);H8($,J)}return _w(e,$),dR(J),$},V8=(e,n)=>e.dom.getParent(n,hb),rj=(e,n,o)=>{let r=n;for(;r&&r!==e&&q(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return hb(c);r=c}return!1},aj=(e,n,o)=>!n&&o.nodeName.toLowerCase()===pc(e)&&e.dom.isEmpty(o)&&rj(e.getBody(),o,r=>no(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),cj=(e,n,o)=>{var r,c,u;const f=n(pc(e)),b=V8(e,o);b&&(e.dom.insertAfter(f,b),dy(e,f),((u=(c=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},ij=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,lj=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},U8=(e,n)=>{const o=e?.parentNode;return _e(o)&&o.nodeName===n},W8=e=>_e(e)&&/^(OL|UL|LI)$/.test(e.nodeName),fR=e=>_e(e)&&/^(LI|DT|DD)$/.test(e.nodeName),$Y=e=>W8(e)&&W8(e.parentNode),kA=e=>{const n=e.parentNode;return fR(n)?n:e},Z0=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!bn(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},gR=e=>Ne(Ma(wf(oe.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),Z8=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;$Y(o)&&(c="LI");const v=fR(r)?gR(r):void 0;let S=fR(r)&&v?n(c,{style:gR(r)}):n(c);if(Z0(o,r,!0)&&Z0(o,r,!1))if(U8(o,"LI")){const _=kA(o);u.insertAfter(S,_),lj(o)?u.remove(_):u.remove(o)}else u.replace(S,o);else if(Z0(o,r,!0))U8(o,"LI")?(u.insertAfter(S,kA(o)),S.appendChild(u.doc.createTextNode(" ")),S.appendChild(o)):b.insertBefore(S,o),u.remove(r);else if(Z0(o,r,!1))u.insertAfter(S,kA(o)),u.remove(r);else{o=kA(o);const _=f.cloneRange();_.setStartAfter(r),_.setEndAfter(o);const R=_.extractContents();if(c==="LI"&&ij(R,"LI")){const M=ye(de(S.children,oe.fromDom),dt(Jr("br")));S=R.firstChild,u.insertAfter(R,o),ne(M,$=>Su(oe.fromDom(S),$)),v&&S.setAttribute("style",v)}else u.insertAfter(R,o),u.insertAfter(S,o);u.remove(r)}dy(e,S)},uj=e=>{ne(X(oe.fromDom(e),Es),n=>{const o=n.dom;o.nodeValue=Bi(o.data)})},j8=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},q8=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),hR=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,dj=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,pR=(e,n)=>_e(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",G8=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;bn(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||q8(e,u))&&e.remove(u)},bR=(e,n,o)=>St(n)?e?o===1&&n.data.charAt(o-1)===ya?0:o:o===n.data.length-1&&n.data.charAt(o)===ya?n.data.length:o:o,vR=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,bR(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,bR(!1,e.endContainer,e.endOffset)),n},mj=e=>{let n=e;do St(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},fj=(e,n,o,r,c)=>{var u,f;const b=e.dom,v=(u=my(b,r))!==null&&u!==void 0?u:b.getRoot();let S=b.getParent(r,b.isBlock);if(!S||!pR(b,S)){if(S=S||v,!S.hasChildNodes()){const $=b.create(n);return _w(e,$),S.appendChild($),o.setStart($,0),o.setEnd($,0),$}let _=r;for(;_&&_.parentNode!==S;)_=_.parentNode;let R;for(;_&&!b.isBlock(_);)R=_,_=_.previousSibling;const M=(f=R?.parentElement)===null||f===void 0?void 0:f.nodeName;if(R&&M&&e.schema.isValidChild(M,n.toLowerCase())){const $=R.parentNode,J=b.create(n);for(_w(e,J),$.insertBefore(J,R),_=R;_&&!b.isBlock(_);){const Y=_.nextSibling;J.appendChild(_),_=Y}o.setStart(r,c),o.setEnd(r,c)}}return r},gj=(e,n)=>{n.normalize();const o=n.lastChild;(!o||bn(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},K8=(e,n)=>{const o=A5(e);return gn(n)?!1:ae(o)?j(kt.explode(o),n.nodeName.toLowerCase()):o},Y8={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,v=e.schema,S=v.getNonEmptyElements(),_=e.selection.getRng(),R=pc(e),M=oe.fromDom(_.startContainer),$=gl(M,_.startOffset),J=$.exists(te=>$l(te)&&!vl(te)),Y=_.collapsed&&J,G=(te,Le)=>mR(e,o,Pt,lt,jg(e),te,Le),xe=te=>{const Le=bR(te,o,r);if(St(o)&&(te?Le>0:Le<o.data.length))return!1;if((o.parentNode===Pt||o===Pt)&&f&&!te||te&&bn(o)&&o===Pt.firstChild)return!0;if(hR(o,"TABLE")||hR(o,"HR"))return dj(o,"BR")?!te:f&&!te||!f&&te;const xt=new Qs(o,Pt);St(o)&&(te&&Le===0?xt.prev():!te&&Le===o.data.length&&xt.next());let Tn;for(;Tn=xt.current();){if(bn(Tn)){if(!Tn.getAttribute("data-mce-bogus")){const lo=Tn.nodeName.toLowerCase();if(S[lo]&&lo!=="br")return!1}}else if(St(Tn)&&!Fm(Tn.data))return!1;te?xt.prev():xt.next()}return!0},Ee=()=>{let te;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&Et!=="HGROUP"?te=G(R):te=G(),K8(e,u)&&pR(b,u)&&b.isEmpty(Pt,void 0,{includeZwsp:!0})?te=b.split(u,Pt):b.insertAfter(te,Pt),dy(e,te),te};oc(b,_).each(te=>{_.setStart(te.startContainer,te.startOffset),_.setEnd(te.endContainer,te.endOffset)}),o=_.startContainer,r=_.startOffset;const Re=!!(n&&n.shiftKey),Ie=!!(n&&n.ctrlKey);bn(o)&&o.hasChildNodes()&&!Y&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&St(o)?r=o.data.length:r=0);const lt=my(b,o);if(!lt||j8(e,o))return;Re||(o=fj(e,R,_,o,r));let Pt=b.getParent(o,b.isBlock)||b.getRoot();u=_e(Pt?.parentNode)?b.getParent(Pt.parentNode,b.isBlock):null,c=Pt?Pt.nodeName.toUpperCase():"";const Et=u?u.nodeName.toUpperCase():"";if(Et==="LI"&&!Ie){const te=u;Pt=te,u=te.parentNode,c=Et}if(bn(u)&&aj(e,Re,Pt))return cj(e,G,Pt);if(/^(LI|DT|DD)$/.test(c)&&bn(u)&&b.isEmpty(Pt)){Z8(e,G,u,Pt,R);return}if(!Y&&(Pt===e.getBody()||!pR(b,Pt)))return;const et=Pt.parentNode;let De;if(Y)De=G(R),$.fold(()=>{gs(M,oe.fromDom(De))},te=>{Ka(te,oe.fromDom(De))}),e.selection.setCursorLocation(De,0);else if(Um(Pt))De=El(Pt),b.isEmpty(Pt)&&dR(Pt),_w(e,De),dy(e,De);else if(xe(!1))De=Ee();else if(xe(!0)&&et){const te=qe.fromRangeStart(_),Le=s3(te),xt=oe.fromDom(Pt),lo=xE(xt,te,e.schema)?vB(xt,te,e.schema).bind(ds=>F.from(ds.getNode())):F.none();De=et.insertBefore(G(),Pt);const Zo=hR(Pt,"HR")||Le?De:lo.getOr(Pt);dy(e,Zo)}else{const te=vR(_).cloneRange();te.setEndAfter(Pt);const Le=te.extractContents();uj(Le),mj(Le),De=Le.firstChild,Pt===De?_e(et)&&b.insertAfter(Le,et):b.insertAfter(Le,Pt),G8(b,S,De),gj(b,Pt),b.isEmpty(Pt)&&dR(Pt),De.normalize(),b.isEmpty(De)?(b.remove(De),Ee()):(_w(e,De),dy(e,De))}b.setAttrib(De,"id",""),e.dispatch("NewBlock",{newBlock:De})},fakeEventName:"insertParagraph"},hj=(e,n,o)=>{const r=new Qs(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||St(c)&&c.length>0)return!0;return!1},pj=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),pC(e,r)},bj=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;oc(r,c).each($=>{c.setStart($.startContainer,$.startOffset),c.setEnd($.endContainer,$.endOffset)});let b=c.startOffset,v=c.startContainer;if(bn(v)&&v.hasChildNodes()){const $=b>v.childNodes.length-1;v=v.childNodes[Math.min(b,v.childNodes.length-1)]||v,$&&St(v)?b=v.data.length:b=0}let S=r.getParent(v,r.isBlock);const _=S&&S.parentNode?r.getParent(S.parentNode,r.isBlock):null,R=_?_.nodeName.toUpperCase():"",M=!!(n&&n.ctrlKey);R==="LI"&&!M&&(S=_),St(v)&&b>=v.data.length&&(hj(e.schema,v,S||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),Kb(r,c,u),pj(e,u,f),e.undoManager.add()},vj=(e,n)=>{const o=oe.fromTag("br");Ka(oe.fromDom(n),o),e.undoManager.add()},yj=(e,n)=>{wj(e.getBody(),n)||qi(oe.fromDom(n),oe.fromTag("br"));const o=oe.fromTag("br");qi(oe.fromDom(n),o),pj(e,o.dom,!1),e.undoManager.add()},Cj=e=>xr(e.getNode()),wj=(e,n)=>Cj(qe.after(n))?!0:Gc(e,qe.after(n)).map(o=>xr(o.getNode())).getOr(!1),yR=e=>e&&e.nodeName==="A"&&"href"in e,Sj=e=>e.fold(Oe,yR,yR,Oe),CR=e=>{const n=Ce(Kf,e),o=qe.fromRangeStart(e.selection.getRng());return vh(n,e.getBody(),o).filter(Sj)},eg=(e,n)=>{n.fold(rt,Ce(vj,e),Ce(yj,e),rt)},X8={insert:(e,n)=>{const o=CR(e);o.isSome()?o.each(Ce(eg,e)):bj(e,n)},fakeEventName:"insertLineBreak"},Dw=(e,n)=>uR(e).filter(o=>n.length>0&&ki(oe.fromDom(o),n)).isSome(),wR=e=>Dw(e,as(e)),J8=e=>Dw(e,yd(e)),mu=ja.generate([{br:[]},{block:[]},{none:[]}]),Tj=(e,n)=>J8(e),Q8=e=>(n,o)=>z8(n)===e,e$=(e,n)=>(o,r)=>oj(o)===e.toUpperCase()===n,Aj=e=>{const n=my(e.dom,e.selection.getStart());return gn(n)},Ow=e=>e$("pre",e),t$=()=>e$("summary",!0),_A=e=>(n,o)=>Uk(n)===e,kj=(e,n)=>wR(e),SR=(e,n)=>n,xR=e=>{const n=pc(e),o=my(e.dom,e.selection.getStart());return _e(o)&&e.schema.isValidChild(o.nodeName,n)},_j=e=>{const n=e.selection.getRng(),o=oe.fromDom(n.startContainer),c=gl(o,n.startOffset).map(u=>$l(u)&&!vl(u));return n.collapsed&&c.getOr(!0)},Md=(e,n)=>(o,r)=>Ne(e,(u,f)=>u&&f(o,r),!0)?F.some(n):F.none(),Dj=(e,n)=>RN([Md([Tj],mu.none()),Md([Ow(!0),Aj],mu.none()),Md([t$()],mu.br()),Md([Ow(!0),_A(!1),SR],mu.br()),Md([Ow(!0),_A(!1)],mu.block()),Md([Ow(!0),_A(!0),SR],mu.block()),Md([Ow(!0),_A(!0)],mu.br()),Md([Q8(!0),SR],mu.br()),Md([Q8(!0)],mu.block()),Md([kj],mu.br()),Md([SR],mu.br()),Md([xR],mu.block()),Md([_j],mu.block())],[e,!!(n&&n.shiftKey)]).getOr(mu.none()),DA=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||HB(n),!(_e(o)&&AA(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),_e(o)&&uy(n,e.fakeEventName)))},n$=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>DA(X8,e,n),r=()=>DA(Y8,e,n),c=Dj(e,n);switch(Wk(e)){case"linebreak":c.fold(o,o,rt);break;case"block":c.fold(r,r,rt);break;case"invert":c.fold(r,o,rt);break;default:c.fold(o,r,rt);break}},o$=Ro(),Oj=o$.os.isiOS()&&o$.browser.isSafari(),s$=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),sT(e.undoManager),e.undoManager.transact(()=>{n$(e,n)}))},OA=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(St(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},Rj=e=>{let n=F.none();const o=c=>{n=F.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),n.fold(rt,f=>c.selection.moveToBookmark(f)),s$(c,u),n=F.none()};e.on("keydown",c=>{c.keyCode===Yt.ENTER&&(Oj&&OA(e.selection.getRng())?o(e):s$(e,c))}),e.on("keyup",c=>{c.keyCode===Yt.ENTER&&n.each(()=>r(e,c))})},Bj=(e,n,o)=>{const r=Ho.os.isMacOS()||Ho.os.isiOS();z0([{keyCode:Yt.END,action:ro(SP,e,!0)},{keyCode:Yt.HOME,action:ro(SP,e,!1)},...r?[]:[{keyCode:Yt.HOME,action:ro(cA,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Yt.END,action:ro(cA,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Yt.END,action:ro(OP,e,!0)},{keyCode:Yt.HOME,action:ro(OP,e,!1)},{keyCode:Yt.END,action:ro(dw,e,!0,n)},{keyCode:Yt.HOME,action:ro(dw,e,!1,n)}],o).each(c=>{o.preventDefault()})},ER=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Bj(e,n,o)})},TR=e=>{e.on("input",n=>{n.isComposing||kE(e)})},Mj=Ro(),Fj=(e,n,o)=>{z0([{keyCode:Yt.PAGE_UP,action:ro(dw,e,!1,n)},{keyCode:Yt.PAGE_DOWN,action:ro(dw,e,!0,n)}],o)},AR=e=>e.stopImmediatePropagation(),r$=e=>e.keyCode===Yt.PAGE_UP||e.keyCode===Yt.PAGE_DOWN,a$=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",AR,!0):!o&&e.get()&&n.off("NodeChange",AR),e.set(o)},Nj=(e,n)=>{if(Mj.os.isMacOS())return;const o=dn(!1);e.on("keydown",r=>{r$(r)&&a$(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||Fj(e,n,r),r$(r)&&o.get()&&(a$(o,e,!1),e.nodeChanged())})},c$=(e,n)=>e===n||e.contains(n),Pj=(e,n)=>!c$(e.getBody(),n.startContainer)||!c$(e.getBody(),n.endContainer)?!0:Q5(e.dom,n),$j=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||ce(n.getTargetRanges(),o=>!Pj(e,o)))&&n.preventDefault()})},kR=(e,n)=>{const o=n.container(),r=n.offset();return St(o)?(o.insertData(r,e),F.some(qe(o,r+e.length))):fp(n).map(c=>{const u=oe.fromText(e);return n.isAtEnd()?qi(c,u):Ka(c,u),qe(u.dom,e.length)})},Rw=Ce(kR,ir),_R=Ce(kR," "),i$=(e,n,o)=>EB(e,n,o)?Rw(n):_R(n),Ij=e=>n=>n.fold(o=>yi(e.dom,qe.before(o)),o=>Kc(o),o=>Hu(o),o=>Gc(e.dom,qe.after(o))),Lj=(e,n,o)=>r=>EB(e,r,o)?Rw(n):_R(n),Bw=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},Hj=(e,n)=>e.isEditable(e.getParent(n,"summary")),l$=e=>{const n=qe.fromRangeStart(e.selection.getRng()),o=oe.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ce(Kf,e),c=qe.fromRangeStart(e.selection.getRng());return vh(r,e.getBody(),c).bind(Ij(o)).map(u=>()=>Lj(o,n,e.schema)(u).each(Bw(e)))}else return F.none()},zj=e=>{const n=()=>{const o=oe.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=qe.fromRangeStart(e.selection.getRng());i$(o,r,e.schema).each(Bw(e))};return os(Ho.browser.isFirefox()&&e.selection.isEditable()&&Hj(e.dom,e.selection.getRng().startContainer),n)},u$=(e,n)=>{_P([{keyCode:Yt.SPACEBAR,action:ro(l$,e)},{keyCode:Yt.SPACEBAR,action:ro(zj,e)}],n).each(o=>{n.preventDefault(),AA(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),uy(e,"insertText",{data:" "}))})},Vj=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||u$(e,n)})},Uj=e=>o4(e)?[{keyCode:Yt.TAB,action:ro(e8,e,!0)},{keyCode:Yt.TAB,shiftKey:!0,action:ro(e8,e,!1)}]:[],Wj=(e,n)=>{z0([...Uj(e)],n).each(o=>{n.preventDefault()})},Zj=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||Wj(e,n)})},jj=e=>{if(e.addShortcut("Meta+P","","mcePrint"),O8(e),Uu(e))return dn(null);{const n=uw(e);return $j(e),_W(e),t8(e,n),tj(e,n),Rj(e),Vj(e),TR(e),Zj(e),ER(e,n),Nj(e,n),n}},fy=(e,n)=>{const o=tw(e);o===null||ow(e,o)||e.undoManager.transact(()=>{Jt(n.styles)&&e.dom.setStyles(o,n.styles),Jt(n.attrs)&&To(n.attrs,(r,c)=>e.dom.setAttrib(o,c,r))})},DR=(e,n)=>()=>{const o=tw(e);return _e(o)&&o.nodeName===n},qj=e=>{e.addCommand("InsertUnorderedList",(n,o)=>{LT(e,"UL",o)}),e.addCommand("InsertOrderedList",(n,o)=>{LT(e,"OL",o)}),e.addCommand("InsertDefinitionList",(n,o)=>{LT(e,"DL",o)}),e.addCommand("RemoveList",()=>{sw(e)}),e.addCommand("mceListUpdate",(n,o)=>{Jt(o)&&fy(e,o)}),e.addCommand("mceListBackspaceDelete",(n,o)=>{$D(e,o)}),e.addQueryStateHandler("InsertUnorderedList",DR(e,"UL")),e.addQueryStateHandler("InsertOrderedList",DR(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",DR(e,"DL"))},d$=e=>{e.on("keydown",n=>{n.keyCode===Yt.BACKSPACE?$D(e,!1)&&n.preventDefault():n.keyCode===Yt.DELETE&&$D(e,!0)&&n.preventDefault()})},m$=e=>e.type===3,f$=e=>e.length===0,Gj=e=>{const n=(c,u)=>{const f=$i.create("li");ne(c,b=>f.append(b)),u?e.insert(f,u,!0):e.append(f)},o=(c,u)=>m$(u)?[...c,u]:!f$(c)&&!m$(u)?(n(c,u),[]):c,r=Ne(e.children(),o,[]);f$(r)||n(r)},g$=e=>{e.on("PreInit",()=>{const{parser:n}=e;n.addNodeFilter("ul,ol",o=>ne(o,Gj))})},Kj=e=>{e.on("keydown",n=>{n.keyCode!==Yt.TAB||Yt.metaKeyPressed(n)||e.undoManager.transact(()=>{(n.shiftKey?kD(e):iN(e))&&n.preventDefault()})})},Yj=e=>{c4(e)&&Kj(e)},HY=e=>{d$(e),qj(e),g$(e),Yj(e)};class RA{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!L4(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{fC(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&c0(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&c0(n)&&(n.selection.getNode().nodeName==="IMG"?Td.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let c;if(o.initialized&&r&&!wx(o)&&!t0(o)){const u=o.getBody();c=r.getStart(!0)||u,(c.ownerDocument!==o.getDoc()||!o.dom.isChildOf(c,u))&&(c=u);const f=[];o.dom.getParent(c,b=>b===u?!0:(f.push(b),!1)),o.dispatch("NodeChange",{...n,element:c,parents:f})}}isSameElementPath(n){let o;const r=this.editor,c=Ln(r.dom.getParents(n,ot,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const h$="x-tinymce/html",BA=it(h$),OR="<!-- "+h$+" -->",Xj=e=>OR+e,Jj=e=>e.replace(OR,""),p$=e=>e.indexOf(OR)!==-1,Qj=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),eq=(e,n)=>{let o="<"+e;const r=Ma(n,(c,u)=>u+'="'+Ag.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},tq=(e,n,o)=>{const r=e.split(/\n\n/),c=eq(n,o),u="</"+n+">",f=de(r,v=>v.split(/\n/).join("<br />")),b=v=>c+v+u;return f.length===1?f[0]:de(f,b).join("")},b$="%MCEPASTEBIN%",nq=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},b$);Ho.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},oq=(e,n)=>{const o=e.dom;if(RR(e)){let r;const c=n.get();for(;r=RR(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},RR=e=>e.dom.get("mcepastebin"),qs=e=>_e(e)&&e.id==="mcepastebin",sq=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=ye(e.getBody().childNodes,qs);ne(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},BR=e=>e===b$,rq=e=>{const n=dn(null);return{create:()=>nq(e,n),remove:()=>oq(e,n),getEl:()=>RR(e),getHtml:()=>sq(e),getLastRng:n.get}},MA=(e,n)=>(kt.each(n,o=>{_t(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),v$=e=>{const n=Fu(),o=dh({},n);let r="";const c=n.getVoidElements(),u=kt.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=v=>{const S=v.name,_=v;if(S==="br"){r+=`
`;return}if(S!=="wbr"){if(c[S]&&(r+=" "),u[S]){r+=" ";return}if(v.type===3&&(r+=v.value),!(v.name in n.getVoidElements())){let R=v.firstChild;if(R)do b(R);while(R=R.next)}f[S]&&_.next&&(r+=`
`,S==="p"&&(r+=`
`))}};return e=MA(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},y$=e=>(e=MA(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":ir],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),aq=e=>{let n=0;return()=>e+n++},cq=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return kt.hasOwn(o,n)?"image/"+o[n]:"image/"+n},C$=(e,n)=>{const o=dh({sanitize:z2(e),sandbox_iframes:mv(e),sandbox_iframes_exclusions:Q1(e),convert_unsafe_embeds:U2(e)},e.schema);o.addNodeFilter("meta",c=>{kt.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Cp({validate:!0},e.schema).serialize(r)},Mw=(e,n)=>({content:e,cancelled:n}),iq=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=zk(e,r,o);return Mw(c.node.innerHTML,c.isDefaultPrevented())},lq=(e,n,o)=>{const r=E5(e,n,o),c=C$(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?iq(e,c,o):Mw(c,r.isDefaultPrevented())},MR=(e,n,o)=>lq(e,n,o),FR=(e,n)=>(e.insertContent(n,{merge:Jk(e),paste:!0}),!0),NR=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),uq=(e,n)=>NR(n)&&ce(Mx(e),o=>fa(n.toLowerCase(),`.${o.toLowerCase()}`)),dq=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),w$=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),mq=(e,n,o)=>!e.selection.isCollapsed()&&NR(n)?w$(e,n,o):!1,fq=(e,n,o)=>uq(e,n)?dq(e,n,o):!1,S$=(e,n)=>{kt.each([mq,fq,FR],o=>!o(e,n,FR))},gq=(e,n,o)=>{o||!Dx(e)?FR(e,n):S$(e,n)},hq=aq("mceclip"),pq=e=>{const n=IO();return LO(n,e),uA(n),n},Fw=(e,n,o,r,c)=>{const u=MR(e,n,o);if(!u.cancelled){const f=u.content,b=()=>gq(e,f,r);c?AA(e,"insertFromPaste",{dataTransfer:pq(f)}).isDefaultPrevented()||(b(),uy(e,"insertFromPaste")):b()}},FA=(e,n,o,r)=>{const c=o||p$(n);Fw(e,Jj(n),c,!1,r)},NA=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),c=Ly(r,I2(e)),u=tq(c,pc(e),ip(e));Fw(e,u,!1,!0,o)},x$=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},tg=(e,n)=>n in e&&e[n].length>0,E$=e=>tg(e,"text/html")||tg(e,"text/plain"),T$=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return _e(o)?e.dom.encode(o[1]):void 0},bq=(e,n,o,r)=>{const c=hq(),u=us(e)&&_e(o.name),f=u?T$(e,o.name):c,b=u?o.name:void 0,v=n.create(c,o,r,f,b);return n.add(v),v},vq=(e,n)=>{t_(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,v=b.getByData(u,r),S=v??bq(e,b,f,u);FA(e,`<img src="${S.blobUri()}">`,!1,!0)})},yq=e=>e.type==="paste",Cq=e=>Promise.all(de(e,n=>o_(n).then(o=>({file:n,uri:o})))),A$=e=>{const n=Mx(e);return o=>Kn(o.type,"image/")&&ce(n,r=>cq(r)===o.type)},wq=(e,n)=>{const o=n.items?_n(Eo(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?Eo(n.files):[];return ye(o.length>0?o:r,A$(e))},PR=(e,n,o)=>{const r=yq(n)?n.clipboardData:n.dataTransfer;if(Yg(e)&&r){const c=wq(e,r);if(c.length>0)return n.preventDefault(),Cq(c).then(u=>{o&&e.selection.setRng(o),ne(u,f=>{vq(e,f)})}),!0}return!1},PA=e=>{var n,o;return Ho.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},$R=e=>Yt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,Nw=(e,n,o,r,c)=>{let u=y$(o);const f=tg(n,BA())||p$(o),b=!f&&Qj(u),v=NR(u);(BR(u)||!u.length||b&&!v)&&(r=!0),(r||v)&&(tg(n,"text/plain")&&b?u=n["text/plain"]:u=v$(u)),!BR(u)&&(r?NA(e,u,c):FA(e,u,f,c))},Sq=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{$R(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||PA(u))return;const f=o.get()==="text"||r;r=!1;const b=x$(u.clipboardData);!E$(b)&&PR(e,u,c())||(tg(b,"text/html")?(u.preventDefault(),Nw(e,b,b["text/html"],f,!0)):tg(b,"text/plain")&&tg(b,"text/uri-list")?(u.preventDefault(),Nw(e,b,b["text/plain"],f,!0)):(n.create(),Td.setEditorTimeout(e,()=>{const v=n.getHtml();n.remove(),Nw(e,b,v,f,!1)},0)))})},xq=e=>{const n=c=>Kn(c,"webkit-fake-url"),o=c=>Kn(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!Yg(e)&&r(f))for(const b of c){const v=b.attr("src");ae(v)&&!b.attr("data-mce-object")&&v!==Ho.transparentSrc&&(n(v)||!dv(e)&&o(v))&&b.remove()}})},gy=(e,n,o)=>{Sq(e,n,o),xq(e)},Eq=(e,n)=>{n.get()==="text"?(n.set("html"),lx(e,!1)):(n.set("text"),lx(e,!0)),e.focus()},hy=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{Eq(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&FA(e,r.html,r.internal,!1),r.text&&NA(e,r.text,!1)})},Pw=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(BA(),n),!0}catch{return!1}else return!1},k$=(e,n,o,r)=>{Pw(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},_$=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const v=r.createRng();v.selectNodeContents(f),c.setRng(v),Td.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},j0=e=>({html:Xj(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),Tq=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),$A=e=>!e.selection.isCollapsed()||Tq(e),Aq=(e,n)=>o=>{!o.isDefaultPrevented()&&$A(e)&&e.selection.isEditable()&&k$(o,j0(e),_$(e),()=>{if(Ho.browser.isChromium()||Ho.browser.isFirefox()){const r=e.selection.getRng();Td.setEditorTimeout(e,()=>{e.selection.setRng(r),xO(e,n)},0)}else xO(e,n)})},D$=e=>n=>{!n.isDefaultPrevented()&&$A(e)&&k$(n,j0(e),_$(e),rt)},O$=(e,n)=>{e.on("cut",Aq(e,n)),e.on("copy",D$(e))},IA=(e,n)=>{var o,r;return tf.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},R$=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},B$=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},kq=e=>ce(e.files,n=>/^image\//.test(n.type)),M$=(e,n,o,r)=>{const c=e.getParent(o,f=>ft(n,f));if(!q(e.getParent(o,"summary")))return!0;if(c&&no(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!q(f.querySelector(c.nodeName.toLowerCase()))}else return!1},_q=e=>{e.on("input",n=>{const o=r=>q(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=ye(e.dom.select("details"),o);ne(r,c=>{xr(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(tp().dom),c.prepend(u)})}})},F$=(e,n)=>{Kg(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),Yg(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&kq(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=IA(e,o);if(gn(r))return;const c=x$(o.dataTransfer),u=tg(c,BA());if((!E$(c)||R$(c))&&PR(e,o,r))return;const f=c[BA()],b=f||c["text/html"]||c["text/plain"],v=M$(e.dom,e.schema,r.startContainer,c),S=n.get();S&&!v||b&&(o.preventDefault(),Td.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||S&&v)&&e.execCommand("Delete"),B$(e,r);const _=y$(b);c["text/html"]?FA(e,_,u,!0):NA(e,_,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{Yg(e)&&!n.get()&&(o.preventDefault(),B$(e,IA(e,o))),o.type==="dragend"&&n.set(!1)}),_q(e)},IR=e=>{const n=c=>u=>{c(e,u)},o=Tx(e);fe(o)&&e.on("PastePreProcess",n(o));const r=Ax(e);fe(r)&&e.on("PastePostProcess",n(r))},N$=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},Dq=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,P$=e=>kt.trim(e).replace(Dq,Mg).toLowerCase(),Oq=(e,n,o)=>{const r=lv(e);if(o||r==="all"||!_x(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,v,S,_)=>{const R=u.parseStyle(u.decode(S)),M={};for(let J=0;J<c.length;J++){const Y=R[c[J]];let G=Y,xe=u.getStyle(f,c[J],!0);/color/.test(c[J])&&(G=P$(G),xe=P$(xe)),xe!==G&&(M[c[J]]=Y)}const $=u.serializeStyle(M,"span");return $?v+' style="'+$+'"'+_:v+_})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,v)=>f+' style="'+b+'"'+v),n},$$=e=>{(Ho.browser.isChromium()||Ho.browser.isSafari())&&N$(e,Oq)},LR=(e,n)=>{const o=dn(!1),r=dn(uv(e)?"text":"html"),c=rq(e);$$(e),hy(e,r),IR(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>r.get()==="text"),e.on("PreInit",()=>{O$(e,n),F$(e,o),gy(e,c,r)})},Rq=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},I$=e=>{e.parser.addNodeFilter("details",n=>{const o=s4(e);ne(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=r4(e);ne(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},L$=e=>{Rq(e),I$(e)},Bq=xr,HR=St,Mq=e=>mr(e.dom),Fq=e=>mi(e.dom),$w=e=>n=>Qo(oe.fromDom(e),n),Nq=(e,n,o)=>Hs(oe.fromDom(e),r=>Fq(r)||o.isBlock(Bo(r)),$w(n)).getOr(oe.fromDom(n)).dom,H$=(e,n)=>Hs(oe.fromDom(e),Mq,$w(n)),zR=(e,n,o)=>{const r=new Qs(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!Bq(f);f=c())gr(f)&&(u=f);return u},z$=(e,n,o)=>{const c=qe.fromRangeStart(e).getNode(),u=Nq(c,n,o),f=zR(c,u,!1),b=zR(c,u,!0),v=document.createRange();return H$(f,u).fold(()=>{HR(f)?v.setStart(f,0):v.setStartBefore(f)},S=>v.setStartBefore(S.dom)),H$(b,u).fold(()=>{HR(b)?v.setEnd(b,b.data.length):v.setEndAfter(b)},S=>v.setEndAfter(S.dom)),v},Pq=e=>{const n=z$(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng($E(n))},$q=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),Pq(e))})};var py;(function(e){e.Before="before",e.After="after"})(py||(py={}));const Iq=(e,n)=>Math.abs(e.left-n),Lq=(e,n)=>Math.abs(e.right-n),V$=(e,n)=>e>=n.top&&e<=n.bottom,Hq=(e,n)=>e.top<n.bottom&&e.bottom>n.top,zq=(e,n)=>{const o=m2(e,n)/Math.min(e.height,n.height);return Hq(e,n)&&o>.5},Vq=(e,n)=>{const o=ye(e,r=>V$(n,r));return d2(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=ie(e,f=>zq(f,r));return[c,u]})},Uq=(e,n)=>({node:e.node,position:Iq(e,n)<Lq(e,n)?py.Before:py.After}),Wq=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),VR=(e,n,o,r)=>{const c=R=>gr(R.node)?F.some(R):bn(R.node)?VR(Eo(R.node.childNodes),n,o,!1):F.none(),u=(R,M,$)=>c(M).filter(J=>Math.abs($(R,n,o)-$(J,n,o))<2&&St(J.node)),f=(R,M)=>{const $=fn(R,(J,Y)=>M(J,n,o)-M(Y,n,o));return Ds($,c).map(J=>r&&!St(J.node)&&$.length>1?u(J,$[1],M).getOr(J):J)},[b,v]=Vq(I0(e),o),{pass:S,fail:_}=ie(v,R=>R.top<o);return f(b,Wq).orThunk(()=>f(_,O1)).orThunk(()=>f(S,O1))},Zq=(e,n,o,r)=>{const c=(u,f)=>{const b=S=>bn(S)&&S.classList.contains("mce-drag-container"),v=ye(u.dom.childNodes,dt(b));return f.fold(()=>VR(v,o,r,!0),S=>{const _=ye(v,R=>R!==S.dom);return VR(_,o,r,!0)}).orThunk(()=>(Qo(u,e)?F.none():_i(u)).bind(_=>c(_,F.some(u))))};return c(n,F.none())},jq=(e,n,o)=>{const r=oe.fromDom(e),c=fl(r),f=oe.fromPoint(c,n,o).filter(b=>Ic(r,b)).getOr(r);return Zq(r,f,n,o)},UR=(e,n,o)=>jq(e,n,o).filter(r=>n0(r.node)).map(r=>Uq(r,n)),WR=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f?.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f?.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},qq=e=>e.inline?WR(e.getBody()):{left:0,top:0},Gq=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},Kq=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},Iw=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=WR(e.getContentAreaContainer()),r=Kq(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},Yq=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),Xq=(e,n)=>Yq(qq(e),Gq(e),Iw(e,n)),ZR=e=>({target:e,srcElement:e}),Jq=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...ZR(o)}),Qq=(e,n,o)=>{const r=wn("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:rt,stopImmediatePropagation:rt,stopPropagation:rt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...ZR(n)}},eG=(e,n)=>{const o=rZ(e);return n==="dragstart"?(PP(o),$O(o)):n==="drop"?(QW(o),uA(o)):(U0(o),LP(o)),o},tG=(e,n,o,r)=>{const c=eG(o,e);return Zn(r)?Qq(e,n,c):Jq(e,r,n,c)},LA=32,HA=100,Lw=8,Hw=16,U$=mr,nG=Hf(U$,mi),oG=(e,n,o)=>U$(o)&&o!==n&&e.isEditable(o.parentElement),zY=(e,n,o)=>gn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),sG=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},rG=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},by=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},zw=by("left",-LA),W$=by("left",LA),Z$=by("top",-LA),j$=by("top",LA),q$=(e,n,o,r,c,u,f,b,v,S,_,R)=>{let M=0,$=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(M=n.pageX+o-c),n.pageY+r>u&&($=n.pageY+r-u),e.style.width=o-M+"px",e.style.height=r-$+"px";const J=v.clientHeight,Y=v.clientWidth,G=f+v.getBoundingClientRect().top,xe=b+v.getBoundingClientRect().left;_.on(Ee=>{Ee.intervalId.clear(),Ee.dragging&&R&&(f+Lw>=J?Ee.intervalId.set(j$(S)):f-Lw<=0?Ee.intervalId.set(Z$(S)):b+Lw>=Y?Ee.intervalId.set(W$(S)):b-Lw<=0?Ee.intervalId.set(zw(S)):G+Hw>=window.innerHeight?Ee.intervalId.set(j$(window)):G-Hw<=0?Ee.intervalId.set(Z$(window)):xe+Hw>=window.innerWidth?Ee.intervalId.set(W$(window)):xe-Hw<=0&&Ee.intervalId.set(zw(window)))})},G$=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},jR=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);G$(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&em(oe.fromDom(o))},K$=e=>e.button===0,aG=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),cG=(e,n)=>o=>{if(K$(o)){const r=Gt(n.dom.getParents(o.target),nG).getOr(null);if(_e(r)&&oG(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:IO(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:sG(n,r,r.offsetWidth,r.offsetHeight),intervalId:Gs(HA)})}}},Y$=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),UR(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===py.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},Vw=(e,n,o,r,c)=>{n==="dragstart"&&LO(r,e.dom.getOuterHTML(o));const u=tG(n,o,r,c);return e.dispatch(n,u)},VY=(e,n)=>{const o=Ut((c,u)=>Y$(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const b=Vw(n,"dragstart",u.element,u.dataTransfer,c);if(_e(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,v=aG(u,Xq(n,c));rG(u.ghost,n.getBody()),q$(u.ghost,v,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},iG=e=>{const n=e.getSel();if(_e(n)){const r=n.getRangeAt(0).startContainer;return St(r)?r.parentNode:r}else return null},lG=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(zY(n,iG(n.selection),r.element)){const u=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();Vw(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{jR(n.dom,r.element),aZ(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}Vw(n,"dragend",n.getBody(),r.dataTransfer,o)}}),zA(e)},X$=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>Vw(n,"dragend",r.element,r.dataTransfer),c=>Vw(n,"dragend",r.element,r.dataTransfer,c))}),zA(e)},J$=(e,n)=>o=>X$(e,n,F.some(o)),zA=e=>{e.on(n=>{n.intervalId.clear(),G$(n.ghost)}),e.clear()},VA=e=>{const n=is(),o=Ls.DOM,r=document,c=cG(n,e),u=VY(n,e),f=lG(n,e),b=J$(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",v=>{v.keyCode===Yt.ESC&&X$(n,e,F.none())})},Q$=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(j(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&Bp(e,"Dropped file type is not supported"))}},o=c=>{P4(e,c.target)&&n(c)},r=()=>{const c=Ls.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),v=["drop","dragover"];ne(v,S=>{c.bind(f,S,o),u.bind(b,S,n)}),e.on("remove",()=>{ne(v,S=>{c.unbind(f,S,o),u.unbind(b,S,n)})})};e.on("init",()=>{Td.setEditorTimeout(e,r,0)})},uG=e=>{VA(e),Y1(e)&&Q$(e)},dG=e=>{const n=Ut(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=zD(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},mG=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Du(o)){const r=b0(e.getBody(),o),c=mr(r)?r:o;e.selection.getNode()!==c&&aw(e,c).each(u=>e.selection.setRng(u))}})})},Uw=mr,qR=(e,n)=>b0(e.getBody(),n),fG=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=W2(e,r,o.isBlock,()=>f0(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const v=Et=>_e(Et)&&o.hasClass(Et,"mce-offscreen-selection"),S=Et=>Et!==r&&(Uw(Et)||Du(Et))&&o.isChildOf(Et,r)&&o.isEditable(Et.parentNode),_=Et=>{Et&&n.setRng(Et)},R=(Et,et,De,te=!0)=>e.dispatch("ShowCaret",{target:et,direction:Et,before:De}).isDefaultPrevented()?null:(te&&n.scrollIntoView(et,Et===-1),c.show(De,et)),M=Et=>{Et.hasAttribute("data-mce-caret")&&(El(Et),n.scrollIntoView(Et))},$=()=>{e.on("click",et=>{o.isEditable(et.target)||(et.preventDefault(),e.focus())}),e.on("blur NewBlock",Ie),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",et=>{const De=et.target,te=qR(e,De);Uw(te)?(et.preventDefault(),aw(e,te).each(Re)):S(De)&&aw(e,De).each(Re)},!0),e.on("mousedown",et=>{const De=et.target;if(De!==r&&De.nodeName!=="HTML"&&!o.isChildOf(De,r)||!Q_(e,et.clientX,et.clientY))return;Ie(),Pt();const te=qR(e,De);Uw(te)?(et.preventDefault(),aw(e,te).each(Re)):UR(r,et.clientX,et.clientY).each(Le=>{et.preventDefault();const xt=R(1,Le.node,Le.position===py.Before,!1);_(xt),dr(te)?te.focus():e.getBody().focus()})}),e.on("keypress",et=>{Yt.modifierPressed(et)||Uw(n.getNode())&&et.preventDefault()}),e.on("GetSelectionRange",et=>{let De=et.range;if(b){if(!b.parentNode){b=null;return}De=De.cloneRange(),De.selectNode(b),et.range=De}}),e.on("focusin",et=>{if(!Du(et.target)&&e.getBody().contains(et.target)&&et.target!==e.getBody()&&!e.dom.isEditable(et.target.parentNode)){c.isShowing()&&c.hide(),et.target.contains(e.selection.getNode())||(e.selection.select(et.target,!0),e.selection.collapse(!0));const De=Re(e.selection.getRng(),!0);De&&e.selection.setRng(De)}}),e.on("SetSelectionRange",et=>{et.range=G(et.range);const De=Re(et.range,et.forward);De&&(et.range=De)});const Et=et=>bn(et)&&et.id==="mcepastebin";e.on("AfterSetSelectionRange",et=>{const De=et.range,te=De.startContainer.parentElement;!Y(De)&&!Et(te)&&Pt(),v(te)||Ie()}),uG(e),dG(e),mG(e)},J=Et=>Uc(Et)||tm(Et)||$f(Et),Y=Et=>J(Et.startContainer)||J(Et.endContainer),G=Et=>{const et=e.schema.getVoidElements(),De=o.createRng(),te=Et.startContainer,Le=Et.startOffset,xt=Et.endContainer,Tn=Et.endOffset;return no(et,te.nodeName.toLowerCase())?Le===0?De.setStartBefore(te):De.setStartAfter(te):De.setStart(te,Le),no(et,xt.nodeName.toLowerCase())?Tn===0?De.setEndBefore(xt):De.setEndAfter(xt):De.setEnd(xt,Tn),De},xe=(Et,et)=>{const De=oe.fromDom(e.getBody()),te=e.getDoc(),Le=ku(De,"#"+u).getOrThunk(()=>{const lo=oe.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',te);return Cr(lo,"id",u),gs(De,lo),lo}),xt=o.createRng();pl(Le),Gi(Le,[oe.fromText(ir,te),oe.fromDom(et),oe.fromText(ir,te)]),xt.setStart(Le.dom.firstChild,1),xt.setEnd(Le.dom.lastChild,0),li(Le,{top:o.getPos(Et,e.getBody()).y+"px"}),gg(Le);const Tn=n.getSel();return Tn&&(Tn.removeAllRanges(),Tn.addRange(xt)),xt},Ee=Et=>{const et=Et.cloneNode(!0),De=e.dispatch("ObjectSelected",{target:Et,targetClone:et});if(De.isDefaultPrevented())return null;const te=xe(Et,De.targetClone),Le=oe.fromDom(Et);return ne(Ge(oe.fromDom(e.getBody()),`*[${f}]`),xt=>{Qo(Le,xt)||Qr(xt,f)}),o.getAttrib(Et,f)||Et.setAttribute(f,"1"),b=Et,Pt(),te},Re=(Et,et)=>{if(!Et)return null;if(Et.collapsed){if(!Y(Et)){const xt=et?1:-1,Tn=Ym(xt,r,Et),lo=Tn.getNode(!et);if(_e(lo)){if(n0(lo))return R(xt,lo,et?!Tn.isAtEnd():!1,!1);if(Ts(lo)&&mr(lo.nextSibling)){const ds=o.createRng();return ds.setStart(lo,0),ds.setEnd(lo,0),ds}}const Zo=Tn.getNode(et);if(_e(Zo)){if(n0(Zo))return R(xt,Zo,et?!1:!Tn.isAtEnd(),!1);if(Ts(Zo)&&mr(Zo.previousSibling)){const ds=o.createRng();return ds.setStart(Zo,1),ds.setEnd(Zo,1),ds}}}return null}let De=Et.startContainer,te=Et.startOffset;const Le=Et.endOffset;if(St(De)&&te===0&&Uw(De.parentNode)&&(De=De.parentNode,te=o.nodeIndex(De),De=De.parentNode),!bn(De))return null;if(Le===te+1&&De===Et.endContainer){const xt=De.childNodes[te];if(S(xt))return Ee(xt)}return null},Ie=()=>{b&&b.removeAttribute(f),ku(oe.fromDom(e.getBody()),"#"+u).each(Ws),b=null},lt=()=>{c.destroy(),b=null},Pt=()=>{c.hide()};return Uu(e)||$(),{showCaret:R,showBlockCaretContainer:M,hideFakeCaret:Pt,destroy:lt}},e7=(e,n)=>{let o=n;for(let r=e.previousSibling;St(r);r=r.previousSibling)o+=r.data.length;return o},t7=(e,n,o,r,c)=>{if(St(o)&&(r<0||r>o.data.length))return[];const u=c&&St(o)?[e7(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},GR=(e,n,o,r,c,u,f=!1)=>{const b=t7(e,n,o,r,f),v=t7(e,n,c,u,f);return{start:b,end:v}},UA=(e,n)=>{const o=n.slice(),r=o.pop();return cs(r)?Ne(o,(u,f)=>u.bind(b=>F.from(b.childNodes[f])),F.some(e)).bind(u=>St(u)&&(r<0||r>u.data.length)?F.none():F.some({node:u,offset:r})):F.none()},KR=(e,n)=>UA(e,n.start).bind(({node:o,offset:r})=>UA(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),UY=(e,n,o,r=!1)=>GR(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),vy=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,St(n.firstChild)&&Fm(n.firstChild.data)),vy(e,r,o)}},Ww=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(St(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),St(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),vy(e,c,o),c!==u&&vy(e,u,o))},WA=(e,n)=>F.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),Zw=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Zm(r).concat(e.blockPatterns),inlinePatterns:Ug(r).concat(e.inlinePatterns)}},YR=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},n7=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),ZA=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},XR=(e,n,o)=>{const r=KR(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),v=b.parentNode,S=f.parentNode;return{prefix:n,end:S.insertBefore(n7(e,n+"-end"),f),start:v.insertBefore(n7(e,n+"-start"),b)}},jw=(e,n,o)=>{vy(e,e.get(n.prefix+"-end"),o),vy(e,e.get(n.prefix+"-start"),o)},jA=e=>e.start.length===0,o7=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},s7=(e,n,o,r)=>{const c=n.start;return Ew(e,r.container,r.offset,o7(c),o).bind(f=>{var b,v;const S=(v=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&v!==void 0?v:-1;if(S!==-1&&f.offset>=S+c.length){const R=e.createRng();return R.setStart(f.container,f.offset-c.length),R.setEnd(f.container,f.offset),F.some(R)}else{const R=f.offset-c.length;return Sh(f.container,R,o).map(M=>{const $=e.createRng();return $.setStart(M.container,M.offset),$.setEnd(f.container,f.offset),$}).filter(M=>M.toString()===c).orThunk(()=>s7(e,n,o,Rd(f.container,0)))}})},gG=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),F.some(f)}return hA(o,r,c).bind(f=>s7(e,n,c,f).bind(v=>{var S;if(u){if(v.endContainer===f.container&&v.endOffset===f.offset)return F.none();if(f.offset===0&&((S=v.endContainer.textContent)===null||S===void 0?void 0:S.length)===v.endOffset)return F.none()}return F.some(v)}))},r7=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,v=o.position.offset;return Sh(b,v-o.pattern.end.length,n).bind(S=>{const _=GR(c,u,S.container,S.offset,b,v,r);if(jA(f))return F.some({matches:[{pattern:f,startRng:_,endRng:_}],position:S});{const R=qA(e,o.remainingPatterns,S.container,S.offset,n,r),M=R.getOr({matches:[],position:S}),$=M.position;return gG(c,f,$.container,$.offset,n,R.isNone()).map(Y=>{const G=UY(c,u,Y,r);return{matches:M.matches.concat([{pattern:f,startRng:G,endRng:_}]),position:Rd(Y.startContainer,Y.startOffset)}})}})},qA=(e,n,o,r,c,u)=>{const f=e.dom;return hA(o,r,f.getRoot()).bind(b=>{const v=YR(f,c,o,r);for(let S=0;S<n.length;S++){const _=n[S];if(!fa(v,_.end))continue;const R=n.slice();R.splice(S,1);const M=r7(e,c,{pattern:_,remainingPatterns:R,position:b},u);if(M.isNone()&&r>0)return qA(e,n,o,r-1,c,u);if(M.isSome())return M}return F.none()})},a7=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?ne(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},hG=(e,n,o,r)=>{const c=ZA(e.dom,o);Ww(e.dom,c,r),a7(e,n,c)},JR=(e,n,o,r,c)=>{const u=e.dom,f=ZA(u,r),b=ZA(u,o);Ww(u,b,c),Ww(u,f,c);const v={prefix:o.prefix,start:o.end,end:r.start},S=ZA(u,v);a7(e,n,S)},pG=(e,n)=>{const o=Ko("mce_textpattern"),r=Ae(n,(c,u)=>{const f=XR(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return Ae(r,(c,u)=>{const f=r.length-c.length-1,b=jA(u.pattern)?u.endMarker:XR(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},bG=e=>fn(e,(n,o)=>o.end.length-n.end.length),vG=(e,n)=>{const o=ns(e,r=>ce(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},c7=(e,n,o,r,c,u)=>{const f=qA(e,c.inlinePatterns,o,r,n,u).fold(()=>[],v=>v.matches),b=qA(e,bG(c.inlinePatterns),o,r,n,u).fold(()=>[],v=>v.matches);return vG(f,b)},i7=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=pG(o,n);ne(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=v=>v===f;jA(u.pattern)?hG(e,u.pattern,u.endMarker,b):JR(e,u.pattern,u.startMarker,u.endMarker,b),jw(o,u.endMarker,b),jw(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},l7=(e,n,o)=>Bd(n,0,n).map(r=>{const c=r.container;return GO(c,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(c,0),f.setEnd(u.container,u.offset),Ww(e,f,b=>b===n)}),c}),GA=e=>(n,o)=>{const r=n.dom,c=o.pattern,u=KR(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,v)=>{const S=v.get(b);return Ze(S)&&to(S).exists(_=>no(_,"block"))};return WA(n,u).each(b=>{c.type==="block-format"?f(c.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,b,c),n.formatter.apply(c.format)}):c.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,b,c),n.execCommand(c.cmd,!1,c.value)})}),!0},yG=e=>fn(e,(n,o)=>o.start.length-n.start.length),u7=e=>(n,o)=>{const r=yG(n),c=o.replace(ir," ");return Gt(r,u=>e(u,o,c))},d7=(e,n)=>(o,r,c,u,f)=>{var b;f===void 0&&(f=(b=r.textContent)!==null&&b!==void 0?b:"");const v=o.dom,S=pc(o);return v.is(r,S)?e(c.blockPatterns,f).map(_=>n&&kt.trim(f).length===_.start.length?[]:[{pattern:_,range:GR(v,v.getRoot(),r,0,r,0,u)}]).getOr([]):[]},m7=e=>/^\s[^\s]/.test(e),CG=GA((e,n,o)=>{l7(e,n,o).each(r=>{const c=oe.fromDom(r),u=uc(c);m7(u)&&m1(c,u.slice(1))})}),wG=u7((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),SG=d7(wG,!0),xG=(e,n)=>{const o=e.selection.getRng();return WA(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=Zw(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=c7(e,r,o.startContainer,u,f,!0),v=SG(e,r,f,!0);return{inlineMatches:b,blockMatches:v}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},EG=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();ne(n,r=>CG(e,r)),e.selection.moveToBookmark(o)},TG=GA(l7),AG=u7((e,n,o)=>n===e.start||o===e.start),f7=d7(AG,!1),kG=(e,n)=>{const o=e.selection.getRng();return WA(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=YR(e.dom,r,o.startContainer,c),f=Zw(n,r,u);return f7(e,r,f,!1,u)}).filter(r=>r.length>0)},QR=(e,n)=>{ne(n,o=>TG(e,o))},_G=(e,n)=>xG(e,n).fold(Oe,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{LS(e),i7(e,o),EG(e,r);const c=e.selection.getRng(),u=hA(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===qa&&(b.deleteData(f.offset-1,1),vy(e.dom,b.parentNode,v=>v===e.dom.getRoot()))})}),!0)),DG=(e,n)=>{const o=e.selection.getRng();WA(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=YR(e.dom,r,o.startContainer,c),f=Zw(n,r,u),b=c7(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{i7(e,b)})})},OG=(e,n)=>kG(e,n).fold(Oe,o=>(e.undoManager.transact(()=>{QR(e,o)}),!0)),g7=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},RG=(e,n)=>g7(e,n,(o,r)=>o===r.keyCode&&!Yt.modifierPressed(r)),BG=(e,n)=>g7(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),KA=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Wg(L2(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),Qk(e)),c=()=>t4(e);e.on("keydown",f=>{if(f.keyCode===13&&!Yt.modifierPressed(f)&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=E2(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&_G(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=E2(r(),"space");(b.blockPatterns.length>0||c())&&OG(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const f=E2(r(),"space");(f.inlinePatterns.length>0||c())&&DG(e,f)}};e.on("keyup",f=>{RG(o,f)&&u()}),e.on("keypress",f=>{BG(n,f)&&Td.setEditorTimeout(e,u)})},MG=e=>{KA(e)},FG=e=>{const n=kt.each,o=Yt.BACKSPACE,r=Yt.DELETE,c=e.dom,u=e.selection,f=e.parser,b=Ho.browser,v=b.isFirefox(),S=b.isChromium()||b.isSafari(),_=Ho.deviceType.isiPhone()||Ho.deviceType.isiPad(),R=Ho.os.isMacOS()||Ho.os.isiOS(),M=(Ft,Qt)=>{try{e.getDoc().execCommand(Ft,!1,String(Qt))}catch{}},$=Ft=>Ft.isDefaultPrevented(),J=()=>{const Ft=eo=>{const uo=c.create("body"),Us=eo.cloneContents();return uo.appendChild(Us),u.serializer.serialize(uo,{format:"html"})},Qt=eo=>{const uo=Ft(eo),Us=c.createRng();Us.selectNode(e.getBody());const ar=Ft(Us);return uo===ar};e.on("keydown",eo=>{const uo=eo.keyCode;if(!$(eo)&&(uo===r||uo===o)&&e.selection.isEditable()){const Us=e.selection.isCollapsed(),ar=e.getBody();if(Us&&!Ul(e.schema,ar)||!Us&&!Qt(e.selection.getRng()))return;eo.preventDefault(),e.setContent(""),ar.firstChild&&c.isBlock(ar.firstChild)?e.selection.setCursorLocation(ar.firstChild,0):e.selection.setCursorLocation(ar,0),e.nodeChanged()}})},Y=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},G=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",Ft=>{var Qt;let eo;if(Ft.target===e.getDoc().documentElement)if(eo=u.getRng(),((Qt=e.getDoc().getSelection())===null||Qt===void 0?void 0:Qt.anchorNode)!==null&&e.getBody().focus(),Ft.type==="mousedown"){if(Uc(eo.startContainer))return;u.placeCaretAt(Ft.clientX,Ft.clientY)}else u.setRng(eo)})},xe=()=>{e.on("keydown",Ft=>{if(!$(Ft)&&Ft.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Qt=u.getNode(),eo=Qt.previousSibling;if(Qt.nodeName==="HR"){c.remove(Qt),Ft.preventDefault();return}eo&&eo.nodeName&&eo.nodeName.toLowerCase()==="hr"&&(c.remove(eo),Ft.preventDefault())}}})},Ee=()=>{Range.prototype.getClientRects||e.on("mousedown",Ft=>{if(!$(Ft)&&Ft.target.nodeName==="HTML"){const Qt=e.getBody();Qt.blur(),Td.setEditorTimeout(e,()=>{Qt.focus()})}})},Re=()=>{const Ft=$2(e);e.on("click",Qt=>{const eo=Qt.target;/^(IMG|HR)$/.test(eo.nodeName)&&c.isEditable(eo)&&(Qt.preventDefault(),e.selection.select(eo),e.nodeChanged()),eo.nodeName==="A"&&c.hasClass(eo,Ft)&&eo.childNodes.length===0&&c.isEditable(eo.parentNode)&&(Qt.preventDefault(),u.select(eo))})},Ie=()=>{const Ft=Qt=>Qt.nodeName==="IMG"&&e.dom.isEditable(Qt);e.on("mousedown",Qt=>{Xt(F.from(Qt.clientX),F.from(Qt.clientY),(eo,uo)=>{var Us;const ar=e.getDoc().caretPositionFromPoint(eo,uo),Pd=((Us=ar?.offsetNode)===null||Us===void 0?void 0:Us.childNodes[ar.offset-(ar.offset>0?1:0)])||ar?.offsetNode;if(_e(Pd)&&Ft(Pd)){const oi=Pd.getBoundingClientRect();Qt.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(Pd),Qt.clientX<oi.left||Qt.clientY<oi.top?e.selection.collapse(!0):(Qt.clientX>oi.right||Qt.clientY>oi.bottom)&&e.selection.collapse(!1)}})})},lt=()=>{const Ft=()=>{const eo=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const uo=u.getStart();uo!==e.getBody()&&(c.setAttrib(uo,"style",null),n(eo,Us=>{uo.setAttributeNode(Us.cloneNode(!0))}))}},Qt=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",eo=>{let uo;return!$(eo)&&(eo.keyCode===8||eo.keyCode===46)&&Qt()?(uo=Ft(),e.getDoc().execCommand("delete",!1),uo(),eo.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",eo=>{if(!$(eo)&&Qt()){const uo=Ft();Td.setEditorTimeout(e,()=>{uo()})}})},Pt=()=>{e.on("keydown",Ft=>{if(!$(Ft)&&Ft.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Qt=u.getNode().previousSibling;if(Qt&&Qt.nodeName&&Qt.nodeName.toLowerCase()==="table")return Ft.preventDefault(),!1}return!0})},Et=()=>{e.on("keydown",Ft=>{if($(Ft)||Ft.keyCode!==Yt.BACKSPACE)return;let Qt=u.getRng();const eo=Qt.startContainer,uo=Qt.startOffset,Us=c.getRoot();let ar=eo;if(!(!Qt.collapsed||uo!==0)){for(;ar.parentNode&&ar.parentNode.firstChild===ar&&ar.parentNode!==Us;)ar=ar.parentNode;ar.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,ar),Qt=c.createRng(),Qt.setStart(eo,0),Qt.setEnd(eo,0),u.setRng(Qt))}})},et=()=>{const Ft=Jr("figcaption");e.on("keydown",Qt=>{if(Qt.keyCode===Yt.LEFT||Qt.keyCode===Yt.RIGHT){const eo=oe.fromDom(e.selection.getNode());Ft(eo)&&e.selection.isCollapsed()&&Lc(eo).bind(uo=>{var Us;return e.selection.getRng().startOffset===0&&Qt.keyCode===Yt.LEFT?Zi(uo):e.selection.getRng().endOffset===((Us=eo.dom.textContent)===null||Us===void 0?void 0:Us.length)&&Qt.keyCode===Yt.RIGHT?Hc(uo):F.none()}).each(uo=>{e.selection.setCursorLocation(uo.dom,0)})}})},De=()=>{const Ft=()=>{M("StyleWithCSS",!1),M("enableInlineTableEditing",!1),F2(e)||M("enableObjectResizing",!1)};q1(e)||e.on("BeforeExecCommand mousedown",Ft)},te=()=>{const Ft=()=>{n(c.select("a:not([data-mce-block])"),Qt=>{var eo;let uo=Qt.parentNode;const Us=c.getRoot();if(uo?.lastChild===Qt){for(;uo&&!c.isBlock(uo);){if(((eo=uo.parentNode)===null||eo===void 0?void 0:eo.lastChild)!==uo||uo===Us)return;uo=uo.parentNode}c.add(uo,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Qt=>{(Qt.type==="setcontent"||Qt.command==="mceInsertLink")&&Ft()})},Le=()=>{e.on("init",()=>{M("DefaultParagraphSeparator",pc(e))})},xt=Ft=>{const Qt=Ft.getBody(),eo=Ft.selection.getRng();return eo.startContainer===eo.endContainer&&eo.startContainer===Qt&&eo.startOffset===0&&eo.endOffset===Qt.childNodes.length},Tn=()=>{e.on("keyup focusin mouseup",Ft=>{!Yt.modifierPressed(Ft)&&!xt(e)&&u.normalize()},!0)},lo=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Zo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},ds=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Ft=>{let Qt;Ft.target.nodeName==="HTML"&&(Qt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Qt),e.selection.normalize(),e.nodeChanged())}))},_r=()=>{R&&e.on("keydown",Ft=>{Yt.metaKeyPressed(Ft)&&!Ft.shiftKey&&(Ft.keyCode===37||Ft.keyCode===39)&&(Ft.preventDefault(),e.selection.getSel().modify("move",Ft.keyCode===37?"backward":"forward","lineboundary"))})},Dr=()=>{e.on("click",Ft=>{let Qt=Ft.target;do if(Qt.tagName==="A"){Ft.preventDefault();return}while(Qt=Qt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Oc=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Ft=>{Ft.preventDefault()})})},Bt=()=>{f.addNodeFilter("br",Ft=>{let Qt=Ft.length;for(;Qt--;)Ft[Qt].attr("class")==="Apple-interchange-newline"&&Ft[Qt].remove()})},kn=rt,vs=()=>{if(!v||e.removed)return!1;const Ft=e.selection.getSel();return!Ft||!Ft.rangeCount||Ft.rangeCount===0},$s=()=>{S&&(G(),Re(),Oc(),Y(),_&&(Zo(),ds(),Dr())),v&&(Ee(),De(),lo(),_r())},xn=()=>{Et(),J(),Ho.windowsPhone||Tn(),S&&(G(),Re(),Le(),Oc(),Pt(),Bt(),_?(Zo(),ds(),Dr()):Y()),v&&(et(),Ie(),xe(),Ee(),lt(),De(),te(),lo(),_r(),Pt())};return Uu(e)?$s():xn(),{refreshContentEditable:kn,isHidden:vs}},e5=Ls.DOM,NG=(e,n)=>{const o=oe.fromDom(e.getBody()),r=o1(ka(o)),c=oe.fromTag("style");Cr(c,"type","text/css"),gs(c,oe.fromText(n)),gs(r,c),e.on("remove",()=>{Ws(c)})},PG=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,t5=e=>Mc(e,n=>Zn(n)===!1),h7=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return t5({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_html_in_comments:n("allow_html_in_comments"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),extended_mathml_attributes:n("extended_mathml_attributes"),extended_mathml_elements:n("extended_mathml_elements"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:PG(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:Q1(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},p7=e=>{const n=e.options.get;return t5({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},$G=e=>{const n=e.options.get;return{...h7(e),...p7(e),...t5({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},b7=e=>{const n=dh(h7(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let v=b.attr(r);if(v&&!b.attr(u)){if(v.indexOf("data:")===0||v.indexOf("blob:")===0)continue;r==="style"?(v=c.serializeStyle(c.parseStyle(v),b.name),v.length||(v=null),b.attr(u,v),b.attr(r,v)):r==="tabindex"?(b.attr(u,v),b.attr(r,null)):b.attr(u,e.convertURL(v,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),J1(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new $i("br",1))}}),n},IG=e=>{const n=Xk(e);n&&Td.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},v7=e=>{const n=e.dom.getRoot();!e.inline&&(!c0(e)||e.selection.getStart(!0)===n)&&Kc(n).each(o=>{const r=o.getNode(),c=qd(r)?Kc(r).getOr(o):o;e.selection.setRng(c.toRange())})},LG=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Ik(e),e.focus(!0),v7(e),e.nodeChanged({initial:!0});const n=xx(e);fe(n)&&n.call(e,e),IG(e),ia(e)&&xT(e,!0)},n5=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,y7=(e,n,o)=>{const{pass:r,fail:c}=ie(n,b=>tinymce.Resource.has(JC(b))),f=[...r.map(b=>{const v=tinymce.Resource.get(JC(b));return ae(v)?Promise.resolve(n5(e).loadRawCss(b,v)):Promise.resolve()}),n5(e).loadAll(c)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},yy=e=>{const n=n5(e),o=gx(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let v="";kt.each(e.contentStyles,S=>{v+=S+`\r
`}),e.dom.addStyle(v)}const f=Promise.all(y7(e,r,o)).then(u).catch(u),b=fx(e);return b&&NG(e,b),f},HG=e=>{const n=e.getDoc(),o=e.getBody();Pk(e),iv(e)||(n.body.spellcheck=!1,e5.setAttrib(o,"spellcheck","false")),e.quirks=FG(e),$k(e);const r=hx(e);r!==void 0&&(o.dir=r);const c=lp(e);c&&e.on("BeforeSetContent",u=>{kt.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},C7=e=>{Uu(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},o5=e=>{e.removed!==!0&&(C7(e),LG(e))},zG=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},w7=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(e5.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=q1(e),e._editableRoot=G1(e),!t0(e)&&e.hasEditableRoot()&&(e.inline&&e5.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=_0(e),e.schema=Fu(p7(e)),e.dom=Ls(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:ov(e),referrerPolicy:O2(e),crossOrigin:U1(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=b7(e),e.serializer=fT($G(e),e),e.selection=uT(e.dom,e.getWin(),e.serializer,e),e.annotator=rE(e),e.formatter=jv(e),e.undoManager=QC(e),e._nodeChangeDispatcher=new RA(e),e._selectionOverrides=fG(e),HY(e),fP(e),L$(e),AW(e),Uu(e)||($q(e),MG(e));const c=jj(e);mP(e,c),aA(e),J6(e),LR(e,c);const u=jC(e);HG(e),u.fold(()=>{const f=zG(e);yy(e).then(()=>{o5(e),f()})},f=>{e.setProgressState(!0),yy(e).then(()=>{f().then(b=>{e.setProgressState(!1),o5(e),j_(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),o5(e),j_(e)})})})},s5=Ls.DOM,S7=(e,n,o,r)=>{const c=oe.fromTag("iframe");return r.each(u=>Cr(c,"tabindex",u)),Ya(c,o),Ya(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",...Ho.browser.isFirefox()?{title:n}:{}}),ui(c,"tox-edit-area__iframe"),c},VG=e=>{let n=cp(e)+"<html><head>";z1(e)!==e.editorManager.documentBaseURL&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Gm(e),r=_c(e),c=e.translate(cv(e)),u=Ho.browser.isFirefox()?"":`aria-label="${c}"`;return sm(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+sm(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" ${u}><br></body></html>`,n},x7=(e,n)=>{const o=cv(e),r=e.translate(o),c=Ki(oe.fromDom(e.getElement()),"tabindex").bind(Xu),u=S7(e.id,r,nv(e),c).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=VG(e),s5.add(n.iframeContainer,u)},UG=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,w7(e)};if(V2(e)||Ho.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=r1(oe.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},WG=(e,n)=>{x7(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=s5.isHidden(n.editorContainer)),e.getElement().style.display="none",s5.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,UG(e)},E7=Ls.DOM,ZG=(e,n,o)=>{const r=Xf.get(o),c=Xf.urls[o]||e.editorManager.documentBaseURL.replace(/\/$/,"");if(o=kt.trim(o),r&&kt.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,fe(u.init)&&(u.init(e,c),n.push(o))}catch(u){gh(e,o,u)}}},jG=e=>{const n=o=>{o.keyCode===Yt.ESC&&!o.defaultPrevented&&ux(e).isDefaultPrevented()&&o.preventDefault()};document.addEventListener("keyup",n),e.inline||e.on("keyup",n),e.on("remove",()=>{document.removeEventListener("keyup",n),e.inline||e.off("keyup",n)})},qG=e=>e.replace(/^\-/,""),GG=e=>{const n=[];ne(Gg(e),o=>{ZG(e,n,qG(o))})},KG=e=>{const n=kt.trim(dx(e)),o=e.ui.registry.getAll().icons,r={...gT.get("default").icons,...gT.get(n).icons};To(r,(c,u)=>{no(o,u)||e.ui.registry.addIcon(u,c)})},YG=e=>{const n=Gl(e);if(ae(n)){const o=A0.get(n);e.theme=o(e,A0.urls[n])||{},fe(e.theme.init)&&e.theme.init(e,A0.urls[n]||e.editorManager.documentBaseURL.replace(/\/$/,""))}else e.theme={}},T7=e=>{const n=P2(e),o=_d.get(n);e.model=o(e,_d.urls[n])},r5=e=>{ST.init(e)},A7=e=>{const n=e.theme.renderUI;return n?n():D7(e)},k7=e=>{const n=e.getElement(),r=Gl(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},_7=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),XG=e=>{const n=E7.create("div");return E7.insertAfter(n,e),_7(n,n)},D7=e=>{const n=e.getElement();return e.inline?_7(null):XG(n)},O7=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ae(Gl(e))?A7(e):fe(Gl(e))?k7(e):D7(e)},R7=(e,n)=>{const o={show:F.from(n.show).getOr(rt),hide:F.from(n.hide).getOr(rt),isEnabled:F.from(n.isEnabled).getOr(ot),setEnabled:r=>{r&&(e.mode.get()==="readonly"||ia(e))||F.from(n.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},JG=async e=>{e.dispatch("ScriptsLoaded"),KG(e),jG(e),YG(e),T7(e),r5(e),GG(e);const n=await O7(e);R7(e,F.from(n.api).getOr({})),e.editorContainer=n.editorContainer,Sm(e),e.inline?w7(e):WG(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},q0=Ls.DOM,YA=e=>e.charAt(0)==="-",XA=(e,n)=>{const o=mx(n),r=jk(n);if(!Pu.hasCode(o)&&o!=="en"){const c=Js(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{iu(n,c,o)})}},B7=(e,n)=>{const o=Gl(e);if(ae(o)&&!YA(o)&&!no(A0.urls,o)){const r=bx(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;A0.load(o,c).catch(()=>{Nz(e,c,o)})}},M7=(e,n)=>{const o=P2(e);if(o!=="plugin"&&!no(_d.urls,o)){const r=qk(e),c=ae(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;_d.load(o,c).catch(()=>{sr(e,c,o)})}},F7=(e,n)=>{ST.load(e,n)},QG=e=>F.from(_5(e)).filter(Js).map(n=>({url:n,name:F.none()})),N7=(e,n,o)=>F.from(n).filter(r=>Js(r)&&!gT.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:F.some(r)})),eK=(e,n,o)=>{const r=N7(n,"default",o),c=QG(n).orThunk(()=>N7(n,dx(n),""));ne(Sn([r,c]),u=>{e.add(u.url).catch(()=>{YC(n,u.url,u.name.getOrUndefined())})})},tK=(e,n)=>{const o=(r,c)=>{r!=="licensekeymanager"&&Xf.load(r,c).catch(()=>{cu(e,c,r)})};To(av(e),(r,c)=>{o(c,r),e.options.set("plugins",Gg(e).concat(c))}),ne(Gg(e),r=>{r=kt.trim(r),r&&!Xf.urls[r]&&!YA(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},ng=e=>{const n=Gl(e);return!ae(n)||_e(A0.get(n))},P7=e=>{const n=P2(e);return _e(_d.get(n))},nK=(e,n)=>{const o=va.ScriptLoader,r=()=>{!e.removed&&ng(e)&&P7(e)&&JG(e)};B7(e,n),M7(e,n),F7(e,n),XA(o,e),eK(o,e,n),tK(e,n),o.loadQueue().then(r,r)},$7=(e,n)=>Ru.forElement(e,{contentCssCors:K1(n),referrerPolicy:O2(n)}),oK=e=>{const n=e.id;Pu.setCode(mx(e));const o=()=>{q0.unbind(window,"ready",o),e.render()};if(!Nu.Event.domLoaded){q0.bind(window,"ready",o);return}if(!e.getElement())return;const r=oe.fromDom(e.getElement()),c=Wo(r);e.on("remove",()=>{Q(r.dom.attributes,f=>Qr(r,f.name)),Ya(r,c)}),e.ui.styleSheetLoader=$7(r,e),rv(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||q0.getParent(n,"form");u&&(e.formElement=u,vx(e)&&!zy(e.getElement())&&(q0.insertAfter(q0.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},q0.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Yk(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=bT(e),e.notificationManager=tD(e),Bx(e)&&e.on("GetContent",f=>{f.save&&(f.content=q0.encode(f.content))}),yx(e)&&e.on("submit",()=>{e.initialized&&e.save()}),R5(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),nK(e,e.suffix)},I7=["#E41B60","#AD1457","#1939EC","#001CB5","#648000","#465B00","#006CE7","#0054B4","#00838F","#006064","#00866F","#004D40","#51742F","#385021","#CF4900","#A84600","#CC0000","#6A1B9A","#9C27B0","#6A00AB","#3041BA","#0A1877","#774433","#452B24","#607D8B","#455A64"],a5=e=>{var n;return Intl.Segmenter?`${(n=new Intl.Segmenter().segment(e)[Symbol.iterator]().next().value)===null||n===void 0?void 0:n.segment}`:e.trim()[0]},JA=(e,n)=>{let o=5381;for(let r=0;r<e.length;r++)o=(o<<5)+o+e.charCodeAt(r);return(o>>>0)%(n+1)},sK=e=>{const n=JA(e??"",I7.length-1);return I7[n]},rK=(e,n,o)=>{const r=o/2;return`<svg height="${o}" width="${o}" xmlns="http://www.w3.org/2000/svg"><circle cx="${r}" cy="${r}" r="${r}" fill="${n}"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#FFF" font-family="sans-serif" font-size="${r}">`+e+"</text></svg>"},aK=(e,n,o)=>"data:image/svg+xml,"+encodeURIComponent(rK(e,n,o)),QA=(e,n={size:36})=>aK(a5(e.name),sK(e.id),n.size),cK=kw([RZ("id"),k8("name"),k8("avatar"),BZ("custom")]),L7=e=>{const n={};return To(e,(o,r)=>{o.each(c=>{n[r]=c})}),n},iK=e=>{if(!Array.isArray(e))throw new Error("fetch_users must return an array");const n=de(e,c=>x8("Invalid user object",cK,c)),{errors:o,values:r}=Er(n);if(o.length>0){const c=de(o,(u,f)=>`User at index ${f}: ${xA(u)}`);console.warn(`User validation errors:
`+c.join(`
`))}return de(r,c=>{const{id:u,name:f,avatar:b,...v}=c;return{id:u,name:f.getOr(u),avatar:b.getOr(QA({id:u,name:f.getOr(u)})),...L7(v)}})},lK=e=>{const n=new Map,o=new Map,r=S=>F.from(n.get(S)),c=(S,_)=>{n.set(_,S)},u=(S,_)=>F.from(o.get(S)).each(({reject:R})=>{R(_),o.delete(S)}),f=(S,_)=>F.from(o.get(S)).each(({resolve:R})=>{R(_),o.delete(S)}),b=S=>{const _=fv(e);if(Array.isArray(S)){if(!_)return At(S,M=>Promise.resolve({id:M,name:M,avatar:QA({id:M,name:M})}))}else return{};const R=Xs(ye(S,M=>!r(M).isSome()));return ne(R,M=>{const $=new Promise((J,Y)=>{o.set(M,{resolve:J,reject:Y})});c($,M)}),R.length>0&&_(R).then(iK).then(M=>{const $=new Set(de(M,J=>J.id));ne(M,J=>f(J.id,J)),ne(R,J=>{$.has(J)||u(J,new Error(`User ${J} not found`))})}).catch(M=>{ne(R,$=>u($,M instanceof Error?M:new Error("Network error")))}),Ne(S,(M,$)=>(M[$]=r($).getOr(Promise.resolve({id:$,name:$,avatar:QA({id:$,name:$})})),M),{})},v=a4(e);return Object.freeze({userId:v,fetchUsers:b})},uK=e=>lK(e),dK=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,ia(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),T5(e,n))},mK=e=>e._editableRoot,H7=(e,n)=>({sections:it(e),options:it(n)}),qw=Ro().deviceType,ek=qw.isPhone(),fK=qw.isTablet(),Cy=e=>{if(gn(e))return[];{const n=Ze(e)?e:e.split(/[ ,]/),o=de(n,cr);return ye(o,Js)}},z7=(e,n)=>{const o=Os(n,(r,c)=>j(e,c));return H7(o.t,o.f)},gK=(e,n,o={})=>{const r=e.sections(),c=xs(r,n).getOr({});return kt.extend({},o,c)},tk=(e,n)=>no(e.sections(),n),hK=(e,n)=>tk(e,n)?e.sections()[n]:{},pK=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:xs(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),bK=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?kt.extend({},e.external_plugins,r):r},vK=(e,n)=>[...Cy(e),...Cy(n)],V7=(e,n,o,r)=>e&&tk(n,"mobile")?r:o,U7=(e,n,o,r)=>{const c=Cy(o.forced_plugins),u=Cy(r.plugins),f=hK(n,"mobile"),b=f.plugins?Cy(f.plugins):u,v=V7(e,n,u,b),S=vK(c,v);return kt.extend(r,{forced_plugins:c,plugins:S})},W7=(e,n)=>e&&tk(n,"mobile"),Z7=(e,n,o,r,c)=>{var u;const f=e?{mobile:pK((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=z7(["mobile"],at(f,c)),v=kt.extend(o,r,b.options(),W7(e,b)?gK(b,"mobile"):{},{external_plugins:bK(r,b.options())});return U7(e,b,r,v)},j7=(e,n)=>{const o=Zt(n);return Z7(ek||fK,ek,o,e,o)},q7=(e,n)=>u6(e,n),c5=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{ne("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},G7=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return ce(c,u=>_e(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},K7=e=>{c5(e),G7(e)},Y7=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ho.os.isMacOS()||Ho.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},yK=(e,n,o,r)=>{const c=oe.fromDom(e.getRoot());return CC(c,qe.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),wC(c,qe.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},CK=e=>{if(typeof e!="string"){const n=kt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},X7=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?yK(r,o.getRng(),n,e.schema):n},Gw=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=CK(n);LC(e,{...r,content:X7(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=i6(e,c.content,r);jE(e,u,c),e.addVisual()})}},J7=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Gw(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Gw(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Gw(e,r)},mceInsertContent:(n,o,r)=>{Gw(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(kx(e))}})},Q7={"font-size":"size","font-family":"face"},i5=Jr("font"),l5=(e,n,o)=>{const r=u=>Ur(u,e).orThunk(()=>i5(u)?xs(Q7,e).bind(f=>Ki(u,f)):F.none()),c=u=>Qo(oe.fromDom(n),u);return zc(oe.fromDom(o),u=>r(u),c)},nk=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),eI=(e,n)=>F.from(Ls.DOM.getStyle(n,e,!0)),u5=e=>(n,o)=>F.from(o).map(oe.fromDom).filter(Tr).bind(r=>l5(e,n,r.dom).or(eI(e,r.dom))).getOr(""),tI=u5("font-size"),d5=k(nk,u5("font-family")),nI=e=>Kc(e.getBody()).bind(n=>{const o=n.container();return F.from(St(o)?o.parentNode:o)}),oI=e=>F.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?F.none():F.from(e.selection.getStart(!0))}),wK=(e,n)=>oI(e).orThunk(Ce(nI,e)).map(oe.fromDom).filter(Tr).bind(n),ok=(e,n)=>wK(e,mo(F.some,n)),sI=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=n4(e),c=Xg(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},SK=e=>{const n=e.split(/\s*,\s*/);return de(n,o=>o.indexOf(" ")!==-1&&!(Kn(o,'"')||Kn(o,"'"))?`'${o}'`:o).join(",")},xK=(e,n)=>{const o=sI(e,n);e.formatter.toggle("fontname",{value:SK(o)}),e.nodeChanged()},rI=e=>ok(e,n=>d5(e.getBody(),n.dom)).getOr(""),EK=(e,n)=>{e.formatter.toggle("fontsize",{value:sI(e,n)}),e.nodeChanged()},aI=e=>ok(e,n=>tI(e.getBody(),n.dom)).getOr(""),sk=e=>ok(e,n=>{const o=oe.fromDom(e.getBody()),r=zc(n,u=>Ur(u,"line-height"),Ce(Qo,o)),c=()=>{const u=parseFloat(Pr(n,"line-height")),f=parseFloat(Pr(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),TK=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},cI=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{xK(e,c)},FontSize:(o,r,c)=>{EK(e,c)},LineHeight:(o,r,c)=>{TK(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(ae(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},AK=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>rI(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>aI(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>sk(e))},iI=e=>{cI(e),AK(e)},m5=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},kK=e=>{e.editorCommands.addCommands({Indent:()=>{CW(e)},Outdent:()=>{lP(e)}}),e.editorCommands.addCommands({Outdent:()=>fw(e),Indent:()=>CO(e)},"state")},_K=e=>{const n=(o,r,c)=>{if(e.mode.isReadOnly())return;const u=ae(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");Jt(u)&&ae(u.href)&&(u.href=u.href.replace(/ /g,"%20").replace(/&amp;/g,"&"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},lI=(e,n,o,r)=>{const c=e.dom,u=b=>c.isBlock(b)&&b.parentElement===o,f=u(n)?n:c.getParent(r,u,o);return F.from(f).map(oe.fromDom)},uI=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),c=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=my(o,u);if(!f||!f.isContentEditable)return;const b=n?Ka:qi,v=pc(e);lI(e,c,f,u).each(S=>{const _=mR(e,u,S.dom,f,!1,v);b(S,oe.fromDom(_)),e.selection.setCursorLocation(_,0),e.dispatch("NewBlock",{newBlock:_}),uy(e,"insertParagraph")})},DK=e=>uI(e,!0),OK=e=>uI(e,!1),RK=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{DK(e)},InsertNewBlockAfter:()=>{OK(e)}})},BK=e=>{e.editorCommands.addCommands({insertParagraph:()=>{DA(Y8,e)},mceInsertNewLine:(n,o,r)=>{n$(e,r)},InsertLineBreak:(n,o,r)=>{DA(X8,e)}})},dI=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>bn(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),mi);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},mI=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{II(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},MK=e=>{K7(e),Y7(e),m5(e),dI(e),J7(e),_K(e),kK(e),RK(e),BK(e),iI(e),mI(e)},FK=["toggleview"],fI=e=>j(FK,e.toLowerCase());class gI{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c?.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():I5(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const S=this.commands.exec[f];return fe(S)?(S(f,o,r,c),u.dispatch("ExecCommand",{command:n,ui:o,value:r,args:c}),!0):!1}queryCommandState(n){if(!fI(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return fe(r)?r(o):!1}queryCommandValue(n){if(!fI(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return fe(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;To(n,(c,u)=>{ne(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b,v)=>o.call(r??this.editor,f,b,v)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const t=kt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class s{static isNative(n){return!!t[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Oe}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=x1(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const v=u[f];if(!v.removed){if(v.once&&this.off(r,v.func),c.isImmediatePropagationStopped())return c;if(v.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=Oe),o){const u={func:o,removed:!1};c&&kt.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const v=f[b];let S=this.bindings[v];S||(S=[],this.toggleEvent(v,!0)),r?S=[u,...S]:S=[...S,u],this.bindings[v]=S}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return To(this.bindings,(b,v)=>{this.toggleEvent(v,!1),delete this.bindings[v]}),this;if(f){if(!o)f.length=0;else{const b=ie(f,v=>v.func===o);f=b.fail,this.bindings[u]=f,ne(b.pass,v=>{v.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else To(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const a=e=>(e._eventDispatcher||(e._eventDispatcher=new s({scope:e,toggleEvent:(n,o)=>{s.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),i={fire(e,n,o){return fF("fire"),this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return x1(e.toLowerCase(),n??{},r);const c=a(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return a(this).on(e,n,o)},off(e,n){return a(this).off(e,n)},once(e,n){return a(this).once(e,n)},hasEventListeners(e){return a(this).has(e)}},d=Ls.DOM;let g;const h=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=sv(e);return o?(e.eventRoot||(e.eventRoot=d.select(o)[0]),e.eventRoot):e.getBody()},C=e=>!e.hidden&&!ia(e),w=(e,n,o)=>{C(e)?e.dispatch(n,o):ia(e)&&Wu(e,o)},E=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=h(e,n);if(sv(e)){if(g||(g={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||g&&(To(g,(c,u)=>{e.dom.unbind(h(e,u))}),g=null)})),g[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const v=f[b].getBody();(v===u||d.isChildOf(u,v))&&w(f[b],n,c)}};g[n]=r,d.bind(o,n,r)}else{const r=c=>{w(e,n,c)};d.bind(o,n,r),e.delegates[n]=r}},D={...i,bindPendingEventDelegates(){const e=this;kt.each(e._pendingNativeEvents,n=>{E(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?E(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(h(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(To(e.delegates,(r,c)=>{e.dom.unbind(h(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},B=e=>ae(e)?{value:e.split(/[ ,]/),valid:!0}:Je(e,ae)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},I=e=>{const n=(()=>{switch(e){case"array":return Ze;case"boolean":return Rt;case"function":return fe;case"number":return cs;case"object":return Jt;case"string":return ae;case"string[]":return B;case"object[]":return o=>Je(o,Jt);case"regexp":return o=>_t(o,RegExp);default:return ot}})();return o=>pe(o,n,`The value must be a ${e}.`)},W=e=>ae(e.processor),V=(e,n)=>{const o=Ti(n.message)?"":`. ${n.message}`;return e+o},se=e=>e.valid,pe=(e,n,o="")=>{const r=n(e);return Rt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},re=(e,n,o)=>{if(!Zn(n)){const r=pe(n,o);if(se(r))return r.value;console.error(V(`Invalid default value passed for the "${e}" option`,r))}},we=(e,n,o=n)=>{const r={},c={},u=($,J,Y)=>{const G=pe(J,Y);return se(G)?(c[$]=G.value,!0):(console.warn(V(`Invalid value passed for the ${$} option`,G)),!1)},f=($,J)=>{const Y=W(J)?I(J.processor):J.processor,G=re($,J.default,Y);r[$]={...J,default:G,processor:Y},xs(c,$).orThunk(()=>xs(n,$)).each(Ee=>u($,Ee,Y))},b=$=>no(r,$);return{register:f,isRegistered:b,get:$=>xs(c,$).orThunk(()=>xs(r,$).map(J=>J.default)).getOrUndefined(),set:($,J)=>{if(b($)){const Y=r[$];return Y.immutable?(console.error(`"${$}" is an immutable option and cannot be updated`),!1):u($,J,Y.processor)}else return console.warn(`"${$}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:$=>{const J=b($);return J&&delete c[$],J},isSet:$=>no(c,$),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,($,J)=>Rt(J)||cs(J)||ae(J)||q(J)||Ze(J)||Lo(J)?J:Object.prototype.toString.call(J))))}catch($){console.error($)}}}},Te=(e,n)=>{e.dom.contentEditable="true"},ze=(e,n)=>{const o=oe.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&Te(o),N6(e)):(e.readonly=!1,uD(e))},Ue=e=>e.readonly,Wt=e=>{const n=e.undoManager.add();_e(n)&&(e.undoManager.undo(),e.undoManager.reset())},vt=e=>ce(e,n=>n.type==="characterData"||n.type==="childList"),Ct=e=>{const n=r=>{Ue(e)&&vt(r)&&Wt(e)},o=new MutationObserver(n);e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{Ue(e)&&r.preventDefault()}),e.on("BeforeExecCommand",r=>{(r.command==="Undo"||r.command==="Redo")&&Ue(e)&&r.preventDefault()}),e.on("compositionstart",()=>{Ue(e)&&o.observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0})}),e.on("compositionend",()=>{if(Ue(e)){const r=o.takeRecords();n(r)}o.disconnect()})},gt=["design","readonly"],Rn=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&ze(e,u.editorReadOnly),n.set(r),Fk(e,r)},pn=(e,n,o,r)=>{if(!(r===o.get()||e.initialized&&ia(e))){if(!no(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?Rn(e,o,n,r):e.on("init",()=>Rn(e,o,n,r))}},Go=(e,n,o)=>{if(j(gt,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},Un=e=>{const n=dn("design"),o=dn({design:{activate:rt,deactivate:rt,editorReadOnly:!1},readonly:{activate:rt,deactivate:rt,editorReadOnly:!0}});return Ct(e),jz(e),{isReadOnly:()=>Ue(e),set:r=>pn(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(Go(o.get(),r,c))}}},ho=kt.each,hn=kt.explode,mt={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},$t=kt.makeMap("alt,ctrl,shift,meta,access"),Yn=e=>e in $t,wo=e=>{const n={},o=Ho.os.isMacOS()||Ho.os.isiOS();ho(hn(e.toLowerCase(),"+"),u=>{Yn(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=mt[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in $t)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class Cn{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(ho(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return ho(hn(kt.trim(n)),b=>{const v=u.createShortcut(b,o,f,c);u.shortcuts[v.id]=v}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:kt.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=kt.map(hn(n,">"),wo);return u[u.length-1]=kt.extend(u[u.length-1],{func:r,scope:c||this.editor}),kt.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const vo=()=>{const e=HZ();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},Ss=Ls.DOM,bs=kt.extend,Li=kt.each;class rr{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,bs(this,D);const c=this;this.id=n,this.editorUid=Yo(),this.hidden=!1;const u=j7(r.defaultOptions,o);this.options=we(c,u,o),H1(c),this.userLookup=uK(this);const f=this.options.get;f("deprecation_warnings")&&lH(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const v=f("base_url");v&&r._setBaseUrl(v),this.baseUri=r.baseURI;const S=O2(c);S&&(va.ScriptLoader._setReferrerPolicy(S),Ls.DOM.styleSheetLoader._setReferrerPolicy(S)),va.ScriptLoader._setCrossOrigin($=>U1(c)($,"script")),Ls.DOM.styleSheetLoader._setCrossOrigin($=>U1(c)($,"stylesheet"));const _=K1(c);_e(_)&&Ls.DOM.styleSheetLoader._setContentCssCors(_),kc.languageLoad=f("language_load"),kc.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new wi(z1(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=rv(c),this.hasVisual=Km(c),this.shortcuts=new Cn(this),this.editorCommands=new gI(this),MK(this);const R=f("cache_suffix");R&&(Ho.cacheSuffix=R.replace(/^[\?\&]+/,"")),this.ui={registry:vo(),styleSheetLoader:void 0,show:rt,hide:rt,setEnabled:rt,isEnabled:ot},this.mode=Un(c),Object.defineProperty(this,"editorUid",{writable:!1,configurable:!1,enumerable:!0}),r.dispatch("SetupEditor",{editor:this});const M=Sx(c);fe(M)&&M.call(c,c)}render(){oK(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return f0(this)}translate(n){return Pu.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(_e(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:ot,default:o})),!c.isSet(n)&&!Zn(o)?o:c.get(n)}hasPlugin(n,o){return j(Gg(this),n)?o?Xf.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Ss.show(n.getContainer()),Ss.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Ss.hide(n.getContainer()),Ss.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(!o.removed&&r){const c={...n,load:!0},u=zy(r)?r.value:r.innerHTML;o.setContent(u,c),c.no_events||o.dispatch("LoadContent",{...c,element:r})}}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,zy(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=Ss.getParent(o.id,"form");b&&Li(b.elements,v=>v.name===o.id?(v.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){GC(this,n,o)}getContent(n){return x6(this,n)}insertContent(n,o){o&&(n=bs({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?GC(this,this.startContent,{initial:!0,format:"raw"}):GC(this,n,{initial:!0}),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Ss.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Ss.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r?.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=Ex(c);if(fe(f))return f.call(c,n,r,!0,o);if(!u("convert_urls")||r==="link"||Jt(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const b=new wi(n);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){q7(this,n)}setEditableRoot(n){dK(this,n)}hasEditableRoot(){return mK(this)}remove(){E6(this)}destroy(n){T6(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Dc=Ls.DOM,Ba=kt.each;let cl=!1,xi,Gr=[];const og=e=>{const n=e.type;Ba(sg.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},Fd=e=>{if(e!==cl){const n=Ls.DOM;e?(n.bind(window,"resize",og),n.bind(window,"scroll",og)):(n.unbind(window,"resize",og),n.unbind(window,"scroll",og)),cl=e}},G0=e=>{const n=Gr;return Gr=ye(Gr,o=>e!==o),sg.activeEditor===e&&(sg.activeEditor=Gr.length>0?Gr[0]:null),sg.focusedEditor===e&&(sg.focusedEditor=null),n.length!==Gr.length},xh=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(G0(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},Kw=document.compatMode!=="CSS1Compat",sg={...i,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,pageUid:Yo(),majorVersion:"8",minorVersion:"1.2",releaseDate:"TBD",i18n:Pu,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=wi.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const v=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){v.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new wi(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new wi(e.baseURL),e.suffix=o,FI(e),ne(["majorVersion","minorVersion","releaseDate","pageUid","_addLicenseKeyManager"],u=>Object.defineProperty(e,u,{writable:!1,configurable:!1,enumerable:!0}))},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&To(r,(c,u)=>{kc.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=kt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(_,R)=>_.inline&&R.tagName.toLowerCase()in r,u=_=>{let R=_.id;return R||(R=xs(_,"name").filter(M=>!Dc.get(M)).getOrThunk(Dc.uniqueId),_.setAttribute("id",R)),R},f=_=>{const R=e[_];if(R)return R.apply(n,[])},b=_=>Ho.browser.isIE()||Ho.browser.isEdge()?(Mp("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/8/support/#supportedwebbrowsers"),[]):Kw?(Mp("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ae(_.selector)?Dc.select(_.selector):_e(_.target)?[_.target]:[];let v=_=>{o=_};const S=()=>{let _=0;const R=[];let M;const $=(J,Y,G)=>{const xe=new rr(J,Y,n);R.push(xe),xe.on("init",()=>{++_===M.length&&v(R)}),xe.targetElm=xe.targetElm||G,xe.render()};Dc.unbind(window,"ready",S),f("onpageload"),M=Xs(b(e)),kt.each(M,J=>{xh(n.get(J.id))}),M=kt.grep(M,J=>!n.get(J.id)),M.length===0?v([]):Ba(M,J=>{c(e,J)?Mp("Could not initialize inline editor on invalid inline target element",J):$(u(J),e,J)})};return Dc.bind(window,"ready",S),new Promise(_=>{o?_(o):v=R=>{_(R)}})},get(e){return arguments.length===0?Gr.slice(0):ae(e)?Gt(Gr,n=>n.id===e).getOr(null):cs(e)&&Gr[e]?Gr[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Gr.push(e),Fd(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),xi||(xi=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",xi))),e},createEditor(e,n){return this.add(new rr(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Gr.length-1;r>=0;r--)n.remove(Gr[r]);return}if(ae(e)){Ba(Dc.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,q(n.get(o.id))?null:(G0(o)&&n.dispatch("RemoveEditor",{editor:o}),Gr.length===0&&window.removeEventListener("beforeunload",xi),o.remove(),Fd(Gr.length>0),o)},execCommand(e,n,o){var r;const c=this,u=Jt(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new rr(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{Ba(Gr,e=>{e.save()})},addI18n:(e,n)=>{Pu.add(e,n)},translate:e=>Pu.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new wi(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new wi(this.baseURL)},_addLicenseKeyManager:e=>ST.add(e)};sg.setup();const rk=(()=>{const e=is(),n=u=>({items:u,types:sn(u),getType:f=>xs(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),Xw=Math.min,K0=Math.max,Jw=Math.round,hI=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,v=n.h,S=(o||"").split("");return S[0]==="b"&&(c+=v),S[1]==="r"&&(r+=b),S[0]==="c"&&(c+=Jw(v/2)),S[1]==="c"&&(r+=Jw(b/2)),S[3]==="b"&&(c-=f),S[4]==="r"&&(r-=u),S[3]==="c"&&(c-=Jw(f/2)),S[4]==="c"&&(r-=Jw(u/2)),Y0(r,c,u,f)},f5=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=hI(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},Qw=(e,n,o)=>Y0(e.x-n,e.y-o,e.w+n*2,e.h+o*2),wy=(e,n)=>{const o=K0(e.x,n.x),r=K0(e.y,n.y),c=Xw(e.x+e.w,n.x+n.w),u=Xw(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:Y0(o,r,c-o,u-r)},Sy=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,v=n.y+n.h,S=K0(0,n.x-r),_=K0(0,n.y-c),R=K0(0,u-b),M=K0(0,f-v);return r+=S,c+=_,o&&(u+=S,f+=_,r-=R,c-=M),u-=R,f-=M,Y0(r,c,u-r,f-c)},Y0=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),pI={inflate:Qw,relativePosition:hI,findBestRelativePosition:f5,intersect:wy,clamp:Sy,create:Y0,fromClientRect:e=>Y0(e.left,e.top,e.width,e.height)},g5=(e,n,o=1e3)=>{let r=!1,c=null;const u=S=>(..._)=>{r||(r=!0,c!==null&&(window.clearTimeout(c),c=null),S.apply(null,_))},f=u(e),b=u(n);return{start:(...S)=>{!r&&c===null&&(c=window.setTimeout(()=>b.apply(null,S),o))},resolve:f,reject:b}},ak=(()=>{const e={},n={},o={};return{load:(v,S)=>{const _=`Script at URL "${S}" failed to load`,R=`Script at URL "${S}" did not call \`tinymce.Resource.add('${v}', data)\` within 1 second`;if(e[v]!==void 0)return e[v];{const M=new Promise(($,J)=>{const Y=g5($,J);n[v]=Y.resolve,va.ScriptLoader.loadScript(S).then(()=>Y.start(R),()=>Y.reject(_))});return e[v]=M,M}},add:(v,S)=>{n[v]!==void 0&&(n[v](S),delete n[v]),e[v]=Promise.resolve(S),o[v]=S},has:v=>v in o,get:v=>o[v],unload:v=>{delete e[v],delete o[v]}}})(),ck=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let Nd;try{const e="__storage_test__";Nd=window.localStorage,Nd.setItem(e,e),Nd.removeItem(e)}catch{Nd=ck()}var xy=Nd;const h5={geom:{Rect:pI},util:{Delay:Td,Tools:kt,VK:Yt,URI:wi,EventDispatcher:s,Observable:i,I18n:Pu,LocalStorage:xy,ImageUploader:Jz},dom:{EventUtils:Nu,TreeWalker:Qs,TextSeeker:gd,DOMUtils:Ls,ScriptLoader:va,RangeUtils:tf,Serializer:fT,StyleSheetLoader:Ri,ControlSelection:Z5,BookmarkManager:gm,Selection:uT,Event:Nu.Event},html:{Styles:Fg,Entities:Ag,Node:$i,Schema:Fu,DomParser:dh,Writer:nL,Serializer:Cp},Env:Ho,AddOnManager:kc,Annotator:rE,Formatter:jv,UndoManager:QC,EditorCommands:gI,WindowManager:bT,NotificationManager:tD,EditorObservable:D,Shortcuts:Cn,Editor:rr,FocusManager:iE,EditorManager:sg,DOM:Ls.DOM,ScriptLoader:va.ScriptLoader,PluginManager:Xf,ThemeManager:A0,ModelManager:_d,IconManager:gT,Resource:ak,FakeClipboard:rk,trim:kt.trim,isArray:kt.isArray,is:kt.is,toArray:kt.toArray,makeMap:kt.makeMap,each:kt.each,map:kt.map,grep:kt.grep,inArray:kt.inArray,extend:kt.extend,walk:kt.walk,resolve:kt.resolve,explode:kt.explode,_addCacheSuffix:kt._addCacheSuffix},ik=kt.extend(sg,h5),$K=e=>{try{qt.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(ik),$K(ik)})()})(zK)),zK.exports}wQ();var lX={},uX={},dX;function SQ(){return dX||(dX=1,tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',"checkmark-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.8 5a1 1 0 0 0-1.4.3l-5.4 8-2-2.1a1 1 0 1 0-1.5 1.4l3 3a1 1 0 0 0 1.5-.2l6-9a1 1 0 0 0-.2-1.4Z"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',"close-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.7 5.3a1 1 0 0 0-1.3 0L12 10.6 8.6 7.3a1 1 0 0 0-1.3 1.3l3.3 3.4-3.3 3.4a1 1 0 0 0 1.3 1.3l3.4-3.3 3.4 3.3a1 1 0 0 0 1.3-1.3L13.4 12l3.3-3.4a1 1 0 0 0 0-1.3Z"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-gear-properties":'<svg height="24" width="24"><path d="M17.3 14.5a7.1 7.1 0 0 1 1.2.6l1.5-.5 1 1.8-1.2 1V18.7l1.2 1-1 1.6-1.5-.4a4.5 4.5 0 0 1-.6.3 7.1 7.1 0 0 1-.6.3L17 23h-2l-.3-1.5a7.4 7.4 0 0 1-.6-.3 4.5 4.5 0 0 1-.6-.3l-1.5.5-1-1.8 1.2-1a3.9 3.9 0 0 1 0-.6v-.7l-1.2-1 1-1.6 1.5.4a4.5 4.5 0 0 1 1.2-.6L15 13h2zM16 16a2 2 0 0 0-1.5.6A1.9 1.9 0 0 0 14 18c0 .6.2 1 .6 1.4s1 .6 1.5.6 1-.2 1.5-.6.6-.8.6-1.4-.2-1-.6-1.4A2 2 0 0 0 16 16z" fill-rule="evenodd"/><path d="M19 7.6V12h-2V9h-4V5H7v14h3v2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h7.4z"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',feedback:'<svg width="24" height="24"><path fill-rule="evenodd" d="M16 6c1 0 2 1 2 2v5c0 1-1 2-2 2h-3l-4 3v-3H8c-1 0-2-1-2-2V8c0-1 1-2 2-2h8Zm-7 5v1h4v-1H9Zm0-2v1h6V9H9Z"/></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',"suggestededits-badge":'<svg height="24" width="24"><path d="M11 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9.7a6 6 0 0 1-2 .3v9H7V5h4a6 6 0 0 1 0-2z"/><path d="M15 13v-2h-4v2zm-3 2H9v2h3zm-1-8H9v2h2zm4 10v-2h-2v2z"/><path d="M21 4a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" class="tox-icon--badge"/></svg>',suggestededits:'<svg width="24" height="24"><path d="M7 3h7.4L19 7.6V19a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2Zm0 16h10V9h-3V5H7v14Z" clip-rule="evenodd"/><path d="M9 7h2v2H9V7Zm2 4h4v2h-4v-2Zm-2 4h3v2H9v-2Z"/><path d="M9 7h2v2H9V7Zm4 8h2v2h-2v-2Z"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}})),uX}var mX;function xQ(){return mX||(mX=1,SQ()),lX}xQ();var fX={},gX={},hX;function EQ(){return hX||(hX=1,(function(){const qt=Object.getPrototypeOf,Mn=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},Fn=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&Mn(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},Xn=t=>s=>Fn(s)===t,$n=t=>s=>typeof s===t,Pn=t=>s=>t===s,so=(t,s)=>Lt(t)&&Mn(t,s,(a,i)=>qt(a)===i),ct=Xn("string"),Lt=Xn("object"),st=t=>so(t,Object),qo=Xn("array"),rn=Pn(null),Tt=$n("boolean"),mn=Pn(void 0),fo=t=>t==null,In=t=>!fo(t),nt=$n("function"),Oo=$n("number"),_t=(t,s)=>{if(qo(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},ae=()=>{},Jt=t=>()=>t(),Lo=(t,s)=>(...a)=>t(s.apply(null,a)),Ze=(t,s)=>a=>t(s(a)),q=t=>()=>t,Rt=t=>t,Zn=(t,s)=>t===s;function gn(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const _e=t=>s=>!t(s),fe=t=>()=>{throw new Error(t)},cs=t=>t(),Je=q(!1),rt=q(!0);class k{constructor(s,a){this.tag=s,this.value=a}static some(s){return new k(!0,s)}static none(){return k.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?k.some(s(this.value)):k.none()}bind(s){return this.tag?s(this.value):k.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:k.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return In(s)?k.some(s):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const mo=Array.prototype.slice,it=Array.prototype.indexOf,Mo=Array.prototype.push,ln=(t,s)=>it.call(t,s),Ce=(t,s)=>{const a=ln(t,s);return a===-1?k.none():k.some(a)},dt=(t,s)=>ln(t,s)>-1,wn=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return!0}return!1},Ve=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},Ht=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const d=mo.call(t,i,i+s);a.push(d)}return a},Oe=(t,s)=>{const a=t.length,i=new Array(a);for(let d=0;d<a;d++){const g=t[d];i[d]=s(g,d)}return i},ot=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];s(d,a)}},F=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},No=(t,s)=>{const a=[],i=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?a:i).push(h)}return{pass:a,fail:i}},jn=(t,s)=>{const a=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&a.push(g)}return a},qn=(t,s,a)=>(F(t,(i,d)=>{a=s(a,i,d)}),a),yo=(t,s,a)=>(ot(t,(i,d)=>{a=s(a,i,d)}),a),ht=(t,s,a)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return k.some(g);if(a(g,i))break}return k.none()},j=(t,s)=>ht(t,s,Je),ce=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return k.some(a)}return k.none()},de=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!qo(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Mo.apply(s,t[a])}return s},ne=(t,s)=>de(Oe(t,s)),Q=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},ie=t=>{const s=mo.call(t,0);return s.reverse(),s},ye=(t,s)=>jn(t,a=>!dt(s,a)),wt=(t,s)=>{const a={};for(let i=0,d=t.length;i<d;i++){const g=t[i];a[String(g)]=s(g,i)}return a},Ae=t=>[t],Ne=(t,s)=>{const a=mo.call(t,0);return a.sort(s),a},un=(t,s)=>s>=0&&s<t.length?k.some(t[s]):k.none(),Gt=t=>un(t,0),go=t=>un(t,t.length-1),ko=nt(Array.from)?Array.from:t=>mo.call(t),_o=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return k.none()},_n=Object.keys,ns=Object.hasOwnProperty,Ln=(t,s)=>{const a=_n(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=t[g];s(h,g)}},Ke=(t,s)=>At(t,(a,i)=>({k:i,v:s(a,i)})),At=(t,s)=>{const a={};return Ln(t,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},fn=t=>(s,a)=>{t[a]=s},an=(t,s,a,i)=>{Ln(t,(d,g)=>{(s(d,g)?a:i)(d,g)})},to=(t,s)=>{const a={},i={};return an(t,s,fn(a),fn(i)),{t:a,f:i}},es=(t,s)=>{const a={};return an(t,s,fn(a),ae),a},Eo=(t,s)=>{const a=[];return Ln(t,(i,d)=>{a.push(s(i,d))}),a},Ds=(t,s)=>{const a=_n(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=t[g];if(s(h,g,t))return k.some(h)}return k.none()},Xs=t=>Eo(t,Rt),sn=(t,s)=>Do(t,s)?k.from(t[s]):k.none(),Do=(t,s)=>ns.call(t,s),To=(t,s)=>Do(t,s)&&t[s]!==void 0&&t[s]!==null,da={generate:t=>{if(!qo(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return ot(t,(i,d)=>{const g=_n(i);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],C=i[h];if(a[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!qo(C))throw new Error("case arguments must be an array");s.push(h),a[h]=(...w)=>{const E=w.length;if(E!==C.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+C.length+" ("+C+"), got "+E);return{fold:(...B)=>{if(B.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+B.length);return B[d].apply(null,w)},match:B=>{const I=_n(B);if(s.length!==I.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+I.join(","));if(!Q(s,V=>dt(I,V)))throw new Error("Not all branches were specified when using match. Specified: "+I.join(", ")+`
Required: `+s.join(", "));return B[h].apply(null,w)},log:B=>{console.log(B,{constructors:s,constructor:h,params:w})}}}}),a}},tn=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Bc=t=>{let s=k.none(),a=[];const i=E=>Bc(D=>{d(B=>{D(E(B))})}),d=E=>{h()?w(E):a.push(E)},g=E=>{h()||(s=k.some(E),C(a),a=[])},h=()=>s.isSome(),C=E=>{ot(E,w)},w=E=>{s.each(D=>{setTimeout(()=>{E(D)},0)})};return t(g),{get:d,map:i,isReady:h}},Mc={nu:Bc,pure:t=>Bc(s=>{s(t)})},Ma=t=>{setTimeout(()=>{throw t},0)},zr=t=>{const s=w=>{t().then(w,Ma)};return{map:w=>zr(()=>t().then(w)),bind:w=>zr(()=>t().then(E=>w(E).toPromise())),anonBind:w=>zr(()=>t().then(()=>w.toPromise())),toLazy:()=>Mc.nu(s),toCached:()=>{let w=null;return zr(()=>(w===null&&(w=t()),w))},toPromise:t,get:s}},rs={nu:t=>zr(()=>new Promise(t)),pure:t=>zr(()=>Promise.resolve(t))},Za=t=>{const s=g=>g(t),a=q(t),i=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:rt,isError:Je,map:g=>dn.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(t)},toOptional:()=>k.some(t)};return d},Fc=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:Je,isError:rt,map:s,mapError:i=>dn.error(i(t)),bind:s,exists:Je,forall:rt,getOr:Rt,or:Rt,getOrThunk:cs,orThunk:cs,getOrDie:fe(String(t)),each:ae,toOptional:k.none};return a},dn={value:Za,error:Fc,fromOption:(t,s)=>t.fold(()=>Fc(s),Za)},Fr=t=>({...t,toCached:()=>Fr(t.toCached()),bindFuture:w=>Fr(t.bind(E=>E.fold(D=>rs.pure(dn.error(D)),D=>w(D)))),bindResult:w=>Fr(t.map(E=>E.bind(w))),mapResult:w=>Fr(t.map(E=>E.map(w))),mapError:w=>Fr(t.map(E=>E.mapError(w))),foldResult:(w,E)=>t.map(D=>D.fold(w,E)),withTimeout:(w,E)=>Fr(rs.nu(D=>{let B=!1;const I=setTimeout(()=>{B=!0,D(dn.error(E()))},w);t.get(W=>{B||(clearTimeout(I),D(W))})}))}),yr=t=>Fr(rs.nu(t)),Ei=t=>Fr(rs.pure(dn.value(t))),Dn={nu:yr,wrap:Fr,pure:Ei,value:Ei,error:t=>Fr(rs.pure(dn.error(t))),fromResult:t=>Fr(rs.pure(t)),fromFuture:t=>Fr(t.map(dn.value)),fromPromise:t=>yr(s=>{t.then(a=>{s(dn.value(a))},a=>{s(dn.error(a))})})},Gn=typeof window<"u"?window:Function("return this;")(),Ao=(t,s,a,i)=>{const d=t+s;return d>i?a:d<a?i:d},Ko=(t,s,a)=>Math.min(Math.max(t,s),a),Yo=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Fo=0;const Z=t=>{const a=new Date().getTime(),i=Math.floor(Yo()*1e9);return Fo++,t+"_"+i+Fo+String(a)},ve=(t,s)=>s,at=(t,s)=>st(t)&&st(s)?yt(t,s):s,Zt=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)Do(d,g)&&(a[g]=t(a[g],d[g]))}return a},yt=Zt(at),On=Zt(ve),Sn=(t,s,a=Zn)=>t.exists(i=>a(i,s)),Xt=(t,s,a=Zn)=>os(t,s,a).getOr(t.isNone()&&s.isNone()),Co=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},Uo=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return k.none()}return k.some(s)},os=(t,s,a)=>t.isSome()&&s.isSome()?k.some(a(t.getOrDie(),s.getOrDie())):k.none(),Cs=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?k.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):k.none(),xa=(t,s)=>t!=null?k.some(s(t)):k.none(),Er=(t,s)=>t?k.some(s):k.none(),Ol=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Gs=(t,s)=>{let a=s??Gn;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},is=(t,s)=>{const a=t.split(".");return Gs(a,s)};da.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Rs=t=>{const s=[],a=[];return ot(t,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},ma=t=>{const s=tn(k.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(k.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{a(),s.set(k.some(C))}}},Hi=()=>ma(t=>t.destroy()),er=()=>ma(t=>t.unbind()),Kn=()=>{const t=ma(ae);return{...t,on:a=>t.get().each(a)}},fa=(t,s)=>t+s,Ea=(t,s)=>t.substring(s),cr=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,Yu=(t,s)=>Ti(t,s)?Ea(t,s.length):t,hu=(t,s)=>si(t,s)?t:fa(t,s),Js=(t,s,a=0,i)=>{const d=t.indexOf(s,a);return d!==-1?mn(i)?!0:d+s.length<=i:!1},Ti=(t,s)=>cr(t,s,0),si=(t,s)=>cr(t,s,t.length-s.length),Ut=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Nc=t=>t.length>0,Fa=t=>!Nc(t),qa=t=>{const s=parseFloat(t);return isNaN(s)?k.none():k.some(s)},ir=(t,s)=>{let a=null,i=null;return{cancel:()=>{rn(a)||(clearTimeout(a),a=null,i=null)},throttle:(...h)=>{i=h,rn(a)&&(a=setTimeout(()=>{const C=i;a=null,i=null,t.apply(null,C)},s))}}},pu=(t,s)=>{let a=null;return{cancel:()=>{rn(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{rn(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},Ga=(t,s)=>{let a=null;const i=()=>{rn(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},yc=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},Rl="\uFEFF",Ju=" ",zi=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Vi(i.childNodes[0])},bu=(t,s)=>{const i=(s||document).createElement(t);return Vi(i)},Bl=(t,s)=>{const i=(s||document).createTextNode(t);return Vi(i)},Vi=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Nt={fromHtml:zi,fromTag:bu,fromText:Bl,fromDom:Vi,fromPoint:(t,s,a)=>k.from(t.dom.elementFromPoint(s,a)).map(Vi)},ll=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},Qu=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},H=(t,s,a)=>{const i=t.document.createRange();return ll(i,s),Qu(i,a),i},le=(t,s,a,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},ke=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Xe=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?k.some(a).map(ke):k.none()},Mt=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?k.some(s).map(ke):k.none()},cn=da.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Po=(t,s,a)=>s(Nt.fromDom(a.startContainer),a.startOffset,Nt.fromDom(a.endContainer),a.endOffset),So=(t,s)=>s.match({domRange:a=>({ltr:q(a),rtl:k.none}),relative:(a,i)=>({ltr:yc(()=>H(t,a,i)),rtl:yc(()=>k.some(H(t,i,a)))}),exact:(a,i,d,g)=>({ltr:yc(()=>le(t,a,i,d,g)),rtl:yc(()=>k.some(le(t,d,g,a,i)))})}),fs=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>cn.rtl(Nt.fromDom(d.endContainer),d.endOffset,Nt.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>Po(t,cn.ltr,a)):Po(t,cn.ltr,a)},N=(t,s)=>{const a=So(t,s);return fs(t,a)},U=(t,s)=>N(t,s).match({ltr:(i,d,g,h)=>{const C=t.document.createRange();return C.setStart(i.dom,d),C.setEnd(g.dom,h),C},rtl:(i,d,g,h)=>{const C=t.document.createRange();return C.setStart(g.dom,h),C.setEnd(i.dom,d),C}});cn.ltr,cn.rtl;const me=9,He=11,nn=1,Xo=3,Bs=(t,s)=>{const a=t.dom;if(a.nodeType!==nn)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Or=t=>t.nodeType!==nn&&t.nodeType!==me&&t.nodeType!==He||t.childElementCount===0,Na=(t,s)=>{const a=s===void 0?document:s.dom;return Or(a)?[]:Oe(a.querySelectorAll(t),Nt.fromDom)},Cc=(t,s)=>{const a=s===void 0?document:s.dom;return Or(a)?k.none():k.from(a.querySelector(t)).map(Nt.fromDom)},Jo=(t,s)=>t.dom===s.dom,ul=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},_m=(t,s,a,i)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),C=h||i("(pointer:coarse)"),w=d||!g&&h&&i("(min-device-width:768px)"),E=g||h&&!w,D=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,B=!E&&!w&&!D;return{isiPad:q(d),isiPhone:q(g),isTablet:q(w),isPhone:q(E),isTouch:q(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:q(D),isDesktop:q(B)}},Ui=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},ig=(t,s)=>{const a=Ui(t,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return ed(i(1),i(2))},Dm=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?wc():ig(t,a)},wc=()=>ed(0,0),ed=(t,s)=>({major:t,minor:s}),td={nu:ed,detect:Dm,unknown:wc},Ah=(t,s)=>_o(s.brands,a=>{const i=a.brand.toLowerCase();return j(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:td.nu(parseInt(a.version,10),0)}))}),lg=(t,s)=>{const a=String(s).toLowerCase();return j(t,i=>i.search(a))},ug=(t,s)=>lg(t,s).map(a=>{const i=td.detect(a.versionRegexes,s);return{current:a.name,version:i}}),kh=(t,s)=>lg(t,s).map(a=>{const i=td.detect(a.versionRegexes,s);return{current:a.name,version:i}}),ff=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Wi=t=>s=>Js(s,t),_h=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Js(t,"edge/")&&Js(t,"chrome")&&Js(t,"safari")&&Js(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ff],search:t=>Js(t,"chrome")&&!Js(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Js(t,"msie")||Js(t,"trident")},{name:"Opera",versionRegexes:[ff,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Wi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Wi("firefox")},{name:"Safari",versionRegexes:[ff,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Js(t,"safari")||Js(t,"mobile/"))&&Js(t,"applewebkit")}],Dh=[{name:"Windows",search:Wi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Js(t,"iphone")||Js(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Wi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Wi("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Wi("linux"),versionRegexes:[]},{name:"Solaris",search:Wi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Wi("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Wi("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],K={browsers:q(_h),oses:q(Dh)},ue="Edge",Fe="Chromium",ut="IE",Hn="Opera",Ro="Firefox",Rr="Safari",Sc=()=>ga({current:void 0,version:td.unknown()}),ga=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(ue),isChromium:i(Fe),isIE:i(ut),isOpera:i(Hn),isFirefox:i(Ro),isSafari:i(Rr)}},xc={unknown:Sc,nu:ga},vu="Windows",Ec="iOS",yu="Android",Tc="Linux",Pc="macOS",Fl="Solaris",$c="FreeBSD",Ho="ChromeOS",gf=()=>Oh({current:void 0,version:td.unknown()}),Oh=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(vu),isiOS:i(Ec),isAndroid:i(yu),isMacOS:i(Pc),isLinux:i(Tc),isSolaris:i(Fl),isFreeBSD:i($c),isChromeOS:i(Ho)}},Ir={unknown:gf,nu:Oh},Kp={detect:(t,s,a)=>{const i=K.browsers(),d=K.oses(),g=s.bind(w=>Ah(i,w)).orThunk(()=>ug(i,t)).fold(xc.unknown,xc.nu),h=kh(d,t).fold(Ir.unknown,Ir.nu),C=_m(h,g,t,a);return{browser:g,os:h,deviceType:C}}},oS=t=>window.matchMedia(t).matches;let Q0=yc(()=>Kp.detect(window.navigator.userAgent,k.from(window.navigator.userAgentData),oS));const Nr=()=>Q0(),Om=(t,s)=>is(t,s),_y=(t,s)=>{const a=Om(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},kt=Object.getPrototypeOf,Ai=t=>_y("HTMLElement",t),dg=t=>{const s=is("ownerDocument.defaultView",t);return Lt(t)&&(Ai(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(kt(t).constructor.name))},dl=t=>t.dom.nodeName.toLowerCase(),hf=t=>t.dom.nodeType,Yp=t=>s=>hf(s)===t,oe=t=>ri(t)&&dg(t.dom),ri=Yp(nn),$d=Yp(Xo),Xp=Yp(me),pf=Yp(He),cc=t=>s=>ri(s)&&dl(s)===t,ai=t=>Nt.fromDom(t.dom.ownerDocument),Jp=t=>Xp(t)?t:ai(t),Qp=t=>Nt.fromDom(Jp(t).dom.documentElement),mg=t=>Nt.fromDom(Jp(t).dom.defaultView),ci=t=>k.from(t.dom.parentNode).map(Nt.fromDom),e1=t=>ci(t),Cu=t=>k.from(t.dom.parentElement).map(Nt.fromDom),fg=(t,s)=>{const a=nt(s)?s:Je;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,h=Nt.fromDom(g);if(d.push(h),a(h)===!0)break;i=g}return d},t1=t=>k.from(t.dom.offsetParent).map(Nt.fromDom),ki=t=>k.from(t.dom.previousSibling).map(Nt.fromDom),n1=t=>k.from(t.dom.nextSibling).map(Nt.fromDom),Nl=t=>Oe(t.dom.childNodes,Nt.fromDom),Id=(t,s)=>{const a=t.dom.childNodes;return k.from(a[s]).map(Nt.fromDom)},Qo=t=>Id(t,0),Ic=(t,s)=>({element:t,offset:s}),bf=(t,s)=>{const a=Nl(t);return a.length>0&&s<a.length?Ic(a[s],0):Ic(t,s)},eb=(t,s,a,i)=>{const g=ai(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,i),g},Bo=(t,s,a,i)=>{const d=eb(t,s,a,i),g=Jo(t,a)&&s===i;return d.collapsed&&!g},nd=t=>pf(t)&&In(t.dom.host),Xr=t=>Nt.fromDom(t.dom.getRootNode()),Pl=t=>nd(t)?t:Nt.fromDom(Jp(t).dom.body),$l=t=>Tr(t).isSome(),Tr=t=>{const s=Xr(t);return nd(s)?k.some(s):k.none()},Es=t=>Nt.fromDom(t.dom.host),Dy=t=>{if(In(t.target)){const s=Nt.fromDom(t.target);if(ri(s)&&Oy(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Gt(a)}}return k.from(t.target)},Oy=t=>In(t.dom.shadowRoot),Jr=(t,s,a,i,d,g,h)=>({target:t,x:s,y:a,stop:i,prevent:d,kill:g,raw:h}),ml=t=>{const s=Nt.fromDom(Dy(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Lo(i,a);return Jr(s,t.clientX,t.clientY,a,i,d,t)},fl=(t,s)=>a=>{t(a)&&s(ml(a))},oa=(t,s,a,i,d)=>{const g=fl(a,i);return t.dom.addEventListener(s,g,d),{unbind:gn(_i,t,s,g,d)}},Il=(t,s,a,i)=>oa(t,s,a,i,!1),Lc=(t,s,a,i)=>oa(t,s,a,i,!0),_i=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},ic=rt,_s=(t,s,a)=>Il(t,s,ic,a),Zi=(t,s,a)=>Lc(t,s,ic,a),Hc=ml,Pa=()=>Nt.fromDom(document),Ta=(t,s=!1)=>t.dom.focus({preventScroll:s}),wr=t=>t.dom.blur(),gl=t=>{const s=Xr(t).dom;return t.dom===s.activeElement},Aa=(t=Pa())=>k.from(t.dom.activeElement).map(Nt.fromDom),Vr=t=>Aa(Xr(t)).filter(s=>t.dom.contains(s.dom)),Ld=(t,s)=>{ci(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},tb=(t,s)=>{n1(t).fold(()=>{ci(t).each(d=>{ka(d,s)})},i=>{Ld(i,s)})},Rh=(t,s)=>{Qo(t).fold(()=>{ka(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},ka=(t,s)=>{t.dom.appendChild(s.dom)},o1=(t,s,a)=>{Id(t,a).fold(()=>{ka(t,s)},i=>{Ld(i,s)})},nb=(t,s)=>{ot(s,a=>{ka(t,a)})},Rm=(t,s,a)=>{if(ct(a)||Tt(a)||Oo(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},zn=(t,s,a)=>{Rm(t.dom,s,a)},s1=(t,s)=>{const a=t.dom;Ln(s,(i,d)=>{Rm(a,d,i)})},ha=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},$a=(t,s)=>k.from(ha(t,s)),Ia=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},tr=(t,s)=>{t.dom.removeAttribute(s)},Hd=t=>yo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Bh=t=>{t.dom.textContent="",ot(Nl(t),s=>{ji(s)})},ji=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Ll=(t,s)=>Nt.fromDom(t.dom.cloneNode(s)),r1=t=>Ll(t,!1),a1=t=>Ll(t,!0),gg=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,Nl(Nt.fromDom(i))},wu=t=>t.dom.innerHTML,hl=(t,s)=>{const i=ai(t).dom,d=Nt.fromDom(i.createDocumentFragment()),g=gg(s,i);nb(d,g),Bh(t),ka(t,d)},c1=t=>{const s=Nt.fromTag("div"),a=Nt.fromDom(t.dom.cloneNode(!0));return ka(s,a),wu(s)},Ka=t=>{if(nd(t))return"#shadow-root";{const s=r1(t);return c1(s)}},qi=t=>new Promise((s,a)=>{const i=()=>{g(),s(t)},d=[_s(t,"load",i),_s(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>ot(d,h=>h.unbind());t.dom.complete&&i()}),Su=t=>t.style!==void 0&&nt(t.style.getPropertyValue),gs=t=>{const s=$d(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Tr(Nt.fromDom(s)).fold(()=>a.body.contains(s),Ze(gs,Es))},Di=()=>ob(Nt.fromDom(document)),ob=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return Nt.fromDom(s)},hg=(t,s,a)=>{if(!ct(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Su(t)&&t.style.setProperty(s,a)},Gi=(t,s)=>{Su(t)&&t.style.removeProperty(s)},Jn=(t,s,a)=>{const i=t.dom;hg(i,s,a)},Cr=(t,s)=>{const a=t.dom;Ln(s,(i,d)=>{hg(a,d,i)})},Ya=(t,s)=>{const a=t.dom;Ln(s,(i,d)=>{i.fold(()=>{Gi(a,d)},g=>{hg(a,d,g)})})},nr=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!gs(t)?Ki(a,s):d},Ki=(t,s)=>Su(t)?t.style.getPropertyValue(s):"",lr=(t,s)=>{const a=t.dom,i=Ki(a,s);return k.from(i).filter(d=>d.length>0)},Qr=t=>{const s={},a=t.dom;if(Su(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},vf=(t,s,a)=>{const i=Nt.fromTag(t);return Jn(i,s,a),lr(i,s).isSome()},Wo=(t,s)=>{const a=t.dom;Gi(a,s),Sn($a(t,"style").map(Ut),"")&&tr(t,"style")},pl=t=>t.dom.offsetWidth,Ws=(t,s)=>{const a=(C,w)=>{if(!Oo(w)&&!w.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+w);const E=C.dom;Su(E)&&(E.style[t]=w+"px")},i=C=>{const w=s(C);if(w<=0||w===null){const E=nr(C,t);return parseFloat(E)||0}return w},d=i,g=(C,w)=>yo(w,(E,D)=>{const B=nr(C,D),I=B===void 0?0:parseInt(B,10);return isNaN(I)?E:E+I},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(C,w,E)=>{const D=g(C,E);return w>D?w-D:0}}},ii=Ws("height",t=>{const s=t.dom;return gs(t)?s.getBoundingClientRect().height:s.offsetHeight}),ea=t=>ii.get(t),ta=t=>ii.getOuter(t),xu=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=ii.max(t,s,a);Jn(t,"max-height",i+"px")},yf=t=>t.offsetWidth<=0&&t.offsetHeight<=0,od=t=>!yf(t.dom),zd=Ws("width",t=>{const s=t.dom;return gs(t)?s.getBoundingClientRect().width:s.offsetWidth}),Vd=(t,s)=>zd.set(t,s),Xa=t=>zd.get(t),sd=t=>zd.getOuter(t),Ry=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=zd.max(t,s,a);Jn(t,"max-width",i+"px")},Ud=(t,s)=>({left:t,top:s,translate:(i,d)=>Ud(t+i,s+d)}),Ms=Ud,i1=t=>{const s=t.getBoundingClientRect();return Ms(s.left,s.top)},Cf=(t,s)=>t!==void 0?t:s!==void 0?s:0,lc=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===t.dom)return Ms(a.offsetLeft,a.offsetTop);const g=Cf(i?.pageYOffset,d.scrollTop),h=Cf(i?.pageXOffset,d.scrollLeft),C=Cf(d.clientTop,a.clientTop),w=Cf(d.clientLeft,a.clientLeft);return li(t).translate(h-w,g-C)},li=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?Ms(i.offsetLeft,i.offsetTop):gs(t)?i1(s):Ms(0,0)},Pr=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return Ms(a,i)},rd=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},wf=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?k.from(g.dom.nodeValue):k.none();return{get:a,getOption:i,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})($d,"text"),Mh=t=>wf.get(t),l1=(t,s)=>a=>sS(a)==="rtl"?s:t,sS=t=>nr(t,"direction")==="rtl"?"rtl":"ltr",Hl=(t,s)=>{const a=ha(t,s);return a===void 0||a===""?[]:a.split(" ")},By=(t,s,a)=>{const d=Hl(t,s).concat([a]);return zn(t,s,d.join(" ")),!0},u1=(t,s,a)=>{const i=jn(Hl(t,s),d=>d!==a);return i.length>0?zn(t,s,i.join(" ")):tr(t,s),!1};var zl=(t,s,a,i,d)=>t(a,i)?k.some(a):nt(d)&&d(a)?k.none():s(a,i,d);const sb=(t,s,a)=>{let i=t.dom;const d=nt(a)?a:Je;for(;i.parentNode;){i=i.parentNode;const g=Nt.fromDom(i);if(s(g))return k.some(g);if(d(g))break}return k.none()},Sf=(t,s,a)=>zl((d,g)=>g(d),sb,t,s,a),pg=(t,s)=>{const a=t.dom;return a.parentNode?bg(Nt.fromDom(a.parentNode),i=>!Jo(t,i)&&s(i)):k.none()},bg=(t,s)=>{const a=d=>s(Nt.fromDom(d));return j(t.dom.childNodes,a).map(Nt.fromDom)},d1=(t,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=Nt.fromDom(i.childNodes[d]);if(s(g))return k.some(g);const h=a(i.childNodes[d]);if(h.isSome())return h}return k.none()};return a(t.dom)},rb=t=>Cc(t),bl=(t,s,a)=>sb(t,i=>Bs(i,s),a),My=(t,s)=>pg(t,a=>Bs(a,s)),Wd=(t,s)=>bg(t,a=>Bs(a,s)),Fs=(t,s)=>Cc(s,t),uc=(t,s,a)=>zl((d,g)=>Bs(d,g),bl,t,s,a),Eu=(t,s)=>{t.dom.checked=s},m1=t=>t.dom.checked,Zd=t=>t.dom.classList!==void 0,f1=t=>Hl(t,"class"),ab=(t,s)=>By(t,"class",s),Tu=(t,s)=>u1(t,"class",s),Au=(t,s)=>dt(f1(t),s)?Tu(t,s):ab(t,s),Hs=(t,s)=>{Zd(t)?t.dom.classList.add(s):ab(t,s)},cb=t=>{(Zd(t)?t.dom.classList:f1(t)).length===0&&tr(t,"class")},Sr=(t,s)=>{Zd(t)?t.dom.classList.remove(s):Tu(t,s),cb(t)},xf=(t,s)=>{const a=Zd(t)?t.dom.classList.toggle(s):Au(t,s);return cb(t),a},Wr=(t,s)=>Zd(t)&&t.dom.classList.contains(s),ku=(t,s)=>{ot(s,a=>{Hs(t,a)})},dc=(t,s)=>{ot(s,a=>{Sr(t,a)})},ad=(t,s)=>{ot(s,a=>{xf(t,a)})},Fh=(t,s)=>Q(s,a=>Wr(t,a)),g1=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},h1=t=>Zd(t)?g1(t):f1(t),Fy=t=>t.dom.textContent,ui=t=>t.dom.value,Vl=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},Zr=(t,s,a)=>jn(fg(t,a),s),_a=(t,s)=>Na(s,t),Nh=(t,s,a)=>Sf(t,s,a).isSome(),vg=(t,s,a)=>uc(t,s,a).isSome(),Ph=t=>nt(t)?t:Je,ib=(t,s,a)=>{let i=t.dom;const d=Ph(a);for(;i.parentNode;){i=i.parentNode;const g=Nt.fromDom(i),h=s(g);if(h.isSome())return h;if(d(g))break}return k.none()},vl=(t,s,a)=>{const i=s(t),d=Ph(a);return i.orThunk(()=>d(t)?k.none():ib(t,s,d))},x={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},A=da.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),L=(t,s,a,i)=>t.fold(s,a,i),X=t=>t.fold(Rt,Rt,Rt),Se=A.before,Ge=A.on,zt=A.after,vn={before:Se,on:Ge,after:zt,cata:L,getStart:X},po=da.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),$o=t=>po.exact(t.start,t.soffset,t.finish,t.foffset),Ks=t=>t.match({domRange:s=>Nt.fromDom(s.startContainer),relative:(s,a)=>vn.getStart(s),exact:(s,a,i,d)=>s}),ur=po.domRange,na=po.relative,zc=po.exact,cd=t=>{const s=Ks(t);return mg(s)},id=x.create,yl={domRange:ur,relative:na,exact:zc,exactFromRange:$o,getWin:cd,range:id},p1=t=>k.from(t.getSelection()),Ef=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return k.some(x.create(Nt.fromDom(s.startContainer),s.startOffset,Nt.fromDom(a.endContainer),a.endOffset))}else return k.none()},$h=t=>{if(t.anchorNode===null||t.focusNode===null)return Ef(t);{const s=Nt.fromDom(t.anchorNode),a=Nt.fromDom(t.focusNode);return Bo(s,t.anchorOffset,a,t.focusOffset)?k.some(x.create(s,t.anchorOffset,a,t.focusOffset)):Ef(t)}},Bm=t=>p1(t).filter(s=>s.rangeCount>0).bind($h),Tf=(t,s)=>{const a=U(t,s);return Xe(a)},Ih=(t,s)=>{const a=U(t,s);return Mt(a)},Lh={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Ny=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",d=C=>`(?:${C})?`,h=`[+-]?(?:${["Infinity",t+i+d(t)+d(a),i+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),Py=(t,s)=>wn(s,a=>wn(Lh[a],i=>t===i)),ms=(t,s)=>k.from(Ny.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return Py(g,s)?k.some({value:d,unit:g}):k.none()}),Zs=(t,s)=>ms(t,s).map(({value:a,unit:i})=>a+i),pa=t=>{const s=t===void 0?window:t;return Nr().browser.isFirefox()?k.none():k.from(s.visualViewport)},di=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),Hh=t=>{const s=t===void 0?window:t,a=s.document,i=Pr(Nt.fromDom(a));return pa(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return di(i.left,i.top,g,h)},d=>di(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},yg=(t,s)=>t.view(s).fold(q([]),i=>{const d=t.owner(i),g=yg(t,d);return[i].concat(g)}),zh=(t,s)=>{const a=s.owner(t),i=yg(s,a);return k.some(i)};var Mm=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?k.none():k.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(Nt.fromDom)},owner:t=>ai(t)});const jd=t=>{const s=Pa(),a=Pr(s);return zh(t,Mm).fold(gn(lc,t),d=>{const g=li(t),h=qn(d,(C,w)=>{const E=li(w);return{left:C.left+E.left,top:C.top+E.top}},{left:0,top:0});return Ms(h.left+g.left+a.left,h.top+g.top+a.top)})},$y=(t,s,a)=>({point:t,width:s,height:a}),hk=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),ba=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),sa=t=>{const s=lc(t),a=sd(t),i=ta(t);return ba(s.left,s.top,a,i)},ld=t=>{const s=jd(t),a=sd(t),i=ta(t);return ba(s.left,s.top,a,i)},Uh=(t,s)=>{const a=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-a,C=g-i;return ba(a,i,h,C)},lb=(t,s)=>yo(s,(a,i)=>Uh(a,i),t),Vc=()=>Hh(window),Iy=(t,s)=>Jo(t.element,s.event.target),Af=t=>(Sn(lr(t,"position"),"fixed")?k.none():t1(t)).orThunk(()=>{const i=Nt.fromTag("span");return ci(t).bind(d=>{ka(d,i);const g=t1(i);return ji(i),g})}),ub=t=>Af(t).map(lc).getOrThunk(()=>Ms(0,0)),Yi=(t,s)=>{const a=k.from(ha(t,"id")).getOrThunk(()=>{const i=Z("aria");return zn(s,"id",i),i});zn(t,"aria-describedby",a)},db=t=>{tr(t,"aria-describedby")};var Qs;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Qs||(Qs={}));const Wh=(t,s,a)=>t.stype===Qs.Error?s(t.serror):a(t.svalue),Fm=t=>{const s=[],a=[];return ot(t,i=>{Wh(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},pk=(t,s)=>t.stype===Qs.Error?{stype:Qs.Error,serror:s(t.serror)}:t,cS=(t,s)=>t.stype===Qs.Value?{stype:Qs.Value,svalue:s(t.svalue)}:t,mb=(t,s)=>t.stype===Qs.Value?s(t.svalue):t,bk=(t,s)=>t.stype===Qs.Error?s(t.serror):t,Ly=t=>({stype:Qs.Value,svalue:t}),Nm=t=>({stype:Qs.Error,serror:t}),dr={fromResult:t=>t.fold(Nm,Ly),toResult:t=>Wh(t,dn.error,dn.value),svalue:Ly,partition:Fm,serror:Nm,bind:mb,bindError:bk,map:cS,mapError:pk,fold:Wh},Zh=t=>Lt(t)&&_n(t).length>100?" removed due to size":JSON.stringify(t,null,2),Cg=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:q("... (only showing first ten failures)")}]):t;return Oe(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Ja=(t,s)=>dr.serror([{path:t,getErrorInfo:s}]),jh=(t,s,a)=>Ja(t,()=>'Could not find valid *required* value for "'+s+'" in '+Zh(a)),vk=(t,s)=>Ja(t,()=>'Choice schema did not contain choice key: "'+s+'"'),wg=(t,s,a)=>Ja(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Zh(s)),iS=(t,s)=>Ja(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),qd=(t,s)=>Ja(t,q(s)),kf=t=>{const s=(i,d)=>dr.bindError(t(d),g=>qd(i,g)),a=q("val");return{extract:s,toString:a}},zy=kf(dr.svalue),St=q(zy),Vy=(t,s)=>kf(a=>{const i=typeof a;return t(a)?dr.svalue(a):dr.serror(`Expected type: ${s} but got: ${i}`)}),Uy=Vy(Oo,"number"),$r=Vy(ct,"string"),Vo=Vy(Tt,"boolean"),Sg=Vy(nt,"function"),xr=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>xr(t[s]));default:return!1}},Wy=kf(t=>xr(t)?dr.svalue(t):dr.serror("Expected value to be acceptable for sending via postMessage")),_u=()=>({tag:"required",process:{}}),mi=t=>({tag:"defaultedThunk",process:t}),mr=t=>mi(q(t)),fb=()=>({tag:"option",process:{}}),Gd=t=>({tag:"mergeWithThunk",process:t}),Zy=t=>Gd(q(t)),gb=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),Du=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),jy=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},hb=(t,s)=>dr.svalue(yt(s,On.apply(void 0,t))),qy=t=>Lo(dr.serror,de)(t),Gy={consolidateObj:(t,s)=>{const a=dr.partition(t);return a.errors.length>0?qy(a.errors):hb(a.values,s)},consolidateArr:t=>{const s=dr.partition(t);return s.errors.length>0?qy(s.errors):dr.svalue(s.values)}},uS=(t,s,a,i)=>sn(s,a).fold(()=>jh(t,a,s),i),pb=(t,s,a,i)=>{const d=sn(t,s).getOrThunk(()=>a(t));return i(d)},Ck=(t,s,a)=>a(sn(t,s)),wk=(t,s,a,i)=>{const d=sn(t,s).map(g=>g===!0?a(t):g);return i(d)},Ky=(t,s,a,i,d)=>{const g=C=>d.extract(s.concat([i]),C),h=C=>C.fold(()=>dr.svalue(k.none()),w=>{const E=d.extract(s.concat([i]),w);return dr.map(E,k.some)});switch(t.tag){case"required":return uS(s,a,i,g);case"defaultedThunk":return pb(a,i,t.process,g);case"option":return Ck(a,i,h);case"defaultedOptionThunk":return wk(a,i,t.process,h);case"mergeWithThunk":return pb(a,i,q({}),C=>{const w=yt(t.process(a),C);return g(w)})}},Yy=(t,s,a)=>{const i={},d=[];for(const g of a)jy(g,(h,C,w,E)=>{const D=Ky(w,t,s,h,E);dr.fold(D,B=>{d.push(...B)},B=>{i[C]=B})},(h,C)=>{i[h]=C(s)});return d.length>0?dr.serror(d):dr.svalue(i)},Ul=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),fi=t=>_n(es(t,In)),Cl=t=>{const s=Qn(t),a=qn(t,(d,g)=>jy(g,h=>yt(d,{[h]:!0}),q(d)),{});return{extract:(d,g)=>{const h=Tt(g)?[]:fi(g),C=jn(h,w=>!To(a,w));return C.length===0?s.extract(d,g):iS(d,C)},toString:s.toString}},Qn=t=>({extract:(i,d)=>Yy(i,d,t),toString:()=>`obj{
`+Oe(t,d=>jy(d,(g,h,C,w)=>g+" -> "+w.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),gi=t=>({extract:(i,d)=>{const g=Oe(d,(h,C)=>t.extract(i.concat(["["+C+"]"]),h));return Gy.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),xg=(t,s)=>{const a=s!==void 0?s:Rt;return{extract:(g,h)=>{const C=[];for(const w of t){const E=w.extract(g,h);if(E.stype===Qs.Value)return{stype:Qs.Value,svalue:a(E.svalue)};C.push(E)}return Gy.consolidateArr(C)},toString:()=>"oneOf("+Oe(t,g=>g.toString()).join(", ")+")"}},dS=(t,s)=>{const a=(g,h)=>gi(kf(t)).extract(g,h);return{extract:(g,h)=>{const C=_n(h),w=a(g,C);return dr.bind(w,E=>{const D=Oe(E,B=>gb(B,B,_u(),s));return Qn(D).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},Sk=(t,s)=>{const a=yc(s);return{extract:(g,h)=>a().extract(g,h),toString:()=>a().toString()}},bb=Lo(gi,Qn),b1=(t,s,a,i)=>sn(a,i).fold(()=>wg(t,a,i),g=>g.extract(t.concat(["branch: "+i]),s)),Eg=(t,s)=>({extract:(d,g)=>sn(g,t).fold(()=>vk(d,t),C=>b1(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+_n(s)}),vb=()=>gi(zy),_f=t=>kf(s=>t(s).fold(dr.serror,dr.svalue)),Xy=(t,s)=>dS(a=>dr.fromResult(t(a)),s),mS=(t,s,a)=>{const i=s.extract([t],a);return dr.mapError(i,d=>({input:a,errors:d}))},Br=(t,s,a)=>dr.toResult(mS(t,s,a)),Ou=t=>t.fold(s=>{throw new Error(Df(s))},Rt),Oi=(t,s,a)=>Ou(Br(t,s,a)),Df=t=>`Errors: 
`+Cg(t.errors).join(`
`)+`

Input object: `+Zh(t.input),hi=(t,s)=>Eg(t,Ke(s,Qn)),Tg=(t,s)=>Sk(t,s),La=gb,Ac=Du,qh=t=>_f(s=>dt(t,s)?dn.value(s):dn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),ft=t=>La(t,t,_u(),St()),wl=(t,s)=>La(t,t,_u(),s),v1=t=>wl(t,Uy),Da=t=>wl(t,$r),Wl=(t,s)=>La(t,t,_u(),qh(s)),Zl=t=>wl(t,Sg),fS=(t,s)=>La(t,t,fb(),kf(a=>dr.serror("The field: "+t+" is forbidden. "+s))),Pm=(t,s)=>La(t,t,_u(),Qn(s)),gS=(t,s)=>La(t,t,_u(),bb(s)),Ri=(t,s)=>La(t,t,_u(),gi(s)),zs=t=>La(t,t,fb(),St()),Ru=(t,s)=>La(t,t,fb(),s),y1=t=>Ru(t,Uy),Lr=t=>Ru(t,$r),hS=(t,s)=>Ru(t,qh(s)),yb=t=>Ru(t,Vo),ud=t=>Ru(t,Sg),Jy=(t,s)=>Ru(t,gi(s)),Xi=(t,s)=>Ru(t,Qn(s)),Qy=(t,s)=>Ru(t,Cl(s)),$e=(t,s)=>La(t,t,mr(s),St()),pi=(t,s,a)=>La(t,t,mr(s),a),Gh=(t,s)=>pi(t,s,Uy),Mr=(t,s)=>pi(t,s,$r),Sl=(t,s,a)=>pi(t,s,qh(a)),mc=(t,s)=>pi(t,s,Vo),Is=(t,s)=>pi(t,s,Sg),pS=(t,s)=>pi(t,s,Wy),Of=(t,s,a)=>pi(t,s,gi(a)),e2=(t,s,a)=>pi(t,s,Qn(a)),Rf=(t,s)=>{const a={};return Ln(t,(i,d)=>{dt(s,d)||(a[d]=i)}),a},Kh=(t,s)=>({[t]:s}),bS=t=>{const s={};return ot(t,a=>{s[a.key]=a.value}),s},vS=(t,s)=>Rf(t,s),$m=(t,s)=>Kh(t,s),C1=t=>bS(t),w5=(t,s)=>t.length===0?dn.value(s):dn.value(yt(s,On.apply(void 0,t))),Ag=t=>dn.error(de(t)),fc=(t,s)=>{const a=Rs(t);return a.errors.length>0?Ag(a.errors):w5(a.values,s)},Qa=q,Im=Qa("touchstart"),Lm=Qa("touchmove"),kg=Qa("touchend"),Yh=Qa("touchcancel"),bi=Qa("mousedown"),Bf=Qa("mousemove"),Oa=Qa("mouseout"),Cb=Qa("mouseup"),Bu=Qa("mouseover"),Mu=Qa("focusin"),wb=Qa("focusout"),Ha=Qa("keydown"),Xh=Qa("keyup"),Hm=Qa("input"),_g=Qa("change"),Kd=Qa("click"),w1=Qa("transitioncancel"),xl=Qa("transitionend"),Dg=Qa("transitionstart"),yS=Qa("selectstart"),jr=t=>q("alloy."+t),CS={tap:jr("tap")},Yd=jr("focus"),Fu=jr("blur.post"),t2=jr("paste.post"),Og=jr("receive"),Ji=jr("execute"),Rg=jr("focus.item"),Bg=CS.tap,n2=jr("longpress"),Sb=jr("sandbox.close"),xb=jr("typeahead.cancel"),Eb=jr("system.init"),o2=jr("system.touchmove"),wS=jr("system.touchend"),Mg=jr("system.scroll"),Fg=jr("system.resize"),dd=jr("system.attached"),zm=jr("system.detached"),Ng=jr("system.dismissRequested"),SS=jr("system.repositionRequested"),S1=jr("focusmanager.shifted"),x1=jr("slotcontainer.visibility"),xS=jr("system.external.element.scroll"),ES=jr("change.tab"),Tb=jr("dismiss.tab"),Pg=jr("highlight"),Ab=jr("dehighlight"),jl=t=>Ka(t),TS="unknown";var Nu;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Nu||(Nu={}));const E1=tn({}),AS=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,h)=>{a.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{a.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{a.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{a.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();dt(["mousemove","mouseover","mouseout",Eb()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:Oe(a,g=>dt(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+jl(g.target)+")":g.outcome)})}}},kS=(t,s,a)=>{switch(sn(E1.get(),t).orThunk(()=>{const d=_n(E1.get());return _o(d,g=>t.indexOf(g)>-1?k.some(E1.get()[g]):k.none())}).getOr(Nu.NORMAL)){case Nu.NORMAL:return a(xk());case Nu.LOGGING:{const d=AS(t,s),g=a(d);return d.write(),g}case Nu.STOP:return!0}},Qi=["alloy/data/Fields","alloy/debugging/Debugging"],T1=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return j(s,a=>a.indexOf("alloy")>0&&!wn(Qi,i=>a.indexOf(i)>-1)).getOr(TS)}else return TS},_S={logEventCut:ae,logEventStopped:ae,logNoParent:ae,logEventNoHandlers:ae,logEventResponse:ae,write:ae},Mf=(t,s,a)=>kS(t,s,a),xk=q(_S),Ek=q([ft("menu"),ft("selectedMenu")]),s2=q([ft("item"),ft("selectedItem")]);q(Qn(s2().concat(Ek())));const Tk=q(Qn(s2())),Ls=Pm("initSize",[ft("numColumns"),ft("numRows")]),DS=()=>wl("markers",Tk()),OS=()=>Pm("markers",[ft("backgroundMenu")].concat(Ek()).concat(s2())),ql=t=>Pm("markers",Oe(t,ft)),$g=(t,s,a)=>(T1(),La(s,s,a,_f(i=>dn.value((...d)=>i.apply(void 0,d))))),ls=t=>$g("onHandler",t,mr(ae)),va=t=>$g("onKeyboardHandler",t,mr(k.none)),A1=t=>$g("onHandler",t,_u()),kb=t=>$g("onKeyboardHandler",t,_u()),fr=(t,s)=>Ac(t,q(s)),Jh=t=>Ac(t,Rt),_b=q(Ls),RS=(t,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),h=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:BS(h.slice(0,1).concat(h.slice(3)))}),t},BS=t=>Oe(t,s=>si(s,"/*")?s.substring(0,s.length-2):s),MS=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:BS(g)}),t},S5=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:BS(g.slice(1))}),t},Ak=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},kk=5,FS=400,NS=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?k.none():k.some(s.touches[0])},Pu=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>kk||i>kk},kc=t=>{const s=Kn(),a=tn(!1),i=Ak(E=>{t.triggerEvent(n2(),E),a.set(!0)},FS),d=E=>(NS(E).each(D=>{i.cancel();const B={x:D.clientX,y:D.clientY,target:E.target};i.schedule(E),a.set(!1),s.set(B)}),k.none()),g=E=>(i.cancel(),NS(E).each(D=>{s.on(B=>{Pu(D,B)&&s.clear()})}),k.none()),h=E=>{i.cancel();const D=B=>Jo(B.target,E.target);return s.get().filter(D).map(B=>a.get()?(E.prevent(),!1):t.triggerEvent(Bg(),E))},C=C1([{key:Im(),value:d},{key:Lm(),value:g},{key:kg(),value:h}]);return{fireIfReady:(E,D)=>sn(C,D).bind(B=>B(E))}};var $u;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})($u||($u={}));const md="placeholder",fd=da.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Ff=t=>Do(t,"uiType"),Xd=(t,s,a,i)=>t.exists(d=>d!==a.owner)?fd.single(!0,q(a)):sn(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+_n(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),Vm=(t,s,a,i)=>Ff(a)&&a.uiType===md?Xd(t,s,a,i):fd.single(!1,q(a)),r2=(t,s,a,i)=>Vm(t,s,a,i).fold((g,h)=>{const C=Ff(a)?h(s,a.config,a.validated):h(s),w=sn(C,"components").getOr([]),E=ne(w,D=>r2(t,s,D,i));return[{...C,components:E}]},(g,h)=>{if(Ff(a)){const C=h(s,a.config,a.validated);return a.validated.preprocess.getOr(Rt)(C)}else return h(s)}),a2=(t,s,a,i)=>ne(a,d=>r2(t,s,d,i)),x5=(t,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((h,C)=>h,(h,C)=>h);return{name:q(t),required:g,used:i,replace:d}},_k=(t,s,a,i)=>{const d=Ke(i,(h,C)=>x5(C,h)),g=a2(t,s,a,d);return Ln(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},Db=fd.single,Ob=fd.multiple,PS=q(md),Rb=da.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Nf=$e("factory",{sketch:Rt}),k1=$e("schema",[]),gd=ft("name"),Bb=La("pname","pname",mi(t=>"<alloy."+Z(t.name)+">"),St()),Dk=Ac("schema",()=>[zs("preprocess")]),Mb=$e("defaults",q({})),Fb=$e("overrides",q({})),$S=Qn([Nf,k1,gd,Bb,Mb,Fb]),Ok=Qn([Nf,k1,gd,Mb,Fb]),Qh=Qn([Nf,k1,gd,Bb,Mb,Fb]),IS=Qn([Nf,Dk,gd,ft("unit"),Bb,Mb,Fb]),Jd=t=>t.fold(k.some,k.none,k.some,k.some),ep=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},Nb=t=>t.fold(Rt,Rt,Rt,Rt),Qd=(t,s)=>a=>{const i=Oi("Converting part type",s,a);return t(i)},vi=Qd(Rb.required,$S),el=Qd(Rb.external,Ok),tl=Qd(Rb.optional,Qh),Pb=Qd(Rb.group,IS),c2=q("entirety");var tp=Object.freeze({__proto__:null,required:vi,external:el,optional:tl,group:Pb,asNamedPart:Jd,name:ep,asCommon:Nb,original:c2});const em=(t,s,a,i)=>yt(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),Rk=(t,s,a)=>{const i={},d={};return ot(a,g=>{g.fold(h=>{i[h.pname]=Db(!0,(C,w,E)=>h.factory.sketch(em(C,h,w,E)))},h=>{const C=s.parts[h.name];d[h.name]=q(h.factory.sketch(em(s,h,C[c2()]),C))},h=>{i[h.pname]=Db(!1,(C,w,E)=>h.factory.sketch(em(C,h,w,E)))},h=>{i[h.pname]=Ob(!0,(C,w,E)=>{const D=C[h.name];return Oe(D,B=>h.factory.sketch(yt(h.defaults(C,B,E),B,h.overrides(C,B))))})})}),{internals:q(i),externals:q(d)}},ya=(t,s)=>{const a={};return ot(s,i=>{Jd(i).each(d=>{const g=$b(t,d.pname);a[d.name]=h=>{const C=Oi("Part: "+d.name+" in "+t,Qn(d.schema),h);return{...g,config:h,validated:C}}})}),a},$b=(t,s)=>({uiType:PS(),owner:t,name:s}),Bi=(t,s,a)=>({uiType:PS(),owner:t,name:s,config:a,validated:{}}),LS=t=>ne(t,s=>s.fold(k.none,k.some,k.none,k.none).map(a=>Pm(a.name,a.schema.concat([Jh(c2())]))).toArray()),HS=t=>Oe(t,ep),Pf=(t,s,a)=>Rk(t,s,a),Um=(t,s,a)=>_k(k.some(t),s,s.components,a),Ts=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},Uc=(t,s,a)=>Ts(t,s,a).getOrDie("Could not find part: "+a),_1=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return ot(a,h=>{i[h]=q(g.getByUid(d[h]))}),i},Ib=(t,s)=>{const a=t.getSystem();return Ke(s.partUids,(i,d)=>q(a.getByUid(i)))},Lb=t=>_n(t.partUids),D1=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return ot(a,h=>{i[h]=q(g.getByUid(d[h]).getOrDie())}),i},zS=(t,s)=>{const a=HS(s);return C1(Oe(a,i=>({key:i,value:t+"-"+i})))},tm=t=>La("partUids","partUids",Gd(s=>zS(s.uid,t)),St());var $f=Object.freeze({__proto__:null,generate:ya,generateOne:Bi,schemas:LS,names:HS,substitutes:Pf,components:Um,defaultUids:zS,defaultUidsSchema:tm,getAllParts:Ib,getAllPartNames:Lb,getPart:Ts,getPartOrDie:Uc,getParts:_1,getPartsOrDie:D1});const i2=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],El=(t,s,a,i=1)=>{const d=t*i,g=s*i,h=w=>sn(a,w).getOr([]),C=(w,E,D)=>{const B=ye(i2,D);return{offset:Ms(w,E),classesOn:ne(D,h),classesOff:ne(B,h)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},np=()=>El(0,0,{}),ra=(t,s,a,i,d,g,h,C=!1)=>({x:t,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:C}),Mi=da.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Hb=(t,s,a,i,d,g,h,C,w)=>t.fold(s,a,i,d,g,h,C,w),VS=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),l2=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),If=Mi.southeast,Ig=Mi.southwest,u2=Mi.northeast,d2=Mi.northwest,O1=Mi.south,m2=Mi.north,Lf=Mi.east,Wm=Mi.west,US=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},gc=(t,s)=>wt(["left","right","top","bottom"],a=>sn(s,a).map(i=>US(t,i))),WS=(t,s,a)=>{const i=(w,E)=>s[w].map(D=>{const B=w==="top"||w==="bottom",I=B?a.top:a.left,V=(w==="left"||w==="top"?Math.max:Math.min)(D,E)+I;return B?Ko(V,t.y,t.bottom):Ko(V,t.x,t.right)}).getOr(E),d=i("left",t.x),g=i("top",t.y),h=i("right",t.right),C=i("bottom",t.bottom);return ba(d,g,h-d,C-g)},Hf="layout",ZS=t=>t.x,zb=(t,s)=>t.x+t.width/2-s.width/2,f2=(t,s)=>t.x+t.width-s.width,R1=(t,s)=>t.y-s.height,g2=t=>t.y+t.height,jS=(t,s)=>t.y+t.height/2-s.height/2,qS=t=>t.x+t.width,B1=(t,s)=>t.x-s.width,Ca=(t,s,a)=>ra(ZS(t),g2(t),a.southeast(),If(),"southeast",gc(t,{left:1,top:3}),Hf),gr=(t,s,a)=>ra(f2(t,s),g2(t),a.southwest(),Ig(),"southwest",gc(t,{right:0,top:3}),Hf),hc=(t,s,a)=>ra(ZS(t),R1(t,s),a.northeast(),u2(),"northeast",gc(t,{left:1,bottom:2}),Hf),Ra=(t,s,a)=>ra(f2(t,s),R1(t,s),a.northwest(),d2(),"northwest",gc(t,{right:0,bottom:2}),Hf),za=(t,s,a)=>ra(zb(t,s),R1(t,s),a.north(),m2(),"north",gc(t,{bottom:2}),Hf),aa=(t,s,a)=>ra(zb(t,s),g2(t),a.south(),O1(),"south",gc(t,{top:3}),Hf),Vb=(t,s,a)=>ra(qS(t),jS(t,s),a.east(),Lf(),"east",gc(t,{left:0}),Hf),Ub=(t,s,a)=>ra(B1(t,s),jS(t,s),a.west(),Wm(),"west",gc(t,{right:1}),Hf),Wb=()=>[Ca,gr,hc,Ra,aa,za,Vb,Ub],GS=()=>[gr,Ca,Ra,hc,aa,za,Vb,Ub],Zb=()=>[hc,Ra,Ca,gr,za,aa],KS=()=>[Ra,hc,gr,Ca,za,aa],Lg=()=>[Ca,gr,hc,Ra,aa,za],h2=()=>[gr,Ca,Ra,hc,aa,za],Hg="data-alloy-placement",jb=(t,s)=>{zn(t,Hg,s)},p2=t=>$a(t,Hg),qb=t=>tr(t,Hg),hd="layout-inset",M1=t=>t.x,b2=(t,s)=>t.x+t.width/2-s.width/2,op=(t,s)=>t.x+t.width-s.width,F1=t=>t.y,Gb=(t,s)=>t.y+t.height-s.height,v2=(t,s)=>t.y+t.height/2-s.height/2,Iu=(t,s,a)=>ra(op(t,s),Gb(t,s),a.insetSouthwest(),d2(),"southwest",gc(t,{right:0,bottom:3}),hd),nm=(t,s,a)=>ra(M1(t),Gb(t,s),a.insetSoutheast(),u2(),"southeast",gc(t,{left:1,bottom:3}),hd),sp=(t,s,a)=>ra(op(t,s),F1(t),a.insetNorthwest(),Ig(),"northwest",gc(t,{right:0,top:2}),hd),qe=(t,s,a)=>ra(M1(t),F1(t),a.insetNortheast(),If(),"northeast",gc(t,{left:1,top:2}),hd),Fi=(t,s,a)=>ra(b2(t,s),F1(t),a.insetNorth(),O1(),"north",gc(t,{top:2}),hd),rp=(t,s,a)=>ra(b2(t,s),Gb(t,s),a.insetSouth(),m2(),"south",gc(t,{bottom:3}),hd),N1=(t,s,a)=>ra(op(t,s),v2(t,s),a.insetEast(),Wm(),"east",gc(t,{right:0}),hd),Kb=(t,s,a)=>ra(M1(t),v2(t,s),a.insetWest(),Lf(),"west",gc(t,{left:1}),hd),pd=t=>{switch(t){case"north":return Fi;case"northeast":return qe;case"northwest":return sp;case"south":return rp;case"southeast":return nm;case"southwest":return Iu;case"east":return N1;case"west":return Kb}},Wc=(t,s,a,i,d)=>p2(i).map(pd).getOr(Fi)(t,s,a,i,d),P1=t=>{switch(t){case"north":return rp;case"northeast":return nm;case"northwest":return Iu;case"south":return Fi;case"southeast":return qe;case"southwest":return sp;case"east":return Kb;case"west":return N1}},YS=(t,s,a,i,d)=>p2(i).map(P1).getOr(Fi)(t,s,a,i,d),Yb=(t,s)=>{xu(t,Math.floor(s))},XS=q((t,s)=>{Yb(t,s),Cr(t,{"overflow-x":"hidden","overflow-y":"auto"})}),zg=q((t,s)=>{Yb(t,s)}),y2=q((t,s)=>{Ry(t,Math.floor(s))});var om;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(om||(om={}));const C2="data-alloy-vertical-dir",JS=t=>Nh(t,s=>ri(s)&&ha(s,"data-alloy-vertical-dir")===om.BottomToTop);var Zc;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Zc||(Zc={}));const bd={init:()=>nl({readState:q("No State required")})},nl=t=>t,Xb={can:rt,abort:Je,run:ae},ap=t=>{if(!To(t,"can")&&!To(t,"abort")&&!To(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Xb,...t}},QS=(t,s)=>(...a)=>yo(t,(i,d)=>i&&s(d).apply(void 0,a),!0),Bk=(t,s)=>(...a)=>yo(t,(i,d)=>i||s(d).apply(void 0,a),!1),w2=t=>nt(t)?{can:rt,abort:Je,run:t}:t,ex=t=>{const s=QS(t,d=>d.can),a=Bk(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{ot(t,g=>{g.run.apply(void 0,d)})}}},zo=(t,s)=>{S2(t,t.element,s,{})},Bn=(t,s,a)=>{S2(t,t.element,s,a)},$1=t=>{zo(t,Ji())},Jb=(t,s,a)=>{S2(t,s,a,{})},S2=(t,s,a,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(a,s,d)},Mk=(t,s,a,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(a,s,d)},x2=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},hr=t=>C1(t),Qb=(t,s)=>({key:t,value:ap({abort:s})}),I1=(t,s)=>({key:t,value:ap({can:s})}),Vg=t=>({key:t,value:ap({run:(s,a)=>{a.event.prevent()}})}),Ye=(t,s)=>({key:t,value:ap({run:s})}),ev=(t,s,a)=>({key:t,value:ap({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),tx=t=>s=>Ye(t,s),tv=t=>s=>({key:t,value:ap({run:(a,i)=>{Iy(a,i)&&s(a,i)}})}),nx=(t,s)=>Ye(t,(a,i)=>{a.getSystem().getByUid(s).each(d=>{x2(d,d.element,t,i)})}),Zm=(t,s,a)=>{const i=s.partUids[a];return nx(t,i)},Ug=(t,s)=>Ye(t,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>vl(d.target,C=>a.getSystem().getByDom(C).toOptional(),Je).getOr(a));s(a,g,i)}),Wg=t=>Ye(t,(s,a)=>{a.cut()}),E2=t=>Ye(t,(s,a)=>{a.stop()}),Zg=(t,s)=>tv(t)(s),or=tv(dd()),vd=tv(zm()),ox=tv(Eb()),jm=tx(Ji()),Lu=t=>({classes:mn(t.classes)?[]:t.classes,attributes:mn(t.attributes)?{}:t.attributes,styles:mn(t.styles)?{}:t.styles}),Fk=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),Nk=(t,s,a)=>jm(i=>{a(i,t,s)}),T2=(t,s,a)=>ox((i,d)=>{a(i,t,s)}),Pk=(t,s,a,i,d,g)=>{const h=Cl(t),C=Xi(s,[Qy("config",t)]);return A2(h,C,s,a,i,d,g)},$k=(t,s,a,i,d,g)=>{const h=t,C=Xi(s,[Ru("config",t)]);return A2(h,C,s,a,i,d,g)},Ik=(t,s,a)=>RS((d,...g)=>{const h=[d].concat(g);return d.config({name:q(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},C=>{const w=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,C.config,C.state].concat(w))})},a,s),Lk=t=>({key:t,value:void 0}),A2=(t,s,a,i,d,g,h)=>{const C=B=>To(B,a)?B[a]():k.none(),w=Ke(d,(B,I)=>Ik(a,B,I)),D={...Ke(g,(B,I)=>MS(B,I)),...w,revoke:gn(Lk,a),config:B=>{const I=Oi(a+"-config",t,B);return{key:a,value:{config:I,me:D,configAsRaw:yc(()=>Oi(a+"-config",t,B)),initialConfig:B,state:h}}},schema:q(s),exhibit:(B,I)=>os(C(B),sn(i,"exhibit"),(W,V)=>V(I,W.config,W.state)).getOrThunk(()=>Lu({})),name:q(a),handlers:B=>C(B).map(I=>sn(i,"events").getOr(()=>({}))(I.config,I.state)).getOr({})};return D},Dt=t=>C1(t),sx=Cl([ft("fields"),ft("name"),$e("active",{}),$e("apis",{}),$e("state",bd),$e("extra",{})]),ec=t=>{const s=Oi("Creating behaviour: "+t.name,sx,t);return Pk(s.fields,s.name,s.active,s.apis,s.extra,s.state)},rx=Cl([ft("branchKey"),ft("branches"),ft("name"),$e("active",{}),$e("apis",{}),$e("state",bd),$e("extra",{})]),ax=t=>{const s=Oi("Creating behaviour: "+t.name,rx,t);return $k(hi(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},cx=q(void 0),Hk=(t,s)=>{const a=hr(s);return ec({fields:[ft("enabled")],name:t,active:{events:q(a)}})},ao=(t,s)=>{const a=Hk(t,s);return{key:t,value:{config:{},me:a,configAsRaw:q({}),initialConfig:{},state:bd}}},k2=t=>({init:()=>{const a=tn(t);return{get:()=>a.get(),set:C=>a.set(C),clear:()=>a.set(t),readState:()=>a.get()}}}),ix=(t,s)=>{s.ignore||(Ta(t.element),s.onFocus(t))};var lx=Object.freeze({__proto__:null,focus:ix,blur:(t,s)=>{s.ignore||wr(t.element)},isFocused:t=>gl(t.element)}),ux=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Lu(a)},events:t=>hr([Ye(Yd(),(s,a)=>{ix(s,t),a.stop()})].concat(t.stopMousedown?[Ye(bi(),(s,a)=>{a.event.prevent()})]:[]))}),_2=[ls("onFocus"),$e("stopMousedown",!1),$e("ignore",!1)];const co=ec({fields:_2,name:"focusing",active:ux,apis:lx}),D2=[8],qm=[9],Tl=[13],en=[27],jc=[32],L1=[37],H1=[38],nv=[39],cp=[40],z1=q("tooltipping.close.all"),Gm=q("dismiss.popups"),_c=q("reposition.popups"),sm=q("mouse.released"),Uk=(t,s,a)=>{const i=ie(t.slice(0,s)),d=ie(t.slice(s+1));return j(i.concat(d),a)},pc=(t,s,a)=>{const i=ie(t.slice(0,s));return j(i,a)},ip=(t,s,a)=>{const i=t.slice(0,s),d=t.slice(s+1);return j(d.concat(i),a)},Wk=(t,s,a)=>{const i=t.slice(s+1);return j(i,a)},as=t=>s=>{const a=s.raw;return dt(t,a.which)},yd=t=>s=>Q(t,a=>a(s)),jg=t=>t.raw.shiftKey===!0,A5=t=>t.raw.ctrlKey===!0,qg=_e(jg),us=(t,s)=>({matches:t,classification:s}),k5=(t,s)=>j(t,i=>i.matches(s)).map(i=>i.classification),dx=(t,s,a,i)=>{const d=_a(t.element,"."+s.highlightClass);ot(d,g=>{wn(i,C=>Jo(C.element,g))||(Sr(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),zo(C,Ab())}))})},_5=(t,s,a)=>dx(t,s,a,[]),D5=(t,s,a,i)=>{U1(t,s,a,i)&&(Sr(i.element,s.highlightClass),s.onDehighlight(t,i),zo(i,Ab()))},V1=(t,s,a,i)=>{dx(t,s,a,[i]),U1(t,s,a,i)||(Hs(i.element,s.highlightClass),s.onHighlight(t,i),zo(i,Pg()))},Zk=(t,s,a)=>{W1(t,s).each(i=>{V1(t,s,a,i)})},O5=(t,s,a)=>{R2(t,s).each(i=>{V1(t,s,a,i)})},ov=(t,s,a,i)=>{jk(t,s,a,i).fold(d=>{throw d},d=>{V1(t,s,a,d)})},O2=(t,s,a,i)=>{const d=hx(t,s);j(d,i).each(h=>{V1(t,s,a,h)})},U1=(t,s,a,i)=>Wr(i.element,s.highlightClass),mx=(t,s,a)=>Fs(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),jk=(t,s,a,i)=>{const d=_a(t.element,"."+s.itemClass);return k.from(d[i]).fold(()=>dn.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},W1=(t,s,a)=>Fs(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),R2=(t,s,a)=>{const i=_a(t.element,"."+s.itemClass);return(i.length>0?k.some(i[i.length-1]):k.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},B2=(t,s,a,i)=>{const d=_a(t.element,"."+s.itemClass);return ce(d,h=>Wr(h,s.highlightClass)).bind(h=>{const C=Ao(h,i,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},fx=(t,s,a)=>B2(t,s,a,-1),gx=(t,s,a)=>B2(t,s,a,1),hx=(t,s,a)=>{const i=_a(t.element,"."+s.itemClass);return Co(Oe(i,d=>t.getSystem().getByDom(d).toOptional()))};var M2=Object.freeze({__proto__:null,dehighlightAll:_5,dehighlight:D5,highlight:V1,highlightFirst:Zk,highlightLast:O5,highlightAt:ov,highlightBy:O2,isHighlighted:U1,getHighlighted:mx,getFirst:W1,getLast:R2,getPrevious:fx,getNext:gx,getCandidates:hx}),F2=[ft("highlightClass"),ft("itemClass"),ls("onHighlight"),ls("onDehighlight")];const ws=ec({fields:F2,name:"highlighting",apis:M2}),px=(t,s,a)=>{s.exists(d=>a.exists(g=>Jo(g,d)))||Bn(t,S1(),{prevFocus:s,newFocus:a})},sv=()=>{const t=a=>Vr(a.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().triggerFocus(i,a.element);const g=t(a);px(a,d,g)}}},N2=()=>{const t=a=>ws.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().getByDom(i).fold(ae,h=>{ws.highlight(a,h)});const g=t(a);px(a,d,g)}}},Gl=(t,s,a,i,d)=>{const g=()=>t.concat([$e("focusManager",sv()),pi("focusInside","onFocus",_f(E=>dt(["onFocus","onEnterOrSpace","onApi"],E)?dn.value(E):dn.error("Invalid value for focusInside"))),fr("handler",w),fr("state",s),fr("sendFocusIn",d)]),h=(E,D,B,I,W)=>{const V=B(E,D,I,W);return k5(V,D.event).bind(se=>se(E,D,I,W))},w={schema:g,processKey:h,toEvents:(E,D)=>{const B=E.focusInside!==$u.OnFocusMode?k.none():d(E).map(V=>Ye(Yd(),(se,pe)=>{V(se,E,D),pe.stop()})),I=(V,se)=>{const pe=as(jc.concat(Tl))(se.event);E.focusInside===$u.OnEnterOrSpaceMode&&pe&&Iy(V,se)&&d(E).each(re=>{re(V,E,D),se.stop()})},W=[Ye(Ha(),(V,se)=>{h(V,se,a,E,D).fold(()=>{I(V,se)},pe=>{se.stop()})}),Ye(Xh(),(V,se)=>{h(V,se,i,E,D).each(pe=>{se.stop()})})];return hr(B.toArray().concat(W))}};return w},bx=t=>{const s=[zs("onEscape"),zs("onEnter"),$e("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),$e("firstTabstop",0),$e("useTabstopAt",rt),zs("visibilitySelector")].concat([t]),a=(re,we)=>{const Te=re.visibilitySelector.bind(ze=>uc(we,ze)).getOr(we);return ea(Te)>0},i=(re,we)=>{const Te=_a(re.element,we.selector),ze=jn(Te,Ue=>a(we,Ue));return k.from(ze[we.firstTabstop])},d=(re,we)=>we.focusManager.get(re).bind(Te=>uc(Te,we.selector)),g=(re,we)=>a(re,we)&&re.useTabstopAt(we),h=(re,we,Te)=>{i(re,we).each(ze=>{we.focusManager.set(re,ze)})},C=(re,we,Te,ze,Ue)=>Ue(we,Te,Wt=>g(ze,Wt)).fold(()=>ze.cyclic?k.some(!0):k.none(),Wt=>(ze.focusManager.set(re,Wt),k.some(!0))),w=(re,we,Te,ze)=>{const Ue=jn(_a(re.element,Te.selector),Wt=>a(Te,Wt));return d(re,Te).bind(Wt=>ce(Ue,gn(Jo,Wt)).bind(Ct=>C(re,Ue,Ct,Te,ze)))},E=(re,we,Te)=>{const ze=Te.cyclic?Uk:pc;return w(re,we,Te,ze)},D=(re,we,Te)=>{const ze=Te.cyclic?ip:Wk;return w(re,we,Te,ze)},B=re=>e1(re).bind(Qo).exists(we=>Jo(we,re)),I=(re,we,Te)=>d(re,Te).filter(ze=>!Te.useTabstopAt(ze)).bind(ze=>(B(ze)?E:D)(re,we,Te)),W=(re,we,Te)=>Te.onEnter.bind(ze=>ze(re,we)),V=(re,we,Te)=>(re.getSystem().broadcastOn([z1()],{closedTooltip:()=>{we.stop()}}),we.isStopped()?k.none():Te.onEscape.bind(ze=>ze(re,we))),se=q([us(yd([jg,as(qm)]),E),us(as(qm),D),us(yd([qg,as(Tl)]),W)]),pe=q([us(as(en),V),us(as(qm),I)]);return Gl(s,bd.init,se,pe,()=>k.some(h))};var P2=bx(Ac("cyclic",Je)),qk=bx(Ac("cyclic",rt));const rm=t=>cc("input")(t)&&ha(t,"type")!=="radio"||cc("textarea")(t),Gk=(t,s,a)=>(Jb(t,a,Ji()),k.some(!0)),Z1=(t,s,a)=>rm(a)&&as(jc)(s.event)?k.none():Gk(t,s,a),j1=(t,s)=>k.some(!0),Kk=[$e("execute",Z1),$e("useSpace",!1),$e("useEnter",!0),$e("useControlEnter",!1),$e("useDown",!1)],zf=(t,s,a)=>a.execute(t,s,t.element),rv=(t,s,a,i)=>{const d=a.useSpace&&!rm(t.element)?jc:[],g=a.useEnter?Tl:[],h=a.useDown?cp:[],C=d.concat(g).concat(h);return[us(as(C),zf)].concat(a.useControlEnter?[us(yd([A5,as(Tl)]),zf)]:[])},vx=(t,s,a,i)=>a.useSpace&&!rm(t.element)?[us(as(jc),j1)]:[];var Yk=Gl(Kk,bd.init,rv,vx,()=>k.none());const yx=()=>{const t=Kn();return nl({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var Cx=Object.freeze({__proto__:null,flatgrid:yx,init:t=>t.state(t)});const wx=t=>(s,a,i,d)=>{const g=t(s.element);return Gg(g,s,a,i,d)},q1=(t,s)=>{const a=l1(t,s);return wx(a)},G1=(t,s)=>{const a=l1(s,t);return wx(a)},K1=t=>(s,a,i,d)=>Gg(t,s,a,i,d),Gg=(t,s,a,i,d)=>i.focusManager.get(s).bind(h=>t(s.element,h,i,d)).map(h=>(i.focusManager.set(s,h),!0)),av=K1,Y1=K1,Km=K1,X1=(t,s)=>ce(t,s).map(a=>({index:a,candidates:t})),$2=(t,s,a)=>{const i=h=>Jo(h,s),d=_a(t,a),g=jn(d,od);return X1(g,i)},cv=(t,s)=>ce(t,a=>Jo(s,a)),Sx=(t,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(h=>{const C=h.row*a+h.column;return C>=0&&C<t.length?k.some(t[C]):k.none()})},xx=(t,s,a,i,d)=>Sx(t,s,i,(g,h)=>{const w=g===a-1?t.length-g*i:i,E=Ao(h,d,0,w-1);return k.some({row:g,column:E})}),Ex=(t,s,a,i,d)=>Sx(t,s,i,(g,h)=>{const C=Ao(g,d,0,a-1),E=C===a-1?t.length-C*i:i,D=Ko(h,0,E-1);return k.some({row:C,column:D})}),Xk=(t,s,a,i)=>xx(t,s,a,i,1),iv=(t,s,a,i)=>xx(t,s,a,i,-1),lp=(t,s,a,i)=>Ex(t,s,a,i,-1),Kg=(t,s,a,i)=>Ex(t,s,a,i,1),Yg=[ft("selector"),$e("execute",Z1),va("onEscape"),$e("captureTab",!1),_b()],Tx=(t,s,a)=>{Fs(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},Ax=(t,s)=>s.focusManager.get(t).bind(a=>uc(a,s.selector)),kx=(t,s,a,i)=>Ax(t,a).bind(d=>a.execute(t,s,d)),lv=t=>(s,a,i,d)=>$2(s,a,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),_x=(t,s,a)=>a.captureTab?k.some(!0):k.none(),Jk=(t,s,a)=>a.onEscape(t,s),Dx=lv(iv),uv=lv(Xk),I2=lv(lp),dv=lv(Kg),L2=q([us(as(L1),q1(Dx,uv)),us(as(nv),G1(Dx,uv)),us(as(H1),av(I2)),us(as(cp),Y1(dv)),us(yd([jg,as(qm)]),_x),us(yd([qg,as(qm)]),_x),us(as(jc.concat(Tl)),kx)]),Qk=q([us(as(en),Jk),us(as(jc),j1)]);var H2=Gl(Yg,yx,L2,Qk,()=>k.some(Tx));const Ox=(t,s,a,i,d)=>{const g=C=>dl(C)==="button"&&ha(C,"disabled")==="disabled",h=(C,w,E)=>d(C,w,i,0,E.length-1,E[w],D=>g(E[D])?h(C,D,E):k.from(E[D]));return $2(t,a,s).bind(C=>{const w=C.index,E=C.candidates;return h(w,w,E)})},Rx=(t,s,a,i)=>Ox(t,s,a,i,(d,g,h,C,w,E,D)=>{const B=Ko(g+h,C,w);return B===d?k.from(E):D(B)}),J1=(t,s,a,i)=>Ox(t,s,a,i,(d,g,h,C,w,E,D)=>{const B=Ao(g,h,C,w);return B===d?k.none():D(B)}),e4=[ft("selector"),$e("getInitial",k.none),$e("execute",Z1),va("onEscape"),$e("executeOnMove",!1),$e("allowVertical",!0),$e("allowHorizontal",!0),$e("cycles",!0)],z2=(t,s)=>s.focusManager.get(t).bind(a=>uc(a,s.selector)),V2=(t,s,a)=>z2(t,a).bind(i=>a.execute(t,s,i)),t4=(t,s,a)=>{s.getInitial(t).orThunk(()=>Fs(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},n4=(t,s,a)=>(a.cycles?J1:Rx)(t,a.selector,s,-1),Xg=(t,s,a)=>(a.cycles?J1:Rx)(t,a.selector,s,1),Bx=t=>(s,a,i,d)=>t(s,a,i,d).bind(()=>i.executeOnMove?V2(s,a,i):k.some(!0)),Mx=(t,s,a)=>a.onEscape(t,s),o4=(t,s,a,i)=>{const d=[...a.allowHorizontal?L1:[]].concat(a.allowVertical?H1:[]),g=[...a.allowHorizontal?nv:[]].concat(a.allowVertical?cp:[]);return[us(as(d),Bx(q1(n4,Xg))),us(as(g),Bx(G1(n4,Xg))),us(as(Tl),V2),us(as(jc),V2)]},s4=q([us(as(jc),j1),us(as(en),Mx)]);var r4=Gl(e4,bd.init,o4,s4,()=>k.some(t4));const mv=(t,s,a)=>k.from(t[s]).bind(i=>k.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),Q1=(t,s,a,i)=>{const g=t[s].length,h=Ao(a,i,0,g-1);return mv(t,s,h)},U2=(t,s,a,i)=>{const d=Ao(a,i,0,t.length-1),g=t[d].length,h=Ko(s,0,g-1);return mv(t,d,h)},e0=(t,s,a,i)=>{const g=t[s].length,h=Ko(a+i,0,g-1);return mv(t,s,h)},Fx=(t,s,a,i)=>{const d=Ko(a+i,0,t.length-1),g=t[d].length,h=Ko(s,0,g-1);return mv(t,d,h)},t0=(t,s,a)=>Q1(t,s,a,1),a4=(t,s,a)=>Q1(t,s,a,-1),fv=(t,s,a)=>U2(t,a,s,-1),c4=(t,s,a)=>U2(t,a,s,1),Nx=(t,s,a)=>e0(t,s,a,-1),B5=(t,s,a)=>e0(t,s,a,1),i4=(t,s,a)=>Fx(t,a,s,-1),Jg=(t,s,a)=>Fx(t,a,s,1),gv=[Pm("selectors",[ft("row"),ft("cell")]),$e("cycles",!0),$e("previousSelector",k.none),$e("execute",Z1)],hv=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Fs(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},Px=(t,s,a)=>Vr(t.element).bind(i=>a.execute(t,s,i)),l4=(t,s)=>Oe(t,a=>_a(a,s.selectors.cell)),pv=(t,s)=>(a,i,d)=>{const g=d.cycles?t:s;return uc(i,d.selectors.row).bind(h=>{const C=_a(h,d.selectors.cell);return cv(C,i).bind(w=>{const E=_a(a,d.selectors.row);return cv(E,h).bind(D=>{const B=l4(E,d);return g(B,D,w).map(I=>I.cell)})})})},$x=pv(a4,Nx),Ix=pv(t0,B5),bv=pv(fv,i4),am=pv(c4,Jg),Lx=q([us(as(L1),q1($x,Ix)),us(as(nv),G1($x,Ix)),us(as(H1),av(bv)),us(as(cp),Y1(am)),us(as(jc.concat(Tl)),Px)]),u4=q([us(as(jc),j1)]);var d4=Gl(gv,bd.init,Lx,u4,()=>k.some(hv));const m4=[ft("selector"),$e("execute",Z1),$e("moveOnTab",!1)],up=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),Hx=(t,s,a)=>{Fs(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},W2=(t,s,a)=>J1(t,a.selector,s,-1),vv=(t,s,a)=>J1(t,a.selector,s,1),Cd=(t,s,a,i)=>a.moveOnTab?Km(W2)(t,s,a,i):k.none(),n0=(t,s,a,i)=>a.moveOnTab?Km(vv)(t,s,a,i):k.none(),cm=q([us(as(H1),Km(W2)),us(as(cp),Km(vv)),us(yd([jg,as(qm)]),Cd),us(yd([qg,as(qm)]),n0),us(as(Tl),up),us(as(jc),up)]),Z2=q([us(as(jc),j1)]);var zx=Gl(m4,bd.init,cm,Z2,()=>k.some(Hx));const Vx=[va("onSpace"),va("onEnter"),va("onShiftEnter"),va("onLeft"),va("onRight"),va("onTab"),va("onShiftTab"),va("onUp"),va("onDown"),va("onEscape"),$e("stopSpaceKeyup",!1),zs("focusIn")],f4=(t,s,a)=>[us(as(jc),a.onSpace),us(yd([qg,as(Tl)]),a.onEnter),us(yd([jg,as(Tl)]),a.onShiftEnter),us(yd([jg,as(qm)]),a.onShiftTab),us(yd([qg,as(qm)]),a.onTab),us(as(H1),a.onUp),us(as(cp),a.onDown),us(as(L1),a.onLeft),us(as(nv),a.onRight),us(as(jc),a.onSpace)],Ux=(t,s,a)=>[...a.stopSpaceKeyup?[us(as(jc),j1)]:[],us(as(en),a.onEscape)];var g4=Gl(Vx,bd.init,f4,Ux,t=>t.focusIn);const h4=P2.schema(),p4=qk.schema(),dp=r4.schema(),o0=H2.schema(),Wx=d4.schema(),im=Yk.schema(),lm=zx.schema(),j2=g4.schema();var yv=Object.freeze({__proto__:null,acyclic:h4,cyclic:p4,flow:dp,flatgrid:o0,matrix:Wx,execution:im,menu:lm,special:j2});const Zx=t=>To(t,"setGridSize"),En=ax({branchKey:"mode",branches:yv,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,d)=>{Zx(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:Cx}),Vf=Z("alloy-premade"),mp=t=>(Object.defineProperty(t.element.dom,Vf,{value:t.uid,writable:!0}),$m(Vf,t)),q2=t=>Do(t.dom,Vf),Cv=t=>sn(t,Vf),Ym=t=>S5((s,...a)=>t(s.getApis(),s,...a),t),fp=t=>t.getSystem().isConnected(),s0=t=>{zo(t,zm());const s=t.components();ot(s,s0)},Uf=t=>{const s=t.components();ot(s,Uf),zo(t,dd())},gp=(t,s)=>{t.getSystem().addToWorld(s),gs(t.element)&&Uf(s)},G2=t=>{s0(t),t.getSystem().removeFromWorld(t)},wd=(t,s)=>{ka(t.element,s.element)},K2=t=>{ot(t.components(),s=>ji(s.element)),Bh(t.element),t.syncComponents()},wv=(t,s,a)=>{const i=t.components();K2(t);const d=a(s),g=ye(i,d);ot(g,h=>{s0(h),t.getSystem().removeFromWorld(h)}),ot(d,h=>{fp(h)?wd(t,h):(t.getSystem().addToWorld(h),wd(t,h),gs(t.element)&&Uf(h))}),t.syncComponents()},Sd=(t,s,a)=>{const i=t.components(),d=ne(s,C=>Cv(C).toArray());ot(i,C=>{dt(d,C)||G2(C)});const g=a(s),h=ye(i,g);ot(h,C=>{fp(C)&&G2(C)}),ot(g,C=>{fp(C)||gp(t,C)}),t.syncComponents()},um=(t,s)=>{Wf(t,s,ka)},Wf=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),gs(t.element)&&Uf(s),t.syncComponents()},Qg=t=>{s0(t),ji(t.element),t.getSystem().removeFromWorld(t)},dm=t=>{const s=ci(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());Qg(t),s.each(a=>{a.syncComponents()})},Y2=t=>{const s=t.components();ot(s,Qg),Bh(t.element),t.syncComponents()},r0=(t,s)=>{Ed(t,s,ka)},xd=(t,s)=>{Ed(t,s,tb)},Ed=(t,s,a)=>{a(t,s.element);const i=Nl(s.element);ot(i,d=>{s.getByDom(d).each(Uf)})},jx=t=>{const s=Nl(t.element);ot(s,a=>{t.getByDom(a).each(s0)}),ji(t.element)},X2=(t,s,a)=>Id(t,s).map(d=>{if(a.exists(h=>!Jo(h,d))){const h=a.map(dl).getOr("span"),C=Nt.fromTag(h);return Ld(d,C),C}else return d}),J2=(t,s,a)=>{a.fold(()=>ka(t,s),i=>{Jo(i,s)||(Ld(i,s),ji(i))})},Q2=(t,s,a)=>{const i=Oe(s,a),d=Nl(t);return ot(d.slice(i.length),ji),i},qx=(t,s,a,i)=>{const d=Id(t,s),g=i(a,d),h=X2(t,s,d);return J2(t,g.element,h),g},M5=(t,s,a)=>Q2(t,s,(i,d)=>qx(t,d,i,a)),b4=(t,s)=>Q2(t,s,(a,i)=>{const d=Id(t,i);return J2(t,a,d),a}),qc=(t,s)=>{const a=Xr(s),i=Aa(a).bind(g=>{const h=C=>Jo(g,C);return h(s)?k.some(s):d1(s,h)}),d=t(s);return i.each(g=>{Aa(a).filter(h=>Jo(h,g)).fold(()=>{Ta(g)},ae)}),d},eh=(t,s)=>{qc(()=>{wv(t,s,()=>Oe(s,t.getSystem().build))},t.element)},eC=(t,s)=>{qc(()=>{Sd(t,s,()=>M5(t.element,s,t.getSystem().buildOrPatch))},t.element)},Zf=(t,s,a,i)=>{G2(s);const d=qx(t.element,a,i,t.getSystem().buildOrPatch);gp(t,d),t.syncComponents()},Gc=(t,s,a)=>{const i=t.getSystem().build(a);Wf(t,i,s)},yi=(t,s,a,i)=>{dm(s),Gc(t,(d,g)=>o1(d,g,a),i)},Kc=(t,s,a,i)=>(s.reuseDom?eC:eh)(t,i),Hu=(t,s,a,i)=>{Gc(t,ka,i)},Xm=(t,s,a,i)=>{Gc(t,Rh,i)},Ni=(t,s,a,i)=>{const d=mm(t);j(d,h=>Jo(i.element,h.element)).each(dm)},mm=(t,s)=>t.components(),Gx=(t,s,a,i,d)=>{const g=mm(t);return k.from(g[i]).map(h=>(d.fold(()=>dm(h),C=>{(s.reuseDom?Zf:yi)(t,h,i,C)}),h))};var Kx=Object.freeze({__proto__:null,append:Hu,prepend:Xm,remove:Ni,replaceAt:Gx,replaceBy:(t,s,a,i,d)=>{const g=mm(t);return ce(g,i).bind(h=>Gx(t,s,a,h,d))},set:Kc,contents:mm});const io=ec({fields:[mc("reuseDom",!0)],name:"replacing",apis:Kx}),Sv=(t,s,a)=>Jo(s,t.element)&&!Jo(s,a),Kl=hr([I1(Yd(),(t,s)=>{const a=s.event,i=a.originator,d=a.target;return Sv(t,i,d)?(console.warn(Yd()+` did not get interpreted by the desired target. 
Originator: `+jl(i)+`
Target: `+jl(d)+`
Check the `+Yd()+" event handlers"),!1):!0})]);var Yx=Object.freeze({__proto__:null,events:Kl});const v4=q("alloy-id-"),y4=q("data-alloy-id"),C4=v4(),Xx=y4(),tC=(t,s)=>{const a=Z(C4+t);return a0(s,a),a},a0=(t,s)=>{Object.defineProperty(t.dom,Xx,{value:s,writable:!0})},Yl=t=>{const s=ri(t)?t.dom[Xx]:null;return k.from(s)},th=t=>Z(t),w4=Rt,xv=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+jl(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:q("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Je}},S4=xv(),Ev=(t,s)=>{const a=Oe(s,d=>Xi(d.name(),[ft("config"),$e("state",bd)])),i=Br("component.behaviours",Qn(a),t.behaviours).fold(d=>{throw new Error(Df(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},Rt);return{list:s,data:Ke(i,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return q(g)})}},tc=t=>t.list,x4=t=>t.data,ol=(t,s)=>{const a={};return Ln(t,(i,d)=>{Ln(i,(g,h)=>{const C=sn(a,h).getOr([]);a[h]=C.concat([s(d,g)])})}),a},N5=(t,s,a,i)=>{const d={...s};ot(a,D=>{d[D.name()]=D.exhibit(t,i)});const g=ol(d,(D,B)=>({name:D,modification:B})),h=D=>qn(D,(B,I)=>({...I.modification,...B}),{}),C=qn(g.classes,(D,B)=>B.modification.concat(D),[]),w=h(g.attributes),E=h(g.styles);return Lu({classes:C,attributes:w,styles:E})},Tv=(t,s,a,i)=>{try{const d=Ne(a,(g,h)=>{const C=g[s],w=h[s],E=i.indexOf(C),D=i.indexOf(w);if(E===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(i,null,2));if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(i,null,2));return E<D?-1:D<E?1:0});return dn.value(d)}catch(d){return dn.error([d])}},nh=(t,s)=>({handler:t,purpose:s}),nC=(t,s)=>({cHandler:t,purpose:s}),oC=(t,s)=>nC(gn.apply(void 0,[t.handler].concat(s)),t.purpose),sC=t=>t.cHandler,E4=(t,s)=>({name:t,handler:s}),Av=(t,s)=>{const a={};return ot(t,i=>{a[i.name()]=i.handlers(s)}),a},Jx=(t,s,a)=>{const i={...a,...Av(s,t)};return ol(i,E4)},kv=(t,s,a,i)=>{const d=Jx(t,a,i);return Qx(d,s)},jf=t=>{const s=w2(t);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},hp=(t,s)=>dn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Oe(s,a=>a.name),null,2)]),rC=(t,s,a)=>{const i=s[a];return i?Tv("Event: "+a,"name",t,i).map(d=>{const g=Oe(d,h=>h.handler);return ex(g)}):hp(a,t)},Qx=(t,s)=>{const a=Eo(t,(i,d)=>(i.length===1?dn.value(i[0].handler):rC(i,s,d)).map(h=>{const C=jf(h),w=i.length>1?jn(s[d],E=>wn(i,D=>D.name===E)).join(" > "):i[0].name;return $m(d,nh(C,w))}));return fc(a,{})},Jm="alloy.base.behaviour",_v=Qn([La("dom","dom",_u(),Qn([ft("tag"),$e("styles",{}),$e("classes",[]),$e("attributes",{}),zs("value"),zs("innerHtml")])),ft("components"),ft("uid"),$e("events",{}),$e("apis",{}),La("eventOrder","eventOrder",Zy({[Ji()]:["disabling",Jm,"toggling","typeaheadevents"],[Yd()]:[Jm,"focusing","keying"],[Eb()]:[Jm,"disabling","toggling","representing","tooltipping"],[Hm()]:[Jm,"representing","streaming","invalidating"],[zm()]:[Jm,"representing","item-events","toolbar-button-events","tooltipping"],[bi()]:["focusing",Jm,"item-type-events"],[Im()]:["focusing",Jm,"item-type-events"],[Bu()]:["item-type-events","tooltipping"],[Og()]:["receiving","reflecting","tooltipping"]}),St()),zs("domModification")]),aC=t=>Br("custom.definition",_v,t),Dv=t=>({...t.dom,uid:t.uid,domChildren:Oe(t.components,s=>s.element)}),c0=t=>t.domModification.fold(()=>Lu({}),Lu),cC=t=>t.events,i0=(t,s)=>{const a=_n(t),i=_n(s),d=ye(i,a),g=to(t,(h,C)=>!Do(s,C)||h!==s[C]).t;return{toRemove:d,toSet:g}},iC=(t,s)=>{const{class:a,style:i,...d}=Hd(s),{toSet:g,toRemove:h}=i0(t.attributes,d),C=()=>{ot(h,Te=>tr(s,Te)),s1(s,g)},w=Qr(s),{toSet:E,toRemove:D}=i0(t.styles,w),B=()=>{ot(D,Te=>Wo(s,Te)),Cr(s,E)},I=h1(s),W=ye(I,t.classes),V=ye(t.classes,I),se=()=>{ku(s,V),dc(s,W)},pe=Te=>{hl(s,Te)},re=()=>{const Te=t.domChildren;b4(s,Te)},we=()=>{const Te=s,ze=t.value.getOrUndefined();ze!==ui(Te)&&Vl(Te,ze??"")};return C(),se(),B(),t.innerHtml.fold(re,pe),we(),s},T4=t=>{const s=Nt.fromTag(t.tag);s1(s,t.attributes),ku(s,t.classes),Cr(s,t.styles),t.innerHtml.each(i=>hl(s,i));const a=t.domChildren;return nb(s,a),t.value.each(i=>{Vl(s,i)}),s},A4=(t,s)=>{try{const a=iC(t,s);return k.some(a)}catch{return k.none()}},lC=t=>t.innerHtml.isSome()&&t.domChildren.length>0,l0=(t,s)=>{const a=d=>dl(d)===t.tag&&!lC(t)&&!q2(d),i=s.filter(a).bind(d=>A4(t,d)).getOrThunk(()=>T4(t));return a0(i,t.uid),i},uC=t=>{const s=sn(t,"behaviours").getOr({});return ne(_n(s),a=>{const i=s[a];return In(i)?[i.me]:[]})},eE=(t,s)=>Ev(t,s),Ov=t=>{const s=uC(t);return eE(t,s)},k4=(t,s,a)=>{const i=Dv(t),d=c0(t),g={"alloy.base.modification":d},h=s.length>0?N5(a,g,s,i):d;return Fk(i,h)},tE=(t,s,a)=>{const i={"alloy.base.behaviour":cC(t)};return kv(a,t.eventOrder,s,i).getOrDie()},dC=(t,s)=>{const a=()=>Te,i=tn(S4),d=Ou(aC(t)),g=Ov(t),h=tc(g),C=x4(g),w=k4(d,h,C),E=l0(w,s),D=tE(d,h,C),B=tn(d.components),I=ze=>{i.set(ze)},W=()=>{i.set(xv(a))},V=()=>{const ze=Nl(E),Ue=ne(ze,Wt=>i.get().getByDom(Wt).fold(()=>[],Ae));B.set(Ue)},se=ze=>{const Ue=C;return(nt(Ue[ze.name()])?Ue[ze.name()]:()=>{throw new Error("Could not find "+ze.name()+" in "+JSON.stringify(t,null,2))})()},pe=ze=>nt(C[ze.name()]),re=()=>d.apis,we=ze=>C[ze]().map(Ue=>Ue.state.readState()).getOr("not enabled"),Te={uid:t.uid,getSystem:i.get,config:se,hasConfigured:pe,spec:t,readState:we,getApis:re,connect:I,disconnect:W,element:E,syncComponents:V,components:B.get,events:D};return Te},pp=(t,s)=>{const a=sn(t,"components").getOr([]);return s.fold(()=>Oe(a,p),i=>Oe(a,(d,g)=>m(d,Id(i,g))))},mC=(t,s)=>{const{events:a,...i}=w4(t),d=pp(i,s),g={...i,events:{...Yx,...a},components:d};return dn.value(dC(g,s))},pr=t=>{const s=Nt.fromText(t);return nE({element:s})},nE=t=>{const s=Oi("external.component",Cl([ft("element"),zs("uid")]),t),a=tn(xv()),i=C=>{a.set(C)},d=()=>{a.set(xv(()=>h))},g=s.uid.getOrThunk(()=>th("external"));a0(s.element,g);const h={uid:g,getSystem:a.get,config:k.none,hasConfigured:Je,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:q("No state"),syncComponents:ae,components:q([]),events:{}};return mp(h)},oE=th,l=t=>Do(t,"uid"),m=(t,s)=>Cv(t).getOrThunk(()=>{const a=l(t)?t:{uid:oE(""),...t};return mC(a,s).getOrDie()}),p=t=>m(t,k.none()),y=mp;var z=Object.freeze({__proto__:null,block:(t,s,a,i)=>{zn(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=Dt([En.config({mode:"special",onTab:()=>k.some(!0),onShiftTab:()=>k.some(!0)}),co.config({})]),h=i(d,g),C=d.getSystem().build(h);io.append(d,y(C)),C.hasConfigured(En)&&s.focus&&En.focusIn(C),a.isBlocked()||s.onBlock(t),a.blockWith(()=>io.remove(d,C))},unblock:(t,s,a)=>{tr(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),ee=[Is("getRoot",k.none),mc("focus",!0),ls("onBlock"),ls("onUnblock")],Me=Object.freeze({__proto__:null,init:()=>{const t=Hi(),s=a=>{t.set({destroy:a})};return nl({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const pt=ec({fields:ee,name:"blocking",apis:z,state:Me});var Ot=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const An=[ft("find")],Qe=ec({fields:An,name:"composing",apis:Ot});var bo=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),on=[wl("others",Xy(dn.value,St()))],Ps=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if(_n(g.others).length===0)throw new Error("Cannot find any known coupled components");return sn(t,h)},a=(g,h,C)=>s(h,C).getOrThunk(()=>{const E=sn(h.others,C).getOrDie("No information found for coupled component: "+C)(g),D=g.getSystem().build(E);return t[C]=D,D}),i=(g,h,C)=>s(h,C).orThunk(()=>(sn(h.others,C).getOrDie("No information found for coupled component: "+C),k.none())),d=q({});return nl({readState:d,getExisting:i,getOrCreate:a})}});const xo=ec({fields:on,name:"coupling",apis:bo,state:Ps}),ca=["input","button","textarea","select"],Al=(t,s,a)=>{(s.disabled()?Jc:Qm)(t,s)},fm=(t,s)=>s.useNative===!0&&dt(ca,dl(t.element)),qf=t=>Ia(t.element,"disabled"),oh=t=>{zn(t.element,"disabled","disabled")},Vs=t=>{tr(t.element,"disabled")},Yc=t=>ha(t.element,"aria-disabled")==="true",Xc=t=>{zn(t.element,"aria-disabled","true")},Xl=t=>{zn(t.element,"aria-disabled","false")},Jc=(t,s,a)=>{s.disableClass.each(d=>{Hs(t.element,d)}),(fm(t,s)?oh:Xc)(t),s.onDisabled(t)},Qm=(t,s,a)=>{s.disableClass.each(d=>{Sr(t.element,d)}),(fm(t,s)?Vs:Xl)(t),s.onEnabled(t)},wa=(t,s)=>fm(t,s)?qf(t):Yc(t);var u0=Object.freeze({__proto__:null,enable:Qm,disable:Jc,isDisabled:wa,onLoad:Al,set:(t,s,a,i)=>{(i?Jc:Qm)(t,s)}}),_4=Object.freeze({__proto__:null,exhibit:(t,s)=>Lu({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>hr([Qb(Ji(),(a,i)=>wa(a,t)),T2(t,s,Al)])}),sE=[Is("disabled",Je),$e("useNative",!0),zs("disableClass"),ls("onDisabled"),ls("onEnabled")];const yn=ec({fields:sE,name:"disabling",active:_4,apis:u0}),Jl=(t,s,a,i,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},D4=t=>({...t,position:k.some(t.position)}),Rv=(t,s)=>{Ya(t,D4(s))},rE=(t,s)=>{const a=t.element;Hs(a,s.transitionClass),Sr(a,s.fadeOutClass),Hs(a,s.fadeInClass),s.onShow(t)},gm=(t,s)=>{const a=t.element;Hs(a,s.transitionClass),Sr(a,s.fadeInClass),Hs(a,s.fadeOutClass),s.onHide(t)},P5=(t,s)=>t.y<s.bottom&&t.bottom>s.y,O4=(t,s)=>t.y>=s.y,$5=(t,s)=>t.bottom<=s.bottom,aE=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),cE=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),R4=t=>t.box.x-t.win.x,wI=(t,s,a)=>{const i=s.win,d=s.box,g=R4(s);return _o(t,h=>{switch(h){case"bottom":return $5(d,a.bounds)?k.none():k.some(cE(i,g,a));case"top":return O4(d,a.bounds)?k.none():k.some(aE(i,g,a));default:return k.none()}}).getOr({location:"no-dock"})},SI=(t,s,a)=>Q(t,i=>{switch(i){case"bottom":return $5(s,a.bounds);case"top":return O4(s,a.bounds)}}),xI=(t,s)=>{const a=s.optScrollEnv.fold(q(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return Ms(t.bounds.x,a)},EI=(t,s)=>{const a=s.optScrollEnv.fold(q(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return Ms(t.x,a)},B4=(t,s,a)=>a.getInitialPos().map(i=>{const d=xI(i,s);return{box:ba(d.left,d.top,Xa(t),ea(t)),location:i.location}}),fC=(t,s,a,i,d)=>{const g=EI(s,a),h=ba(g.left,g.top,s.width,s.height);i.setInitialPos({style:Qr(t),position:nr(t,"position")||"static",bounds:h,location:d.location})},M4=(t,s,a,i,d)=>{i.getInitialPos().fold(()=>fC(t,s,a,i,d),()=>ae)},I5=(t,s,a)=>a.getInitialPos().bind(i=>{var d;switch(a.clearInitialPos(),i.position){case"static":return k.some({morph:"static"});case"absolute":const g=Af(t).getOr(Di()),h=sa(g),C=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return k.some({morph:"absolute",positionCss:Jl("absolute",sn(i.style,"left").map(w=>s.x-h.x),sn(i.style,"top").map(w=>s.y-h.y+C),sn(i.style,"right").map(w=>h.right-s.right),sn(i.style,"bottom").map(w=>h.bottom-s.bottom))});default:return k.none()}}),UK=(t,s,a)=>B4(t,s,a).filter(({box:i})=>SI(a.getModes(),i,s)).bind(({box:i})=>I5(t,i,a)),iE=t=>{switch(t.location){case"top":return k.some({morph:"fixed",positionCss:Jl("fixed",k.some(t.leftX),k.some(t.topY),k.none(),k.none())});case"bottom":return k.some({morph:"fixed",positionCss:Jl("fixed",k.some(t.leftX),k.none(),k.none(),k.some(t.bottomY))});default:return k.none()}},TI=(t,s,a)=>{const i=sa(t),d=Vc(),g=wI(a.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(fC(t,i,s,a,g),iE(g)):k.none()},AI=(t,s,a)=>UK(t,s,a).orThunk(()=>s.optScrollEnv.bind(i=>B4(t,s,a)).bind(({box:i,location:d})=>{const g=Vc(),h=R4({win:g,box:i}),C=d==="top"?aE(g,h,s):cE(g,h,s);return iE(C)})),Td=(t,s,a)=>{const i=t.element;return Sn(lr(i,"position"),"fixed")?AI(i,s,a):TI(i,s,a)},L5=(t,s,a)=>{const i=t.element;return B4(i,s,a).bind(({box:d})=>I5(i,d,a))},kI=(t,s,a,i)=>{const d=sa(t),g=Vc(),h=R4({win:g,box:d}),C=i(g,h,s);return C.location==="bottom"||C.location==="top"?(M4(t,d,s,a,C),iE(C)):k.none()},_I=(t,s,a)=>{a.setDocked(!1),ot(["left","right","top","bottom","position"],i=>Wo(t.element,i)),s.onUndocked(t)},H5=(t,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),Rv(t.element,i),(d?s.onDocked:s.onUndocked)(t)},z5=(t,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const C=P5(h,i.bounds);C!==a.isVisible()&&(a.setVisible(C),d&&!C?(ku(t.element,[g.fadeOutClass]),g.onHide(t)):(C?rE:gm)(t,g))})})},F4=(t,s,a,i,d)=>{z5(t,s,a,i,!0),H5(t,s,a,d.positionCss)},DI=(t,s,a,i,d)=>{switch(d.morph){case"static":return _I(t,s,a);case"absolute":return H5(t,s,a,d.positionCss);case"fixed":return F4(t,s,a,i,d)}},OI=(t,s,a)=>{const i=s.lazyViewport(t);z5(t,s,a,i),Td(t,i,a).each(d=>{DI(t,s,a,i,d)})},RI=(t,s,a)=>{const i=t.element;a.setDocked(!1);const d=s.lazyViewport(t);L5(t,d,a).each(g=>{switch(g.morph){case"static":{_I(t,s,a);break}case"absolute":{H5(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{dc(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),lE(t,s,a)},lE=(t,s,a)=>{t.getSystem().isConnected()&&OI(t,s,a)},V5=(t,s,a)=>{a.isDocked()&&RI(t,s,a)},d0=t=>(s,a,i)=>{const d=a.lazyViewport(s);kI(s.element,d,i,t).each(h=>{F4(s,a,i,d,h)})},N4=d0(aE),BI=d0(cE);var MI=Object.freeze({__proto__:null,refresh:lE,reset:V5,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i),forceDockToTop:N4,forceDockToBottom:BI}),FI=Object.freeze({__proto__:null,events:(t,s)=>hr([Zg(xl(),(a,i)=>{t.contextual.each(d=>{Wr(a.element,d.transitionClass)&&(dc(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),Ye(Mg(),(a,i)=>{lE(a,t,s)}),Ye(xS(),(a,i)=>{lE(a,t,s)}),Ye(Fg(),(a,i)=>{V5(a,t,s)})])}),NI=[Xi("contextual",[Da("fadeInClass"),Da("fadeOutClass"),Da("transitionClass"),Zl("lazyContext"),ls("onShow"),ls("onShown"),ls("onHide"),ls("onHidden")]),Is("lazyViewport",()=>({bounds:Vc(),optScrollEnv:k.none()})),Of("modes",["top","bottom"],$r),ls("onDocked"),ls("onUndocked")],PI=Object.freeze({__proto__:null,init:t=>{const s=tn(!1),a=tn(!0),i=Kn(),d=tn(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return nl({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Ar=ec({fields:NI,name:"docking",active:FI,apis:MI,state:PI}),uE=da.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),m0=t=>s=>s.translate(-t.left,-t.top),dE=t=>s=>s.translate(t.left,t.top),sh=t=>(s,a)=>yo(t,(i,d)=>d(i),Ms(s,a)),mE=(t,s,a)=>t.fold(sh([dE(a),m0(s)]),sh([m0(s)]),sh([])),Bv=(t,s,a)=>t.fold(sh([dE(a)]),sh([]),sh([dE(s)])),f0=(t,s,a)=>t.fold(sh([]),sh([m0(a)]),sh([dE(s),m0(a)])),$4=(t,s,a,i,d,g)=>{const h=Bv(t,d,g),C=Bv(s,d,g);return Math.abs(h.left-C.left)<=a&&Math.abs(h.top-C.top)<=i},$I=(t,s,a,i,d,g)=>{const h=Bv(t,d,g),C=Bv(s,d,g),w=Math.abs(h.left-C.left),E=Math.abs(h.top-C.top);return Ms(w,E)},fE=(t,s,a)=>{const i=t.fold((d,g)=>({position:k.some("absolute"),left:k.some(d+"px"),top:k.some(g+"px")}),(d,g)=>({position:k.some("absolute"),left:k.some(d-a.left+"px"),top:k.some(g-a.top+"px")}),(d,g)=>({position:k.some("fixed"),left:k.some(d+"px"),top:k.some(g+"px")}));return{right:k.none(),bottom:k.none(),...i}},II=(t,s,a)=>t.fold((i,d)=>Gf(i+s,d+a),(i,d)=>vp(i+s,d+a),(i,d)=>yp(i+s,d+a)),Yt=(t,s,a,i)=>{const d=(g,h)=>(C,w)=>{const E=g(s,a,i);return h(C.getOr(E.left),w.getOr(E.top))};return t.fold(d(f0,Gf),d(Bv,vp),d(mE,yp))},Gf=uE.offset,vp=uE.absolute,yp=uE.fixed,gC=(t,s)=>{const a=ha(t,s);return mn(a)?NaN:parseInt(a,10)},I4=(t,s)=>{const a=t.element,i=gC(a,s.leftAttr),d=gC(a,s.topAttr);return isNaN(i)||isNaN(d)?k.none():k.some(Ms(i,d))},LI=(t,s,a)=>{const i=t.element;zn(i,s.leftAttr,a.left+"px"),zn(i,s.topAttr,a.top+"px")},Z5=(t,s)=>{const a=t.element;tr(a,s.leftAttr),tr(a,s.topAttr)},j5=(t,s,a,i)=>I4(t,s).fold(()=>a,d=>yp(d.left+i.left,d.top+i.top)),L4=(t,s,a,i,d,g)=>{const h=j5(t,s,a,i),C=s.mustSnap?zI(t,s,h,d,g):VI(t,s,h,d,g),w=mE(h,d,g);return LI(t,s,w),C.fold(()=>({coord:yp(w.left,w.top),extra:k.none()}),E=>({coord:E.output,extra:E.extra}))},HI=(t,s)=>{Z5(t,s)},H4=(t,s,a,i)=>_o(t,d=>{const g=d.sensor;return $4(s,g,d.range.left,d.range.top,a,i)?k.some({output:Yt(d.output,s,a,i),extra:d.extra}):k.none()}),zI=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return H4(g,a,i,d).orThunk(()=>yo(g,(w,E)=>{const D=E.sensor,B=$I(a,D,E.range.left,E.range.top,i,d);return w.deltas.fold(()=>({deltas:k.some(B),snap:k.some(E)}),I=>{const W=(B.left+B.top)/2,V=(I.left+I.top)/2;return W<=V?{deltas:k.some(B),snap:k.some(E)}:w})},{deltas:k.none(),snap:k.none()}).snap.map(w=>({output:Yt(w.output,a,i,d),extra:w.extra})))},VI=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return H4(g,a,i,d)},q5=(t,s,a)=>({coord:Yt(t.output,t.output,s,a),extra:t.extra});var UI=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ai(t.element),h=Pr(g),C=ub(d),w=q5(i,h,C),E=fE(w.coord,h,C);Ya(d,E)}}});const nc=(t,s)=>e2(t,{},Oe(s,a=>fS(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Ac("dump",Rt)])),hC=t=>t.dump,oc=(t,s)=>({...Dt(s),...t.dump}),Ql={field:nc,augment:oc,get:hC},gE=(t,s)=>(t.length>0?[Pm("parts",t)]:[]).concat([ft("uid"),$e("dom",{}),$e("components",[]),Jh("originalSpec"),$e("debug.sketcher",{})]).concat(s),tf=(t,s,a,i,d)=>{const g=gE(i,d);return Oi(t+" [SpecSchema]",Cl(g.concat(s)),a)},z4=(t,s,a,i)=>{const d=G5(i),g=tf(t,s,d,[],[]);return a(g,d)},V4=(t,s,a,i,d)=>{const g=G5(d),h=LS(a),C=tm(a),w=tf(t,s,g,h,[C]),E=Pf(t,w,a),D=Um(t,w,E.internals());return i(w,D,g,E.externals())},WI=t=>Do(t,"uid"),G5=t=>WI(t)?t:{...t,uid:th("uid")},K5=t=>t.uid!==void 0,ZI=Cl([ft("name"),ft("factory"),ft("configFields"),$e("apis",{}),$e("extraApis",{})]),jI=Cl([ft("name"),ft("factory"),ft("configFields"),ft("partFields"),$e("apis",{}),$e("extraApis",{})]),eu=t=>{const s=Oi("Sketcher for "+t.name,ZI,t),a=g=>z4(s.name,s.configFields,s.factory,g),i=Ke(s.apis,Ym),d=Ke(s.extraApis,(g,h)=>MS(g,h));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},Pi=t=>{const s=Oi("Sketcher for "+t.name,jI,t),a=h=>V4(s.name,s.configFields,s.partFields,s.factory,h),i=ya(s.name,s.partFields),d=Ke(s.apis,Ym),g=Ke(s.extraApis,(h,C)=>MS(h,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},hm=eu({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:hC(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[$e("components",[]),nc("containerBehaviours",[]),$e("events",{}),$e("domModification",{}),$e("eventOrder",{})]}),U4="data-initial-z-index",W4=t=>{ci(t.element).filter(ri).each(s=>{$a(s,U4).fold(()=>Wo(s,"z-index"),a=>Jn(s,"z-index",a)),tr(s,U4)})},Y5=t=>{ci(t.element).filter(ri).each(s=>{lr(s,"z-index").each(a=>{zn(s,U4,a)}),Jn(s,"z-index",nr(t.element,"z-index"))})},Z4=(t,s)=>{t.getSystem().addToGui(s),Y5(s)},X5=t=>{W4(t),t.getSystem().removeFromGui(t)},J5=(t,s,a)=>t.getSystem().build(hm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var qI=Xi("snaps",[ft("getSnapPoints"),ls("onSensor"),ft("leftAttr"),ft("topAttr"),$e("lazyViewport",Vc),$e("mustSnap",!1)]);const j4=[$e("useFixed",Je),ft("blockerClass"),$e("getTarget",Rt),$e("onDrag",ae),$e("repositionTarget",!0),$e("onDrop",ae),Is("getBounds",Vc),qI],GI=t=>Cs(lr(t,"left"),lr(t,"top"),lr(t,"position"),(s,a,i)=>(i==="fixed"?yp:Gf)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=lc(t);return vp(s.left,s.top)}),KI=(t,s,a,i,d)=>{const g=d.bounds,h=Bv(s,a,i),C=Ko(h.left,g.x,g.x+g.width-d.width),w=Ko(h.top,g.y,g.y+g.height-d.height),E=vp(C,w);return s.fold(()=>{const D=f0(E,a,i);return Gf(D.left,D.top)},q(E),()=>{const D=mE(E,a,i);return yp(D.left,D.top)})},pC=(t,s,a,i,d,g,h)=>{const C=s.fold(()=>{const w=II(a,g.left,g.top),E=mE(w,i,d);return yp(E.left,E.top)},w=>{const E=L4(t,w,a,g,i,d);return E.extra.each(D=>{w.onSensor(t,D)}),E.coord});return KI(t,C,i,d,h)},Q5=(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ai(t.element),h=Pr(g),C=ub(d),w=GI(d),E=pC(t,s.snaps,w,h,C,i,a),D=fE(E,h,C);Ya(d,D)}s.onDrag(t,d,i)},q4=(t,s)=>({bounds:t.getBounds(),height:ta(s.element),width:sd(s.element)}),hE=(t,s,a,i,d)=>{const g=a.update(i,d),h=a.getStartData().getOrThunk(()=>q4(s,t));g.each(C=>{Q5(t,s,h,C)})},G4=(t,s,a,i)=>{s.each(X5),a.snaps.each(g=>{HI(t,g)});const d=a.getTarget(t.element);i.reset(),a.onDrop(t,d)},pE=t=>(s,a)=>{const i=d=>{a.setStartData(q4(s,d))};return hr([Ye(Mg(),d=>{a.getStartData().each(()=>i(d))}),...t(s,a,i)])},YI=t=>hr([Ye(bi(),t.forceDrop),Ye(Cb(),t.drop),Ye(Bf(),(s,a)=>{t.move(a.event)}),Ye(Oa(),t.delayDrop)]);var K4=Object.freeze({__proto__:null,getData:t=>k.from(Ms(t.x,t.y)),getDelta:(t,s)=>Ms(s.left-t.left,s.top-t.top)});const eB=(t,s,a)=>[Ye(bi(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>G4(i,k.some(E),t,s),C=Ak(h,200),w={drop:h,delayDrop:C.schedule,forceDrop:h,move:B=>{C.cancel(),hE(i,t,s,K4,B)}},E=J5(i,t.blockerClass,YI(w));(()=>{a(i),Z4(i,E)})()})],bE=[...j4,fr("dragger",{handlers:pE(eB)})],XI=t=>hr([Ye(Im(),t.forceDrop),Ye(kg(),t.drop),Ye(Yh(),t.drop),Ye(Lm(),(s,a)=>{t.move(a.event)})]),tB=t=>{const s=t[0];return k.some(Ms(s.clientX,s.clientY))};var Y4=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?tB(a):k.none()},getDelta:(t,s)=>Ms(s.left-t.left,s.top-t.top)});const X4=(t,s,a)=>{const i=Kn(),d=g=>{G4(g,i.get(),t,s),i.clear()};return[Ye(Im(),(g,h)=>{h.stop();const C=()=>d(g),w={drop:C,delayDrop:ae,forceDrop:C,move:B=>{hE(g,t,s,Y4,B)}},E=J5(g,t.blockerClass,XI(w));i.set(E),(()=>{a(g),Z4(g,E)})()}),Ye(Lm(),(g,h)=>{h.stop(),hE(g,t,s,Y4,h.event)}),Ye(kg(),(g,h)=>{h.stop(),d(g)}),Ye(Yh(),d)]},JI=[...j4,fr("dragger",{handlers:pE(X4)})],nB=(t,s,a)=>[...eB(t,s,a),...X4(t,s,a)],oB=[...j4,fr("dragger",{handlers:pE(nB)})];var QI=Object.freeze({__proto__:null,mouse:bE,touch:JI,mouseOrTouch:oB}),tL=Object.freeze({__proto__:null,init:()=>{let t=k.none(),s=k.none();const a=()=>{t=k.none(),s=k.none()},i=(w,E)=>{const D=t.map(B=>w.getDelta(B,E));return t=k.some(E),D},d=(w,E)=>w.getData(E).bind(D=>i(w,D)),g=w=>{s=k.some(w)},h=()=>s,C=q({});return nl({readState:C,reset:a,update:d,getStartData:h,setStartData:g})}});const g0=ax({branchKey:"mode",branches:QI,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:k.from(t.extra)})},state:tL,apis:UI}),sB=["input","textarea"],J4=t=>{const s=dl(t);return dt(sB,s)},Q4=(t,s)=>{const a=s.getRoot(t).getOr(t.element);Sr(a,s.invalidClass),s.notify.each(i=>{J4(t.element)&&zn(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{hl(d,i.validHtml)}),i.onValid(t)})},rB=(t,s,a,i)=>{const d=s.getRoot(t).getOr(t.element);Hs(d,s.invalidClass),s.notify.each(g=>{J4(t.element)&&zn(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{hl(h,i)}),g.onInvalid(t,i)})},aB=(t,s,a)=>s.validator.fold(()=>rs.pure(dn.value(!0)),i=>i.validate(t)),e3=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),aB(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(rB(t,s,a,d),dn.error(d)),d=>(Q4(t,s),dn.value(d))):dn.error("No longer in system")));var cB=Object.freeze({__proto__:null,markValid:Q4,markInvalid:rB,query:aB,run:e3,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Wr(a,s.invalidClass)}}),Cp=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>hr([Ye(a.onEvent,i=>{e3(i,t,s).get(Rt)})].concat(a.validateOnLoad?[or(i=>{e3(i,t,s).get(ae)})]:[]))).getOr({})}),iB=[ft("invalidClass"),$e("getRoot",k.none),Xi("notify",[$e("aria","alert"),$e("getContainer",k.none),$e("validHtml",""),ls("onValid"),ls("onInvalid"),ls("onValidate")]),Xi("validator",[ft("validate"),$e("onEvent","input"),$e("validateOnLoad",!0)])];const vE=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},t3=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var oL=Object.freeze({__proto__:null,onLoad:vE,onUnload:t3,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),rL=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[or((i,d)=>{vE(i,t,s)}),vd((i,d)=>{t3(i,t,s)})]:[T2(t,s,vE)];return hr(a)}});const lB=()=>{const t=tn(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return nl({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},aL=()=>nl({readState:ae}),n3=()=>{const t=tn({}),s=tn({});return nl({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>sn(t.get(),h).orThunk(()=>sn(s.get(),h)),update:h=>{const C=t.get(),w=s.get(),E={},D={};ot(h,B=>{E[B.value]=B,sn(B,"meta").each(I=>{sn(I,"text").each(W=>{D[W]=B})})}),t.set({...C,...E}),s.set({...w,...D})},clear:()=>{t.set({}),s.set({})}})};var o3=Object.freeze({__proto__:null,memory:lB,dataset:n3,manual:aL,init:t=>t.store.manager.state(t)});const dB=(t,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(t,i),s.onSetValue(t,i)},wp=(t,s,a)=>{const i=s.store,d=i.getDataKey(t);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},mB=(t,s,a)=>{s.store.initialValue.each(d=>{dB(t,s,a,d)})},fB=(t,s,a)=>{a.clear()};var cL=[zs("initialValue"),ft("getFallbackEntry"),ft("getDataKey"),ft("setValue"),fr("manager",{setValue:dB,getValue:wp,onLoad:mB,onUnload:fB,state:n3})];const iL=(t,s,a)=>s.store.getValue(t),vC=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},yC=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var gB=[ft("getValue"),$e("setValue",ae),zs("initialValue"),fr("manager",{setValue:vC,getValue:iL,onLoad:yC,onUnload:ae,state:bd.init})];const s3=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},Sp=(t,s,a)=>a.get(),xp=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},lL=(t,s,a)=>{a.clear()};var uL=[zs("initialValue"),fr("manager",{setValue:s3,getValue:Sp,onLoad:xp,onUnload:lL,state:lB})],hB=[pi("store",{mode:"memory"},hi("mode",{memory:uL,manual:gB,dataset:cL})),ls("onSetValue"),$e("resetOnDom",!1)];const jt=ec({fields:hB,name:"representing",active:rL,apis:oL,extra:{setValueFrom:(t,s)=>{const a=jt.getValue(s);jt.setValue(t,a)}},state:o3}),pm=ec({fields:iB,name:"invalidating",active:Cp,apis:cB,extra:{validation:t=>s=>{const a=jt.getValue(s);return rs.pure(t(a))}}});var pB=Object.freeze({__proto__:null,exhibit:(t,s)=>Lu({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const yE=da.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),r3=(t,s,a,i,d,g)=>{const h=s.rect,C=h.x-a,w=h.y-i,E=h.width,D=h.height,B=d-(C+E),I=g-(w+D),W=k.some(C),V=k.some(w),se=k.some(B),pe=k.some(I),re=k.none();return Hb(s.direction,()=>Jl(t,W,V,re,re),()=>Jl(t,re,V,se,re),()=>Jl(t,W,re,re,pe),()=>Jl(t,re,re,se,pe),()=>Jl(t,W,V,re,re),()=>Jl(t,W,re,re,pe),()=>Jl(t,W,V,re,re),()=>Jl(t,re,V,se,re))},CE=(t,s)=>t.fold(()=>{const a=s.rect;return Jl("absolute",k.some(a.x),k.some(a.y),k.none(),k.none())},(a,i,d,g)=>r3("absolute",s,a,i,d,g),(a,i,d,g)=>r3("fixed",s,a,i,d,g)),wE=(t,s)=>{const a=gn(jd,s),i=t.fold(a,a,()=>{const h=Pr();return jd(s).translate(-h.left,-h.top)}),d=sd(s),g=ta(s);return ba(i.left,i.top,d,g)},dL=(t,s)=>s.fold(()=>t.fold(Vc,Vc,ba),a=>t.fold(q(a),q(a),()=>{const i=bB(t,a.x,a.y);return ba(i.left,i.top,a.width,a.height)})),bB=(t,s,a)=>{const i=Ms(s,a),d=()=>{const g=Pr();return i.translate(-g.left,-g.top)};return t.fold(q(i),q(i),d)},mL=(t,s,a,i)=>t.fold(s,a,i);yE.none;const SE=yE.relative,a3=yE.fixed,xE=(t,s)=>({anchorBox:t,origin:s}),vB=(t,s)=>xE(t,s),EE=da.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),yB=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,right:w,bottom:E,width:D,height:B}=t,I=h>=a&&h<=d,W=C>=i&&C<=g,V=I&&W,se=w<=d&&w>=a,pe=E<=g&&E>=i,re=se&&pe,we=Math.min(D,h>=a?d-h:w-a),Te=Math.min(B,C>=i?g-C:E-i);return{originInBounds:V,sizeInBounds:re,visibleW:we,visibleH:Te}},CB=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,width:w,height:E}=t,D=Math.max(a,d-w),B=Math.max(i,g-E),I=Ko(h,a,D),W=Ko(C,i,B),V=Math.min(I+w,d)-I,se=Math.min(W+E,g)-W;return ba(I,W,V,se)},wB=(t,s,a)=>{const i=q(s.bottom-a.y),d=q(a.bottom-s.y),g=VS(t,d,d,i),h=q(s.right-a.x),C=q(a.right-s.x);return{maxWidth:l2(t,C,C,h),maxHeight:g}},SB=(t,s,a,i)=>{const d=t.bubble,g=d.offset,h=WS(i,t.restriction,g),C=t.x+g.left,w=t.y+g.top,E=ba(C,w,s,a),{originInBounds:D,sizeInBounds:B,visibleW:I,visibleH:W}=yB(E,h),V=D&&B,se=V?E:CB(E,h),pe=se.width>0&&se.height>0,{maxWidth:re,maxHeight:we}=wB(t.direction,se,i),Te={rect:se,maxHeight:we,maxWidth:re,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:w};return V||t.alwaysFit?EE.fit(Te):EE.nofit(Te,I,W,pe)},fL=(t,s,a,i,d,g)=>{const h=i.width,C=i.height,w=(D,B,I,W,V)=>{const se=D(a,i,d,t,g),pe=SB(se,h,C,g);return pe.fold(q(pe),(re,we,Te,ze)=>(V===ze?Te>W||we>I:!V&&ze)?pe:EE.nofit(B,I,W,V))};return yo(s,(D,B)=>{const I=gn(w,B);return D.fold(q(D),I)},EE.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:If(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(Rt,Rt)},TE=["top","bottom","right","left"],AE="data-alloy-transition-timer",gL=(t,s)=>Fh(t,s.classes),hL=(t,s,a)=>a.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),pL=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return Ds(s,(i,d)=>{const g=t[d].map(a),h=i.map(a);return!Xt(g,h)}).isSome()},xB=t=>{const s=g=>{const C=nr(t,g).split(/\s*,\s*/);return jn(C,Nc)},a=g=>{if(ct(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return si(g,"ms")?h:h*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return yo(d,(g,h,C)=>{const w=a(i[C])+a(h);return Math.max(g,w)},0)},bL=(t,s)=>{const a=er(),i=er();let d;const g=E=>{var D;const B=(D=E.raw.pseudoElement)!==null&&D!==void 0?D:"";return Jo(E.target,t)&&Fa(B)&&dt(TE,E.raw.propertyName)},h=E=>{if(fo(E)||g(E)){a.clear(),i.clear();const D=E?.raw.type;(fo(D)||D===xl())&&(clearTimeout(d),tr(t,AE),dc(t,s.classes))}},C=_s(t,Dg(),E=>{g(E)&&(C.unbind(),a.set(_s(t,xl(),h)),i.set(_s(t,w1(),h)))}),w=xB(t);window.requestAnimationFrame(()=>{d=setTimeout(h,w+17),zn(t,AE,d)})},vL=(t,s)=>{ku(t,s.classes),$a(t,AE).each(a=>{clearTimeout(parseInt(a,10)),tr(t,AE)}),bL(t,s)},EB=(t,s,a,i,d,g)=>{const h=hL(i,d,g);if(h||gL(t,i)){Jn(t,"position",a.position);const C=wE(s,t),w=CE(s,{...d,rect:C}),E=wt(TE,D=>w[D]);pL(a,E)&&(Ya(t,E),h&&vL(t,i),pl(t))}else dc(t,i.classes)},CC=t=>({width:Math.ceil(sd(t)),height:ta(t)}),yL=(t,s,a,i)=>{Wo(s,"max-height"),Wo(s,"max-width");const d=CC(s);return fL(s,i.preference,t,d,a,i.bounds)},wC=(t,s)=>{const a=s.classes;dc(t,a.off),ku(t,a.on)},c3=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},TB=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},AB=(t,s,a)=>{const i=CE(a.origin,s);a.transition.each(d=>{EB(t,a.origin,i,d,s,a.lastPlacement)}),Rv(t,i)},CL=(t,s)=>{jb(t,s.placement)},kB=(t,s,a)=>t[s]===void 0?a:t[s],_B=(t,s,a,i,d,g,h,C)=>{const w=kB(h,"maxHeightFunction",XS()),E=kB(h,"maxWidthFunction",ae),D=t.anchorBox,B=t.origin,I={bounds:dL(B,g),origin:B,preference:i,maxHeightFunction:w,maxWidthFunction:E,lastPlacement:d,transition:C};return wL(D,s,a,I)},wL=(t,s,a,i)=>{const d=yL(t,s,a,i);return AB(s,d,i),CL(s,d),wC(s,d),c3(s,d,i),TB(s,d,i),{layout:d.layout,placement:d.placement}},SC=Rt,h0=()=>Xi("layouts",[ft("onLtr"),ft("onRtl"),zs("onBottomLtr"),zs("onBottomRtl")]),kE=(t,s,a,i,d,g,h)=>{const C=h.map(JS).getOr(!1),w=s.layouts.map(W=>W.onLtr(t)),E=s.layouts.map(W=>W.onRtl(t)),D=C?s.layouts.bind(W=>W.onBottomLtr.map(V=>V(t))).or(w).getOr(d):w.getOr(a),B=C?s.layouts.bind(W=>W.onBottomRtl.map(V=>V(t))).or(E).getOr(g):E.getOr(i);return l1(D,B)(t)},DB=(t,s,a)=>{const i=s.hotspot,d=wE(a,i.element),g=kE(t.element,s,Lg(),h2(),Zb(),KS(),k.some(s.hotspot.element));return k.some(SC({anchorBox:d,bubble:s.bubble.getOr(np()),overrides:s.overrides,layouts:g}))};var _E=[ft("hotspot"),zs("bubble"),$e("overrides",{}),h0(),fr("placement",DB)];const i3=(t,s,a)=>{const i=bB(a,s.x,s.y),d=ba(i.left,i.top,s.width,s.height),g=kE(t.element,s,Wb(),GS(),Wb(),GS(),k.none());return k.some(SC({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var l3=[ft("x"),ft("y"),$e("height",0),$e("width",0),$e("bubble",np()),$e("overrides",{}),h0(),fr("placement",i3)];const OB=da.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),SL=t=>t.fold(Rt,(s,a,i)=>s.translate(-a,-i)),xL=t=>t.fold(Rt,Rt),RB=t=>yo(t,(s,a)=>s.translate(a.left,a.top),Ms(0,0)),BB=t=>{const s=Oe(t,SL);return RB(s)},u3=t=>{const s=Oe(t,xL);return RB(s)},EL=OB.screen,TL=OB.absolute,AL=(t,s,a)=>{const i=mg(a.root).dom,d=g=>{const h=ai(g),C=ai(t.element);return Jo(h,C)};return k.from(i.frameElement).map(Nt.fromDom).filter(d).map(lc)},MB=(t,s,a)=>{const i=ai(t.element),d=Pr(i),g=AL(t,s,a).getOr(d);return TL(g,d.left,d.top)},d3=(t,s,a,i)=>{const d=EL(Ms(t,s));return k.some($y(d,a,i))},FB=(t,s,a,i,d)=>t.map(g=>{const h=[s,g.point],C=mL(i,()=>u3(h),()=>u3(h),()=>BB(h)),w=hk(C.left,C.top,g.width,g.height),E=a.showAbove?Zb():Lg(),D=a.showAbove?KS():h2(),B=kE(d,a,E,D,E,D,k.none());return SC({anchorBox:w,bubble:a.bubble.getOr(np()),overrides:a.overrides,layouts:B})}),NB=(t,s,a)=>{const i=MB(t,a,s);return s.node.filter(gs).bind(d=>{const g=d.dom.getBoundingClientRect(),h=d3(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return FB(h,i,s,a,C)})};var kL=[ft("node"),ft("root"),zs("bubble"),h0(),$e("overrides",{}),$e("showAbove",!1),fr("placement",NB)];const DE=(t,s)=>({element:t,offset:s}),_L=(t,s)=>{const a=Nl(t);if(a.length===0)return DE(t,s);if(s<a.length)return DE(a[s],0);{const i=a[a.length-1],d=$d(i)?Mh(i).length:Nl(i).length;return DE(i,d)}},PB=(t,s)=>$d(t)?DE(t,s):_L(t,s),m3=t=>t.foffset!==void 0,rh=(t,s)=>s.getSelection.getOrThunk(()=>()=>Bm(t))().map(i=>{if(m3(i)){const d=PB(i.start,i.soffset),g=PB(i.finish,i.foffset);return yl.range(d.element,d.offset,g.element,g.offset)}else return i}),DL=(t,s,a)=>{const i=mg(s.root).dom,d=MB(t,a,s),g=rh(i,s).bind(w=>{if(m3(w))return Ih(i,yl.exactFromRange(w)).orThunk(()=>{const D=Nt.fromText(Rl);Ld(w.start,D);const B=Tf(i,yl.exact(D,0,D,1));return ji(D),B}).bind(D=>d3(D.left,D.top,D.width,D.height));{const E=Ke(w,B=>B.dom.getBoundingClientRect()),D={left:Math.min(E.firstCell.left,E.lastCell.left),right:Math.max(E.firstCell.right,E.lastCell.right),top:Math.min(E.firstCell.top,E.lastCell.top),bottom:Math.max(E.firstCell.bottom,E.lastCell.bottom)};return d3(D.left,D.top,D.right-D.left,D.bottom-D.top)}}),C=rh(i,s).bind(w=>m3(w)?ri(w.start)?k.some(w.start):Cu(w.start):k.some(w.firstCell)).getOr(t.element);return FB(g,d,s,a,C)};var OL=[zs("getSelection"),ft("root"),zs("bubble"),h0(),$e("overrides",{}),$e("showAbove",!1),fr("placement",DL)];const Kf="link-layout",f3=t=>t.x+t.width,$B=(t,s)=>t.x-s.width,ah=(t,s)=>t.y-s.height+t.height,IB=t=>t.y,LB=(t,s,a)=>ra(f3(t),IB(t),a.southeast(),If(),"southeast",gc(t,{left:0,top:2}),Kf),zu=(t,s,a)=>ra($B(t,s),IB(t),a.southwest(),Ig(),"southwest",gc(t,{right:1,top:2}),Kf),g3=(t,s,a)=>ra(f3(t),ah(t,s),a.northeast(),u2(),"northeast",gc(t,{left:0,bottom:3}),Kf),h3=(t,s,a)=>ra($B(t,s),ah(t,s),a.northwest(),d2(),"northwest",gc(t,{right:1,bottom:3}),Kf),p3=()=>[LB,zu,g3,h3],HB=()=>[zu,LB,h3,g3],OE=(t,s,a)=>{const i=wE(a,s.item.element),d=kE(t.element,s,p3(),HB(),p3(),HB(),k.none());return k.some(SC({anchorBox:i,bubble:np(),overrides:s.overrides,layouts:d}))};var zB=[ft("item"),h0(),$e("overrides",{}),fr("placement",OE)],RL=hi("type",{selection:OL,node:kL,hotspot:_E,submenu:zB,makeshift:l3});const BL=[Ri("classes",$r),Sl("mode","all",["all","layout","placement"])],RE=[$e("useFixed",Je),zs("getBounds")],b3=[wl("anchor",RL),Xi("transition",BL)],VB=()=>{const t=document.documentElement;return a3(0,0,t.clientWidth,t.clientHeight)},UB=t=>{const s=lc(t.element),a=t.element.dom.getBoundingClientRect();return SE(s.left,s.top,a.width,a.height)},WB=(t,s,a,i,d,g)=>{const h=vB(s.anchorBox,t);return _B(h,i.element,s.bubble,s.layouts,d,a,s.overrides,g)},ML=(t,s,a,i,d)=>{const g=k.none();BE(t,s,a,i,d,g)},BE=(t,s,a,i,d,g)=>{const h=Oi("placement.info",Qn(b3),d),C=h.anchor,w=i.element,E=a.get(i.uid);qc(()=>{Jn(w,"position","fixed");const D=lr(w,"visibility");Jn(w,"visibility","hidden");const B=s.useFixed()?VB():UB(t);C.placement(t,C,B).each(I=>{const W=g.orThunk(()=>s.getBounds.map(cs)),V=WB(B,I,W,i,E,h.transition);a.set(i.uid,V)}),D.fold(()=>{Wo(w,"visibility")},I=>{Jn(w,"visibility",I)}),lr(w,"left").isNone()&&lr(w,"top").isNone()&&lr(w,"right").isNone()&&lr(w,"bottom").isNone()&&Sn(lr(w,"position"),"fixed")&&Wo(w,"position")},w)};var NL=Object.freeze({__proto__:null,position:ML,positionWithinBounds:BE,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const d=i.element;ot(["position","left","right","top","bottom"],g=>Wo(d,g)),qb(d),a.clear(i.uid)}}),v3=Object.freeze({__proto__:null,init:()=>{let t={};return nl({readState:()=>t,clear:d=>{In(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>sn(t,d)})}});const Ci=ec({fields:RE,name:"positioning",active:pB,apis:NL,state:v3}),xC=(t,s)=>s.universal?t:jn(t,a=>dt(s.channels,a));var ZB=Object.freeze({__proto__:null,events:t=>hr([Ye(Og(),(s,a)=>{const i=t.channels,d=_n(i),g=a,h=xC(d,g);ot(h,C=>{const w=i[C],E=w.schema,D=Oi("channel["+C+`] data
Receiver: `+jl(s.element),E,g.data);w.onReceive(s,D)})})])}),jB=[wl("channels",Xy(dn.value,Cl([A1("onReceive"),$e("schema",St())])))];const tu=ec({fields:jB,name:"receiving",active:ZB});var PL=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,d)=>{t.updateState.each(g=>{const h=g(i,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?eC:eh)(i,h)})};return hr([Ye(Og(),(i,d)=>{const g=d;if(!g.universal){const h=t.channel;dt(g.channels,h)&&a(i,g.data)}}),or((i,d)=>{t.initialData.each(g=>{a(i,g)})})])}}),C3=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),qB=[ft("channel"),zs("renderComponents"),zs("updateState"),zs("initialData"),mc("reuseDom",!0)],w3=Object.freeze({__proto__:null,init:()=>{const t=tn(k.none()),s=()=>t.set(k.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const nu=ec({fields:qB,name:"reflecting",active:PL,apis:C3,state:w3}),S3=(t,s,a,i)=>{a.get().each(h=>{Y2(t)});const d=s.getAttachPoint(t);um(d,t);const g=t.getSystem().build(i);return um(t,g),a.set(g),g},GB=(t,s,a,i)=>{const d=S3(t,s,a,i);return s.onOpen(t,d),d},IL=(t,s,a,i)=>a.get().map(()=>S3(t,s,a,i)),LL=(t,s,a,i,d)=>{JB(t,s),GB(t,s,a,i),d(),QB(t,s)},x3=(t,s,a)=>{a.get().each(i=>{Y2(t),dm(t),s.onClose(t,i),a.clear()})},KB=(t,s,a)=>a.isOpen(),HL=(t,s,a,i)=>KB(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,i)),E3=(t,s,a)=>a.get(),YB=(t,s,a,i)=>{lr(t.element,s).fold(()=>{tr(t.element,a)},d=>{zn(t.element,a,d)}),Jn(t.element,s,i)},XB=(t,s,a)=>{$a(t.element,a).fold(()=>Wo(t.element,s),i=>Jn(t.element,s,i))},JB=(t,s,a)=>{const i=s.getAttachPoint(t);Jn(t.element,"position",Ci.getMode(i)),YB(t,"visibility",s.cloakVisibilityAttr,"hidden")},T3=t=>wn(["top","left","right","bottom"],s=>lr(t,s).isSome()),QB=(t,s,a)=>{T3(t.element)||Wo(t.element,"position"),XB(t,"visibility",s.cloakVisibilityAttr)};var zL=Object.freeze({__proto__:null,cloak:JB,decloak:QB,open:GB,openWhileCloaked:LL,close:x3,isOpen:KB,isPartOf:HL,getState:E3,setContent:IL}),VL=Object.freeze({__proto__:null,events:(t,s)=>hr([Ye(Sb(),(a,i)=>{x3(a,t,s)})])}),UL=[ls("onOpen"),ls("onClose"),ft("isPartOf"),ft("getAttachPoint"),$e("cloakVisibilityAttr","data-precloak-visibility")],A3=Object.freeze({__proto__:null,init:()=>{const t=Kn(),s=q("not-implemented");return nl({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const hs=ec({fields:UL,name:"sandboxing",active:VL,apis:zL,state:A3}),Ep=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),ch=t=>t.dimension.property,p0=(t,s)=>t.dimension.getDimension(s),ME=(t,s)=>{const a=Ep(t,s);dc(a,[s.shrinkingClass,s.growingClass])},k3=(t,s)=>{Sr(t.element,s.openClass),Hs(t.element,s.closedClass),Jn(t.element,ch(s),"0px"),pl(t.element)},_3=(t,s)=>{Sr(t.element,s.closedClass),Hs(t.element,s.openClass),Wo(t.element,ch(s))},eM=(t,s,a,i)=>{a.setCollapsed(),Jn(t.element,ch(s),p0(s,t.element)),ME(t,s),k3(t,s),s.onStartShrink(t),s.onShrunk(t)},tM=(t,s,a,i)=>{const d=i.getOrThunk(()=>p0(s,t.element));a.setCollapsed(),Jn(t.element,ch(s),d),pl(t.element);const g=Ep(t,s);Sr(g,s.growingClass),Hs(g,s.shrinkingClass),k3(t,s),s.onStartShrink(t)},nM=(t,s,a)=>{const i=p0(s,t.element);(i==="0px"?eM:tM)(t,s,a,k.some(i))},oM=(t,s,a)=>{const i=Ep(t,s),d=Wr(i,s.shrinkingClass),g=p0(s,t.element);_3(t,s);const h=p0(s,t.element);(d?()=>{Jn(t.element,ch(s),g),pl(t.element)}:()=>{k3(t,s)})(),Sr(i,s.shrinkingClass),Hs(i,s.growingClass),_3(t,s),Jn(t.element,ch(s),h),a.setExpanded(),s.onStartGrow(t)},D3=(t,s,a)=>{if(a.isExpanded()){Wo(t.element,ch(s));const i=p0(s,t.element);Jn(t.element,ch(s),i)}},b0=(t,s,a)=>{a.isExpanded()||oM(t,s,a)},ZL=(t,s,a)=>{a.isExpanded()&&nM(t,s,a)},jL=(t,s,a)=>{a.isExpanded()&&eM(t,s,a)},O3=(t,s,a)=>a.isExpanded(),sM=(t,s,a)=>a.isCollapsed(),rM=(t,s,a)=>{const i=Ep(t,s);return Wr(i,s.growingClass)===!0},Mv=(t,s,a)=>{const i=Ep(t,s);return Wr(i,s.shrinkingClass)===!0};var aM=Object.freeze({__proto__:null,refresh:D3,grow:b0,shrink:ZL,immediateShrink:jL,hasGrown:O3,hasShrunk:sM,isGrowing:rM,isShrinking:Mv,isTransitioning:(t,s,a)=>rM(t,s)||Mv(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?nM:oM)(t,s,a)},disableTransitions:ME,immediateGrow:(t,s,a)=>{a.isExpanded()||(_3(t,s),Jn(t.element,ch(s),p0(s,t.element)),ME(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),cM=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return Lu(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:$m(s.dimension.property,"0px")})},events:(t,s)=>hr([Zg(xl(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(ME(a,t),s.isExpanded()&&Wo(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),Fv=[ft("closedClass"),ft("openClass"),ft("shrinkingClass"),ft("growingClass"),zs("getAnimationRoot"),ls("onShrunk"),ls("onStartShrink"),ls("onGrown"),ls("onStartGrow"),$e("expanded",!1),wl("dimension",hi("property",{width:[fr("property","width"),fr("getDimension",t=>Xa(t)+"px")],height:[fr("property","height"),fr("getDimension",t=>ea(t)+"px")]}))],R3=Object.freeze({__proto__:null,init:t=>{const s=tn(t.expanded),a=()=>"expanded: "+s.get();return nl({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:gn(s.set,!1),setExpanded:gn(s.set,!0),readState:a})}});const sl=ec({fields:Fv,name:"sliding",active:cM,apis:aM,state:R3});var FE=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return hr([Ye(t.event,i),vd(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Ye(d,()=>s.cancel())]).getOr([])))}});const B3=t=>{const s=tn(null);return nl({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var M3=Object.freeze({__proto__:null,throttle:B3,init:t=>t.stream.streams.state(t)});const KL=(t,s)=>{const a=t.stream,i=Ga(t.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var YL=[wl("stream",hi("mode",{throttle:[ft("delay"),$e("stopEvent",!0),fr("streams",{setup:KL,state:B3})]})),$e("event","input"),zs("cancelEvent"),A1("onStream")];const F3=ec({fields:YL,name:"streaming",active:FE,state:M3});var EC=Object.freeze({__proto__:null,exhibit:(t,s)=>Lu({attributes:C1([{key:s.tabAttr,value:"true"}])})}),XL=[$e("tabAttr","data-alloy-tabstop")];const Ys=ec({fields:XL,name:"tabstopping",active:EC}),N3=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},JL=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?Hs(t.element,i):Sr(t.element,i)})},v0=(t,s,a,i)=>{const d=a.get();a.set(i),JL(t,s,a),N3(t,s,a),d!==i&&s.onToggled(t,i)},NE=(t,s,a)=>{v0(t,s,a,!a.get())},QL=(t,s,a)=>{v0(t,s,a,!0)},lM=(t,s,a)=>{v0(t,s,a,!1)},uM=(t,s,a)=>a.get(),dM=(t,s,a)=>{v0(t,s,a,s.selected)};var mM=Object.freeze({__proto__:null,onLoad:dM,toggle:NE,isOn:uM,on:QL,off:lM,set:v0}),t9=Object.freeze({__proto__:null,exhibit:()=>Lu({}),events:(t,s)=>{const a=Nk(t,s,NE),i=T2(t,s,dM);return hr(de([t.toggleOnExecute?[a]:[],[i]]))}});const n9=(t,s,a)=>{zn(t.element,"aria-pressed",a),s.syncWithExpanded&&P3(t,s,a)},o9=(t,s,a)=>{zn(t.element,"aria-selected",a)},s9=(t,s,a)=>{zn(t.element,"aria-checked",a)},P3=(t,s,a)=>{zn(t.element,"aria-expanded",a)};var fM=[$e("selected",!1),zs("toggleClass"),$e("toggleOnExecute",!0),ls("onToggled"),pi("aria",{mode:"none"},hi("mode",{pressed:[$e("syncWithExpanded",!1),fr("update",n9)],checked:[fr("update",s9)],expanded:[fr("update",P3)],selected:[fr("update",o9)],none:[fr("update",ae)]}))];const ts=ec({fields:fM,name:"toggling",active:t9,apis:mM,state:k2(!1)}),$3=Z("tooltip.exclusive"),Nv=Z("tooltip.show"),TC=Z("tooltip.hide"),AC=Z("tooltip.immediateHide"),Pv=Z("tooltip.immediateShow"),I3=(t,s,a)=>{t.getSystem().broadcastOn([$3],{})};var gM=Object.freeze({__proto__:null,hideAllExclusive:I3,immediateOpenClose:(t,s,a,i)=>zo(t,i?Pv:AC),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&io.set(d,i)})},setEnabled:(t,s,a,i)=>a.setEnabled(i)}),L3=Object.freeze({__proto__:null,events:(t,s)=>{const a=h=>{s.getTooltip().each(C=>{C.getSystem().isConnected()&&(dm(C),t.onHide(h,C),s.clearTooltip())}),s.clearTimer()},i=h=>{if(!s.isShowing()&&s.isEnabled()){I3(h);const C=t.lazySink(h).getOrDie(),w=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:hr(t.mode==="normal"?[Ye(Bu(),E=>{zo(h,Nv)}),Ye(Oa(),E=>{zo(h,TC)})]:[]),behaviours:Dt([io.config({})])});s.setTooltip(w),um(C,w),t.onShow(h,w),Ci.position(C,w,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(C=>{const w=t.lazySink(h).getOrDie();Ci.position(w,C,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[Ye(Mu(),h=>{zo(h,Pv)}),Ye(Fu(),h=>{zo(h,AC)}),Ye(Bu(),h=>{zo(h,Nv)}),Ye(Oa(),h=>{zo(h,TC)})];case"follow-highlight":return[Ye(Pg(),(h,C)=>{zo(h,Nv)}),Ye(Ab(),h=>{zo(h,TC)})];case"children-normal":return[Ye(Mu(),(h,C)=>{Vr(h.element).each(w=>{Bs(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{zo(h,Pv)},E=>{s.isShowing()&&(t.onShow(h,E),d(h))})})}),Ye(Fu(),h=>{Vr(h.element).fold(()=>{zo(h,AC)},ae)}),Ye(Bu(),h=>{Fs(h.element,"[data-mce-tooltip]:hover").each(C=>{s.getTooltip().fold(()=>{zo(h,Nv)},w=>{s.isShowing()&&(t.onShow(h,w),d(h))})})}),Ye(Oa(),h=>{Fs(h.element,"[data-mce-tooltip]:hover").fold(()=>{zo(h,TC)},ae)})];default:return[Ye(Mu(),(h,C)=>{Vr(h.element).each(w=>{Bs(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{zo(h,Pv)},E=>{s.isShowing()&&(t.onShow(h,E),d(h))})})}),Ye(Fu(),h=>{Vr(h.element).fold(()=>{zo(h,AC)},ae)})]}};return hr(de([[ox(h=>{t.onSetup(h)}),Ye(Nv,h=>{s.resetTimer(()=>{i(h)},t.delayForShow())}),Ye(TC,h=>{s.resetTimer(()=>{a(h)},t.delayForHide())}),Ye(Pv,h=>{s.resetTimer(()=>{i(h)},0)}),Ye(AC,h=>{s.resetTimer(()=>{a(h)},0)}),Ye(Og(),(h,C)=>{const w=C;w.universal||(dt(w.channels,$3)||dt(w.channels,z1()))&&(w.data.closedTooltip&&s.isShowing()&&w.data.closedTooltip(),a(h))}),vd(h=>{a(h)})],g()]))}}),pM=[ft("lazySink"),ft("tooltipDom"),$e("exclusive",!0),$e("tooltipComponents",[]),Is("delayForShow",q(300)),Is("delayForHide",q(100)),Is("onSetup",ae),Sl("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),$e("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:q([aa,za,Ca,hc,gr,Ra]),onRtl:q([aa,za,Ca,hc,gr,Ra])},bubble:El(0,-2,{})})),ls("onHide"),ls("onShow")],bM=Object.freeze({__proto__:null,init:()=>{const t=tn(!0),s=Kn(),a=Kn(),i=()=>{s.on(clearTimeout)},d=(h,C)=>{i(),s.set(setTimeout(h,C))},g=q("not-implemented");return nl({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:i,resetTimer:d,readState:g,isEnabled:()=>t.get(),setEnabled:h=>t.set(h)})}});const br=ec({fields:pM,name:"tooltipping",active:L3,state:bM,apis:gM});var yM=Object.freeze({__proto__:null,events:()=>hr([Qb(yS(),rt)]),exhibit:()=>Lu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const $v=ec({fields:[],name:"unselecting",active:yM}),y0=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return yo(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},i9=t=>Array.prototype.slice.call(t.dom.classList,0),nf=t=>{const s=Nt.fromHtml(t),a=Nl(s),i=y0(s),d=i9(s),g=a.length===0?{}:{innerHtml:wu(s)};return{tag:dl(s),classes:d,attributes:i,...g}},ps=t=>{const s=K5(t)&&To(t,"uid")?t.uid:th("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}},sc=$f,of=tp,CM=(t,s)=>{const a=tn(!1),i=tn(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},wM=t=>{const s=tn(!1);return{stop:()=>{s.set(!0)},cut:ae,isStopped:s.get,isCut:Je,event:t,setSource:fe("Cannot set source of a broadcasted event"),getSource:fe("Cannot get source of a broadcasted event")}},H3=t=>t.raw.which===D2[0]&&!dt(["input","textarea"],dl(t.target))&&!vg(t.target,'[contenteditable="true"]'),SM=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=kc(a),g=Oe(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),W=>_s(t,W,V=>{d.fireIfReady(V,W).each(pe=>{pe&&V.kill()}),a.triggerEvent(W,V)&&V.kill()})),h=Kn(),C=_s(t,"paste",W=>{d.fireIfReady(W,"paste").each(se=>{se&&W.kill()}),a.triggerEvent("paste",W)&&W.kill(),h.set(setTimeout(()=>{a.triggerEvent(t2(),W)},0))}),w=_s(t,"keydown",W=>{a.triggerEvent("keydown",W)?W.kill():a.stopBackspace&&H3(W)&&W.prevent()}),E=_s(t,"focusin",W=>{a.triggerEvent("focusin",W)&&W.kill()}),D=Kn(),B=_s(t,"focusout",W=>{a.triggerEvent("focusout",W)&&W.kill(),D.set(setTimeout(()=>{a.triggerEvent(Fu(),W)},0))});return{unbind:()=>{ot(g,W=>{W.unbind()}),w.unbind(),E.unbind(),B.unbind(),C.unbind(),h.on(clearTimeout),D.on(clearTimeout)}}},xM=(t,s)=>{const a=sn(t,"target").getOr(s);return tn(a)},Iv=da.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),z3=(t,s,a,i,d,g)=>{const h=t(s,i),C=CM(a,d);return h.fold(()=>(g.logEventNoHandlers(s,i),Iv.complete()),w=>{const E=w.descHandler;return sC(E)(C),C.isStopped()?(g.logEventStopped(s,w.element,E.purpose),Iv.stopped()):C.isCut()?(g.logEventCut(s,w.element,E.purpose),Iv.complete()):ci(w.element).fold(()=>(g.logNoParent(s,w.element,E.purpose),Iv.complete()),B=>(g.logEventResponse(s,w.element,E.purpose),Iv.resume(B)))})},V3=(t,s,a,i,d,g)=>z3(t,s,a,i,d,g).fold(rt,h=>V3(t,s,a,h,d,g),Je),EM=(t,s,a,i,d)=>{const g=xM(a,i);return z3(t,s,a,i,g,d)},l9=(t,s,a)=>{const i=wM(s);return ot(t,d=>{const g=d.descHandler;sC(g)(i)}),i.isStopped()},U3=(t,s,a,i)=>TM(t,s,a,a.target,i),TM=(t,s,a,i,d)=>{const g=xM(a,i);return V3(t,s,a,i,g,d)},u9=(t,s)=>({element:t,descHandler:s}),d9=(t,s)=>({id:t,descHandler:s}),m9=()=>{const t={},s=(h,C,w)=>{Ln(w,(E,D)=>{const B=t[D]!==void 0?t[D]:{};B[C]=oC(E,h),t[D]=B})},a=(h,C)=>Yl(C).bind(w=>sn(h,w)).map(w=>u9(C,w));return{registerId:s,unregisterId:h=>{Ln(t,(C,w)=>{Do(C,h)&&delete C[h]})},filterByType:h=>sn(t,h).map(C=>Eo(C,(w,E)=>d9(E,w))).getOr([]),find:(h,C,w)=>sn(t,C).bind(E=>vl(w,D=>a(E,D),h))}},AM=()=>{const t=m9(),s={},a=E=>{const D=E.element;return Yl(D).getOrThunk(()=>tC("uid-",E.element))},i=(E,D)=>{const B=s[D];if(B===E)g(E);else throw new Error('The tagId "'+D+'" is already used by: '+jl(B.element)+`
Cannot use it for: `+jl(E.element)+`
The conflicting element is`+(gs(B.element)?" ":" not ")+"already in the DOM")},d=E=>{const D=a(E);To(s,D)&&i(E,D);const B=[E];t.registerId(B,D,E.events),s[D]=E},g=E=>{Yl(E.element).each(D=>{delete s[D],t.unregisterId(D)})};return{find:(E,D,B)=>t.find(E,D,B),filter:E=>t.filterByType(E),register:d,unregister:g,getById:E=>sn(s,E)}},W3=t=>{const s=re=>ci(t.element).fold(rt,we=>Jo(re,we)),a=AM(),i=(re,we)=>a.find(s,re,we),d=SM(t.element,{triggerEvent:(re,we)=>Mf(re,we.target,Te=>U3(i,re,we,Te))}),g={debugInfo:q("real"),triggerEvent:(re,we,Te)=>{Mf(re,we,ze=>TM(i,re,Te,we,ze))},triggerFocus:(re,we)=>{Yl(re).fold(()=>{Ta(re)},Te=>{Mf(Yd(),re,ze=>(EM(i,Yd(),{originator:we,kill:ae,prevent:ae,target:re},re,ze),!1))})},triggerEscape:(re,we)=>{g.triggerEvent("keydown",re.element,we.event)},getByUid:re=>se(re),getByDom:re=>pe(re),build:p,buildOrPatch:m,addToGui:re=>{w(re)},removeFromGui:re=>{E(re)},addToWorld:re=>{h(re)},removeFromWorld:re=>{C(re)},broadcast:re=>{I(re)},broadcastOn:(re,we)=>{W(re,we)},broadcastEvent:(re,we)=>{V(re,we)},isConnected:rt},h=re=>{re.connect(g),$d(re.element)||(a.register(re),ot(re.components(),h),g.triggerEvent(Eb(),re.element,{target:re.element}))},C=re=>{$d(re.element)||(ot(re.components(),C),a.unregister(re)),re.disconnect()},w=re=>{um(t,re)},E=re=>{dm(re)},D=()=>{d.unbind(),ji(t.element)},B=re=>{const we=a.filter(Og());ot(we,Te=>{const ze=Te.descHandler;sC(ze)(re)})},I=re=>{B({universal:!0,data:re})},W=(re,we)=>{B({universal:!1,channels:re,data:we})},V=(re,we)=>{const Te=a.filter(re);return l9(Te,we)},se=re=>a.getById(re).fold(()=>dn.error(new Error('Could not find component with uid: "'+re+'" in system.')),dn.value),pe=re=>{const we=Yl(re).getOr("not found");return se(we)};return h(t),{root:t,element:t.element,destroy:D,add:w,remove:E,getByUid:se,getByDom:pe,addToWorld:h,removeFromWorld:C,broadcast:I,broadcastOn:W,broadcastEvent:V}},Lv=()=>{const t=(s,a)=>{a.stop(),$1(s)};return[Ye(Kd(),t),Ye(Bg(),t),Wg(Im()),Wg(bi())]},PE=t=>{const s=a=>jm((i,d)=>{a(i),d.stop()});return hr(de([t.map(s).toArray(),Lv()]))},ei=eu({name:"Button",factory:t=>{const s=PE(t.action),a=t.dom.tag,i=g=>sn(t.dom,"attributes").bind(h=>sn(h,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),h=i("role").map(C=>({role:C})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Ql.augment(t.buttonBehaviours,[co.config({}),En.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[$e("uid",void 0),ft("dom"),$e("components",[]),Ql.field("buttonBehaviours",[co,En]),zs("action"),zs("role"),$e("eventOrder",{})]}),Z3=q([$e("shell",!1),ft("makeItem"),$e("setupItem",ae),Ql.field("listBehaviours",[io])]),f9=tl({name:"items",overrides:()=>({behaviours:Dt([io.config({})])})}),g9=q([f9]),h9=q("CustomList"),p9=(t,s,a,i)=>{const d=(C,w)=>{h(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},E=>{const D=io.contents(E),B=w.length,I=B-D.length,W=I>0?Ve(I,()=>t.makeItem()):[],V=D.slice(B);ot(V,pe=>io.remove(E,pe)),ot(W,pe=>io.append(E,pe));const se=io.contents(E);ot(se,(pe,re)=>{t.setupItem(C,pe,w[re],re)})})},g=t.shell?{behaviours:[io.config({})],components:[]}:{behaviours:[],components:s},h=C=>t.shell?k.some(C):Ts(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:oc(t.listBehaviours,g.behaviours),apis:{setItems:d}}},j3=Pi({name:h9(),configFields:Z3(),partFields:g9(),factory:p9,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),kC="aria-controls",b9=t=>Sf(t,a=>{if(!ri(a))return!1;const i=ha(a,"id");return i!==void 0&&i.indexOf(kC)>-1}).bind(a=>{const i=ha(a,"id"),d=Xr(a);return Fs(d,`[${kC}="${i}"]`)}),kM=()=>{const t=Z(kC);return{id:t,link:i=>{zn(i,kC,t)},unlink:i=>{tr(i,kC)}}},_M=(t,s)=>b9(s).exists(a=>C0(t,a)),C0=(t,s)=>Nh(s,a=>Jo(a,t.element),Je)||_M(t,s),DM="alloy.item-hover",q3="alloy.item-focus",OM="alloy.item-toggled",G3=t=>{(Vr(t.element).isNone()||co.isFocused(t))&&(co.isFocused(t)||co.focus(t),Bn(t,DM,{item:t}))},K3=t=>{Bn(t,q3,{item:t})},Y3=(t,s)=>{Bn(t,OM,{item:t,state:s})},RM=q(DM),BM=q(q3),v9=q(OM),_C=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Rt),y9=(t,s)=>({aria:{mode:s?"selected":"checked"},...es(t,(a,i)=>i!=="exclusive"),onToggled:(a,i)=>{nt(t.onToggled)&&t.onToggled(a,i),Y3(a,i)}}),C9=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:_C(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Ql.augment(t.itemBehaviours,[t.toggling.fold(ts.revoke,s=>ts.config(y9(s,t.role.exists(a=>a==="option")))),co.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{K3(s)}}),En.config({mode:"execution"}),jt.config({store:{mode:"memory",initialValue:t.data}}),ao("item-type-events",[...Lv(),Ye(Bu(),G3),Ye(Rg(),co.focus)])]),components:t.components,eventOrder:t.eventOrder});var X3=[ft("data"),ft("components"),ft("dom"),$e("hasSubmenu",!1),zs("toggling"),zs("role"),Ql.field("itemBehaviours",[ts,co,En,jt]),$e("ignoreFocus",!1),$e("domModification",{}),fr("builder",C9),$e("eventOrder",{})];const MM=t=>({dom:t.dom,components:t.components,events:hr([E2(Rg())])});var J3=[ft("dom"),ft("components"),fr("builder",MM)];const Q3=q("item-widget"),e_=q([vi({name:"widget",overrides:t=>({behaviours:Dt([jt.config({store:{mode:"manual",getValue:s=>t.data,setValue:ae}})])})})]),$E=t=>{const s=Pf(Q3(),t,e_()),a=Um(Q3(),t,s.internals()),i=g=>Ts(g,t,"widget").map(h=>(En.focusIn(h),h)),d=(g,h)=>rm(h.event.target)?k.none():(t.autofocus&&h.setSource(g.element),k.none());return{dom:t.dom,components:a,domModification:t.domModification,events:hr([jm((g,h)=>{i(g).each(C=>{h.stop()})}),Ye(Bu(),G3),Ye(Rg(),(g,h)=>{t.autofocus?i(g):co.focus(g)})]),behaviours:Ql.augment(t.widgetBehaviours,[jt.config({store:{mode:"memory",initialValue:t.data}}),co.config({ignore:t.ignoreFocus,onFocus:g=>{K3(g)}}),En.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:cx(),onLeft:d,onRight:d,onEscape:(g,h)=>!co.isFocused(g)&&!t.autofocus?(co.focus(g),k.some(!0)):(t.autofocus&&h.setSource(g.element),k.none())})])}};var FM=[ft("uid"),ft("data"),ft("components"),ft("dom"),$e("autofocus",!1),$e("ignoreFocus",!1),Ql.field("widgetBehaviours",[jt,co,En]),$e("domModification",{}),tm(e_()),fr("builder",$E)];const S9=hi("type",{widget:FM,item:X3,separator:J3}),x9=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),E9=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),T9=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),A9=q([Pb({factory:{sketch:t=>{const s=Oi("menu.spec item",S9,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Do(s,"uid")?s:{...s,uid:th("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),k9=q([Lr("role"),ft("value"),ft("items"),ft("dom"),ft("components"),$e("eventOrder",{}),nc("menuBehaviours",[ws,jt,Qe,En]),pi("movement",{mode:"menu",moveOnTab:!0},hi("mode",{grid:[_b(),fr("config",x9)],matrix:[fr("config",E9),ft("rowSelector"),$e("previousSelector",k.none)],menu:[$e("moveOnTab",!0),fr("config",T9)]})),DS(),$e("fakeFocus",!1),$e("focusManager",sv()),ls("onHighlight"),ls("onDehighlight"),$e("showMenuRole",!0)]),NM=q("alloy.menu-focus"),_9=(t,s)=>{const a=_a(t.element,'[role="menuitemradio"][aria-checked="true"]');ot(a,i=>{Jo(i,s.element)||t.getSystem().getByDom(i).each(d=>{ts.off(d)})})},D9=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:oc(t.menuBehaviours,[ws.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),jt.config({store:{mode:"memory",initialValue:t.value}}),Qe.config({find:k.some}),En.config(t.movement.config(t,t.movement))]),events:hr([Ye(BM(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(C=>{ws.highlight(d,C),g.stop(),Bn(d,NM(),{menu:d,item:C})})}),Ye(RM(),(d,g)=>{const h=g.event.item;ws.highlight(d,h)}),Ye(v9(),(d,g)=>{const{item:h,state:C}=g.event;C&&ha(h.element,"role")==="menuitemradio"&&_9(d,h)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),ih=Pi({name:"Menu",configFields:k9(),partFields:A9(),factory:D9}),t_=t=>At(t,(s,a)=>({k:s,v:a})),n_=(t,s,a,i)=>sn(a,i).bind(d=>sn(t,d).bind(g=>{const h=n_(t,s,a,g);return k.some([g].concat(h))})).getOr([]),O9=(t,s)=>{const a={};Ln(t,(h,C)=>{ot(h,w=>{a[w]=C})});const i=s,d=t_(s),g=Ke(d,(h,C)=>[C].concat(n_(a,i,d,C)));return Ke(a,h=>sn(g,h).getOr([h]))},R9=()=>{const t=tn({}),s=tn({}),a=tn({}),i=Kn(),d=tn({}),g=()=>{t.set({}),s.set({}),a.set({}),i.clear()},h=()=>i.get().isNone(),C=(Ue,Wt)=>{s.set({...s.get(),[Ue]:{type:"prepared",menu:Wt}})},w=(Ue,Wt,vt,Ct)=>{i.set(Ue),t.set(vt),s.set(Wt),d.set(Ct);const gt=O9(Ct,vt);a.set(gt)},E=Ue=>Ds(t.get(),(Wt,vt)=>Wt===Ue),D=(Ue,Wt,vt)=>se(Ue).bind(Ct=>E(Ue).bind(gt=>Wt(gt).map(Rn=>({triggeredMenu:Ct,triggeringItem:Rn,triggeringPath:vt})))),B=(Ue,Wt)=>{const vt=jn(re(Ue).toArray(),Ct=>se(Ct).isSome());return sn(a.get(),Ue).bind(Ct=>{const gt=ie(vt.concat(Ct)),Rn=ne(gt,(pn,Go)=>D(pn,Wt,gt.slice(0,Go+1)).fold(()=>Sn(i.get(),pn)?[]:[k.none()],Un=>[k.some(Un)]));return Uo(Rn)})},I=Ue=>sn(t.get(),Ue).map(Wt=>{const vt=sn(a.get(),Ue).getOr([]);return[Wt].concat(vt)}),W=Ue=>sn(a.get(),Ue).bind(Wt=>Wt.length>1?k.some(Wt.slice(1)):k.none()),V=Ue=>sn(a.get(),Ue),se=Ue=>pe(Ue).bind(o_),pe=Ue=>sn(s.get(),Ue),re=Ue=>sn(t.get(),Ue);return{setMenuBuilt:C,setContents:w,expand:I,refresh:V,collapse:W,lookupMenu:pe,lookupItem:re,otherMenus:Ue=>{const Wt=d.get();return ye(_n(Wt),Ue)},getPrimary:()=>i.get().bind(se),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:B}},o_=t=>t.type==="prepared"?k.some(t.menu):k.none(),PM={init:R9,extractPreparedMenu:o_},$M=Z("tiered-menu-item-highlight"),s_=Z("tiered-menu-item-dehighlight"),IM=(t,s)=>{const a=Kn(),i=(mt,$t,Yn)=>Ke(Yn,(wo,Cn)=>{const vo=()=>ih.sketch({...wo,value:Cn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Ss,bs)=>{Bn(Ss,$M,{menuComp:Ss,itemComp:bs})},onDehighlight:(Ss,bs)=>{Bn(Ss,s_,{menuComp:Ss,itemComp:bs})},focusManager:t.fakeFocus?N2():sv()});return Cn===$t?{type:"prepared",menu:mt.getSystem().build(vo())}:{type:"notbuilt",nbMenu:vo}}),d=PM.init(),g=mt=>{const $t=i(mt,t.data.primary,t.data.menus),Yn=w();return d.setContents(t.data.primary,$t,t.data.expansions,Yn),d.getPrimary()},h=mt=>jt.getValue(mt).value,C=(mt,$t,Yn)=>_o($t,wo=>{if(!wo.getSystem().isConnected())return k.none();const Cn=ws.getCandidates(wo);return j(Cn,vo=>h(vo)===Yn)}),w=mt=>Ke(t.data.menus,($t,Yn)=>ne($t.items,wo=>wo.type==="separator"?[]:[wo.data.value])),E=ws.highlight,D=(mt,$t)=>{E(mt,$t),ws.getHighlighted($t).orThunk(()=>ws.getFirst($t)).each(Yn=>{t.fakeFocus?ws.highlight($t,Yn):Jb(mt,Yn.element,Rg())})},B=(mt,$t)=>Co(Oe($t,Yn=>mt.lookupMenu(Yn).bind(wo=>wo.type==="prepared"?k.some(wo.menu):k.none()))),I=(mt,$t,Yn)=>{const wo=B($t,$t.otherMenus(Yn));ot(wo,Cn=>{dc(Cn.element,[t.markers.backgroundMenu]),t.stayInDom||io.remove(mt,Cn)})},W=mt=>a.get().getOrThunk(()=>{const $t={},Yn=_a(mt.element,`.${t.markers.item}`),wo=jn(Yn,Cn=>ha(Cn,"aria-haspopup")==="true");return ot(wo,Cn=>{mt.getSystem().getByDom(Cn).each(vo=>{const Ss=h(vo);$t[Ss]=vo})}),a.set($t),$t}),V=(mt,$t)=>{const Yn=W(mt);Ln(Yn,(wo,Cn)=>{const vo=dt($t,Cn);zn(wo.element,"aria-expanded",vo)})},se=(mt,$t,Yn)=>k.from(Yn[0]).bind(wo=>$t.lookupMenu(wo).bind(Cn=>{if(Cn.type==="notbuilt")return k.none();{const vo=Cn.menu,Ss=B($t,Yn.slice(1));return ot(Ss,bs=>{Hs(bs.element,t.markers.backgroundMenu)}),gs(vo.element)||io.append(mt,y(vo)),dc(vo.element,[t.markers.backgroundMenu]),D(mt,vo),I(mt,$t,Yn),k.some(vo)}}));let pe;(function(mt){mt[mt.HighlightSubmenu=0]="HighlightSubmenu",mt[mt.HighlightParent=1]="HighlightParent"})(pe||(pe={}));const re=(mt,$t,Yn)=>{if(Yn.type==="notbuilt"){const wo=mt.getSystem().build(Yn.nbMenu());return d.setMenuBuilt($t,wo),wo}else return Yn.menu},we=(mt,$t,Yn=pe.HighlightSubmenu)=>{if($t.hasConfigured(yn)&&yn.isDisabled($t))return k.some($t);{const wo=h($t);return d.expand(wo).bind(Cn=>(V(mt,Cn),k.from(Cn[0]).bind(vo=>d.lookupMenu(vo).bind(Ss=>{const bs=re(mt,vo,Ss);return gs(bs.element)||io.append(mt,y(bs)),t.onOpenSubmenu(mt,$t,bs,ie(Cn)),Yn===pe.HighlightSubmenu?(ws.highlightFirst(bs),se(mt,d,Cn)):(ws.dehighlightAll(bs),k.some($t))}))))}},Te=(mt,$t)=>{const Yn=h($t);return d.collapse(Yn).bind(wo=>(V(mt,wo),se(mt,d,wo).map(Cn=>(t.onCollapseMenu(mt,$t,Cn),Cn))))},ze=(mt,$t)=>{const Yn=h($t);return d.refresh(Yn).bind(wo=>(V(mt,wo),se(mt,d,wo)))},Ue=(mt,$t)=>rm($t.element)?k.none():we(mt,$t,pe.HighlightSubmenu),Wt=(mt,$t)=>rm($t.element)?k.none():Te(mt,$t),vt=(mt,$t)=>Te(mt,$t).orThunk(()=>t.onEscape(mt,$t).map(()=>mt)),Ct=mt=>($t,Yn)=>uc(Yn.getSource(),`.${t.markers.item}`).bind(wo=>$t.getSystem().getByDom(wo).toOptional().bind(Cn=>mt($t,Cn).map(rt))),gt=hr([Ye(NM(),(mt,$t)=>{const Yn=$t.event.item;d.lookupItem(h(Yn)).each(()=>{const wo=$t.event.menu;ws.highlight(mt,wo);const Cn=h($t.event.item);d.refresh(Cn).each(vo=>I(mt,d,vo))})}),jm((mt,$t)=>{const Yn=$t.event.target;mt.getSystem().getByDom(Yn).each(wo=>{h(wo).indexOf("collapse-item")===0&&Te(mt,wo),we(mt,wo,pe.HighlightSubmenu).fold(()=>{t.onExecute(mt,wo)},ae)})}),or((mt,$t)=>{g(mt).each(Yn=>{io.append(mt,y(Yn)),t.onOpenMenu(mt,Yn),t.highlightOnOpen===Zc.HighlightMenuAndItem?D(mt,Yn):t.highlightOnOpen===Zc.HighlightJustMenu&&E(mt,Yn)})}),Ye($M,(mt,$t)=>{t.onHighlightItem(mt,$t.event.menuComp,$t.event.itemComp)}),Ye(s_,(mt,$t)=>{t.onDehighlightItem(mt,$t.event.menuComp,$t.event.itemComp)}),...t.navigateOnHover?[Ye(RM(),(mt,$t)=>{const Yn=$t.event.item;ze(mt,Yn),we(mt,Yn,pe.HighlightParent),t.onHover(mt,Yn)})]:[]]),Rn=mt=>ws.getHighlighted(mt).bind(ws.getHighlighted),pn=mt=>{Rn(mt).each($t=>{Te(mt,$t)})},Go=mt=>{d.getPrimary().each($t=>{D(mt,$t)})},Un=mt=>k.from(mt.components()[0]).filter($t=>ha($t.element,"role")==="menu"),hn={collapseMenu:pn,highlightPrimary:Go,repositionMenus:mt=>{d.getPrimary().bind(Yn=>Rn(mt).bind(wo=>{const Cn=h(wo),vo=Xs(d.getMenus()),Ss=Co(Oe(vo,PM.extractPreparedMenu));return d.getTriggeringPath(Cn,bs=>C(mt,Ss,bs))}).map(wo=>({primary:Yn,triggeringPath:wo}))).fold(()=>{Un(mt).each(Yn=>{t.onRepositionMenu(mt,Yn,[])})},({primary:Yn,triggeringPath:wo})=>{t.onRepositionMenu(mt,Yn,wo)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:oc(t.tmenuBehaviours,[En.config({mode:"special",onRight:Ct(Ue),onLeft:Ct(Wt),onEscape:Ct(vt),focusIn:(mt,$t)=>{d.getPrimary().each(Yn=>{Jb(mt,Yn.element,Rg())})}}),ws.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Qe.config({find:mt=>ws.getHighlighted(mt)}),io.config({})]),eventOrder:t.eventOrder,apis:hn,events:gt}},LM=q("collapse-item"),B9=(t,s,a)=>({primary:t,menus:s,expansions:a}),M9=(t,s)=>({primary:t,menus:$m(t,s),expansions:{}}),F9=t=>({value:Z(LM()),meta:{text:t}}),kp=eu({name:"TieredMenu",configFields:[kb("onExecute"),kb("onEscape"),A1("onOpenMenu"),A1("onOpenSubmenu"),ls("onRepositionMenu"),ls("onCollapseMenu"),$e("highlightOnOpen",Zc.HighlightMenuAndItem),Pm("data",[ft("primary"),ft("menus"),ft("expansions")]),$e("fakeFocus",!1),ls("onHighlightItem"),ls("onDehighlightItem"),ls("onHover"),OS(),ft("dom"),$e("navigateOnHover",!0),$e("stayInDom",!1),nc("tmenuBehaviours",[En,ws,Qe,io]),$e("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:IM,extraApis:{tieredData:B9,singleData:M9,collapseItem:F9}}),IE=q("sink"),N9=q(tl({name:IE(),overrides:q({dom:{tag:"div"},behaviours:Dt([Ci.config({useFixed:rt})]),events:hr([Wg(Ha()),Wg(bi()),Wg(Kd())])})})),P9=Cl([$e("isExtraPart",Je),Xi("fireEventInstead",[$e("event",Ng())])]),r_=t=>{const s=Oi("Dismissal",P9,t);return{[Gm()]:{schema:Cl([ft("target")]),onReceive:(a,i)=>{hs.isOpen(a)&&(hs.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>hs.close(a),g=>zo(a,g.event)))}}}},$9=Cl([Xi("fireEventInstead",[$e("event",SS())]),Zl("doReposition")]),a_=t=>{const s=Oi("Reposition",$9,t);return{[_c()]:{onReceive:a=>{hs.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>zo(a,i.event))}}}},HM=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},zM=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},VM=(t,s,a,i,d,g,h)=>{const C=zM(t,s,i),w=Ad(i,t);return C.map(E=>E.bind(D=>{const B=D.menus[D.primary];return k.from(B).each(I=>{t.listRole.each(W=>{I.role=W})}),k.from(kp.sketch({...g.menu(),uid:th(""),data:D,highlightOnOpen:h,onOpenMenu:(I,W)=>{const V=w().getOrDie();Ci.position(V,W,{anchor:a}),hs.decloak(d)},onOpenSubmenu:(I,W,V)=>{const se=w().getOrDie();Ci.position(se,V,{anchor:{type:"submenu",item:W}}),hs.decloak(d)},onRepositionMenu:(I,W,V)=>{const se=w().getOrDie();Ci.position(se,W,{anchor:a}),ot(V,pe=>{Ci.position(se,pe.triggeredMenu,{anchor:{type:"submenu",item:pe.triggeringItem}})})},onEscape:()=>(co.focus(i),hs.close(d),k.some(!0))}))}))},LE=(t,s,a,i,d,g,h)=>{const C=HM(t,a);return VM(t,s,C,a,i,d,h).map(E=>(E.fold(()=>{hs.isOpen(i)&&hs.close(i)},D=>{hs.cloak(i),hs.open(i,D),g(i)}),i))},I9=(t,s,a,i,d,g,h)=>(hs.close(i),rs.pure(i)),UM=(t,s,a,i,d,g)=>{const h=xo.getCoupled(a,"sandbox");return(hs.isOpen(h)?I9:LE)(t,s,a,h,i,d,g)},ou=(t,s,a)=>{const i=Qe.getCurrent(s).getOr(s),d=Xa(t.element);a?Jn(i.element,"min-width",d+"px"):Vd(i.element,d)},Ad=(t,s)=>t.getSystem().getByUid(s.uid+"-"+IE()).map(a=>()=>dn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>dn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),c_=t=>{hs.getState(t).each(s=>{kp.repositionMenus(s)})},HE=(t,s,a)=>{const i=kM(),d=(C,w)=>{const E=HM(t,s);i.link(s.element),t.matchWidth&&ou(E.hotspot,w,t.useMinWidth),t.onOpen(E,C,w),a!==void 0&&a.onOpen!==void 0&&a.onOpen(C,w)},g=(C,w)=>{i.unlink(s.element),h().getOr(w).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(C,w)},h=Ad(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id}},behaviours:Ql.augment(t.sandboxBehaviours,[jt.config({store:{mode:"memory",initialValue:s}}),hs.config({onOpen:d,onClose:g,isPartOf:(C,w,E)=>C0(w,E)||C0(s,E),getAttachPoint:()=>h().getOrDie()}),Qe.config({find:C=>hs.getState(C).bind(w=>Qe.getCurrent(w))}),tu.config({channels:{...r_({isExtraPart:Je}),...a_({doReposition:c_})}})])}},i_=t=>{const s=xo.getCoupled(t,"sandbox");c_(s)},DC=()=>[$e("sandboxClasses",[]),Ql.field("sandboxBehaviours",[Qe,tu,hs,jt])],L9=q([ft("dom"),ft("fetch"),ls("onOpen"),va("onExecute"),$e("getHotspot",k.some),$e("getAnchorOverrides",q({})),h0(),nc("dropdownBehaviours",[ts,xo,En,co]),ft("toggleClass"),$e("eventOrder",{}),zs("lazySink"),$e("matchWidth",!1),$e("useMinWidth",!1),zs("role"),zs("listRole")].concat(DC())),WM=q([el({schema:[OS(),$e("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),N9()]),OC=(t,s,a,i)=>{const d=D=>sn(t.dom,"attributes").bind(B=>sn(B,D)),g=D=>{hs.getState(D).each(B=>{kp.highlightPrimary(B)})},h=(D,B,I)=>UM(t,Rt,D,i,B,I),C=D=>{h(D,g,Zc.HighlightMenuAndItem).get(ae)},w={expand:D=>{ts.isOn(D)||h(D,ae,Zc.HighlightNone).get(ae)},open:D=>{ts.isOn(D)||h(D,ae,Zc.HighlightMenuAndItem).get(ae)},refetch:D=>xo.getExistingCoupled(D,"sandbox").fold(()=>h(D,ae,Zc.HighlightMenuAndItem).map(ae),I=>LE(t,Rt,D,I,i,ae,Zc.HighlightMenuAndItem).map(ae)),isOpen:ts.isOn,close:D=>{ts.isOn(D)&&h(D,ae,Zc.HighlightMenuAndItem).get(ae)},repositionMenus:D=>{ts.isOn(D)&&i_(D)}},E=(D,B)=>($1(D),k.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:oc(t.dropdownBehaviours,[ts.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),xo.config({others:{sandbox:D=>HE(t,D,{onOpen:()=>ts.on(D),onClose:()=>ts.off(D)})}}),En.config({mode:"special",onSpace:E,onEnter:E,onDown:(D,B)=>{if(su.isOpen(D)){const I=xo.getCoupled(D,"sandbox");g(I)}else su.open(D);return k.some(!0)},onEscape:(D,B)=>su.isOpen(D)?(su.close(D),k.some(!0)):k.none()}),co.config({})]),events:PE(k.some(C)),eventOrder:{...t.eventOrder,[Ji()]:["disabling","toggling","alloy.base.behaviour"]},apis:w,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),D=>({role:D})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},su=Pi({name:"Dropdown",configFields:L9(),partFields:WM(),factory:OC,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),RC="form",l_=[nc("formBehaviours",[jt])],u_=t=>"<alloy.field."+t+">",BC=t=>{const s=(()=>{const g=[];return{field:(C,w)=>(g.push(C),Bi(RC,u_(C),w)),record:q(g)}})(),a=t(s),i=s.record(),d=Oe(i,g=>vi({name:g,pname:u_(g)}));return V4(RC,l_,d,z9,a)},H9=(t,s)=>t.fold(()=>dn.error(s),dn.value),z9=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:oc(t.formBehaviours,[jt.config({store:{mode:"manual",getValue:a=>{const i=Ib(a,t);return Ke(i,(d,g)=>d().bind(h=>{const C=Qe.getCurrent(h);return H9(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+jl(h.element)))}).map(jt.getValue))},setValue:(a,i)=>{Ln(i,(d,g)=>{Ts(a,t,g).each(h=>{Qe.getCurrent(h).each(C=>{jt.setValue(C,d)})})})}}})]),apis:{getField:(a,i)=>Ts(a,t,i).bind(Qe.getCurrent)}}),kl={getField:Ym((t,s,a)=>t.getField(s,a)),sketch:BC},ti=q([ft("dom"),$e("shell",!0),nc("toolbarBehaviours",[io])]),ru=q([tl({name:"groups",overrides:()=>({behaviours:Dt([io.config({})])})})]),V9=(t,s,a,i)=>{const d=(C,w)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},E=>{io.set(E,w)})},g=C=>t.shell?k.some(C):Ts(C,t,"groups"),h=t.shell?{behaviours:[io.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:oc(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:ae},domModification:{attributes:{role:"group"}}}},As=Pi({name:"Toolbar",configFields:ti(),partFields:ru(),factory:V9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),U9=q([ql(["toggledClass"]),ft("lazySink"),Zl("fetch"),ud("getBounds"),Xi("fireDismissalEventInstead",[$e("event",Ng())]),h0(),ls("onToggled")]),lh=q([el({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Dt([ts.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),el({factory:As,schema:ti(),name:"toolbar",overrides:t=>({toolbarBehaviours:Dt([En.config({mode:"cyclic",onEscape:s=>(Ts(s,t,"button").each(co.focus),k.none())})])})})]),_p=Kn(),ZM=(t,s)=>{_p.set(!0),MC(t,s),_p.clear()},MC=(t,s)=>{const a=xo.getCoupled(t,"toolbarSandbox");hs.isOpen(a)?hs.close(a):hs.open(a,s.toolbar())},FC=(t,s,a,i)=>{const d=a.getBounds.map(h=>h()),g=a.lazySink(t).getOrDie();Ci.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:y2()}}},d)},jM=(t,s,a,i,d)=>{As.setGroups(s,d),FC(t,s,a,i),ts.on(t)},d_=(t,s,a)=>{const i=kM(),d=(h,C)=>{const w=_p.get().getOr(!1);a.fetch().get(E=>{jM(t,C,a,s.layouts,E),i.link(t.element),w||En.focusIn(C)})},g=()=>{ts.off(t),_p.get().getOr(!1)||co.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:Dt([En.config({mode:"special",onEscape:h=>(hs.close(h),k.some(!0))}),hs.config({onOpen:d,onClose:g,isPartOf:(h,C,w)=>C0(C,w)||C0(t,w),getAttachPoint:()=>a.lazySink(t).getOrDie()}),tu.config({channels:{...r_({isExtraPart:Je,...a.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...a_({doReposition:()=>{hs.getState(xo.getCoupled(t,"toolbarSandbox")).each(h=>{FC(t,h,a,s.layouts)})}})}})])}},uh=Pi({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...ei.sketch({...i.button(),action:d=>{MC(d,i)},buttonBehaviours:Ql.augment({dump:i.button().buttonBehaviours},[xo.config({others:{toolbarSandbox:d=>d_(d,a,t)}})])}),apis:{setGroups:(d,g)=>{hs.getState(xo.getCoupled(d,"toolbarSandbox")).each(h=>{jM(d,h,t,a.layouts,g)})},reposition:d=>{hs.getState(xo.getCoupled(d,"toolbarSandbox")).each(g=>{FC(d,g,t,a.layouts)})},toggle:d=>{MC(d,i)},toggleWithoutFocusing:d=>{ZM(d,i)},getToolbar:d=>hs.getState(xo.getCoupled(d,"toolbarSandbox")),isOpen:d=>hs.isOpen(xo.getCoupled(d,"toolbarSandbox"))}}),configFields:U9(),partFields:lh(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),qM=q([$e("prefix","form-field"),nc("fieldBehaviours",[Qe,jt])]),m_=q([tl({schema:[ft("dom")],name:"label"}),tl({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[ft("text")],name:"aria-descriptor"}),vi({factory:{sketch:t=>{const s=vS(t,["factory"]);return t.factory.sketch(s)}},schema:[ft("factory")],name:"field"})]),GM=(t,s,a,i)=>{const d=oc(t.fieldBehaviours,[Qe.config({find:C=>Ts(C,t,"field")}),jt.config({store:{mode:"manual",getValue:C=>Qe.getCurrent(C).bind(jt.getValue),setValue:(C,w)=>{Qe.getCurrent(C).each(E=>{jt.setValue(E,w)})}}})]),g=hr([or((C,w)=>{const E=_1(C,t,["label","field","aria-descriptor"]);E.field().each(D=>{const B=Z(t.prefix);E.label().each(I=>{zn(I.element,"for",B),zn(D.element,"id",B)}),E["aria-descriptor"]().each(I=>{const W=Z(t.prefix);zn(I.element,"id",W),zn(D.element,"aria-describedby",W)})})})]),h={getField:C=>Ts(C,t,"field"),getLabel:C=>Ts(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},Io=Pi({name:"FormField",configFields:qM(),partFields:m_(),factory:GM,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}}),W9=q([$e("field1Name","field1"),$e("field2Name","field2"),A1("onLockedChange"),ql(["lockClass"]),$e("locked",!1),Ql.field("coupledFieldBehaviours",[Qe,jt]),Is("onInput",ae)]),Z9=(t,s,a)=>Ts(t,s,a).bind(Qe.getCurrent),KM=(t,s)=>vi({factory:Io,name:t,overrides:a=>({fieldBehaviours:Dt([ao("coupled-input-behaviour",[Ye(Hm(),i=>{Z9(i,a,s).each(d=>{Ts(i,a,"lock").each(g=>{ts.isOn(g)&&a.onLockedChange(i,d,g),a.onInput(i)})})})])])})}),j9=q([KM("field1","field2"),KM("field2","field1"),vi({factory:ei,schema:[ft("dom")],name:"lock",overrides:t=>({buttonBehaviours:Dt([ts.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),q9=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Ql.augment(t.coupledFieldBehaviours,[Qe.config({find:k.some}),jt.config({store:{mode:"manual",getValue:d=>{const g=D1(d,t,["field1","field2"]);return{[t.field1Name]:jt.getValue(g.field1()),[t.field2Name]:jt.getValue(g.field2())}},setValue:(d,g)=>{const h=D1(d,t,["field1","field2"]);To(g,t.field1Name)&&jt.setValue(h.field1(),g[t.field1Name]),To(g,t.field2Name)&&jt.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>Ts(d,t,"field1"),getField2:d=>Ts(d,t,"field2"),getLock:d=>Ts(d,t,"lock")}}),qr=Pi({name:"FormCoupledInputs",configFields:W9(),partFields:j9(),factory:q9,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),G9=(t,s)=>{const a=Oe(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>$m("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:oc(t.selectBehaviours,[co.config({}),jt.config({store:{mode:"manual",getValue:d=>ui(d.element),setValue:(d,g)=>{const h=Gt(t.options);j(t.options,w=>w.value===g).isSome()?Vl(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(w=>Vl(d.element,w.value))},...i}})])}},K9=eu({name:"HtmlSelect",configFields:[ft("options"),nc("selectBehaviours",[co,jt]),$e("selectClasses",[]),$e("selectAttributes",{}),zs("data")],factory:G9}),YM=(t,s,a,i,d)=>{const g=()=>t.lazySink(s),h=i.type==="horizontal"?{layouts:{onLtr:()=>Lg(),onRtl:()=>h2()}}:{},C=E=>E.length===2,w=E=>C(E)?h:{};return kp.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(hs.close(s),t.onEscape.map(E=>E(s)),k.some(!0)),onExecute:()=>k.some(!0),onOpenMenu:(E,D)=>{Ci.positionWithinBounds(g().getOrDie(),D,a,d())},onOpenSubmenu:(E,D,B,I)=>{const W=g().getOrDie();Ci.position(W,B,{anchor:{type:"submenu",item:D,...w(I)}})},onRepositionMenu:(E,D,B)=>{const I=g().getOrDie();Ci.positionWithinBounds(I,D,a,d()),ot(B,W=>{const V=w(W.triggeringPath);Ci.position(I,W.triggeredMenu,{anchor:{type:"submenu",item:W.triggeringItem,...V}})})}})},Y9=(t,s)=>{const a=(I,W)=>t.getRelated(I).exists(se=>C0(se,W)),i=(I,W)=>{hs.setContent(I,W)},d=(I,W,V)=>{const se=k.none;g(I,W,V,se)},g=(I,W,V,se)=>{const pe=t.lazySink(I).getOrDie();hs.openWhileCloaked(I,W,()=>Ci.positionWithinBounds(pe,I,V,se())),jt.setValue(I,k.some({mode:"position",config:V,getBounds:se}))},h=(I,W,V)=>{C(I,W,V,k.none)},C=(I,W,V,se)=>{const pe=YM(t,I,W,V,se);hs.open(I,pe),jt.setValue(I,k.some({mode:"menu",menu:pe}))},w=I=>{hs.isOpen(I)&&(jt.setValue(I,k.none()),hs.close(I))},E=I=>hs.getState(I),D=I=>{hs.isOpen(I)&&jt.getValue(I).each(W=>{switch(W.mode){case"menu":hs.getState(I).each(kp.repositionMenus);break;case"position":const V=t.lazySink(I).getOrDie();Ci.positionWithinBounds(V,I,W.config,W.getBounds());break}})},B={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:C,hide:w,getContent:E,reposition:D,isOpen:hs.isOpen};return{uid:t.uid,dom:t.dom,behaviours:oc(t.inlineBehaviours,[hs.config({isPartOf:(I,W,V)=>C0(W,V)||a(I,V),getAttachPoint:I=>t.lazySink(I).getOrDie(),onOpen:I=>{t.onShow(I)},onClose:I=>{t.onHide(I)}}),jt.config({store:{mode:"memory",initialValue:k.none()}}),tu.config({channels:{...r_({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({})}),...a_({...t.fireRepositionEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({}),doReposition:D})}})]),eventOrder:t.eventOrder,apis:B}},kr=eu({name:"InlineView",configFields:[ft("lazySink"),ls("onShow"),ls("onHide"),ud("onEscape"),nc("inlineBehaviours",[hs,jt,tu]),Xi("fireDismissalEventInstead",[$e("event",Ng())]),Xi("fireRepositionEventInstead",[$e("event",SS())]),$e("getRelated",k.none),$e("isExtraPart",Je),$e("eventOrder",k.none)],factory:Y9,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithinBounds:(t,s,a,i,d)=>{t.showWithinBounds(s,a,i,d)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,d)=>{t.showMenuWithinBounds(s,a,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}}),Hv=q([Mr("type","text"),zs("data"),$e("inputAttributes",{}),$e("inputStyles",{}),$e("tag","input"),$e("inputClasses",[]),ls("onSetValue"),Is("fromInputValue",Rt),Is("toInputValue",Rt),$e("styles",{}),$e("eventOrder",{}),nc("inputBehaviours",[jt,co]),$e("selectOnFocus",!0)]),XM=t=>Dt([co.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=ui(a);t.type!=="range"&&a.dom.setSelectionRange(0,i.length)}:ae})]),X9=t=>({...XM(t),...oc(t.inputBehaviours,[jt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>t.fromInputValue(ui(s.element)),setValue:(s,a)=>{ui(s.element)!==a&&Vl(s.element,t.toInputValue(a))}},onSetValue:t.onSetValue})])}),f_=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),JM=(t,s)=>({uid:t.uid,dom:f_(t),components:[],behaviours:X9(t),eventOrder:t.eventOrder}),sf=eu({name:"Input",configFields:Hv(),factory:JM}),VE=ya(Q3(),e_()),J9=(t,s)=>{const a=$a(t,"id").fold(()=>{const i=Z("dialog-label");return zn(s,"id",i),i},Rt);zn(t,"aria-labelledby",a)},Q9=q([ft("lazySink"),zs("dragBlockClass"),Is("getBounds",Vc),$e("useTabstopAt",rt),$e("firstTabstop",0),$e("eventOrder",{}),nc("modalBehaviours",[En]),va("onExecute"),kb("onEscape")]),g_={sketch:Rt},eH=q([tl({name:"draghandle",overrides:(t,s)=>({behaviours:Dt([g0.config({mode:"mouse",getTarget:a=>bl(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),vi({schema:[ft("dom")],name:"title"}),vi({factory:g_,schema:[ft("dom")],name:"close"}),vi({factory:g_,schema:[ft("dom")],name:"body"}),tl({factory:g_,schema:[ft("dom")],name:"footer"}),el({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[$e("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),$e("components",[])],name:"blocker"})]),tH=(t,s,a,i)=>{const d=Kn(),g=V=>{d.set(V);const se=t.lazySink(V).getOrDie(),pe=i.blocker(),re=se.getSystem().build({...pe,components:pe.components.concat([y(V)]),behaviours:Dt([co.config({}),ao("dialog-blocker-events",[Zg(Mu(),()=>{pt.isBlocked(V)?ae():En.focusIn(V)})])])});um(se,re),En.focusIn(V)},h=V=>{d.clear(),ci(V.element).each(se=>{V.getSystem().getByDom(se).each(pe=>{dm(pe)})})},C=V=>Uc(V,t,"body"),w=V=>Ts(V,t,"footer"),E=(V,se)=>{pt.block(V,se)},D=V=>{pt.unblock(V)},B=Z("modal-events"),I={...t.eventOrder,[dd()]:[B].concat(t.eventOrder["alloy.system.attached"]||[])},W=Nr();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:C,getFooter:w,setIdle:D,setBusy:E},eventOrder:I,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:oc(t.modalBehaviours,[io.config({}),En.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),pt.config({getRoot:d.get}),ao(B,[or(V=>{const se=Uc(V,t,"title").element,pe=Fy(se);W.os.isMacOS()&&In(pe)?zn(V.element,"aria-label",pe):J9(V.element,se)})])])}},Va=Pi({name:"ModalDialog",configFields:Q9(),partFields:eH(),factory:tH,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),QM=tl({schema:[ft("dom")],name:"label"}),wi=t=>tl({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:hr([ev(Im(),(d,g,h)=>i(d,h),[s]),ev(bi(),(d,g,h)=>i(d,h),[s]),ev(Bf(),(d,g,h)=>{h.mouseIsDown.get()&&i(d,h)},[s])])}))}),nH=wi("top-left"),h_=wi("top"),eF=wi("top-right"),tF=wi("right"),oH=wi("bottom-right"),nF=wi("bottom"),oF=wi("bottom-left"),sF=wi("left"),sH=vi({name:"thumb",defaults:q({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:hr([Zm(Im(),t,"spectrum"),Zm(Lm(),t,"spectrum"),Zm(kg(),t,"spectrum"),Zm(bi(),t,"spectrum"),Zm(Bf(),t,"spectrum"),Zm(Cb(),t,"spectrum")])})}),UE=t=>jg(t.event),rH=vi({schema:[Ac("mouseIsDown",()=>tn(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(h=>a.setValueFrom(d,t,h));return{behaviours:Dt([En.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,t,UE(g)),onRight:(d,g)=>a.onRight(d,t,UE(g)),onUp:(d,g)=>a.onUp(d,t,UE(g)),onDown:(d,g)=>a.onDown(d,t,UE(g))}),Ys.config({}),co.config({})]),events:hr([Ye(Im(),i),Ye(Lm(),i),Ye(bi(),i),Ye(Bf(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var aH=[QM,sF,tF,h_,nF,nH,eF,oF,oH,sH,rH];const NC=q("slider.change.value"),cH=t=>t.type.indexOf("touch")!==-1,WE=t=>{const s=t.event.raw;if(cH(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?k.some(a.touches[0]).map(i=>Ms(i.clientX,i.clientY)):k.none()}else{const a=s;return a.clientX!==void 0?k.some(a).map(i=>Ms(i.clientX,i.clientY)):k.none()}},rF="top",aF="right",cF="bottom",iH="left",w0=t=>t.model.minX,S0=t=>t.model.minY,PC=t=>t.model.minX-1,dh=t=>t.model.minY-1,Yf=t=>t.model.maxX,x0=t=>t.model.maxY,$C=t=>t.model.maxX+1,IC=t=>t.model.maxY+1,p_=(t,s,a)=>s(t)-a(t),ZE=t=>p_(t,Yf,w0),LC=t=>p_(t,x0,S0),jE=t=>ZE(t)/2,iF=t=>LC(t)/2,zv=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,lF=t=>t.snapToGrid,b_=t=>t.snapStart,v_=t=>t.rounded,qE=(t,s)=>t[s+"-edge"]!==void 0,uF=t=>qE(t,iH),y_=t=>qE(t,aF),dF=t=>qE(t,rF),mF=t=>qE(t,cF),mh=t=>t.model.value.get(),Dp=(t,s)=>({x:t,y:s}),vm=(t,s)=>{Bn(t,NC(),{value:s})},lH=(t,s)=>{vm(t,Dp(PC(s),dh(s)))},uH=(t,s)=>{vm(t,dh(s))},fF=(t,s)=>{vm(t,Dp(jE(s),dh(s)))},gF=(t,s)=>{vm(t,Dp($C(s),dh(s)))},dH=(t,s)=>{vm(t,$C(s))},mH=(t,s)=>{vm(t,Dp($C(s),iF(s)))},fH=(t,s)=>{vm(t,Dp($C(s),IC(s)))},hF=(t,s)=>{vm(t,IC(s))},gH=(t,s)=>{vm(t,Dp(jE(s),IC(s)))},hH=(t,s)=>{vm(t,Dp(PC(s),IC(s)))},pH=(t,s)=>{vm(t,PC(s))},GE=(t,s)=>{vm(t,Dp(PC(s),iF(s)))},C_=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),w_=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),pF=(t,s,a)=>Math.max(s,Math.min(a,t)),bH=(t,s,a,i,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/i)*i;return pF(s+h,s-1,a+1)},g=>{const h=(t-g)%i,C=Math.round(h/i),w=Math.floor((t-g)/i),E=Math.floor((a-g)/i),D=Math.min(E,w+C),B=g+D*i;return Math.max(g,B)}),vH=(t,s,a)=>Math.min(a,Math.max(t,s))-s,bF=t=>{const{min:s,max:a,range:i,value:d,step:g,snap:h,snapStart:C,rounded:w,hasMinEdge:E,hasMaxEdge:D,minBound:B,maxBound:I,screenRange:W}=t,V=E?s-1:s,se=D?a+1:a;if(d<B)return V;if(d>I)return se;{const pe=vH(d,B,I),re=pF(pe/W*i+s,V,se);return h&&re>=s&&re<=a?bH(re,s,a,g,C):w?Math.round(re):re}},vF=t=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:C,maxOffset:w,centerMinEdge:E,centerMaxEdge:D}=t;return d<s?g?0:E:d>a?h?C:D:(d-s)/i*w},S_="top",yF="right",CF="bottom",x_="left",yH="width",CH="height",ym=t=>t.element.dom.getBoundingClientRect(),Cm=(t,s)=>t[s],KE=t=>{const s=ym(t);return Cm(s,x_)},wF=t=>{const s=ym(t);return Cm(s,yF)},HC=t=>{const s=ym(t);return Cm(s,S_)},SF=t=>{const s=ym(t);return Cm(s,CF)},xF=t=>{const s=ym(t);return Cm(s,yH)},EF=t=>{const s=ym(t);return Cm(s,CH)},TF=(t,s,a)=>(t+s)/2-a,AF=(t,s)=>{const a=ym(t),i=ym(s),d=Cm(a,x_),g=Cm(a,yF),h=Cm(i,x_);return TF(d,g,h)},kF=(t,s)=>{const a=ym(t),i=ym(s),d=Cm(a,S_),g=Cm(a,CF),h=Cm(i,S_);return TF(d,g,h)},Vv=(t,s)=>{Bn(t,NC(),{value:s})},E_=(t,s,a)=>{const i={min:w0(s),max:Yf(s),range:ZE(s),value:a,step:zv(s),snap:lF(s),snapStart:b_(s),rounded:v_(s),hasMinEdge:uF(s),hasMaxEdge:y_(s),minBound:KE(t),maxBound:wF(t),screenRange:xF(t)};return bF(i)},wH=(t,s,a)=>{const i=E_(t,s,a);return Vv(t,i),i},SH=(t,s)=>{const a=w0(s);Vv(t,a)},xH=(t,s)=>{const a=Yf(s);Vv(t,a)},EH=(t,s,a,i)=>{const g=(t>0?w_:C_)(mh(a),w0(a),Yf(a),zv(a,i));return Vv(s,g),k.some(g)},_F=t=>(s,a,i)=>EH(t,s,a,i).map(rt),TH=t=>WE(t).map(a=>a.left),AH=(t,s,a,i,d)=>{const h=xF(t),C=i.bind(D=>k.some(AF(D,t))).getOr(0),w=d.bind(D=>k.some(AF(D,t))).getOr(h),E={min:w0(s),max:Yf(s),range:ZE(s),value:a,hasMinEdge:uF(s),hasMaxEdge:y_(s),minBound:KE(t),maxBound:wF(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:w};return vF(E)},T_=(t,s,a,i,d,g)=>{const h=AH(s,g,a,i,d);return KE(s)-KE(t)+h},kH=(t,s,a,i)=>{const d=mh(a),g=T_(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),a),h=Xa(s.element)/2;Jn(s.element,"left",g-h+"px")},_H=_F(-1),DH=_F(1),OH=k.none,RH=k.none,BH={"top-left":k.none(),top:k.none(),"top-right":k.none(),right:k.some(dH),"bottom-right":k.none(),bottom:k.none(),"bottom-left":k.none(),left:k.some(pH)};var A_=Object.freeze({__proto__:null,setValueFrom:wH,setToMin:SH,setToMax:xH,findValueOfOffset:E_,getValueFromEvent:TH,findPositionOfValue:T_,setPositionFromValue:kH,onLeft:_H,onRight:DH,onUp:OH,onDown:RH,edgeActions:BH});const YE=(t,s)=>{Bn(t,NC(),{value:s})},k_=(t,s,a)=>{const i={min:S0(s),max:x0(s),range:LC(s),value:a,step:zv(s),snap:lF(s),snapStart:b_(s),rounded:v_(s),hasMinEdge:dF(s),hasMaxEdge:mF(s),minBound:HC(t),maxBound:SF(t),screenRange:EF(t)};return bF(i)},MH=(t,s,a)=>{const i=k_(t,s,a);return YE(t,i),i},zC=(t,s)=>{const a=S0(s);YE(t,a)},DF=(t,s)=>{const a=x0(s);YE(t,a)},FH=(t,s,a,i)=>{const g=(t>0?w_:C_)(mh(a),S0(a),x0(a),zv(a,i));return YE(s,g),k.some(g)},OF=t=>(s,a,i)=>FH(t,s,a,i).map(rt),RF=t=>WE(t).map(a=>a.top),NH=(t,s,a,i,d)=>{const h=EF(t),C=i.bind(D=>k.some(kF(D,t))).getOr(0),w=d.bind(D=>k.some(kF(D,t))).getOr(h),E={min:S0(s),max:x0(s),range:LC(s),value:a,hasMinEdge:dF(s),hasMaxEdge:mF(s),minBound:HC(t),maxBound:SF(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:w};return vF(E)},__=(t,s,a,i,d,g)=>{const h=NH(s,g,a,i,d);return HC(s)-HC(t)+h},PH=(t,s,a,i)=>{const d=mh(a),g=__(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),a),h=ea(s.element)/2;Jn(s.element,"top",g-h+"px")},$H=k.none,IH=k.none,LH=OF(-1),HH=OF(1),zH={"top-left":k.none(),top:k.some(uH),"top-right":k.none(),right:k.none(),"bottom-right":k.none(),bottom:k.some(hF),"bottom-left":k.none(),left:k.none()};var BF=Object.freeze({__proto__:null,setValueFrom:MH,setToMin:zC,setToMax:DF,findValueOfOffset:k_,getValueFromEvent:RF,findPositionOfValue:__,setPositionFromValue:PH,onLeft:$H,onRight:IH,onUp:LH,onDown:HH,edgeActions:zH});const VC=(t,s)=>{Bn(t,NC(),{value:s})},XE=(t,s)=>({x:t,y:s}),MF=(t,s,a)=>{const i=E_(t,s,a.left),d=k_(t,s,a.top),g=XE(i,d);return VC(t,g),g},FF=(t,s,a,i,d)=>{const g=t>0?w_:C_,h=s?mh(i).x:g(mh(i).x,w0(i),Yf(i),zv(i,d)),C=s?g(mh(i).y,S0(i),x0(i),zv(i,d)):mh(i).y;return VC(a,XE(h,C)),k.some(h)},UC=(t,s)=>(a,i,d)=>FF(t,s,a,i,d).map(rt),NF=(t,s)=>{const a=w0(s),i=S0(s);VC(t,XE(a,i))},VH=(t,s)=>{const a=Yf(s),i=x0(s);VC(t,XE(a,i))},UH=t=>WE(t),WH=(t,s,a,i)=>{const d=mh(a),g=T_(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),a),h=__(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),a),C=Xa(s.element)/2,w=ea(s.element)/2;Jn(s.element,"left",g-C+"px"),Jn(s.element,"top",h-w+"px")},ZH=UC(-1,!1),D_=UC(1,!1),PF=UC(-1,!0),jH=UC(1,!0),$F={"top-left":k.some(lH),top:k.some(fF),"top-right":k.some(gF),right:k.some(mH),"bottom-right":k.some(fH),bottom:k.some(gH),"bottom-left":k.some(hH),left:k.some(GE)};var qH=Object.freeze({__proto__:null,setValueFrom:MF,setToMin:NF,setToMax:VH,getValueFromEvent:UH,setPositionFromValue:WH,onLeft:ZH,onRight:D_,onUp:PF,onDown:jH,edgeActions:$F});const GH=[$e("stepSize",1),$e("speedMultiplier",10),$e("onChange",ae),$e("onChoose",ae),$e("onInit",ae),$e("onDragStart",ae),$e("onDragEnd",ae),$e("snapToGrid",!1),$e("rounded",!0),zs("snapStart"),wl("model",hi("mode",{x:[$e("minX",0),$e("maxX",100),Ac("value",t=>tn(t.mode.minX)),ft("getInitialValue"),fr("manager",A_)],y:[$e("minY",0),$e("maxY",100),Ac("value",t=>tn(t.mode.minY)),ft("getInitialValue"),fr("manager",BF)],xy:[$e("minX",0),$e("maxX",100),$e("minY",0),$e("maxY",100),Ac("value",t=>tn({x:t.mode.minX,y:t.mode.minY})),ft("getInitialValue"),fr("manager",qH)]})),nc("sliderBehaviours",[En,jt]),Ac("mouseIsDown",()=>tn(!1))],kd=Pi({name:"Slider",configFields:GH,partFields:aH,factory:(t,s,a,i)=>{const d=Ue=>Uc(Ue,t,"thumb"),g=Ue=>Uc(Ue,t,"spectrum"),h=Ue=>Ts(Ue,t,"left-edge"),C=Ue=>Ts(Ue,t,"right-edge"),w=Ue=>Ts(Ue,t,"top-edge"),E=Ue=>Ts(Ue,t,"bottom-edge"),D=t.model,B=D.manager,I=(Ue,Wt)=>{B.setPositionFromValue(Ue,Wt,t,{getLeftEdge:h,getRightEdge:C,getTopEdge:w,getBottomEdge:E,getSpectrum:g})},W=(Ue,Wt)=>{D.value.set(Wt);const vt=d(Ue);I(Ue,vt)},V=(Ue,Wt)=>{W(Ue,Wt);const vt=d(Ue);return t.onChange(Ue,vt,Wt),k.some(!0)},se=Ue=>{B.setToMin(Ue,t)},pe=Ue=>{B.setToMax(Ue,t)},re=Ue=>{const Wt=()=>{Ts(Ue,t,"thumb").each(Ct=>{const gt=D.value.get();t.onChoose(Ue,Ct,gt)})},vt=t.mouseIsDown.get();t.mouseIsDown.set(!1),vt&&Wt()},we=(Ue,Wt)=>{Wt.stop(),t.mouseIsDown.set(!0),t.onDragStart(Ue,d(Ue))},Te=(Ue,Wt)=>{Wt.stop(),t.onDragEnd(Ue,d(Ue)),re(Ue)},ze=Ue=>{Ts(Ue,t,"spectrum").map(En.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:oc(t.sliderBehaviours,[En.config({mode:"special",focusIn:ze}),jt.config({store:{mode:"manual",getValue:Ue=>D.value.get(),setValue:W}}),tu.config({channels:{[sm()]:{onReceive:re}}})]),events:hr([Ye(NC(),(Ue,Wt)=>{V(Ue,Wt.event.value)}),or((Ue,Wt)=>{const vt=D.getInitialValue();D.value.set(vt);const Ct=d(Ue);I(Ue,Ct);const gt=g(Ue);t.onInit(Ue,Ct,gt,D.value.get())}),Ye(Im(),we),Ye(kg(),Te),Ye(bi(),(Ue,Wt)=>{ze(Ue),we(Ue,Wt)}),Ye(Cb(),Te)]),apis:{resetToMin:se,resetToMax:pe,setValue:W,refresh:I},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),O_="container",IF=[nc("slotBehaviours",[])],LF=t=>"<alloy.field."+t+">",KH=t=>{const s=(()=>{const g=[];return{slot:(C,w)=>(g.push(C),Bi(O_,LF(C),w)),record:q(g)}})(),a=t(s),i=s.record(),d=Oe(i,g=>vi({name:g,pname:LF(g)}));return V4(O_,IF,d,YH,a)},YH=(t,s)=>{const a=se=>Lb(t),i=(se,pe)=>Ts(se,t,pe),d=(se,pe)=>(re,we)=>Ts(re,t,we).map(Te=>se(Te,we)).getOr(pe),g=se=>(pe,re)=>{ot(re,we=>se(pe,we))},h=(se,pe)=>ha(se.element,"aria-hidden")!=="true",C=(se,pe)=>{if(!h(se)){const re=se.element;Wo(re,"display"),tr(re,"aria-hidden"),Bn(se,x1(),{name:pe,visible:!0})}},w=(se,pe)=>{if(h(se)){const re=se.element;Jn(re,"display","none"),zn(re,"aria-hidden","true"),Bn(se,x1(),{name:pe,visible:!1})}},E=d(h,!1),D=d(w),B=g(D),I=se=>B(se,a()),W=d(C),V={getSlotNames:a,getSlot:i,isShowing:E,hideSlot:D,hideAllSlots:I,showSlot:W};return{uid:t.uid,dom:t.dom,components:s,behaviours:hC(t.slotBehaviours),apis:V}},Si={...Ke({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>Ym(t)),sketch:KH},XH=(t,s)=>yo(t,(d,g)=>s(g,d.len).fold(q(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,R_=(t,s,a)=>({within:t,extra:s,withinWidth:a}),HF=(t,s,a)=>{const i=XH(t,(C,w)=>{const E=a(C);return k.some({element:C,start:w,finish:w+E,width:E})}),d=jn(i,C=>C.finish<=s),g=qn(d,(C,w)=>C+w.width,0),h=i.slice(d.length);return{within:d,extra:h,withinWidth:g}},JE=t=>Oe(t,s=>s.element),JH=(t,s,a)=>{const i=JE(t.concat(s));return R_(i,[],a)},QH=(t,s,a,i)=>{const d=JE(t).concat([a]);return R_(d,JE(s),i)},zF=(t,s,a)=>R_(JE(t),[],a),ez=(t,s,a)=>{const i=HF(s,t,a);return i.extra.length===0?k.some(i):k.none()},tz=(t,s,a,i)=>{const d=ez(t,s,a).getOrThunk(()=>HF(s,t-a(i),a)),g=d.within,h=d.extra,C=d.withinWidth;return h.length===1&&h[0].width<=a(i)?JH(g,h,C):h.length>=1?QH(g,h,i,C):zF(g,h,C)},VF=(t,s)=>{const a=Oe(s,i=>y(i));As.setGroups(t,a)},nz=t=>_o(t,s=>Vr(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),UF=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Uc(t,s,"primary"),g=xo.getCoupled(t,"overflowGroup");Jn(d.element,"visibility","hidden");const h=i.concat([g]),C=nz(h);a([]),VF(d,h);const w=Xa(d.element),E=tz(w,s.builtGroups.get(),D=>Math.ceil(D.element.dom.getBoundingClientRect().width),g);E.extra.length===0?(io.remove(d,g),a([])):(VF(d,E.within),a(E.extra)),Wo(d.element,"visibility"),pl(d.element),C.each(co.focus)},WC=q([nc("splitToolbarBehaviours",[xo]),Ac("builtGroups",()=>tn([]))]),WF=q([ql(["overflowToggledClass"]),ud("getOverflowBounds"),ft("lazySink"),Ac("overflowGroups",()=>tn([])),ls("onOpened"),ls("onClosed")].concat(WC())),oz=q([vi({factory:As,schema:ti(),name:"primary"}),el({schema:ti(),name:"overflow"}),el({name:"overflow-button"}),el({name:"overflow-group"})]),sz=q([ft("items"),ql(["itemSelector"]),nc("tgroupBehaviours",[En])]),rz=q([Pb({name:"items",unit:"item"})]),az=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:oc(t.tgroupBehaviours,[En.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),QE=Pi({name:"ToolbarGroup",configFields:sz(),partFields:rz(),factory:az}),ZF=t=>Oe(t,s=>y(s)),eT=(t,s,a)=>{UF(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(d=>{uh.setGroups(d,ZF(i))})})},jF=(t,s,a,i)=>{const d=ps(uh.sketch({fetch:()=>rs.nu(g=>{g(ZF(t.overflowGroups.get()))}),layouts:{onLtr:()=>[gr,Ca],onRtl:()=>[Ca,gr],onBottomLtr:()=>[Ra,hc],onBottomRtl:()=>[hc,Ra]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:oc(t.splitToolbarBehaviours,[xo.config({others:{overflowGroup:()=>QE.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(Oe(h,g.getSystem().build)),eT(g,d,t)},refresh:g=>eT(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{uh.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(uh.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(uh.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{uh.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(uh.getToolbar)},domModification:{attributes:{role:"group"}}}},B_=Pi({name:"SplitFloatingToolbar",configFields:WF(),partFields:oz(),factory:jF,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),cz=q([ql(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),ls("onOpened"),ls("onClosed")].concat(WC())),qF=q([vi({factory:As,schema:ti(),name:"primary"}),vi({factory:As,schema:ti(),name:"overflow",overrides:t=>({toolbarBehaviours:Dt([sl.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Ts(s,t,"overflow-button").each(a=>{ts.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{Ts(s,t,"overflow-button").each(ts.on)}}),En.config({mode:"acyclic",onEscape:s=>(Ts(s,t,"overflow-button").each(co.focus),k.some(!0))})])})}),el({name:"overflow-button",overrides:t=>({buttonBehaviours:Dt([ts.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),el({name:"overflow-group"})]),iz=(t,s)=>Ts(t,s,"overflow").map(sl.hasGrown).getOr(!1),M_=(t,s,a)=>{Ts(t,s,"overflow-button").each(i=>{Ts(t,s,"overflow").each(d=>{if(F_(t,s),sl.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{a||En.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{a||co.focus(i),g(h),s.onClosed=g}}sl.toggleGrow(d)})})},F_=(t,s)=>{Ts(t,s,"overflow").each(a=>{UF(t,s,i=>{const d=Oe(i,g=>y(g));As.setGroups(a,d)}),Ts(t,s,"overflow-button").each(i=>{sl.hasGrown(a)&&ts.on(i)}),sl.refresh(a)})},lz=(t,s,a,i)=>{const d="alloy.toolbar.toggle",g=(h,C)=>{const w=Oe(C,h.getSystem().build);t.builtGroups.set(w)};return{uid:t.uid,dom:t.dom,components:s,behaviours:oc(t.splitToolbarBehaviours,[xo.config({others:{overflowGroup:h=>QE.sketch({...i["overflow-group"](),items:[ei.sketch({...i["overflow-button"](),action:C=>{zo(h,d)}})]})}}),ao("toolbar-toggle-events",[Ye(d,h=>{M_(h,t,!1)})])]),apis:{setGroups:(h,C)=>{g(h,C),F_(h,t)},refresh:h=>F_(h,t),toggle:h=>{M_(h,t,!1)},toggleWithoutFocusing:h=>{M_(h,t,!0)},isOpen:h=>iz(h,t)},domModification:{attributes:{role:"group"}}}},N_=Pi({name:"SplitSlidingToolbar",configFields:cz(),partFields:qF(),factory:lz,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),uz=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:PE(t.action),behaviours:oc(t.tabButtonBehaviours,[co.config({}),En.config({mode:"execution",useSpace:!0,useEnter:!0}),jt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),dz=eu({name:"TabButton",configFields:[$e("uid",void 0),ft("value"),La("dom","dom",Gd(()=>({attributes:{role:"tab",id:Z("aria"),"aria-selected":"false"}})),St()),zs("action"),$e("domModification",{}),nc("tabButtonBehaviours",[co,En,jt]),ft("view")],factory:uz}),mz=q([ft("tabs"),ft("dom"),$e("clickToDismiss",!1),nc("tabbarBehaviours",[ws,En]),ql(["tabClass","selectedClass"])]),fz=Pb({factory:dz,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{ws.dehighlight(i,d),Bn(i,Tb(),{tabbar:i,button:d})},a=(i,d)=>{ws.highlight(i,d),Bn(i,ES(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=ws.isHighlighted(d,i);(g&&t.clickToDismiss?s:g?ae:a)(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),gz=q([fz]),tT=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:oc(t.tabbarBehaviours,[ws.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{zn(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{zn(g.element,"aria-selected","false")}}),En.config({mode:"flow",getInitial:d=>ws.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),nT=Pi({name:"Tabbar",configFields:mz(),partFields:gz(),factory:tT}),P_=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:oc(t.tabviewBehaviours,[io.config({})]),domModification:{attributes:{role:"tabpanel"}}}),GF=eu({name:"Tabview",configFields:[nc("tabviewBehaviours",[io])],factory:P_}),hz=q([$e("selectFirst",!0),ls("onChangeTab"),ls("onDismissTab"),$e("tabs",[]),nc("tabSectionBehaviours",[])]),pz=vi({factory:nT,schema:[ft("dom"),Pm("markers",[ft("tabClass"),ft("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),$_=vi({factory:GF,name:"tabview"}),I_=q([pz,$_]),oT=(t,s,a,i)=>{const d=h=>{const C=jt.getValue(h);Ts(h,t,"tabview").each(w=>{j(t.tabs,D=>D.value===C).each(D=>{const B=D.view();$a(h.element,"id").each(I=>{zn(w.element,"aria-labelledby",I)}),io.set(w,B),t.onChangeTab(w,h,B)})})},g=(h,C)=>{Ts(h,t,"tabbar").each(w=>{C(w).each($1)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:hC(t.tabSectionBehaviours),events:hr(de([t.selectFirst?[or((h,C)=>{g(h,ws.getFirst)})]:[],[Ye(ES(),(h,C)=>{const w=C.event.button;d(w)}),Ye(Tb(),(h,C)=>{const w=C.event.button;t.onDismissTab(h,w)})]])),apis:{getViewItems:h=>Ts(h,t,"tabview").map(C=>io.contents(C)).getOr([]),showTab:(h,C)=>{g(h,E=>{const D=ws.getCandidates(E);return j(D,I=>jt.getValue(I)===C).filter(I=>!ws.isHighlighted(E,I))})}}}},E0=Pi({name:"TabSection",configFields:hz(),partFields:I_(),factory:oT,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),sT=(t,s,a)=>{const i=jt.getValue(a);jt.setValue(s,i),YF(s)},KF=(t,s)=>{const a=t.element,i=ui(a),d=a.dom;ha(a,"type")!=="number"&&s(d,i)},YF=t=>{KF(t,(s,a)=>s.setSelectionRange(a.length,a.length))},bz=(t,s)=>{KF(t,(a,i)=>a.setSelectionRange(s,i.length))},vz=(t,s,a)=>{if(t.selectsOver){const i=jt.getValue(s),d=t.getDisplayText(i),g=jt.getValue(a);return t.getDisplayText(g).indexOf(d)===0?k.some(()=>{sT(t,s,a),bz(s,d.length)}):k.none()}else return k.none()},L_=q("alloy.typeahead.itemexecute"),yz=(t,s,a,i)=>{const d=(B,I,W)=>{t.previewing.set(!1);const V=xo.getCoupled(B,"sandbox");if(hs.isOpen(V))Qe.getCurrent(V).each(se=>{ws.getHighlighted(se).fold(()=>{W(se)},()=>{x2(V,se.element,"keydown",I)})});else{const se=pe=>{Qe.getCurrent(pe).each(W)};LE(t,h(B),B,V,i,se,Zc.HighlightMenuAndItem).get(ae)}},g=XM(t),h=B=>I=>I.map(W=>{const V=Xs(W.menus),se=ne(V,re=>jn(re.items,we=>we.type==="item"));return jt.getState(B).update(Oe(se,re=>re.data)),W}),C=B=>Qe.getCurrent(B),w="typeaheadevents",E=[co.config({}),jt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:B=>ui(B.element),getFallbackEntry:B=>({value:B,meta:{}}),setValue:(B,I)=>{Vl(B.element,t.model.getDisplayText(I))},...t.initialData.map(B=>$m("initialValue",B)).getOr({})}}),F3.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(B,I)=>{const W=xo.getCoupled(B,"sandbox");if(co.isFocused(B)&&ui(B.element).length>=t.minChars){const se=C(W).bind(re=>ws.getHighlighted(re).map(jt.getValue));t.previewing.set(!0);const pe=re=>{C(W).each(we=>{se.fold(()=>{t.model.selectsOver&&ws.highlightFirst(we)},Te=>{ws.highlightBy(we,ze=>jt.getValue(ze).value===Te.value),ws.getHighlighted(we).orThunk(()=>(ws.highlightFirst(we),k.none()))})})};LE(t,h(B),B,W,i,pe,Zc.HighlightJustMenu).get(ae)}},cancelEvent:xb()}),En.config({mode:"special",onDown:(B,I)=>(d(B,I,ws.highlightFirst),k.some(!0)),onEscape:B=>{const I=xo.getCoupled(B,"sandbox");return hs.isOpen(I)?(hs.close(I),k.some(!0)):k.none()},onUp:(B,I)=>(d(B,I,ws.highlightLast),k.some(!0)),onEnter:B=>{const I=xo.getCoupled(B,"sandbox"),W=hs.isOpen(I);if(W&&!t.previewing.get())return C(I).bind(V=>ws.getHighlighted(V)).map(V=>(Bn(B,L_(),{item:V}),!0));{const V=jt.getValue(B);return zo(B,xb()),t.onExecute(I,B,V),W&&hs.close(I),k.some(!0)}}}),ts.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),xo.config({others:{sandbox:B=>HE(t,B,{onOpen:()=>ts.on(B),onClose:()=>{t.lazyTypeaheadComp.get().each(I=>tr(I.element,"aria-activedescendant")),ts.off(B)}})}}),ao(w,[or(B=>{t.lazyTypeaheadComp.set(k.some(B))}),vd(B=>{t.lazyTypeaheadComp.set(k.none())}),jm(B=>{const I=ae;UM(t,h(B),B,i,I,Zc.HighlightMenuAndItem).get(ae)}),Ye(L_(),(B,I)=>{const W=xo.getCoupled(B,"sandbox");sT(t.model,B,I.event.item),zo(B,xb()),t.onItemExecute(B,W,I.event.item,jt.getValue(B)),hs.close(W),YF(B)})].concat(t.dismissOnBlur?[Ye(Fu(),B=>{const I=xo.getCoupled(B,"sandbox");Vr(I.element).isNone()&&hs.close(I)})]:[]))],D={[zm()]:[jt.name(),F3.name(),w],...t.eventOrder};return{uid:t.uid,dom:f_(yt(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...oc(t.typeaheadBehaviours,E)},eventOrder:D}},Cz=q([zs("lazySink"),ft("fetch"),$e("minChars",5),$e("responseTime",1e3),ls("onOpen"),$e("getHotspot",k.some),$e("getAnchorOverrides",q({})),$e("layouts",k.none()),$e("eventOrder",{}),e2("model",{},[$e("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),$e("selectsOver",!0),$e("populateFromBrowse",!0)]),ls("onSetValue"),va("onExecute"),ls("onItemExecute"),$e("inputClasses",[]),$e("inputAttributes",{}),$e("inputStyles",{}),$e("matchWidth",!0),$e("useMinWidth",!1),$e("dismissOnBlur",!0),ql(["openClass"]),zs("initialData"),zs("listRole"),nc("typeaheadBehaviours",[co,jt,F3,En,ts,xo]),Ac("lazyTypeaheadComp",()=>tn(k.none)),Ac("previewing",()=>tn(!0))].concat(Hv()).concat(DC())),wz=q([el({schema:[OS()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{vz(t.model,d,i).fold(()=>{t.model.selectsOver?(ws.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},(g=>{g(),t.previewing.set(!1)}))}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&sT(t.model,d,i),$a(i.element,"id").each(g=>zn(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(Bn(i,L_(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&sT(t.model,i,a)})}})})]),Sz=Pi({name:"Typeahead",configFields:Cz(),partFields:wz(),factory:yz});var xz=tinymce.util.Tools.resolve("tinymce.ThemeManager"),rT=tinymce.util.Tools.resolve("tinymce.util.Delay"),ZC=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),XF=tinymce.util.Tools.resolve("tinymce.EditorManager"),Uv=tinymce.util.Tools.resolve("tinymce.Env"),Vu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Vu||(Vu={}));var Uu;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Uu||(Uu={}));const js=t=>s=>s.options.get(t),jC=t=>s=>k.from(t(s)),aT=t=>{const s=Uv.deviceType.isPhone(),a=Uv.deviceType.isTablet()||s,i=t.options.register,d=h=>ct(h)||h===!1,g=h=>ct(h)||Oo(h);i("skin",{processor:h=>ct(h)||h===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:ZC.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:h=>ct(h)||Tt(h),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:h=>Tt(h)||ct(h)||qo(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Ve(9,h=>{i("toolbar"+(h+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:Uu.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:h=>h==="both"||Tt(h),default:!Uv.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},Ua=js("readonly"),cT=js("disabled"),H_=js("height"),z_=js("width"),V_=jC(js("min_width")),U_=jC(js("min_height")),iT=jC(js("max_width")),W_=jC(js("max_height")),JF=jC(js("style_formats")),QF=js("style_formats_merge"),e6=js("style_formats_autohide"),t6=js("content_langs"),n6=js("removed_menuitems"),T0=js("toolbar_mode"),o6=js("toolbar_groups"),Z_=js("toolbar_location"),Ez=js("fixed_toolbar_container"),Tz=js("fixed_toolbar_container_target"),s6=js("toolbar_persist"),r6=js("toolbar_sticky_offset"),a6=js("menubar"),lT=js("toolbar"),c6=js("file_picker_callback"),i6=js("file_picker_validator_handler"),l6=js("font_size_input_default_unit"),u6=js("file_picker_types"),j_=js("typeahead_urls"),d6=js("anchor_top"),q_=js("anchor_bottom"),m6=js("draggable_modal"),G_=js("statusbar"),f6=js("elementpath"),uT=js("branding"),g6=js("resize"),h6=js("paste_as_text"),p6=js("sidebar_show"),b6=js("promotion"),v6=js("help_accessibility"),y6=js("default_font_stack"),C6=js("skin"),K_=t=>t.options.get("skin")===!1,dT=t=>t.options.get("menubar")!==!1,w6=t=>{const s=t.options.get("skin_url");if(K_(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return XF.baseURL+"/skins/ui/"+a}},Az=t=>k.from(t.options.get("skin_url")),S6=t=>t.options.get("line_height_formats").split(" "),mT=t=>{const s=lT(t),a=ct(s),i=qo(s)&&s.length>0;return!qC(t)&&(i||a||s===!0)},fT=t=>{const s=Ve(9,i=>t.options.get("toolbar"+(i+1))),a=jn(s,ct);return Er(a.length>0,a)},qC=t=>fT(t).fold(()=>{const s=lT(t);return _t(s,ct)&&s.length>0},rt),Y_=t=>Z_(t)===Uu.bottom,x6=t=>{var s;if(!t.inline)return k.none();const a=(s=Ez(t))!==null&&s!==void 0?s:"";if(a.length>0)return Fs(Di(),a);const i=Tz(t);return In(i)?k.some(Nt.fromDom(i)):k.none()},Wv=t=>t.inline&&x6(t).isSome(),X_=t=>x6(t).getOrThunk(()=>Pl(Xr(Nt.fromDom(t.getElement())))),GC=t=>t.inline&&!dT(t)&&!mT(t)&&!qC(t),fh=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Wv(t)&&!GC(t),Op=t=>!Wv(t)&&t.options.get("ui_mode")==="split",KC=t=>{const s=t.options.get("menu");return Ke(s,a=>({...a,items:a.items}))};var kz=Object.freeze({__proto__:null,get ToolbarMode(){return Vu},get ToolbarLocation(){return Uu},register:aT,getSkinUrl:w6,getSkinUrlOption:Az,isReadOnly:Ua,isDisabled:cT,getSkin:C6,isSkinDisabled:K_,getHeightOption:H_,getWidthOption:z_,getMinWidthOption:V_,getMinHeightOption:U_,getMaxWidthOption:iT,getMaxHeightOption:W_,getUserStyleFormats:JF,shouldMergeStyleFormats:QF,shouldAutoHideStyleFormats:e6,getLineHeightFormats:S6,getContentLanguages:t6,getRemovedMenuItems:n6,isMenubarEnabled:dT,isMultipleToolbars:qC,isToolbarEnabled:mT,isToolbarPersist:s6,getMultipleToolbarsOption:fT,getUiContainer:X_,useFixedContainer:Wv,isSplitUiMode:Op,getToolbarMode:T0,isDraggableModal:m6,isDistractionFree:GC,isStickyToolbar:fh,getStickyToolbarOffset:r6,getToolbarLocation:Z_,isToolbarLocationBottom:Y_,getToolbarGroups:o6,getMenus:KC,getMenubar:a6,getToolbar:lT,getFilePickerCallback:c6,getFilePickerTypes:u6,useTypeaheadUrls:j_,getAnchorTop:d6,getAnchorBottom:q_,getFilePickerValidatorHandler:i6,getFontSizeInputDefaultUnit:l6,useStatusBar:G_,useElementPath:f6,promotionEnabled:b6,useBranding:uT,getResize:g6,getPasteAsText:h6,getSidebarShow:p6,useHelpAccessibility:v6,getDefaultFontStack:y6});const _z=["visible","hidden","clip"],E6=t=>Ut(t).length>0&&!dt(_z,t),T6=t=>{if(oe(t)){const s=nr(t,"overflow-x"),a=nr(t,"overflow-y");return E6(s)||E6(a)}else return!1},Dz=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),gT=(t,s)=>{const a=Zr(s,T6),i=a.length===0?Tr(s).map(Es).map(d=>Zr(d,T6)).getOr([]):a;return Gt(i).map(d=>({element:d,others:i.slice(1),isFullscreen:()=>Dz(t)}))},_d=(t,s)=>Op(t)?gT(t,s):k.none(),Rp=t=>{const s=[...Oe(t.others,sa),Vc()];return t.isFullscreen()?Vc():lb(sa(t.element),s)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:J_,setPrototypeOf:A6,isFrozen:Oz,getPrototypeOf:Rz,getOwnPropertyDescriptor:Bz}=Object;let{freeze:au,seal:wm,create:k6}=Object,{apply:Q_,construct:eD}=typeof Reflect<"u"&&Reflect;au||(au=function(s){return s}),wm||(wm=function(s){return s}),Q_||(Q_=function(s,a,i){return s.apply(a,i)}),eD||(eD=function(s,a){return new s(...a)});const hT=iu(Array.prototype.forEach),Mz=iu(Array.prototype.lastIndexOf),tD=iu(Array.prototype.pop),Xf=iu(Array.prototype.push),A0=iu(Array.prototype.splice),pT=iu(String.prototype.toLowerCase),bT=iu(String.prototype.toString),nD=iu(String.prototype.match),Bp=iu(String.prototype.replace),Fz=iu(String.prototype.indexOf),Zv=iu(String.prototype.trim),_l=iu(Object.prototype.hasOwnProperty),cu=iu(RegExp.prototype.test),YC=Nz(TypeError);function iu(t){return function(s){s instanceof RegExp&&(s.lastIndex=0);for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return Q_(t,s,i)}}function Nz(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return eD(t,a)}}function sr(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pT;A6&&A6(t,null);let i=s.length;for(;i--;){let d=s[i];if(typeof d=="string"){const g=a(d);g!==d&&(Oz(s)||(s[i]=g),d=g)}t[d]=!0}return t}function Pz(t){for(let s=0;s<t.length;s++)_l(t,s)||(t[s]=null);return t}function gh(t){const s=k6(null);for(const[a,i]of J_(t))_l(t,a)&&(Array.isArray(i)?s[a]=Pz(i):i&&typeof i=="object"&&i.constructor===Object?s[a]=gh(i):s[a]=i);return s}function Mp(t,s){for(;t!==null;){const i=Bz(t,s);if(i){if(i.get)return iu(i.get);if(typeof i.value=="function")return iu(i.value)}t=Rz(t)}function a(){return null}return a}const oD=au(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),sD=au(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),vT=au(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),$z=au(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),rD=au(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),aD=au(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Iz=au(["#text"]),yT=au(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),cD=au(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),_6=au(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),CT=au(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),D6=wm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),O6=wm(/<%[\w\W]*|[\w\W]*%>/gm),Lz=wm(/\$\{[\w\W]*/gm),Hz=wm(/^data-[\-\w.\u00B7-\uFFFF]+$/),R6=wm(/^aria-[\-\w]+$/),B6=wm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),zz=wm(/^(?:\w+script|data):/i),wT=wm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),M6=wm(/^html$/i),EY=wm(/^[a-z][.\w]*(-[.\w]+)+$/i);var ST=Object.freeze({__proto__:null,ARIA_ATTR:R6,ATTR_WHITESPACE:wT,CUSTOM_ELEMENT:EY,DATA_ATTR:Hz,DOCTYPE_NAME:M6,ERB_EXPR:O6,IS_ALLOWED_URI:B6,IS_SCRIPT_OR_DATA:zz,MUSTACHE_EXPR:D6,TMPLIT_EXPR:Lz});const XC={element:1,text:3,progressingInstruction:7,comment:8,document:9},iD=function(){return typeof window>"u"?null:window},Vz=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(i=a.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}},F6=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function lD(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:iD();const s=De=>lD(De);if(s.version="3.2.6",s.removed=[],!t||!t.document||t.document.nodeType!==XC.document||!t.Element)return s.isSupported=!1,s;let{document:a}=t;const i=a,d=i.currentScript,{DocumentFragment:g,HTMLTemplateElement:h,Node:C,Element:w,NodeFilter:E,NamedNodeMap:D=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:B,DOMParser:I,trustedTypes:W}=t,V=w.prototype,se=Mp(V,"cloneNode"),pe=Mp(V,"remove"),re=Mp(V,"nextSibling"),we=Mp(V,"childNodes"),Te=Mp(V,"parentNode");if(typeof h=="function"){const De=a.createElement("template");De.content&&De.content.ownerDocument&&(a=De.content.ownerDocument)}let ze,Ue="";const{implementation:Wt,createNodeIterator:vt,createDocumentFragment:Ct,getElementsByTagName:gt}=a,{importNode:Rn}=i;let pn=F6();s.isSupported=typeof J_=="function"&&typeof Te=="function"&&Wt&&Wt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Go,ERB_EXPR:Un,TMPLIT_EXPR:ho,DATA_ATTR:hn,ARIA_ATTR:mt,IS_SCRIPT_OR_DATA:$t,ATTR_WHITESPACE:Yn,CUSTOM_ELEMENT:wo}=ST;let{IS_ALLOWED_URI:Cn}=ST,vo=null;const Ss=sr({},[...oD,...sD,...vT,...rD,...Iz]);let bs=null;const Li=sr({},[...yT,...cD,..._6,...CT]);let rr=Object.seal(k6(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Dc=null,Ba=null,cl=!0,xi=!0,Gr=!1,og=!0,Fd=!1,G0=!0,xh=!1,Kw=!1,sg=!1,Yw=!1,rk=!1,Xw=!1,K0=!0,Jw=!1;const hI="user-content-";let f5=!0,Qw=!1,wy={},Sy=null;const Y0=sr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let NK=null;const pI=sr({},["audio","video","img","source","image","track"]);let g5=null;const PK=sr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ak="http://www.w3.org/1998/Math/MathML",ck="http://www.w3.org/2000/svg",Nd="http://www.w3.org/1999/xhtml";let xy=Nd,h5=!1,ik=null;const $K=sr({},[ak,ck,Nd],bT);let p5=sr({},["mi","mo","mn","ms","mtext"]),e=sr({},["annotation-xml"]);const n=sr({},["title","style","font","a","script"]);let o=null;const r=["application/xhtml+xml","text/html"],c="text/html";let u=null,f=null;const b=a.createElement("form"),v=function(te){return te instanceof RegExp||te instanceof Function},S=function(){let te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(f&&f===te)){if((!te||typeof te!="object")&&(te={}),te=gh(te),o=r.indexOf(te.PARSER_MEDIA_TYPE)===-1?c:te.PARSER_MEDIA_TYPE,u=o==="application/xhtml+xml"?bT:pT,vo=_l(te,"ALLOWED_TAGS")?sr({},te.ALLOWED_TAGS,u):Ss,bs=_l(te,"ALLOWED_ATTR")?sr({},te.ALLOWED_ATTR,u):Li,ik=_l(te,"ALLOWED_NAMESPACES")?sr({},te.ALLOWED_NAMESPACES,bT):$K,g5=_l(te,"ADD_URI_SAFE_ATTR")?sr(gh(PK),te.ADD_URI_SAFE_ATTR,u):PK,NK=_l(te,"ADD_DATA_URI_TAGS")?sr(gh(pI),te.ADD_DATA_URI_TAGS,u):pI,Sy=_l(te,"FORBID_CONTENTS")?sr({},te.FORBID_CONTENTS,u):Y0,Dc=_l(te,"FORBID_TAGS")?sr({},te.FORBID_TAGS,u):gh({}),Ba=_l(te,"FORBID_ATTR")?sr({},te.FORBID_ATTR,u):gh({}),wy=_l(te,"USE_PROFILES")?te.USE_PROFILES:!1,cl=te.ALLOW_ARIA_ATTR!==!1,xi=te.ALLOW_DATA_ATTR!==!1,Gr=te.ALLOW_UNKNOWN_PROTOCOLS||!1,og=te.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Fd=te.SAFE_FOR_TEMPLATES||!1,G0=te.SAFE_FOR_XML!==!1,xh=te.WHOLE_DOCUMENT||!1,Yw=te.RETURN_DOM||!1,rk=te.RETURN_DOM_FRAGMENT||!1,Xw=te.RETURN_TRUSTED_TYPE||!1,sg=te.FORCE_BODY||!1,K0=te.SANITIZE_DOM!==!1,Jw=te.SANITIZE_NAMED_PROPS||!1,f5=te.KEEP_CONTENT!==!1,Qw=te.IN_PLACE||!1,Cn=te.ALLOWED_URI_REGEXP||B6,xy=te.NAMESPACE||Nd,p5=te.MATHML_TEXT_INTEGRATION_POINTS||p5,e=te.HTML_INTEGRATION_POINTS||e,rr=te.CUSTOM_ELEMENT_HANDLING||{},te.CUSTOM_ELEMENT_HANDLING&&v(te.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(rr.tagNameCheck=te.CUSTOM_ELEMENT_HANDLING.tagNameCheck),te.CUSTOM_ELEMENT_HANDLING&&v(te.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(rr.attributeNameCheck=te.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),te.CUSTOM_ELEMENT_HANDLING&&typeof te.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(rr.allowCustomizedBuiltInElements=te.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Fd&&(xi=!1),rk&&(Yw=!0),wy&&(vo=sr({},Iz),bs=[],wy.html===!0&&(sr(vo,oD),sr(bs,yT)),wy.svg===!0&&(sr(vo,sD),sr(bs,cD),sr(bs,CT)),wy.svgFilters===!0&&(sr(vo,vT),sr(bs,cD),sr(bs,CT)),wy.mathMl===!0&&(sr(vo,rD),sr(bs,_6),sr(bs,CT))),te.ADD_TAGS&&(vo===Ss&&(vo=gh(vo)),sr(vo,te.ADD_TAGS,u)),te.ADD_ATTR&&(bs===Li&&(bs=gh(bs)),sr(bs,te.ADD_ATTR,u)),te.ADD_URI_SAFE_ATTR&&sr(g5,te.ADD_URI_SAFE_ATTR,u),te.FORBID_CONTENTS&&(Sy===Y0&&(Sy=gh(Sy)),sr(Sy,te.FORBID_CONTENTS,u)),f5&&(vo["#text"]=!0),xh&&sr(vo,["html","head","body"]),vo.table&&(sr(vo,["tbody"]),delete Dc.tbody),te.TRUSTED_TYPES_POLICY){if(typeof te.TRUSTED_TYPES_POLICY.createHTML!="function")throw YC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof te.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw YC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ze=te.TRUSTED_TYPES_POLICY,Ue=ze.createHTML("")}else ze===void 0&&(ze=Vz(W,d)),ze!==null&&typeof Ue=="string"&&(Ue=ze.createHTML(""));au&&au(te),f=te}},_=sr({},[...sD,...vT,...$z]),R=sr({},[...rD,...aD]),M=function(te){let Le=Te(te);(!Le||!Le.tagName)&&(Le={namespaceURI:xy,tagName:"template"});const xt=pT(te.tagName),Tn=pT(Le.tagName);return ik[te.namespaceURI]?te.namespaceURI===ck?Le.namespaceURI===Nd?xt==="svg":Le.namespaceURI===ak?xt==="svg"&&(Tn==="annotation-xml"||p5[Tn]):!!_[xt]:te.namespaceURI===ak?Le.namespaceURI===Nd?xt==="math":Le.namespaceURI===ck?xt==="math"&&e[Tn]:!!R[xt]:te.namespaceURI===Nd?Le.namespaceURI===ck&&!e[Tn]||Le.namespaceURI===ak&&!p5[Tn]?!1:!R[xt]&&(n[xt]||!_[xt]):!!(o==="application/xhtml+xml"&&ik[te.namespaceURI]):!1},$=function(te){Xf(s.removed,{element:te});try{Te(te).removeChild(te)}catch{pe(te)}},J=function(te,Le){try{Xf(s.removed,{attribute:Le.getAttributeNode(te),from:Le})}catch{Xf(s.removed,{attribute:null,from:Le})}if(Le.removeAttribute(te),te==="is")if(Yw||rk)try{$(Le)}catch{}else try{Le.setAttribute(te,"")}catch{}},Y=function(te){let Le=null,xt=null;if(sg)te="<remove></remove>"+te;else{const Zo=nD(te,/^[\r\n\t ]+/);xt=Zo&&Zo[0]}o==="application/xhtml+xml"&&xy===Nd&&(te='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+te+"</body></html>");const Tn=ze?ze.createHTML(te):te;if(xy===Nd)try{Le=new I().parseFromString(Tn,o)}catch{}if(!Le||!Le.documentElement){Le=Wt.createDocument(xy,"template",null);try{Le.documentElement.innerHTML=h5?Ue:Tn}catch{}}const lo=Le.body||Le.documentElement;return te&&xt&&lo.insertBefore(a.createTextNode(xt),lo.childNodes[0]||null),xy===Nd?gt.call(Le,xh?"html":"body")[0]:xh?Le.documentElement:lo},G=function(te){return vt.call(te.ownerDocument||te,te,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT|E.SHOW_PROCESSING_INSTRUCTION|E.SHOW_CDATA_SECTION,null)},xe=function(te){return te instanceof B&&(typeof te.nodeName!="string"||typeof te.textContent!="string"||typeof te.removeChild!="function"||!(te.attributes instanceof D)||typeof te.removeAttribute!="function"||typeof te.setAttribute!="function"||typeof te.namespaceURI!="string"||typeof te.insertBefore!="function"||typeof te.hasChildNodes!="function")},Ee=function(te){return typeof C=="function"&&te instanceof C};function Re(De,te,Le){hT(De,xt=>{xt.call(s,te,Le,f)})}const Ie=function(te){let Le=null;if(Re(pn.beforeSanitizeElements,te,null),xe(te))return $(te),!0;const xt=u(te.nodeName);if(Re(pn.uponSanitizeElement,te,{tagName:xt,allowedTags:vo}),G0&&te.hasChildNodes()&&!Ee(te.firstElementChild)&&cu(/<[/\w!]/g,te.innerHTML)&&cu(/<[/\w!]/g,te.textContent)||te.nodeType===XC.progressingInstruction||G0&&te.nodeType===XC.comment&&cu(/<[/\w]/g,te.data))return $(te),!0;if(!vo[xt]||Dc[xt]){if(!Dc[xt]&&Pt(xt)&&(rr.tagNameCheck instanceof RegExp&&cu(rr.tagNameCheck,xt)||rr.tagNameCheck instanceof Function&&rr.tagNameCheck(xt)))return!1;if(f5&&!Sy[xt]){const Tn=Te(te)||te.parentNode,lo=we(te)||te.childNodes;if(lo&&Tn){const Zo=lo.length;for(let ds=Zo-1;ds>=0;--ds){const _r=se(lo[ds],!0);_r.__removalCount=(te.__removalCount||0)+1,Tn.insertBefore(_r,re(te))}}}return $(te),!0}return te instanceof w&&!M(te)||(xt==="noscript"||xt==="noembed"||xt==="noframes")&&cu(/<\/no(script|embed|frames)/i,te.innerHTML)?($(te),!0):(Fd&&te.nodeType===XC.text&&(Le=te.textContent,hT([Go,Un,ho],Tn=>{Le=Bp(Le,Tn," ")}),te.textContent!==Le&&(Xf(s.removed,{element:te.cloneNode()}),te.textContent=Le)),Re(pn.afterSanitizeElements,te,null),!1)},lt=function(te,Le,xt){if(K0&&(Le==="id"||Le==="name")&&(xt in a||xt in b))return!1;if(!(xi&&!Ba[Le]&&cu(hn,Le))){if(!(cl&&cu(mt,Le))){if(!bs[Le]||Ba[Le]){if(!(Pt(te)&&(rr.tagNameCheck instanceof RegExp&&cu(rr.tagNameCheck,te)||rr.tagNameCheck instanceof Function&&rr.tagNameCheck(te))&&(rr.attributeNameCheck instanceof RegExp&&cu(rr.attributeNameCheck,Le)||rr.attributeNameCheck instanceof Function&&rr.attributeNameCheck(Le))||Le==="is"&&rr.allowCustomizedBuiltInElements&&(rr.tagNameCheck instanceof RegExp&&cu(rr.tagNameCheck,xt)||rr.tagNameCheck instanceof Function&&rr.tagNameCheck(xt))))return!1}else if(!g5[Le]){if(!cu(Cn,Bp(xt,Yn,""))){if(!((Le==="src"||Le==="xlink:href"||Le==="href")&&te!=="script"&&Fz(xt,"data:")===0&&NK[te])){if(!(Gr&&!cu($t,Bp(xt,Yn,"")))){if(xt)return!1}}}}}}return!0},Pt=function(te){return te!=="annotation-xml"&&nD(te,wo)},Et=function(te){Re(pn.beforeSanitizeAttributes,te,null);const{attributes:Le}=te;if(!Le||xe(te))return;const xt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:bs,forceKeepAttr:void 0};let Tn=Le.length;for(;Tn--;){const lo=Le[Tn],{name:Zo,namespaceURI:ds,value:_r}=lo,Dr=u(Zo),Oc=_r;let Bt=Zo==="value"?Oc:Zv(Oc);if(xt.attrName=Dr,xt.attrValue=Bt,xt.keepAttr=!0,xt.forceKeepAttr=void 0,Re(pn.uponSanitizeAttribute,te,xt),Bt=xt.attrValue,Jw&&(Dr==="id"||Dr==="name")&&(J(Zo,te),Bt=hI+Bt),G0&&cu(/((--!?|])>)|<\/(style|title)/i,Bt)){J(Zo,te);continue}if(xt.forceKeepAttr)continue;if(!xt.keepAttr){J(Zo,te);continue}if(!og&&cu(/\/>/i,Bt)){J(Zo,te);continue}Fd&&hT([Go,Un,ho],vs=>{Bt=Bp(Bt,vs," ")});const kn=u(te.nodeName);if(!lt(kn,Dr,Bt)){J(Zo,te);continue}if(ze&&typeof W=="object"&&typeof W.getAttributeType=="function"&&!ds)switch(W.getAttributeType(kn,Dr)){case"TrustedHTML":{Bt=ze.createHTML(Bt);break}case"TrustedScriptURL":{Bt=ze.createScriptURL(Bt);break}}if(Bt!==Oc)try{ds?te.setAttributeNS(ds,Zo,Bt):te.setAttribute(Zo,Bt),xe(te)?$(te):tD(s.removed)}catch{J(Zo,te)}}Re(pn.afterSanitizeAttributes,te,null)},et=function De(te){let Le=null;const xt=G(te);for(Re(pn.beforeSanitizeShadowDOM,te,null);Le=xt.nextNode();)Re(pn.uponSanitizeShadowNode,Le,null),Ie(Le),Et(Le),Le.content instanceof g&&De(Le.content);Re(pn.afterSanitizeShadowDOM,te,null)};return s.sanitize=function(De){let te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Le=null,xt=null,Tn=null,lo=null;if(h5=!De,h5&&(De="<!-->"),typeof De!="string"&&!Ee(De))if(typeof De.toString=="function"){if(De=De.toString(),typeof De!="string")throw YC("dirty is not a string, aborting")}else throw YC("toString is not a function");if(!s.isSupported)return De;if(Kw||S(te),s.removed=[],typeof De=="string"&&(Qw=!1),Qw){if(De.nodeName){const _r=u(De.nodeName);if(!vo[_r]||Dc[_r])throw YC("root node is forbidden and cannot be sanitized in-place")}}else if(De instanceof C)Le=Y("<!---->"),xt=Le.ownerDocument.importNode(De,!0),xt.nodeType===XC.element&&xt.nodeName==="BODY"||xt.nodeName==="HTML"?Le=xt:Le.appendChild(xt);else{if(!Yw&&!Fd&&!xh&&De.indexOf("<")===-1)return ze&&Xw?ze.createHTML(De):De;if(Le=Y(De),!Le)return Yw?null:Xw?Ue:""}Le&&sg&&$(Le.firstChild);const Zo=G(Qw?De:Le);for(;Tn=Zo.nextNode();)Ie(Tn),Et(Tn),Tn.content instanceof g&&et(Tn.content);if(Qw)return De;if(Yw){if(rk)for(lo=Ct.call(Le.ownerDocument);Le.firstChild;)lo.appendChild(Le.firstChild);else lo=Le;return(bs.shadowroot||bs.shadowrootmode)&&(lo=Rn.call(i,lo,!0)),lo}let ds=xh?Le.outerHTML:Le.innerHTML;return xh&&vo["!doctype"]&&Le.ownerDocument&&Le.ownerDocument.doctype&&Le.ownerDocument.doctype.name&&cu(M6,Le.ownerDocument.doctype.name)&&(ds="<!DOCTYPE "+Le.ownerDocument.doctype.name+`>
`+ds),Fd&&hT([Go,Un,ho],_r=>{ds=Bp(ds,_r," ")}),ze&&Xw?ze.createHTML(ds):ds},s.setConfig=function(){let De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};S(De),Kw=!0},s.clearConfig=function(){f=null,Kw=!1},s.isValidAttribute=function(De,te,Le){f||S({});const xt=u(De),Tn=u(te);return lt(xt,Tn,Le)},s.addHook=function(De,te){typeof te=="function"&&Xf(pn[De],te)},s.removeHook=function(De,te){if(te!==void 0){const Le=Mz(pn[De],te);return Le===-1?void 0:A0(pn[De],Le,1)[0]}return tD(pn[De])},s.removeHooks=function(De){pn[De]=[]},s.removeAllHooks=function(){pn=F6()},s}var N6=lD();const uD=t=>N6().sanitize(t);var ia=tinymce.util.Tools.resolve("tinymce.util.I18n");const k0={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},P6="temporary-placeholder",dD=t=>()=>sn(t,P6).getOr("!not found!"),xT=(t,s)=>{const a=t.toLowerCase();if(ia.isRtl()){const i=hu(a,"-rtl");return Do(s,i)?i:a}else return a},$6=(t,s)=>sn(s,xT(t,s)),mD=(t,s)=>{const a=s();return $6(t,a).getOrThunk(dD(a))},Uz=(t,s,a)=>{const i=s();return $6(t,i).or(a).getOrThunk(dD(i))},Wz=t=>ia.isRtl()?Do(k0,t):!1,I6=()=>ao("add-focusable",[or(t=>{Wd(t.element,"svg").each(s=>zn(s,"focusable","false"))})]),L6=(t,s,a,i)=>{var d,g,h;const C=Wz(s)?["tox-icon--flip"]:[],w=sn(a,xT(s,a)).or(i).getOrThunk(dD(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(C),innerHtml:w},behaviours:Dt([...(g=t.behaviours)!==null&&g!==void 0?g:[],I6()]),eventOrder:(h=t.eventOrder)!==null&&h!==void 0?h:{}}},Wu=(t,s,a,i=k.none())=>L6(s,t,a(),i),Zz=(t,s,a)=>{const i=a(),d=j(t,g=>Do(i,xT(g,i)));return L6(s,d.getOr(P6),i,k.none())},jz={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},JC=eu({name:"Notification",factory:t=>{const s=Z("notification-text"),a=ps({dom:nf(`<p id=${s}>${uD(t.backstageProvider.translate(t.text))}</p>`),behaviours:Dt([io.config({})])}),i=V=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${V}%`}}}),d=V=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${V}%`}}),g=ps({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:Dt([io.config({})])}),w={updateProgress:(V,se)=>{V.getSystem().isConnected()&&g.getOpt(V).each(pe=>{io.set(pe,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(se)]},d(se)])})},updateText:(V,se)=>{if(V.getSystem().isConnected()){const pe=a.get(V);io.set(pe,[pr(se)])}}},E=de([t.icon.toArray(),[t.level],k.from(jz[t.level]).toArray()]),D=ps(ei.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Wu("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:Dt([Ys.config({}),br.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:V=>{t.onAction(V)}})),B=Zz(E,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),I={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:Dt([io.config({})])},W=[B,I];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},behaviours:Dt([Ys.config({}),co.config({}),En.config({mode:"special",onEscape:V=>(t.onAction(V),k.some(!0))})]),components:W.concat(t.progress?[g.asSpec()]:[]).concat([D.asSpec()]),apis:w}},configFields:[Sl("level","info",["success","error","warning","warn","info"]),ft("progress"),zs("icon"),ft("onAction"),ft("text"),ft("iconProvider"),ft("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var qz=(t,s,a,i)=>{const d=s.backstage.shared,g=()=>Nt.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),h=()=>{const B=sa(g());return k.some(B)},C=B=>{h().each(I=>{ot(B,W=>{Wo(W.element,"width"),Xa(W.element)>I.width&&Jn(W.element,"width",I.width+"px")})})};return{open:(B,I,W)=>{const V=()=>{const Te=vt=>{io.remove(vt,pe),re()},ze=(vt,Ct)=>{Nl(vt.element).length===0?Ue(vt,Ct):Wt(vt,Ct)},Ue=(vt,Ct)=>{kr.hide(vt),i.clear(),Ct&&t.focus()},Wt=(vt,Ct)=>{Ct&&En.focusIn(vt)};i.on(vt=>{I();const Ct=W();Te(vt),ze(vt,Ct)})},se=()=>!fh(t)||!d.header.isPositionedAtTop(),pe=p(JC.sketch({text:B.text,level:dt(["success","error","warning","warn","info"],B.type)?B.type:void 0,progress:B.progressBar===!0,icon:B.icon,onAction:V,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const Te=y(pe);i.on(ze=>{io.append(ze,Te),kr.reposition(ze),pe.hasConfigured(Ar)&&Ar.refresh(ze),C(ze.components())})}else{const Te=p(kr.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Dt([En.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),io.config({}),...se()?[Ar.config({contextual:{lazyContext:()=>k.some(sa(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:vt=>_d(t,vt.element).map(gt=>({bounds:Rp(gt),optScrollEnv:k.some({currentScrollTop:gt.element.dom.scrollTop,scrollElmTop:lc(gt.element).top})})).getOrThunk(()=>({bounds:Vc(),optScrollEnv:k.none()}))})]:[]])})),ze=y(pe),Ue={maxHeightFunction:zg()},Wt={...d.anchors.banner(),overrides:Ue};i.set(Te),a.add(Te),kr.showWithinBounds(Te,ze,{anchor:Wt},h)}Oo(B.timeout)&&B.timeout>0&&rT.setEditorTimeout(t,()=>{V()},B.timeout);const re=()=>{i.on(Te=>{kr.reposition(Te),Te.hasConfigured(Ar)&&Ar.refresh(Te),C(Te.components())})};return{close:V,reposition:re,text:Te=>{JC.updateText(pe,Te)},settings:B,getEl:()=>pe.element.dom,progressBar:{value:Te=>{JC.updateProgress(pe,Te)}}}},close:B=>{B.close()},getArgs:B=>B.settings}};const Gz={setup:(t,s)=>{const a=(d,g)=>{Bn(d,Ha(),{raw:g})},i=()=>t.getMenu().bind(ws.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each($1),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(ws.highlightFirst)},h=>{a(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(h=>{a(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var ET;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(ET||(ET={}));var Sm=ET;const fD="tox-menu-nav__js",TT="tox-collection__item",AT="tox-swatch",Kz={normal:fD,color:AT},gD="tox-collection__item--enabled",Yz="tox-collection__group-heading",H6="tox-collection__item-icon",Xz="tox-collection__item-image",z6="tox-collection__item-image-selector",kT="tox-collection__item-label",Jz="tox-collection__item-accessory",V6="tox-collection__item-caret",Qz="tox-collection__item-checkmark",_0="tox-collection__item--active",U6="tox-collection__item-container",W6="tox-collection__item-container--column",D0="tox-collection__item-container--row",eV="tox-collection__item-container--align-right",tV="tox-collection__item-container--align-left",nV="tox-collection__item-container--valign-top",_T="tox-collection__item-container--valign-middle",Dd="tox-collection__item-container--valign-bottom",DT=t=>sn(Kz,t).getOr(fD),Z6=t=>t==="color"?"tox-swatches":"tox-menu",hD=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:Z6(t),tieredMenu:"tox-tiered-menu"}),Fp=t=>{const s=hD(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:DT(t)}},oV=(t,s,a)=>{const i=hD(a);return{tag:"div",classes:de([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},sV=[ih.parts.items({})],jv=(t,s,a)=>{const i=hD(a);return{dom:{tag:"div",classes:de([[i.tieredMenu]])},markers:Fp(a)}},pD=Z("refetch-trigger-event"),j6=Z("redirect-menu-item-interaction"),q6="tox-menu__searcher",QC=t=>Fs(t.element,`.${q6}`).bind(s=>t.getSystem().getByDom(s).toOptional()),G6=QC,K6=(t,s)=>{jt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},bD=t=>{const s=jt.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},Y6=(t,s)=>{$a(s.element,"id").each(a=>zn(t.element,"aria-activedescendant",a))},rV=t=>{const s=(d,g)=>(g.cut(),k.none()),a=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return Bn(d,j6,h),k.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[TT]},components:[sf.sketch({inputClasses:[q6,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Dt([ao(i,[Ye(Hm(),d=>{zo(d,pD)}),Ye(Ha(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),En.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,En.name()]}})]}},OT="tox-collection--results__js",X6=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Z("aria-item-search-result-id"),"aria-selected":"false"}}}:t},J6="Use arrow keys to navigate.",RT=(t,s)=>a=>{const i=Ht(a,s);return Oe(i,d=>({dom:t,components:d}))},BT=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"],attributes:{"aria-label":ia.translate(J6)}},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[ih.parts.items({preprocess:t!=="auto"?RT({tag:"div",classes:["tox-swatches__row"]},t):Rt})]}]}),Jf=t=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[ih.parts.items({preprocess:t!=="auto"?RT({tag:"div",classes:["tox-image-selector__row"]},t):Rt})]}]}),Q6=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[ih.parts.items({preprocess:RT({tag:"div",classes:["tox-collection__group"]},t)})]}),Zu=(t,s)=>{const a=[];let i=[];return ot(t,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(Do(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),Oe(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},vD=(t,s,a)=>ih.parts.items({preprocess:i=>{const d=Oe(i,a);return t!=="auto"&&t>1?RT({tag:"div",classes:["tox-collection__group"]},t)(d):Zu(d,(g,h)=>s[h].type==="separator")}}),MT=t=>wn(t,s=>s.type==="widget"),eN=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{...MT(s)?{"aria-label":ia.translate(J6)}:{}}},components:[vD(t,s,Rt)]}),O0=(t,s,a=!0)=>{const i=Z("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",OT].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[vD(t,s,X6)]}},aV=(t,s,a)=>{const i=Z("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[rV({i18n:ia.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],OT],attributes:{id:i}},components:[vD(t,s,X6)]}]}},yD=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[ih.parts.items({preprocess:a=>Zu(a,(i,d)=>t[d].type==="separator")})]}),R0=t=>wn(t,s=>"icon"in s&&s.icon!==void 0),rf=t=>(console.error(Df(t)),console.log(t),k.none()),cV=(t,s,a,i,d)=>{const g=yD(a);return{value:t,dom:g.dom,components:g.components,items:a}},hh=(t,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?eN(i,a):d.searchMode.searchMode==="search-with-field"?aV(i,a,d.searchMode):O0(i,a);if(d.menuType==="color"){const h=BT(i);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="imageselector"&&i!=="auto"){const h=Jf(i);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const h=eN(i,a);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const h=Q6(i);return{value:t,dom:h.dom,components:h.components,items:a}}else return{value:t,dom:oV(s,i,d.menuType),components:sV,items:a}},Hr=Da("type"),FT=Da("name"),NT=Da("label"),af=Da("text"),CD=Da("title"),ew=Da("icon"),tN=Da("url"),B0=Da("value"),tw=Zl("fetch"),iV=Zl("getSubmenuItems"),qv=Zl("onAction"),lV=Zl("onItemAction"),M0=Is("onSetup",()=>ae),wD=Lr("name"),Np=Lr("text"),SD=Lr("role"),Od=Lr("icon"),cf=Lr("tooltip"),uV=Lr("chevronTooltip"),Gv=Lr("label"),xD=Lr("shortcut"),dV=ud("select"),Kv=mc("active",!1),mV=mc("borderless",!1),lu=mc("enabled",!0),nw=mc("primary",!1),nN=t=>$e("columns",t),ow=$e("meta",{}),ph=Is("onAction",ae),Pp=t=>Mr("type",t),F0=t=>La("name","name",mi(()=>Z(`${t}-name`)),$r),fV=t=>La("value","value",mi(()=>Z(`${t}-value`)),St()),oN=[Hr,af,Wl("level",["info","warn","error","success"]),ew,$e("url","")],gV=Qn(oN),hV=t=>[Hr,t],N0=[Hr,af,lu,F0("button"),Od,mV,hS("buttonType",["primary","secondary","toolbar"]),nw,Mr("context","mode:design")],sN=Qn(N0),Yv=[Hr,FT],xm=Yv.concat([Gv]),pV=Yv.concat([NT,lu,Mr("context","mode:design")]),bV=Qn(pV),vV=Vo,rN=xm.concat([nN("auto"),Mr("context","mode:design")]),yV=Qn(rN),CV=bb([B0,af,ew]),wV=xm.concat([Mr("storageKey","default"),Mr("context","mode:design")]),SV=Qn(wV),xV=$r,EV=Qn(xm),TV=$r,aN=Yv.concat([Mr("tag","textarea"),Da("scriptId"),Da("scriptUrl"),ud("onFocus"),pS("settings",void 0)]),AV=Yv.concat([Mr("tag","textarea"),Zl("init")]),kV=_f(t=>Br("customeditor.old",Cl(AV),t).orThunk(()=>Br("customeditor.new",Cl(aN),t))),_V=$r,$p=[lu,Np,SD,xD,fV("menuitem"),ow,Mr("context","mode:design")],DV=Qn([Hr,FT].concat($p)),OV=Vo,PT=[F0("button"),Od,Sl("align","end",["start","end"]),nw,lu,hS("buttonType",["primary","secondary"]),Mr("context","mode:design")],ED=[...PT,af],TD=[Wl("type",["submit","cancel","custom"]),...ED],$T=[Wl("type",["menu"]),Np,cf,Od,Ri("items",DV),...PT],RV=[...PT,Wl("type",["togglebutton"]),cf,Od,Np,mc("active",!1)],BV=hi("type",{submit:TD,cancel:TD,custom:TD,menu:$T,togglebutton:RV}),MV=xm.concat([Mr("context","mode:design")]),FV=Qn(MV),NV=vb(),PV=t=>[Hr,v1("columns"),t],$V=[Hr,Da("html"),Sl("presets","presentation",["presentation","document"]),Is("onInit",ae),mc("stretched",!1)],IV=Qn($V),Ip=xm.concat([mc("border",!1),mc("sandboxed",!0),mc("streamContent",!1),mc("transparent",!0)]),LV=Qn(Ip),HV=$r,cN=Qn(Yv.concat([Lr("height")])),zV=Qn([Da("url"),y1("zoom"),y1("cachedWidth"),y1("cachedHeight")]),VV=xm.concat([Lr("inputMode"),Lr("placeholder"),mc("maximized",!1),lu,Mr("context","mode:design")]),UV=Qn(VV),WV=$r,AD=t=>[Hr,NT,t,Sl("align","start",["start","center","end"]),Lr("for")],iN=[af,B0],kD=[af,Ri("items",Tg("items",()=>sw))],sw=xg([Qn(iN),Qn(kD)]),Xv=xm.concat([Ri("items",sw),lu,Mr("context","mode:design")]),ZV=Qn(Xv),lN=$r,jV=xm.concat([gS("items",[af,B0]),Gh("size",1),lu,Mr("context","mode:design")]),Jv=Qn(jV),qV=$r,IT=xm.concat([mc("constrain",!0),lu,Mr("context","mode:design")]),_D=Qn(IT),uN=Qn([Da("width"),Da("height")]),GV=Yv.concat([NT,Gh("min",0),Gh("max",0)]),KV=Qn(GV),DD=Uy,YV=[Hr,Ri("header",$r),Ri("cells",gi($r))],XV=Qn(YV),JV=xm.concat([Lr("placeholder"),mc("maximized",!1),lu,Mr("context","mode:design"),yb("spellcheck")]),dN=Qn(JV),OD=$r,QV=[Mr("buttonType","default"),Lr("text"),Lr("tooltip"),Lr("icon"),pi("search",!1,xg([Vo,Qn([Lr("placeholder")])],t=>Tt(t)?t?k.some({placeholder:k.none()}):k.none():k.some(t))),Zl("fetch"),Is("onSetup",()=>ae),Mr("context","mode:design")],mN=Qn([Hr,...QV]),fN=t=>Br("menubutton",mN,t),RD=[Wl("type",["directory","leaf"]),CD,Da("id"),Ru("menu",mN),Lr("customStateIcon"),Lr("customStateIconTooltip")],LT=Qn(RD),gN=RD.concat([Ri("children",Tg("children",()=>Eg("type",{directory:BD,leaf:LT})))]),BD=Qn(gN),eU=Eg("type",{directory:BD,leaf:LT}),tU=[Hr,Ri("items",eU),ud("onLeafAction"),ud("onToggleExpand"),Of("defaultExpandedIds",[],$r),Lr("defaultSelectedId")],hN=Qn(tU),MD=xm.concat([Sl("filetype","file",["image","media","file"]),lu,Lr("picker_text"),Mr("context","mode:design")]),nU=Qn(MD),oU=Qn([B0,ow]),FD=t=>La("items","items",_u(),gi(_f(s=>Br(`Checking item of ${t}`,ND,s).fold(a=>dn.error(Df(a)),a=>dn.value(a))))),ND=Ul(()=>Eg("type",{alertbanner:gV,bar:Qn(hV(FD("bar"))),button:sN,checkbox:bV,colorinput:SV,colorpicker:EV,dropzone:FV,grid:Qn(PV(FD("grid"))),iframe:LV,input:UV,listbox:ZV,selectbox:Jv,sizeinput:_D,slider:KV,textarea:dN,urlinput:nU,customeditor:kV,htmlpanel:IV,imagepreview:cN,collection:yV,label:Qn(AD(FD("label"))),table:XV,tree:hN,panel:pN})),sU=[Hr,$e("classes",[]),Ri("items",ND)],pN=Qn(sU),rU=[F0("tab"),CD,Ri("items",ND)],PD=[Hr,gS("tabs",rU)],aU=Qn(PD),$D=ED,cU=BV,iU=Qn([Da("title"),wl("body",Eg("type",{panel:pN,tabpanel:aU})),Mr("size","normal"),Of("buttons",[],cU),$e("initialData",{}),Is("onAction",ae),Is("onChange",ae),Is("onSubmit",ae),Is("onClose",ae),Is("onCancel",ae),Is("onTabChange",ae)]),ID=t=>Br("dialog",iU,t),lU=Qn([Wl("type",["cancel","custom"]),...$D]),uU=Qn([Da("title"),Da("url"),y1("height"),y1("width"),Jy("buttons",lU),Is("onAction",ae),Is("onCancel",ae),Is("onClose",ae),Is("onMessage",ae)]),bN=t=>Br("dialog",uU,t),LD=t=>Lt(t)?[t].concat(ne(Xs(t),LD)):qo(t)?ne(t,LD):[],dU=t=>ct(t.type)&&ct(t.name),mU={checkbox:vV,colorinput:xV,colorpicker:TV,dropzone:NV,input:WV,iframe:HV,imagepreview:zV,selectbox:qV,sizeinput:uN,slider:DD,listbox:lN,size:uN,textarea:OD,urlinput:oU,customeditor:_V,collection:CV,togglemenuitem:OV},fU=t=>k.from(mU[t.type]),gU=t=>jn(LD(t),dU),hU=t=>{const s=gU(t),a=ne(s,i=>fU(i).fold(()=>[],d=>[wl(i.name,d)]));return Qn(a)},vN=t=>{var s;const a=Ou(ID(t)),i=hU(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:d}},Lp={open:(t,s)=>{const a=vN(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=Ou(bN(s));return t(a)},redial:t=>vN(t)},HD=Qn([Hr,Np]),pU=t=>Br("separatormenuitem",HD,t),bU=Qn([Pp("autocompleteitem"),Kv,lu,ow,B0,Np,Od]),vU=t=>Br("Autocompleter.Separator",HD,t),yU=t=>Br("Autocompleter.Item",bU,t),Qv=[lu,cf,Od,Np,M0,Mr("context","mode:design")],CU=Qn([Hr,qv,xD].concat(Qv)),HT=t=>Br("toolbarbutton",CU,t),zT=[Kv].concat(Qv),yN=Qn(zT.concat([Hr,qv,xD])),VT=t=>Br("ToggleButton",yN,t),UT=[Is("predicate",Je),Sl("scope","node",["node","editor"]),Sl("position","selection",["node","selection","line"])],CN=Qv.concat([Pp("contextformbutton"),Mr("align","end"),nw,qv,Ac("original",Rt)]),wU=zT.concat([Pp("contextformbutton"),Mr("align","end"),nw,qv,Ac("original",Rt)]),SU=Qv.concat([Pp("contextformbutton")]),xU=zT.concat([Pp("contextformtogglebutton")]),EU=hi("type",{contextformbutton:CN,contextformtogglebutton:wU}),rw=[Gv,Ri("commands",EU),Ru("launch",hi("type",{contextformbutton:SU,contextformtogglebutton:xU})),Is("onInput",ae),Is("onSetup",ae)],bh=[...UT,...rw,Wl("type",["contextform"]),Is("initValue",q("")),Lr("placeholder")],TU=[...UT,...rw,Wl("type",["contextsliderform"]),Is("initValue",q(0)),Is("min",q(0)),Is("max",q(100))],aw=[...UT,...rw,Wl("type",["contextsizeinputform"]),Is("initValue",q({width:"",height:""}))],AU=hi("type",{contextform:bh,contextsliderform:TU,contextsizeinputform:aw}),zD=t=>Br("ContextForm",AU,t),kU=Qv.concat([Pp("contexttoolbarbutton")]),_U=Qn([Pp("contexttoolbar"),Xi("launch",kU),wl("items",xg([$r,bb([Lr("name"),Lr("label"),Ri("items",$r)])]))].concat(UT)),DU=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),wN=t=>({...t,launch:t.launch.getOrUndefined(),items:ct(t.items)?t.items:Oe(t.items,DU)}),OU=t=>Br("ContextToolbar",_U,t),VD=[Hr,Da("src"),Lr("alt"),Of("classes",[],$r)],UD=Qn(VD),WD=[Hr,af,wD,Of("classes",["tox-collection__item-label"],$r)],RU=Qn(WD),uu=Ul(()=>Eg("type",{cardimage:UD,cardtext:RU,cardcontainer:BU})),BU=Qn([Hr,Mr("direction","horizontal"),Mr("align","left"),Mr("valign","middle"),Ri("items",uu)]),MU=Qn([Hr,Gv,Ri("items",uu),M0,ph].concat($p)),SN=t=>Br("cardmenuitem",MU,t),xN=Qn([Hr,Kv,Od,Gv].concat($p)),FU=t=>Br("choicemenuitem",xN,t),ZD=[Hr,Da("fancytype"),ph],NU=[$e("initData",{})].concat(ZD),PU=[ud("select"),e2("initData",{},[mc("allowCustomColors",!0),Mr("storageKey","default"),Jy("colors",St())])].concat(ZD),$U=[ud("select"),Pm("initData",[v1("columns"),Of("items",[],St())])].concat(ZD),IU=hi("fancytype",{inserttable:NU,colorswatch:PU,imageselect:$U}),LU=t=>Br("fancymenuitem",IU,t),EN=Qn([Hr,Kv,tN,Gv,cf].concat($p)),HU=Qn([Hr,Kv,ew,NT,cf,B0].concat($p)),zU=t=>Br("imagemenuitem",EN,t),VU=t=>Br("resetimageitem",HU,t),TN=Qn([Hr,M0,ph,Od].concat($p)),jD=t=>Br("menuitem",TN,t),qD=Qn([Hr,iV,M0,Od].concat($p)),UU=t=>Br("nestedmenuitem",qD,t),GD=Qn([Hr,Od,Kv,M0,qv].concat($p)),ey=t=>Br("togglemenuitem",GD,t),AN=Qn([Od,cf,Is("onShow",ae),Is("onHide",ae),M0]),kN=t=>Br("sidebar",AN,t),_N=Qn([Hr,wl("items",xg([bb([FT,Ri("items",$r)]),$r]))].concat(Qv)),WU=t=>Br("GroupToolbarButton",_N,t),ZU=Qn([Hr,cf,uV,Od,Np,dV,tw,M0,Sl("presets","normal",["normal","color","listpreview"]),nN(1),qv,lV,Mr("context","mode:design")]),WT=t=>Br("SplitButton",ZU,t),DN=[Np,Od,Lr("tooltip"),Sl("buttonType","secondary",["primary","secondary"]),mc("borderless",!1),Zl("onAction"),Mr("context","mode:design")],jU=[...DN,af,Wl("type",["button"])],ON=[...DN,mc("active",!1),Wl("type",["togglebutton"])],KD={button:jU,togglebutton:ON},YD=[Wl("type",["group"]),Of("buttons",[],hi("type",KD))],RN=hi("type",{...KD,group:YD}),rl=Qn([Of("buttons",[],RN),Zl("onShow"),Zl("onHide")]),BN=t=>Br("view",rl,t),XD=(t,s,a)=>{const i=_a(t.element,"."+a);if(i.length>0){const d=ce(i,g=>{const h=g.dom.getBoundingClientRect().top,C=i[0].dom.getBoundingClientRect().top;return Math.abs(h-C)>s}).getOr(i.length);return k.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return k.none()},MN=(t,s)=>Dt([ao(t,s)]),cw={namedEvents:MN,unnamedEvents:t=>MN(Z("unnamed-events"),t)},ju={item:t=>yn.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>yn.config({disabled:t}),splitButton:t=>yn.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>yn.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},ty=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},qu=(t,s)=>or(a=>{nt(t.onBeforeSetup)&&t.onBeforeSetup(a),ty(t,a)(d=>{const g=t.onSetup(d);nt(g)&&s.set(g)})}),yh=(t,s)=>vd(a=>ty(t,a)(s.get())),JD=(t,s,a)=>vd(i=>(a.set(jt.getValue(i)),ty(t,i)(s.get()))),FN="silver.uistate",iw="setDisabled",KU="setEnabled",NN="init",YU=["switchmode",NN],ny=(t,s)=>{const a=t.mainUi.outerContainer,i=[t.mainUi.mothership,...t.uiMotherships];s===iw&&ot(i,d=>{d.broadcastOn([Gm()],{target:a.element})}),ot(i,d=>{d.broadcastOn([FN],s)})},PN=(t,s)=>{t.on("init SwitchMode",a=>{ny(s,a.type)}),t.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const i=a.state?iw:NN;ny(s,i),a.state||t.nodeChanged()}}),t.on("NodeChange",a=>{const i=t.ui.isEnabled()?a.type:iw;ny(s,i)}),Ua(t)&&t.mode.set("readonly")},vr=t=>tu.config({channels:{[FN]:{onReceive:(s,a)=>{if(a===iw||a===KU){yn.set(s,a===iw);return}const{contextType:i,shouldDisable:d}=t();i==="mode"&&!dt(YU,a)||yn.set(s,d)}}}}),ZT=(t,s)=>jm((a,i)=>{ty(t,a)(t.onAction),!t.triggersSubmenu&&s===Sm.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&zo(a,Sb()),i.stop())}),XU={[Ji()]:["disabling","alloy.base.behaviour","toggling","item-events"]},oy=Co,Hp=(t,s,a,i)=>{const d=tn(ae);return{type:"item",dom:s.dom,components:oy(s.optComponents),data:t.data,eventOrder:XU,hasSubmenu:t.triggersSubmenu,itemBehaviours:Dt([ao("item-events",[ZT(t,a),qu(t,d),yh(t,d)]),ju.item(()=>!t.enabled||i.checkUiComponentContext(t.context).shouldDisable),vr(()=>i.checkUiComponentContext(t.context)),io.config({})].concat(t.itemBehaviours))}},zp=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),QD=(t,s)=>{var a,i;const d=Nt.fromTag("div");Hs(d,"tox-image-selector-loading-spinner");const g=C=>{Hs(C,"tox-image-selector-loading-spinner-wrapper"),ka(C,d)},h=C=>{Sr(C,"tox-image-selector-loading-spinner-wrapper"),ji(d)};return{dom:{tag:t.tag,attributes:(a=t.attributes)!==null&&a!==void 0?a:{},classes:t.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:s},classes:["tox-image-selector-image-img"]}}]},...t.checkMark.toArray()],behaviours:Dt([...(i=t.behaviours)!==null&&i!==void 0?i:[],ao("render-image-events",[or(C=>{g(C.element),Fs(C.element,"img").each(w=>{qi(w).catch(E=>{console.error(E)}).finally(()=>{h(C.element)})})})])])}},jT=(t,s)=>QD(s,t),P0=t=>{const s=Uv.os.isMacOS()||Uv.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=Oe(g,C=>{const w=C.toLowerCase().trim();return Do(d,w)?d[w]:C});return s?h.join(""):h.join("+")},$0=(t,s,a=[H6])=>Wu(t,{tag:"div",classes:a},s),eO=t=>({dom:{tag:"div",classes:[kT]},components:[pr(ia.translate(t))]}),tO=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),nO=(t,s)=>({dom:{tag:"div",classes:[kT]},components:[{dom:{tag:t.tag,styles:t.styles},components:[pr(ia.translate(s))]}]}),oO=t=>({dom:{tag:"div",classes:[Jz]},components:[pr(P0(t))]}),sO=t=>$0("checkmark",t,[Qz]),JU=t=>$0("chevron-right",t,[V6]),$N=t=>$0("chevron-down",t,[V6]),IN=(t,s)=>{const a=t.direction==="vertical"?W6:D0,i=t.align==="left"?tV:eV;return{dom:{tag:"div",classes:[U6,a,i,(()=>{switch(t.valign){case"top":return nV;case"middle":return _T;case"bottom":return Dd}})()]},components:s}},QU=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),LN=(t,s,a)=>{const i="custom",d="remove",g=t.value,h=t.iconContent.map(E=>Uz(E,s.icons,a)),C=t.ariaLabel.map(E=>({"aria-label":s.translate(E),"data-mce-name":E})).getOr({});return{dom:(()=>{const E=AT,D=h.getOr(""),B={tag:"div",attributes:C,classes:[E]};return g===i?{...B,tag:"button",classes:[...B.classes,"tox-swatches__picker-btn"],innerHtml:D}:g===d?{...B,classes:[...B.classes,"tox-swatch--remove"],innerHtml:D}:In(g)?{...B,attributes:{...B.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:D}:B})(),optComponents:[]}},qT=(t,s)=>{const a=t.map(i=>({attributes:{id:Z("menu-item"),"aria-label":ia.translate(i)}})).getOr({});return{tag:"div",classes:[fD,TT].concat(s),...a}},HN=t=>({dom:{tag:"label"},components:[pr(t)]}),zN=(t,s,a,i)=>{const d={tag:"div",classes:[H6]},g=I=>Wu(I,d,s.icons,i),h=()=>k.some({dom:d}),C=a?t.iconContent.map(g).orThunk(h):k.none(),w=t.checkMark,E=k.from(t.meta).fold(()=>eO,I=>Do(I,"style")?gn(nO,I.style):eO),D=t.htmlContent.fold(()=>t.textContent.map(E),I=>k.some(tO(I,[kT])));return{dom:qT(t.ariaLabel,[]),optComponents:[C,D,t.shortcutContent.map(oO),w,t.caret,t.labelContent.map(HN)]}},eW=t=>({dom:qT(t.ariaLabel,[z6]),optComponents:[k.some(jT(t.iconContent.getOrDie(),{tag:"div",classes:[Xz],checkMark:t.checkMark})),t.labelContent.map(HN)]}),I0=(t,s,a,i=k.none())=>t.presets==="color"?LN(t,s,i):t.presets==="img"?eW(t):zN(t,s,a,i),Vp=(t,s,a)=>sn(t,"tooltipWorker").map(i=>[br.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:zg}}),mode:"follow-highlight",onShow:(d,g)=>{i(h=>{br.setComponents(d,[nE({element:Nt.fromDom(h)})])})}})]).getOrThunk(()=>a.map(i=>[br.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),tW=t=>ZC.DOM.encode(t),rO=(t,s)=>{const a=ia.translate(t),i=tW(a);if(s.length>0){const d=new RegExp(Ol(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},nW=(t,s,a,i,d,g,h,C=!0)=>{const w=I0({presets:i,textContent:k.none(),htmlContent:a?t.text.map(D=>rO(D,s)):k.none(),ariaLabel:t.text,labelContent:k.none(),iconContent:t.icon,shortcutContent:k.none(),checkMark:k.none(),caret:k.none(),value:t.value},h.providers,C,t.icon),E=t.text.filter(D=>!a&&D!=="");return Hp({context:"mode:design",data:zp(t),enabled:t.enabled,getApi:q({}),onAction:D=>d(t.value,t.meta),onSetup:q(ae),triggersSubmenu:!1,itemBehaviours:Vp(t,h,E)},w,g,h.providers)},VN=(t,s)=>Oe(t,a=>{switch(a.type){case"cardcontainer":return IN(a,VN(a.items,s));case"cardimage":return QU(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>dt(s.cardText.highlightOn,g))?k.from(s.cardText.matchText).getOr(""):"";return tO(rO(a.text,d),a.classes)}}),oW=(t,s,a,i)=>{const d=h=>({isEnabled:()=>!yn.isDisabled(h),setEnabled:C=>{yn.set(h,!C),ot(_a(h.element,"*"),w=>{h.getSystem().getByDom(w).each(E=>{E.hasConfigured(yn)&&yn.set(E,!C)})})}}),g={dom:qT(t.label,[]),optComponents:[k.some({dom:{tag:"div",classes:[U6,D0]},components:VN(t.items,i)})]};return Hp({context:"mode:design",data:zp({text:k.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:k.from(i.itemBehaviours).getOr([])},g,s,a.providers)},UN=(t,s,a,i,d,g,h,C=!0)=>{const w=B=>({setActive:I=>{ts.set(B,I)},isActive:()=>ts.isOn(B),isEnabled:()=>!yn.isDisabled(B),setEnabled:I=>yn.set(B,!I)}),E=I0({presets:a,textContent:s?t.text:k.none(),htmlContent:k.none(),labelContent:t.label,ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:k.none(),checkMark:s?k.some(sO(h.icons)):k.none(),caret:k.none(),value:t.value},h,C),D=t.text.filter(q(!s)).map(B=>br.config(h.tooltips.getConfig({tooltipText:h.translate(B)})));return yt(Hp({context:t.context,data:zp(t),enabled:t.enabled,getApi:w,onAction:B=>i(t.value),onSetup:B=>(B.setActive(d),ae),triggersSubmenu:!1,itemBehaviours:[...D.toArray()]},E,g,h),{toggling:{toggleClass:gD,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},aO=t=>({value:lf(t)}),WN=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,cO=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,GT=t=>WN.test(t)||cO.test(t),lf=t=>Yu(t,"#").toUpperCase(),iO=t=>GT(t)?k.some({value:lf(t)}):k.none(),ZN=t=>({value:t.value.replace(WN,(a,i,d,g)=>i+i+d+d+g+g)}),jN=t=>{const s=ZN(t),a=cO.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},lw=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},sy=t=>{const s=lw(t.red)+lw(t.green)+lw(t.blue);return aO(s)},Up=(t,s,a)=>({hue:t,saturation:s,value:a}),KT=t=>{let s=0,a=0,i=0;const d=t.red/255,g=t.green/255,h=t.blue/255,C=Math.min(d,Math.min(g,h)),w=Math.max(d,Math.max(g,h));if(C===w)return i=C,Up(0,0,i*100);const E=d===C?g-h:h===C?d-g:h-d;return s=d===C?3:h===C?1:5,s=60*(s-E/(w-C)),a=(w-C)/w,i=w,Up(Math.round(s),Math.round(a*100),Math.round(i*100))},lO=Math.min,qN=Math.max,YT=Math.round,sW=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,rW=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,L0=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),XT=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},uO=t=>{let s,a,i;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=qN(0,lO(g,1)),h=qN(0,lO(h,1)),g===0)return s=a=i=YT(255*h),L0(s,a,i,1);const C=d/60,w=h*g,E=w*(1-Math.abs(C%2-1)),D=h-w;switch(Math.floor(C)){case 0:s=w,a=E,i=0;break;case 1:s=E,a=w,i=0;break;case 2:s=0,a=w,i=E;break;case 3:s=0,a=E,i=w;break;case 4:s=E,a=0,i=w;break;case 5:s=w,a=0,i=E;break;default:s=a=i=0}return s=YT(255*(s+D)),a=YT(255*(a+D)),i=YT(255*(i+D)),L0(s,a,i,1)},uw=t=>{const s=jN(t),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return L0(a,i,d,1)},GN=(t,s,a,i)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(a,10),C=parseFloat(i);return L0(d,g,h,C)},dO=t=>{const s=sW.exec(t);if(s!==null)return k.some(GN(s[1],s[2],s[3],"1"));const a=rW.exec(t);return a!==null?k.some(GN(a[1],a[2],a[3],a[4])):k.none()},dw=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,KN=L0(255,0,0,1),aW=t=>KT(uw(t)),mO=t=>sy(uO(t)),YN=t=>iO(t).orThunk(()=>dO(t).map(sy)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],h=i[2],C=i[3];return sy(L0(d,g,h,C))}),cW=t=>{t.dispatch("SkinLoaded")},iW=(t,s)=>{t.dispatch("SkinLoadError",s)},fO=t=>{t.dispatch("ResizeEditor")},gO=(t,s)=>{t.dispatch("ResizeContent",s)},XN=(t,s)=>{t.dispatch("ScrollContent",s)},JN=(t,s)=>{t.dispatch("TextColorChange",s)},lW=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},uW=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),QN=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},hO=(t,s)=>{t.dispatch("StylesTextUpdate",s)},dW=(t,s)=>{t.dispatch("AlignTextUpdate",s)},mW=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},fW=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},gW=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},eP=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},tP=t=>{t.dispatch("ToggleSidebar")},nP=t=>{t.dispatch("ToggleView")},oP=t=>{t.dispatch("ContextToolbarClose")},hW=t=>{t.dispatch("ContextFormSlideBack")},JT=(t,s)=>()=>{t(),s()},Ii=(t,s=rt)=>H0(t,"NodeChange",a=>{a.setEnabled(t.selection.isEditable()&&s())}),pW=(t,s)=>a=>{const i=er(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},QT=(t,s)=>a=>{const i=Ii(t)(a),d=pW(t,s)(a);return()=>{i(),d()}},H0=(t,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},sP=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},du=(t,s)=>()=>t.execCommand(s);var Ch=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const rP={},bW=(t,s=10)=>{const a=Ch.getItem(t),i=ct(a)?JSON.parse(a):[],g=(E=>s-E.length<0?E.slice(0,s):E)(i),h=E=>{Ce(g,E).each(C),g.unshift(E),g.length>s&&g.pop(),Ch.setItem(t,JSON.stringify(g))},C=E=>{g.splice(E,1)};return{add:h,state:()=>g.slice(0)}},aP=t=>sn(rP,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Ch.getItem(s);if(fo(a)){const d=Ch.getItem("tinymce-custom-colors");Ch.setItem(s,In(d)?d:"[]")}const i=bW(s,10);return rP[t]=i,i}),mw=t=>Oe(aP(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),eA=(t,s)=>{aP(t).add(s)},pO="forecolor",bO="hilitecolor",vO=5,vW=t=>tA(t.map((s,a)=>a%2===0?"#"+YN(s).value:s)),tA=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:t[a],icon:"checkmark",type:"choiceitem"});return s},Em=t=>s=>s.options.get(t),yO="#000000",yW=t=>{const s=t.options.register,a=g=>_t(g,ct)?{value:vW(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=g=>_t(g,ct)?{value:tA(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=g=>Oo(g)&&g>0?{value:g,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:i}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:d,default:CO(t)}),s("color_cols_foreground",{processor:d,default:wO(t,pO)}),s("color_cols_background",{processor:d,default:wO(t,bO)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:yO}),s("color_default_background",{processor:"string",default:yO})},fw=(t,s)=>s===pO&&t.options.isSet("color_map_foreground")?Em("color_map_foreground")(t):s===bO&&t.options.isSet("color_map_background")?Em("color_map_background")(t):t.options.isSet("color_map_raw")?Em("color_map_raw")(t):Em("color_map")(t),CO=(t,s="default")=>Math.max(vO,Math.ceil(Math.sqrt(fw(t,s).length))),wO=(t,s)=>{const a=Em("color_cols")(t),i=CO(t,s);return a===CO(t)?i:a},cP=(t,s="default")=>Math.round(s===pO?Em("color_cols_foreground")(t):s===bO?Em("color_cols_background")(t):Em("color_cols")(t)),SO=Em("custom_colors"),iP=Em("color_default_foreground"),CW=Em("color_default_background"),lP="rgba(0, 0, 0, 0)",uP=t=>dO(t).exists(s=>s.alpha!==0),wW=t=>vl(t,s=>{if(ri(s)){const a=nr(s,"background-color");return Er(uP(a),a)}else return k.none()}).getOr(lP),nA=(t,s)=>{const a=Nt.fromDom(t.selection.getStart()),i=s==="hilitecolor"?wW(a):nr(a,"color");return dO(i).map(d=>"#"+sy(d).value)},dP=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},xO=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},SW=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{dP(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{xO(t,s)})},mP=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},oA=(t,s,a,i)=>{a==="custom"?rA(t)(g=>{g.each(h=>{eA(s,h),t.execCommand("mceApplyTextcolor",s,h),i(h)})},nA(t,s).getOr(yO)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},EO=(t,s,a)=>t.concat(mw(s).concat(mP(a))),TO=(t,s,a)=>i=>{i(EO(t,s,a))},AO=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},fP=(t,s)=>{t.setTooltip(s)},sA=(t,s)=>a=>{const i=nA(t,s);return Sn(i,a.toUpperCase())},kO=(t,s,a)=>{if(Fa(a))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=EO(fw(t,s),s,!1),g=j(d,h=>h.value===a).getOr({text:""}).text;return t.translate([i,t.translate(g)])},gP=(t,s,a,i)=>{t.ui.registry.addSplitButton(s,{tooltip:kO(t,a,i.get()),chevronTooltip:s==="forecolor"?"Text color menu":"Background color menu",presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:sA(t,a),columns:cP(t,a),fetch:TO(fw(t,a),a,SO(t)),onAction:d=>{oA(t,a,i.get(),ae)},onItemAction:(d,g)=>{oA(t,a,g,h=>{i.set(h),JN(t,{name:s,color:h})})},onSetup:d=>{AO(d,s,i.get());const g=h=>{h.name===s&&(AO(d,h.name,h.color),fP(d,kO(t,a,h.color)))};return t.on("TextColorChange",g),JT(Ii(t)(d),()=>{t.off("TextColorChange",g)})}})},hP=(t,s,a,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(fP(g,kO(t,a,d.get())),AO(g,s,d.get()),Ii(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:sA(t,a),initData:{storageKey:a},onAction:g=>{oA(t,a,g.value,h=>{d.set(h),JN(t,{name:s,color:h})})}}]})},rA=t=>(s,a)=>{let i=!1;const d=C=>{const E=C.getData().colorpicker;i?(s(k.from(E)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",E]))},g=(C,w)=>{w.name==="hex-valid"&&(i=w.value)},h={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:ae,onCancel:()=>{s(k.none())}})},xW=t=>{SW(t);const s=iP(t),a=CW(t),i=tn(s),d=tn(a);gP(t,"forecolor","forecolor",i),gP(t,"backcolor","hilitecolor",d),hP(t,"forecolor","forecolor","Text color",i),hP(t,"backcolor","hilitecolor","Background color",d)},pP=(t,s,a,i,d)=>{const g=w=>({setActive:E=>{ts.set(w,E)},isActive:()=>ts.isOn(w),isEnabled:()=>!yn.isDisabled(w),setEnabled:E=>yn.set(w,!E)}),h=I0({presets:"img",textContent:k.none(),htmlContent:k.none(),ariaLabel:t.tooltip,iconContent:k.some(t.url),labelContent:t.label,shortcutContent:k.none(),checkMark:k.some(sO(d.icons)),caret:k.none(),value:t.value},d,!0),C=t.tooltip.map(w=>br.config(d.tooltips.getConfig({tooltipText:d.translate(w)})));return yt(Hp({context:t.context,data:zp(t),enabled:t.enabled,getApi:g,onAction:w=>{s(t.value),w.setActive(!0)},onSetup:w=>(w.setActive(a),ae),triggersSubmenu:!1,itemBehaviours:[...C.toArray()]},h,i,d),{toggling:{toggleClass:gD,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},aA=(t,s,a,i,d,g,h,C)=>{const w=R0(s),D=bP(s,a,i,d!=="color"?"normal":"color",g,h,C);return hh(t,w,D,i,{menuType:d})},bP=(t,s,a,i,d,g,h)=>Co(Oe(t,C=>C.type==="choiceitem"?FU(C).fold(rf,w=>k.some(UN(w,a===1,i,s,g(w.value),d,h,R0(t)))):C.type==="imageitem"?zU(C).fold(rf,w=>k.some(pP(w,s,g(w.value),d,h))):C.type==="resetimage"?VU(C).fold(rf,w=>k.some(UN({...w,text:w.tooltip,icon:k.some(w.icon),label:k.some(w.label)},a===1,i,s,g(w.value),d,h,R0(t)))):k.none())),gw=(t,s)=>{const a=Fp(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[s],previousSelector:d=>s==="color"?Fs(d.element,"[aria-checked=true]"):k.none()}},EW=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${AT}`:`.${TT}`}},TW=(t,s)=>{const a=AW(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...aA(Z("menu-value"),a,C=>{t.onAction({value:C})},i,d,Sm.CLOSE_ON_EXECUTE,t.select.getOr(Je),s.shared.providers),markers:Fp(d),movement:gw(i,d),showMenuRole:!1};return{type:"widget",data:{value:Z("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[VE.widget(ih.sketch(h))]}},AW=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>EO(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(mP(a)))},kW=(t,s)=>{const a="imageselector",i=t.initData.columns,g={...aA(Z("menu-value"),t.initData.items,h=>{t.onAction({value:h})},i,a,Sm.CLOSE_ON_EXECUTE,t.select.getOr(Je),s.shared.providers),markers:Fp(a),movement:gw(i,a),showMenuRole:!1};return{type:"widget",data:{value:Z("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[VE.widget(ih.sketch(g))]}},_O=Z("cell-over"),vP=Z("cell-execute"),_W=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),yP=(t,s,a)=>{const i=h=>Bn(h,_O,{row:t,col:s}),d=h=>Bn(h,vP,{row:t,col:s}),g=(h,C)=>{C.stop(),d(h)};return p({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:Dt([ao("insert-table-picker-cell",[Ye(Bu(),co.focus),Ye(Ji(),d),Ye(Kd(),g),Ye(Bg(),g)]),ts.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),co.config({onFocus:i})])})},DW=(t,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<a;h++){const C=t(d+1,h+1);g.push(yP(d,h,C))}i.push(g)}return i},OW=(t,s,a,i,d)=>{for(let g=0;g<i;g++)for(let h=0;h<d;h++)ts.set(t[g][h],g<=s&&h<=a)},RW=t=>ne(t,s=>Oe(s,y)),DO=(t,s)=>pr(`${s}x${t}`),BW={inserttable:(t,s)=>{const d=_W(s),g=DW(d,10,10),h=DO(0,0),C=ps({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:Dt([io.config({})])});return{type:"widget",data:{value:Z("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[VE.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:RW(g).concat(C.asSpec()),behaviours:Dt([ao("insert-table-picker",[or(w=>{io.set(C.get(w),[h])}),Ug(_O,(w,E,D)=>{const{row:B,col:I}=D.event;OW(g,B,I,10,10),io.set(C.get(w),[DO(B+1,I+1)])}),Ug(vP,(w,E,D)=>{const{row:B,col:I}=D.event;zo(w,Sb()),t.onAction({numRows:B+1,numColumns:I+1})})]),En.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:TW,imageselect:kW},MW=(t,s)=>sn(BW,t.fancytype).map(a=>a(t,s)),CP=(t,s,a,i=!0,d=!1)=>{const g=d?$N(a.icons):JU(a.icons),h=w=>({isEnabled:()=>!yn.isDisabled(w),setEnabled:E=>yn.set(w,!E),setIconFill:(E,D)=>{Fs(w.element,`svg path[class="${E}"], rect[class="${E}"]`).each(B=>{zn(B,"fill",D)})},setTooltip:E=>{const D=a.translate(E);zn(w.element,"aria-label",D)}}),C=I0({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,labelContent:k.none(),caret:k.some(g),checkMark:k.none(),shortcutContent:t.shortcut},a,i);return Hp({context:t.context,data:zp(t),getApi:h,enabled:t.enabled,onAction:ae,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,a)},wP=(t,s,a,i=!0)=>{const d=h=>({isEnabled:()=>!yn.isDisabled(h),setEnabled:C=>yn.set(h,!C)}),g=I0({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),labelContent:k.none(),ariaLabel:t.text,caret:k.none(),checkMark:k.none(),shortcutContent:t.shortcut},a,i);return Hp({context:t.context,data:zp(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},SP=t=>({type:"separator",dom:{tag:"div",classes:[TT,Yz]},components:t.text.map(pr).toArray()}),cA=(t,s,a,i=!0)=>{const d=h=>({setActive:C=>{ts.set(h,C)},isActive:()=>ts.isOn(h),isEnabled:()=>!yn.isDisabled(h),setEnabled:C=>yn.set(h,!C)}),g=I0({iconContent:t.icon,textContent:t.text,htmlContent:k.none(),labelContent:k.none(),ariaLabel:t.text,checkMark:k.some(sO(a.icons)),caret:k.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return yt(Hp({context:t.context,data:zp(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:gD,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},xP=nW,EP=SP,FW=wP,TP=CP,NW=cA,PW=MW,$W=oW,IW=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},AP=t=>{const s=jt.getValue(t),a=QC(t).map(bD);su.refetch(s).get(()=>{const i=xo.getCoupled(s,"sandbox");a.each(d=>QC(i).each(g=>K6(g,d)))})},LW=(t,s)=>{HW(t).each(a=>{Mk(t,a.element,s.event.eventType,s.event.interactionEvent)})},HW=t=>hs.getState(t).bind(ws.getHighlighted).bind(ws.getHighlighted),zW=t=>Wr(t.element,OT)?k.some(t.element):Fs(t.element,"."+OT),OO=(t,s,a)=>{G6(t).each(i=>{Y6(i,a),zW(s).each(g=>{$a(g,"id").each(h=>zn(i.element,"aria-controls",h))})}),zn(a.element,"aria-selected","true")},kP=(t,s,a)=>{zn(a.element,"aria-selected","false")},VW=t=>{G6(t).each(s=>co.focus(s))},UW=t=>xo.getExistingCoupled(t,"sandbox").bind(QC).map(bD).map(a=>a.fetchPattern).getOr("");var hw;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(hw||(hw={}));const WW=(t,s,a,i,d)=>{const g=a.shared.providers,h=C=>d?{...C,shortcut:k.none(),icon:C.text.isSome()?k.none():C.icon}:C;switch(t.type){case"menuitem":return jD(t).fold(rf,C=>k.some(FW(h(C),s,g,i)));case"nestedmenuitem":return UU(t).fold(rf,C=>k.some(TP(h(C),s,g,i,d)));case"togglemenuitem":return ey(t).fold(rf,C=>k.some(NW(h(C),s,g,i)));case"separator":return pU(t).fold(rf,C=>k.some(EP(C)));case"fancymenuitem":return LU(t).fold(rf,C=>PW(C,a));default:return console.error("Unknown item in general menu",t),k.none()}},ZW=(t,s,a,i,d,g,h)=>{const C=i===1,w=!C||R0(t);return Co(Oe(t,E=>{switch(E.type){case"separator":return vU(E).fold(rf,D=>k.some(EP(D)));case"cardmenuitem":return SN(E).fold(rf,D=>k.some($W({...D,onAction:B=>{D.onAction(B),a(D.value,D.meta)}},d,g,{itemBehaviours:Vp(D.meta,g,k.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return yU(E).fold(rf,D=>k.some(xP(D,s,C,"normal",a,d,g,w)))}}))},ro=(t,s,a,i,d,g)=>{const h=R0(s),C=Co(Oe(s,D=>{const B=W=>d?!Do(W,"text"):h,I=W=>WW(W,a,i,B(W),d);return D.type==="nestedmenuitem"&&D.getSubmenuItems().length<=0?I({...D,enabled:!1}):I(D)})),w=IW(g);return(d?cV:hh)(t,h,C,1,w)},z0=t=>kp.singleData(t.value,t),_P=(t,s,a,i)=>{const d=gw(s,i),g=Fp(i);return{data:z0({...t,movement:d,menuBehaviours:cw.unnamedEvents(s!=="auto"?[]:[or((h,C)=>{XD(h,4,g.item).each(({numColumns:w,numRows:E})=>{En.setGridSize(h,E,w)})})])}),menu:{markers:Fp(i),fakeFocus:a===hw.ContentFocus}}},DP=t=>x.create(Nt.fromDom(t.startContainer),t.startOffset,Nt.fromDom(t.endContainer),t.endOffset),OP={register:(t,s)=>{const a=Z("autocompleter"),i=tn(!1),d=tn(!1),g=Kn(),h=p(kr.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Dt([ao("dismissAutocompleter",[Ye(Ng(),()=>B()),Ye(Pg(),(re,we)=>{$a(we.event.target,"id").each(Te=>zn(Nt.fromDom(t.getBody()),"aria-activedescendant",Te))})])]),lazySink:s.getSink})),C=()=>kr.isOpen(h),w=d.get,E=()=>{if(C()){kr.hide(h),t.dom.remove(a,!1);const re=Nt.fromDom(t.getBody());$a(re,"aria-owns").filter(we=>we===a).each(()=>{tr(re,"aria-owns"),tr(re,"aria-activedescendant")})}},D=()=>kr.getContent(h).bind(re=>un(re.components(),0)),B=()=>t.execCommand("mceAutocompleterClose"),I=re=>{const we=_o(re,Te=>k.from(Te.columns)).getOr(1);return ne(re,Te=>{const ze=Te.items;return ZW(ze,Te.matchText,(Ue,Wt)=>{const vt={hide:()=>B(),reload:Ct=>{E(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Ct})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(Ct=>{i.set(!0),Te.onAction(vt,Ct,Ue,Wt),i.set(!1)})},we,Sm.BUBBLE_TO_SANDBOX,s,Te.highlightOn)})},W=(re,we)=>{const Te=_o(re,ze=>k.from(ze.columns)).getOr(1);kr.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(DP),root:Nt.fromDom(t.getBody())}},_P(hh("autocompleter-value",!0,we,Te,{menuType:"normal"}),Te,hw.ContentFocus,"normal")),D().each(ws.highlightFirst)},V=re=>{const we=I(re);we.length>0?(W(re,we),zn(Nt.fromDom(t.getBody()),"aria-owns",a),t.inline||se()):E()},se=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const re=t.getDoc().documentElement,we=t.selection.getNode(),Te=a1(h.element);Cr(Te,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${we.offsetTop}px`,left:`${we.offsetLeft}px`}),t.dom.add(re,Te.dom),Fs(Te,'[role="menu"]').each(ze=>{Wo(ze,"position"),Wo(ze,"max-height")})};t.on("AutocompleterStart",({lookupData:re})=>{d.set(!0),i.set(!1),V(re)}),t.on("AutocompleterUpdate",({lookupData:re})=>V(re)),t.on("AutocompleterUpdateActiveRange",({range:re})=>g.set(re)),t.on("AutocompleterEnd",()=>{E(),d.set(!1),i.set(!1),g.clear()});const pe={cancelIfNecessary:B,isMenuOpen:C,isActive:w,isProcessingAction:i.get,getMenu:D};Gz.setup(pe,t)}},qW=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Oe(t.items,s.interpreter)});var RP=tinymce.util.Tools.resolve("tinymce.html.Entities");const pw=(t,s,a,i)=>{const d=KW(t,s,a,i);return Io.sketch(d)},GW=(t,s)=>pw(t,s,[],[]),KW=(t,s,a,i)=>({dom:RO(a),components:t.toArray().concat([s]),fieldBehaviours:Dt(i)}),BP=()=>RO([]),RO=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),V0=(t,s)=>Io.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[pr(s.translate(t))]}),ni=Z("form-component-change"),iA=Z("form-component-input"),ry=Z("form-close"),Wp=Z("form-cancel"),Qf=Z("form-action"),bw=Z("form-submit"),BO=Z("form-block"),vw=Z("form-unblock"),MO=Z("form-tabchange"),FO=Z("form-resize"),YW=(t,s,a)=>{const i=t.label.map(W=>V0(W,s)),d=s.icons(),g=W=>{var V;return(V=d[W])!==null&&V!==void 0?V:W},h=W=>(V,se)=>{uc(se.event.target,"[data-collection-item-value]").each(pe=>{W(V,se,pe,ha(pe,"data-collection-item-value"))})},C=(W,V)=>{const pe=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",re=Oe(V,ze=>{const Ue=ia.translate(ze.text),Wt=t.columns===1?`<div class="tox-collection__item-label">${Ue}</div>`:"",vt=`<div class="tox-collection__item-icon">${g(ze.icon)}</div>`,Ct={_:" "," - ":" ","-":" "},gt=Ue.replace(/\_| \- |\-/g,Rn=>Ct[Rn]);return`<div data-mce-tooltip="${gt}" class="tox-collection__item${pe}" tabindex="-1" data-collection-item-value="${RP.encodeAllRaw(ze.value)}" aria-label="${gt}">${vt}${Wt}</div>`}),we=t.columns!=="auto"&&t.columns>1?Ht(re,t.columns):[re],Te=Oe(we,ze=>`<div class="tox-collection__group">${ze.join("")}</div>`);hl(W.element,Te.join(""))},w=h((W,V,se,pe)=>{V.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||Bn(W,Qf,{name:t.name,value:pe})}),E=[Ye(Bu(),h((W,V,se)=>{Ta(se,!0)})),Ye(Kd(),w),Ye(Bg(),w),Ye(Mu(),h((W,V,se)=>{Fs(W.element,"."+_0).each(pe=>{Sr(pe,_0)}),Hs(se,_0)})),Ye(wb(),h(W=>{Fs(W.element,"."+_0).each(V=>{Sr(V,_0),wr(V)})})),jm(h((W,V,se,pe)=>{Bn(W,Qf,{name:t.name,value:pe})}))],D=(W,V)=>Oe(_a(W.element,".tox-collection__item"),V),B=Io.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Rt},behaviours:Dt([yn.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:W=>{D(W,V=>{Hs(V,"tox-collection__item--state-disabled"),zn(V,"aria-disabled",!0)})},onEnabled:W=>{D(W,V=>{Sr(V,"tox-collection__item--state-disabled"),tr(V,"aria-disabled")})}}),vr(()=>s.checkUiComponentContext(t.context)),io.config({}),br.config({...s.tooltips.getConfig({tooltipText:"",onShow:W=>{Fs(W.element,"."+_0+"[data-mce-tooltip]").each(V=>{$a(V,"data-mce-tooltip").each(se=>{br.setComponents(W,s.tooltips.getComponents({tooltipText:se}))})})}}),mode:"children-keyboard-focus",anchor:W=>({type:"node",node:Fs(W.element,"."+_0).orThunk(()=>rb(".tox-collection__item")),root:W.element,layouts:{onLtr:q([aa,za,Ca,hc,gr,Ra]),onRtl:q([aa,za,Ca,hc,gr,Ra])},bubble:El(0,-2,{})})}),jt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(W,V)=>{C(W,V),t.columns==="auto"&&XD(W,5,"tox-collection__item").each(({numRows:se,numColumns:pe})=>{En.setGridSize(W,se,pe)}),zo(W,FO)}}),Ys.config({}),En.config(EW(t.columns,"normal")),ao("collection-events",E)]),eventOrder:{[Ji()]:["disabling","alloy.base.behaviour","collection-events"],[Mu()]:["collection-events","tooltipping"]}});return pw(i,B,["tox-form__group--collection"],[])},XW=(t,s)=>su.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Dt([ju.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),vr(()=>s.providers.checkUiComponentContext(t.context)),$v.config({}),Ys.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>rs.nu(i=>t.fetch(i)).map(i=>k.from(z0(yt(aA(Z("menu-value"),i,d=>{t.onItemAction(a,d)},t.columns,t.presets,Sm.CLOSE_ON_EXECUTE,Je,s.providers),{movement:gw(t.columns,t.presets)})))),parts:{menu:jv(!1,1,t.presets)}}),MP=Z("color-input-change"),NO=Z("color-swatch-change"),FP=Z("color-picker-cancel"),JW=(t,s,a,i)=>{const d=Io.parts.field({factory:sf,inputClasses:["tox-textfield"],data:i,onSetValue:E=>pm.run(E).get(ae),inputBehaviours:Dt([yn.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),vr(()=>s.providers.checkUiComponentContext(t.context)),Ys.config({}),pm.config({invalidClass:"tox-textbox-field-invalid",getRoot:E=>Cu(E.element),notify:{onValid:E=>{const D=jt.getValue(E);Bn(E,MP,{color:D})}},validator:{validateOnLoad:!1,validate:E=>{const D=jt.getValue(E);if(D.length===0)return rs.pure(dn.value(!0));{const B=Nt.fromTag("span");Jn(B,"background-color",D);const I=lr(B,"background-color").fold(()=>dn.error("blah"),W=>dn.value(D));return rs.pure(I)}}}})]),selectOnFocus:!1}),g=t.label.map(E=>V0(E,s.providers)),h=(E,D)=>{Bn(E,NO,{value:D})},C=(E,D)=>{w.getOpt(E).each(B=>{D==="custom"?a.colorPicker(I=>{I.fold(()=>zo(B,FP),W=>{h(B,W),eA(t.storageKey,W)})},"#ffffff"):D==="remove"?h(B,""):h(B,D)})},w=ps(XW({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[gr,Ca,aa],onLtr:()=>[Ca,gr,aa]},components:[],fetch:TO(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:C,context:t.context},s));return Io.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,w.asSpec()]}]),fieldBehaviours:Dt([ao("form-field-events",[Ye(MP,(E,D)=>{w.getOpt(E).each(B=>{Jn(B.element,"background-color",D.event.color)}),Bn(E,ni,{name:t.name})}),Ye(NO,(E,D)=>{Io.getField(E).each(B=>{jt.setValue(B,D.event.value),Qe.getCurrent(E).each(co.focus)})}),Ye(FP,(E,D)=>{Io.getField(E).each(B=>{Qe.getCurrent(E).each(co.focus)})})])])})},Tm={self:()=>Qe.config({find:k.some}),memento:t=>Qe.config({find:t.getOpt}),childAt:t=>Qe.config({find:s=>Id(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},PP=Qn([$e("preprocess",Rt),$e("postprocess",Rt)]),QW=(t,s)=>{const a=Oi("RepresentingConfigs.memento processors",PP,s);return jt.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=jt.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),h=t.get(i);jt.setValue(h,g)}}})},U0=(t,s,a)=>jt.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),eZ=(t,s,a)=>U0(t,i=>s(i.element),(i,d)=>a(i.element,d)),tZ=t=>eZ(t,wu,hl),lA=t=>jt.config({store:{mode:"memory",initialValue:t}}),yw=Z("rgb-hex-update"),$P=Z("slider-update"),Cw=Z("palette-update"),IP=(t,s)=>{const a=kd.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=kd.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return kd.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:q(0)},components:[a,i],sliderBehaviours:Dt([co.config({})]),onChange:(d,g,h)=>{zn(d.element,"aria-valuenow",Math.floor(360-h*3.6)),Bn(d,$P,{value:h})}})},$O=Z("valid-input"),uA=Z("invalid-input"),LP=Z("validating-input"),dA="colorcustom.rgb.",ay={isEnabled:rt,setEnabled:ae,immediatelyShow:ae,immediatelyHide:ae},HP=(t,s,a,i,d,g)=>{const h=(se,pe)=>{const re=pe.get();se!==re.isEnabled()&&(re.setEnabled(se),se?re.immediatelyShow():re.immediatelyHide())},C=(se,pe,re)=>pm.config({invalidClass:s("invalid"),notify:{onValidate:we=>{Bn(we,LP,{type:se})},onValid:we=>{h(!1,re),Bn(we,$O,{type:se,value:jt.getValue(we)})},onInvalid:we=>{h(!0,re),Bn(we,uA,{type:se,value:jt.getValue(we)})}},validator:{validate:we=>{const Te=jt.getValue(we),ze=pe(Te)?dn.value(!0):dn.error(t("aria.input.invalid"));return rs.pure(ze)},validateOnLoad:!1}}),w=(se,pe,re,we,Te)=>{const ze=tn(ay),Ue=t(dA+"range"),Wt=Io.parts.label({dom:{tag:"label"},components:[pr(re)]}),vt=Io.parts.field({data:Te,factory:sf,inputAttributes:{type:"text","aria-label":we,...pe==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Dt([C(pe,se,ze),Ys.config({}),br.config({...d({tooltipText:"",onSetup:ho=>{ze.set({isEnabled:()=>br.isEnabled(ho),setEnabled:hn=>br.setEnabled(ho,hn),immediatelyShow:()=>br.immediateOpenClose(ho,!0),immediatelyHide:()=>br.immediateOpenClose(ho,!1)}),br.setEnabled(ho,!1)},onShow:(ho,hn)=>{br.setComponents(ho,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[pr(t(pe==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:ho=>{pm.isInvalid(ho)&&pm.run(ho).get(ae)}}),Ct=Z("aria-invalid"),gt=ps(g("invalid",k.some(Ct),"warning")),Rn=ps({dom:{tag:"div",classes:[s("invalid-icon")]},components:[gt.asSpec()]}),pn=[Wt,vt,Rn.asSpec()],Go=pe!=="hex"?[Io.parts["aria-descriptor"]({text:Ue})]:[],Un=pn.concat(Go);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:Un}},E=(se,pe)=>{const re=sy(pe);return kl.getField(se,"hex").each(we=>{co.isFocused(we)||jt.setValue(se,{hex:re.value})}),re},D=(se,pe)=>{const re=pe.red,we=pe.green,Te=pe.blue;jt.setValue(se,{red:re,green:we,blue:Te})},B=ps({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),I=(se,pe)=>{B.getOpt(se).each(re=>{Jn(re.element,"background-color","#"+pe.value)})};return eu({factory:()=>{const se={red:tn(k.some(255)),green:tn(k.some(255)),blue:tn(k.some(255)),hex:tn(k.some("ffffff"))},pe=(hn,mt)=>{const $t=uw(mt);D(hn,$t),ze($t)},re=hn=>se[hn].get(),we=(hn,mt)=>{se[hn].set(mt)},Te=()=>re("red").bind(hn=>re("green").bind(mt=>re("blue").map($t=>L0(hn,mt,$t,1)))),ze=hn=>{const mt=hn.red,$t=hn.green,Yn=hn.blue;we("red",k.some(mt)),we("green",k.some($t)),we("blue",k.some(Yn))},Ue=(hn,mt)=>{const $t=mt.event;$t.type!=="hex"?we($t.type,k.none()):i(hn)},Wt=(hn,mt)=>{a(hn);const $t=aO(mt);we("hex",k.some($t.value));const Yn=uw($t);D(hn,Yn),ze(Yn),Bn(hn,yw,{hex:$t}),I(hn,$t)},vt=(hn,mt,$t)=>{const Yn=parseInt($t,10);we(mt,k.some(Yn)),Te().each(wo=>{const Cn=E(hn,wo);Bn(hn,yw,{hex:Cn}),I(hn,Cn)})},Ct=hn=>hn.type==="hex",gt=(hn,mt)=>{const $t=mt.event;Ct($t)?Wt(hn,$t.value):vt(hn,$t.type,$t.value)},Rn=hn=>({label:t(dA+hn+".label"),description:t(dA+hn+".description")}),pn=Rn("red"),Go=Rn("green"),Un=Rn("blue"),ho=Rn("hex");return yt(kl.sketch(hn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[hn.field("red",Io.sketch(w(XT,"red",pn.label,pn.description,255))),hn.field("green",Io.sketch(w(XT,"green",Go.label,Go.description,255))),hn.field("blue",Io.sketch(w(XT,"blue",Un.label,Un.description,255))),hn.field("hex",Io.sketch(w(GT,"hex",ho.label,ho.description,"ffffff"))),B.asSpec()],formBehaviours:Dt([pm.config({invalidClass:s("form-invalid")}),ao("rgb-form-events",[Ye($O,gt),Ye(uA,Ue),Ye(LP,Ue)])])})),{apis:{updateHex:(hn,mt)=>{jt.setValue(hn,{hex:mt.value}),pe(hn,mt),I(hn,mt)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(se,pe,re)=>{se.updateHex(pe,re)}},extraApis:{}})},nZ=(t,s)=>{const a=kd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=kd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(E,D)=>{const{width:B,height:I}=E,W=E.getContext("2d");if(W===null)return;W.fillStyle=D,W.fillRect(0,0,B,I);const V=W.createLinearGradient(0,0,B,0);V.addColorStop(0,"rgba(255,255,255,1)"),V.addColorStop(1,"rgba(255,255,255,0)"),W.fillStyle=V,W.fillRect(0,0,B,I);const se=W.createLinearGradient(0,0,0,I);se.addColorStop(0,"rgba(0,0,0,0)"),se.addColorStop(1,"rgba(0,0,0,1)"),W.fillStyle=se,W.fillRect(0,0,B,I)},g=(E,D)=>{const B=E.components()[0].element.dom,I=Up(D,100,100),W=uO(I);d(B,dw(W))},h=(E,D)=>{const B=KT(uw(D));kd.setValue(E,{x:B.saturation,y:100-B.value}),zn(E.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",B.saturation,B.value]))};return eu({factory:E=>{const D=q({x:0,y:0}),B=(V,se,pe)=>{Oo(pe)||zn(V.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(pe.x),Math.floor(100-pe.y)])),Bn(V,Cw,{value:pe})},I=(V,se,pe,re)=>{d(pe.element.dom,dw(KN))},W=Dt([Qe.config({find:k.some}),co.config({})]);return kd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:D},rounded:!1,components:[a,i],onChange:B,onInit:I,sliderBehaviours:W})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(E,D,B)=>{g(D,B)},setThumb:(E,D,B)=>{h(D,B)}},extraApis:{}})},oZ=(t,s,a,i)=>{const d=h=>{const C=HP(t,s,h.onValidHex,h.onInvalidHex,a,i),w=nZ(t,s),E=Ct=>(100-Ct)/100*360,D=Ct=>100-Ct/360*100,B={paletteRgba:tn(KN),paletteHue:tn(0)},I=ps(IP(t,s)),W=ps(w.sketch({})),V=ps(C.sketch({})),se=(Ct,gt,Rn)=>{W.getOpt(Ct).each(pn=>{w.setHue(pn,Rn)})},pe=(Ct,gt)=>{V.getOpt(Ct).each(Rn=>{C.updateHex(Rn,gt)})},re=(Ct,gt,Rn)=>{I.getOpt(Ct).each(pn=>{kd.setValue(pn,D(Rn))})},we=(Ct,gt)=>{W.getOpt(Ct).each(Rn=>{w.setThumb(Rn,gt)})},Te=(Ct,gt)=>{const Rn=uw(Ct);B.paletteRgba.set(Rn),B.paletteHue.set(gt)},ze=(Ct,gt,Rn,pn)=>{Te(gt,Rn),ot(pn,Go=>{Go(Ct,gt,Rn)})},Ue=()=>{const Ct=[pe];return(gt,Rn)=>{const pn=Rn.event.value,Go=B.paletteHue.get(),Un=Up(Go,pn.x,100-pn.y),ho=mO(Un);ze(gt,ho,Go,Ct)}},Wt=()=>{const Ct=[se,pe];return(gt,Rn)=>{const pn=E(Rn.event.value),Go=B.paletteRgba.get(),Un=KT(Go),ho=Up(pn,Un.saturation,Un.value),hn=mO(ho);ze(gt,hn,pn,Ct)}},vt=()=>{const Ct=[se,re,we];return(gt,Rn)=>{const pn=Rn.event.hex,Go=aW(pn);ze(gt,pn,Go.hue,Ct)}};return{uid:h.uid,dom:h.dom,components:[W.asSpec(),I.asSpec(),V.asSpec()],behaviours:Dt([ao("colour-picker-events",[Ye(yw,vt()),Ye(Cw,Ue()),Ye($P,Wt())]),Qe.config({find:Ct=>V.getOpt(Ct)}),En.config({mode:"acyclic"})])}};return eu({name:"ColourPicker",configFields:[ft("dom"),$e("onValidHex",ae),$e("onInvalidHex",ae)],factory:d})},sZ={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},IO=t=>s=>ct(s)?t.translate(sZ[s]):t.translate(s),rZ=(t,s,a)=>{const i=E=>"tox-"+E,d=(E,D,B=E,I=E)=>Wu(B,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+E],attributes:{title:s.translate(I),"aria-live":"polite",...D.fold(()=>({}),W=>({id:W}))}},s.icons),g=oZ(IO(s),i,s.tooltips.getConfig,d),h=E=>{Bn(E,Qf,{name:"hex-valid",value:!0})},C=E=>{Bn(E,Qf,{name:"hex-valid",value:!1})},w=ps(g.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:C}));return{dom:{tag:"div"},components:[w.asSpec()],behaviours:Dt([U0(a,E=>{const D=w.get(E);return Qe.getCurrent(D).bind(W=>jt.getValue(W).hex).map(W=>"#"+Yu(W,"#")).getOr("")},(E,D)=>{const B=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,I=k.from(B.exec(D)).bind(se=>un(se,1)),W=w.get(E);Qe.getCurrent(W).fold(()=>{console.log("Can not find form")},se=>{jt.setValue(se,{hex:I.getOr("")}),kl.getField(se,"hex").each(pe=>{zo(pe,Hm())})})}),Tm.self()])}};var aZ=tinymce.util.Tools.resolve("tinymce.Resource");const LO=t=>Do(t,"init"),cZ=t=>{const s=Kn(),a=ps({dom:{tag:t.tag}}),i=Kn(),d=!LO(t)&&t.onFocus.isSome()?[co.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),Ys.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Dt([ao("custom-editor-events",[or(g=>{a.getOpt(g).each(h=>{(LO(t)?t.init(h.element.dom):aZ.load(t.scriptId,t.scriptUrl).then(C=>C(h.element.dom,t.settings))).then(C=>{i.on(w=>{C.setValue(w)}),i.clear(),s.set(C)})})})]),U0(k.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>i.set(h),C=>C.setValue(h))}),Tm.self()].concat(d)),components:[a.asSpec()]}};var wh=tinymce.util.Tools.resolve("tinymce.util.Tools");const HO=Z("browse.files.event"),zP=(t,s)=>{const a=wh.explode(s.getOption("images_file_types")),i=d=>wn(a,g=>si(d.name.toLowerCase(),`.${g.toLowerCase()}`));return jn(ko(t),i)},iZ=(t,s,a)=>{const i=(I,W)=>{W.stop()},d=I=>(W,V)=>{ot(I,se=>{se(W,V)})},g=(I,W)=>{var V;if(!yn.isDisabled(I)){const se=W.event.raw;Bn(I,HO,{files:(V=se.dataTransfer)===null||V===void 0?void 0:V.files})}},h=(I,W)=>{const V=W.event.raw.target;Bn(I,HO,{files:V.files})},C=(I,W)=>{W&&(jt.setValue(I,zP(W,s)),Bn(I,ni,{name:t.name}))},w=ps({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Dt([ao("input-file-events",[Wg(Kd()),Wg(Bg())])])}),E=t.label.map(I=>V0(I,s)),D=Io.parts.field({factory:ei,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[pr(s.translate("Browse for an image")),w.asSpec()],action:I=>{w.get(I).element.dom.click()},buttonBehaviours:Dt([Tm.self(),lA(a.getOr([])),Ys.config({}),ju.button(()=>s.checkUiComponentContext(t.context).shouldDisable),vr(()=>s.checkUiComponentContext(t.context))])}),B={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Dt([yn.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),vr(()=>s.checkUiComponentContext(t.context)),ts.config({toggleClass:"dragenter",toggleOnExecute:!1}),ao("dropzone-events",[Ye("dragenter",d([i,ts.toggle])),Ye("dragleave",d([i,ts.toggle])),Ye("dragover",i),Ye("drop",d([i,g])),Ye(_g(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[pr(s.translate("Drop an image here"))]},D]}]};return pw(E,B,["tox-form__group--stretched"],[ao("handle-files",[Ye(HO,(I,W)=>{Io.getField(I).each(V=>{C(V,W.event.files)})})])])},lZ=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Oe(t.items,s.interpreter)}),zO=Z("alloy-fake-before-tabstop"),VO=Z("alloy-fake-after-tabstop"),VP=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Dt([co.config({ignore:!0}),Ys.config({})])}),UP=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[VP([zO]),s,VP([VO])],behaviours:Dt([Tm.childAt(1)])}),WP=(t,s)=>{Bn(t,Ha(),{raw:{which:9,shiftKey:s}})},uZ=(t,s)=>{const a=s.element;Wr(a,zO)?WP(t,!0):Wr(a,VO)&&WP(t,!1)},ww=t=>vg(t,["."+zO,"."+VO].join(","),Je),mA=Z("update-dialog"),ZP=Z("update-title"),UO=Z("update-body"),jP=Z("update-footer"),qP=Z("body-send-message"),fA=Z("dialog-focus-shifted"),WO=Nr().browser,Sw=WO.isSafari(),dZ=WO.isFirefox(),ZO=Sw||dZ,mZ=WO.isChromium(),GP=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,KP=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),YP=(t,s)=>{const a=t.body;return k.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!mZ&&!Sw||In(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},jO=(t,s,a)=>{const i=t.dom;k.from(i.contentDocument).fold(a,d=>{let g=0;const h=YP(d,s).map(w=>(g=w.scrollTop,w)).forall(GP),C=()=>{const w=i.contentWindow;In(w)&&(h?KP(w,"bottom"):!h&&ZO&&g!==0&&KP(w,g))};Sw&&i.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),Sw||C()})},fZ=Er(ZO,Sw?500:200).map(t=>ir(jO,t)),gZ=(t,s)=>{const a=tn(t.getOr(""));return{getValue:i=>a.get(),setValue:(i,d)=>{if(a.get()!==d){const g=i.element,h=()=>zn(g,"srcdoc",d);s?fZ.fold(q(jO),C=>C.throttle)(g,d,h):h()}a.set(d)}}},JP=(t,s,a)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(B=>({title:B})).getOr({}),...a.map(B=>({srcdoc:B})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=gZ(a,t.streamContent),w=t.label.map(B=>V0(B,s)),E=B=>UP(k.from(g),{uid:B.uid,dom:{tag:"iframe",attributes:h,classes:[i,...d]},behaviours:Dt([Ys.config({}),co.config({}),U0(a,C.getValue,C.setValue),tu.config({channels:{[fA]:{onReceive:(I,W)=>{W.newFocus.each(V=>{Cu(I.element).each(se=>{(Jo(I.element,V)?Hs:Sr)(se,"tox-navobj-bordered-focus")})})}}}})])}),D=Io.parts.field({factory:{sketch:E}});return pw(w,D,["tox-form__group--stretched"],[])},hZ=(t,s,a,i,d)=>{const g=a*d,h=i*d,C=Math.max(0,t/2-g/2),w=Math.max(0,s/2-h/2);return{left:C.toString()+"px",top:w.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},QP=(t,s,a)=>{const i=Xa(t),d=ea(t);return Math.min(i/s,d/a,1)},pZ=(t,s)=>{const a=tn(s.getOr({url:""})),i=ps({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(w=>({src:w.url})).getOr({})}}),d=ps({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(w,E)=>{const D={url:E.url};E.zoom.each(I=>D.zoom=I),E.cachedWidth.each(I=>D.cachedWidth=I),E.cachedHeight.each(I=>D.cachedHeight=I),a.set(D);const B=()=>{const{cachedWidth:I,cachedHeight:W,zoom:V}=D;if(!mn(I)&&!mn(W)){if(mn(V)){const pe=QP(w.element,I,W);D.zoom=pe}const se=hZ(Xa(w.element),ea(w.element),I,W,D.zoom);d.getOpt(w).each(pe=>{Cr(pe.element,se)})}};i.getOpt(w).each(I=>{const W=I.element;E.url!==ha(W,"src")&&(zn(W,"src",E.url),Sr(w.element,"tox-imagepreview__loaded")),B(),qi(W).then(V=>{w.getSystem().isConnected()&&(Hs(w.element,"tox-imagepreview__loaded"),D.cachedWidth=V.dom.naturalWidth,D.cachedHeight=V.dom.naturalHeight,B())})})},h={};t.height.each(w=>h.height=w);const C=s.map(w=>({url:w.url,zoom:k.from(w.zoom),cachedWidth:k.from(w.cachedWidth),cachedHeight:k.from(w.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Dt([Tm.self(),U0(C,()=>a.get(),g)])}},gA=(t,s,a)=>{const i="tox-label",d=t.align==="center"?[`${i}--center`]:[],g=t.align==="end"?[`${i}--end`]:[],h=ps({dom:{tag:"label",classes:[i,...d,...g]},components:[pr(s.providers.translate(t.label))]}),C=Oe(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...C],behaviours:Dt([Tm.self(),io.config({}),tZ(k.none()),En.config({mode:"acyclic"}),ao("label",[or(w=>{t.for.each(E=>{a(E).each(D=>{h.getOpt(w).each(B=>{var I;const W=(I=ha(D.element,"id"))!==null&&I!==void 0?I:Z("form-field");zn(D.element,"id",W),zn(B.element,"for",W)})})})})])])}},qO=Z("toolbar.button.execute"),e8=t=>jm((s,a)=>{ty(t,s)(i=>{Bn(s,qO,{buttonApi:i}),t.onAction(i)})}),Zp=Z("common-button-display-events"),t8={[Ji()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[dd()]:["toolbar-button-events",Zp],[zm()]:["toolbar-button-events","dropdown-events","tooltipping"],[bi()]:["focusing","alloy.base.behaviour",Zp]},Rd=t=>Jn(t.element,"width",nr(t.element,"width")),xw=(t,s,a)=>Wu(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),cy=(t,s)=>xw(t,s,[]),jp=(t,s)=>xw(t,s,[io.config({})]),hA=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[pr(a.translate(t))],behaviours:Dt([io.config({})])}),Bd=Z("update-menu-text"),Sh=Z("update-menu-icon"),GO=Z("update-tooltip-text"),Ew=(t,s,a,i)=>{const d=tn(ae),g=tn(t.tooltip),h=t.text.map(pe=>ps(hA(pe,s,a.providers))),C=t.icon.map(pe=>ps(jp(pe,a.providers.icons))),w=(pe,re)=>{const we=jt.getValue(pe);return co.focus(we),Bn(we,"keydown",{raw:re.event.raw}),su.close(we),k.some(!0)},E=t.role.fold(()=>({}),pe=>({role:pe})),D=k.from(t.listRole).map(pe=>({listRole:pe})).getOr({}),B=t.ariaLabel.fold(()=>({}),pe=>({"aria-label":a.providers.translate(pe)})),I=Wu("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),W=Z("common-button-display-events"),V="dropdown-events";return ps(su.sketch({...t.uid?{uid:t.uid}:{},...E,...D,dom:{tag:"button",classes:[s,`${s}--select`].concat(Oe(t.classes,pe=>`${s}--${pe}`)),attributes:{...B,...In(i)?{"data-mce-name":i}:{}}},components:oy([C.map(pe=>pe.asSpec()),h.map(pe=>pe.asSpec()),k.some(I)]),matchWidth:!0,useMinWidth:!0,onOpen:(pe,re,we)=>{t.searchable&&VW(we)},dropdownBehaviours:Dt([...t.dropdownBehaviours,ju.button(()=>t.disabled||a.providers.checkUiComponentContext(t.context).shouldDisable),vr(()=>a.providers.checkUiComponentContext(t.context)),$v.config({}),io.config({}),...t.tooltip.map(pe=>br.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(pe),onShow:re=>{if(os(g.get(),t.tooltip,(we,Te)=>Te!==we).getOr(!1)){const we=a.providers.translate(g.get().getOr(""));br.setComponents(re,a.providers.tooltips.getComponents({tooltipText:we}))}}}))).toArray(),ao(V,[qu(t,d),yh(t,d)]),ao(W,[or((pe,re)=>{t.listRole!=="listbox"&&Rd(pe)})]),ao("update-dropdown-width-variable",[Ye(Fg(),(pe,re)=>su.close(pe))]),ao("menubutton-update-display-text",[Ye(Bd,(pe,re)=>{h.bind(we=>we.getOpt(pe)).each(we=>{io.set(we,[pr(a.providers.translate(re.event.text))])})}),Ye(Sh,(pe,re)=>{C.bind(we=>we.getOpt(pe)).each(we=>{io.set(we,[jp(re.event.icon,a.providers.icons)])})}),Ye(GO,(pe,re)=>{const we=a.providers.translate(re.event.text);zn(pe.element,"aria-label",we),g.set(k.some(re.event.text))})])]),eventOrder:yt(t8,{[bi()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[dd()]:["toolbar-button-events",br.name(),V,W]}),sandboxBehaviours:Dt([En.config({mode:"special",onLeft:w,onRight:w}),ao("dropdown-sandbox-events",[Ye(pD,(pe,re)=>{AP(pe),re.stop()}),Ye(j6,(pe,re)=>{LW(pe,re),re.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...jv(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:OO,onCollapseMenu:(pe,re,we)=>{ws.getHighlighted(we).each(Te=>{OO(pe,we,Te)})},onDehighlightItem:kP}}},getAnchorOverrides:()=>({maxHeightFunction:(pe,re)=>{XS()(pe,re-10)}}),fetch:pe=>rs.nu(gn(t.fetch,pe))})).asSpec()},bZ=t=>ct(t),n8=t=>t.type==="separator",o8=t=>Do(t,"getSubmenuItems"),vZ={type:"separator"},yZ=(t,s)=>{const a=yo(t,(i,d)=>bZ(d)?d===""?i:d==="|"?i.length>0&&!n8(i[i.length-1])?i.concat([vZ]):i:Do(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&n8(a[a.length-1])&&a.pop(),a},KO=(t,s)=>{const a=t.getSubmenuItems(),i=s8(a,s),d=yt(i.menus,{[t.value]:i.items}),g=yt(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},CZ=t=>{const s=sn(t,"value").getOrThunk(()=>Z("generated-menu-item"));return yt({value:s},t)},s8=(t,s)=>{const a=yZ(ct(t)?t.split(" "):t,s);return qn(a,(i,d)=>{if(o8(d)){const g=CZ(d),h=KO(g,s);return{menus:yt(i.menus,h.menus),items:[h.item,...i.items],expansions:yt(i.expansions,h.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},r8=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),a8=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),iy=(t,s,a,i)=>{const d=Z("primary-menu"),g=s8(t,a.shared.providers.menuItems());if(g.items.length===0)return k.none();const h=r8(i),C=ro(d,g.items,s,a,i.isHorizontalMenu,h),w=a8(i),E=Ke(g.menus,(B,I)=>ro(I,B,s,a,!1,w)),D=yt(E,$m(d,C));return k.from(kp.tieredData(d,D,g.expansions))},pA=t=>!Do(t,"items"),c8="data-value",i8=(t,s,a,i,d)=>Oe(a,g=>pA(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===i,onAction:()=>{jt.setValue(t,g.value),Bn(t,ni,{name:s}),co.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>i8(t,s,g.items,i,d)}),bA=(t,s)=>_o(t,a=>pA(a)?Er(a.value===s,a):bA(a.items,s)),uf=(t,s,a)=>{const i=wn(t.items,E=>!pA(E)),d=s.shared.providers,g=a.bind(E=>bA(t.items,E)).orThunk(()=>Gt(t.items).filter(pA)),h=t.label.map(E=>V0(E,d)),C=Io.parts.field({dom:{},factory:{sketch:E=>Ew({context:t.context,uid:E.uid,text:g.map(D=>D.text),icon:k.none(),tooltip:k.none(),role:Er(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(D,B)=>{const I=i8(D,t.name,t.items,jt.getValue(D),i);B(iy(I,Sm.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:k.none()}))},onSetup:q(ae),getApi:q({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Ys.config({}),U0(g.map(D=>D.value),D=>ha(D.element,c8),(D,B)=>{bA(t.items,B).each(I=>{zn(D.element,c8,I.value),Bn(D,Bd,{text:I.text})})})]},"tox-listbox",s.shared)}}),w={dom:{tag:"div",classes:["tox-listboxfield"]},components:[C]};return Io.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:de([h.toArray(),[w]]),fieldBehaviours:Dt([yn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:E=>{Io.getField(E).each(yn.disable)},onEnabled:E=>{Io.getField(E).each(yn.enable)}})])})},YO=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Oe(t.items,s.shared.interpreter)}),wZ=(t,s,a)=>{const i=Oe(t.items,w=>({text:s.translate(w.text),value:w.value})),d=t.label.map(w=>V0(w,s)),g=Io.parts.field({dom:{},...a.map(w=>({data:w})).getOr({}),selectAttributes:{size:t.size},options:i,factory:K9,selectBehaviours:Dt([yn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),Ys.config({}),ao("selectbox-change",[Ye(_g(),(w,E)=>{Bn(w,ni,{name:t.name})})])])}),h=t.size>1?k.none():k.some(Wu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:de([[g],h.toArray()])};return Io.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:de([d.toArray(),[C]]),fieldBehaviours:Dt([yn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:w=>{Io.getField(w).each(yn.disable)},onEnabled:w=>{Io.getField(w).each(yn.enable)}}),vr(()=>s.checkUiComponentContext(t.context))])})},l8=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},vA=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),d=a[2];return dn.value({value:i,unit:d})}else return dn.error(t)},u8=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>Do(a,d);return t.unit===s?k.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?k.some(t.value):k.some(t.value/a[t.unit]*a[s]):k.none()},yA=t=>k.none(),d8=(t,s)=>a=>u8(a,s).map(i=>({value:i*t,unit:s})),XO=(t,s)=>{const a=vA(t).toOptional(),i=vA(s).toOptional();return os(a,i,(d,g)=>u8(d,g.unit).map(h=>g.value/h).map(h=>d8(h,g.unit)).getOr(yA)).getOr(yA)},FY=(t,s)=>{let a=yA;const i=Z("ratio-event"),d=se=>Wu(se,{tag:"span",classes:["tox-icon","tox-lock-icon__"+se]},s.icons),g=()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,h=vr(()=>s.checkUiComponentContext(t.context)),C=t.label.getOr("Constrain proportions"),w=s.translate(C),E=qr.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":w,"data-mce-name":C}},components:[d("lock"),d("unlock")],buttonBehaviours:Dt([yn.config({disabled:g}),h,Ys.config({}),br.config(s.tooltips.getConfig({tooltipText:w}))])}),D=se=>({dom:{tag:"div",classes:["tox-form__group"]},components:se}),B=se=>Io.parts.field({factory:sf,inputClasses:["tox-textfield"],inputBehaviours:Dt([yn.config({disabled:g}),h,Ys.config({}),ao("size-input-events",[Ye(Mu(),(pe,re)=>{Bn(pe,i,{isField1:se})}),Ye(_g(),(pe,re)=>{Bn(pe,ni,{name:t.name})})])]),selectOnFocus:!1}),I=se=>({dom:{tag:"label",classes:["tox-label"]},components:[pr(s.translate(se))]}),W=qr.parts.field1(D([Io.parts.label(I("Width")),B(!0)])),V=qr.parts.field2(D([Io.parts.label(I("Height")),B(!1)]));return qr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[W,V,D([I(Ju),E])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(se,pe,re)=>{vA(jt.getValue(se)).each(we=>{a(we).each(Te=>{jt.setValue(pe,l8(Te))})})},coupledFieldBehaviours:Dt([yn.config({disabled:g,onDisabled:se=>{qr.getField1(se).bind(Io.getField).each(yn.disable),qr.getField2(se).bind(Io.getField).each(yn.disable),qr.getLock(se).each(yn.disable)},onEnabled:se=>{qr.getField1(se).bind(Io.getField).each(yn.enable),qr.getField2(se).bind(Io.getField).each(yn.enable),qr.getLock(se).each(yn.enable)}}),vr(()=>s.checkUiComponentContext("mode:design")),ao("size-input-events2",[Ye(i,(se,pe)=>{const re=pe.event.isField1,we=re?qr.getField1(se):qr.getField2(se),Te=re?qr.getField2(se):qr.getField1(se),ze=we.map(jt.getValue).getOr(""),Ue=Te.map(jt.getValue).getOr("");a=XO(ze,Ue)})])])})},NY=(t,s,a)=>{const i=kd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[pr(s.translate(t.label))]}),d=kd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=kd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return kd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:q(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:Dt([Tm.self(),co.config({})]),onChoose:(h,C,w)=>{Bn(h,ni,{name:t.name,value:w})},onChange:(h,C,w)=>{Bn(h,ni,{name:t.name,value:w})}})},al=(t,s)=>{const a=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),i=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Oe(C,a)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:Oe(C,d)}),h=C=>({dom:{tag:"tbody"},components:Oe(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),h(t.cells)],behaviours:Dt([Ys.config({}),co.config({})])}},JO=(t,s)=>{const a=t.label.map(V=>V0(V,s)),i=[yn.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),vr(()=>s.checkUiComponentContext(t.context)),En.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:V=>(zo(V,bw),k.some(!0))}),ao("textfield-change",[Ye(Hm(),(V,se)=>{Bn(V,ni,{name:t.name})}),Ye(t2(),(V,se)=>{Bn(V,ni,{name:t.name})})]),Ys.config({})],d=t.validation.map(V=>pm.config({getRoot:se=>Cu(se.element),invalidClass:"tox-invalid",validator:{validate:se=>{const pe=jt.getValue(se),re=V.validator(pe);return rs.pure(re===!0?dn.value(pe):dn.error(re))},validateOnLoad:V.validateOnLoad}})).toArray(),g=t.placeholder.fold(q({}),V=>({placeholder:s.translate(V)})),h=t.inputMode.fold(q({}),V=>({inputmode:V})),w={...t.spellcheck.fold(q({}),V=>({spellcheck:V})),...g,...h,"data-mce-name":t.name},E=Io.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(V=>({data:V})).getOr({}),inputAttributes:w,inputClasses:[t.classname],inputBehaviours:Dt(de([i,d])),selectOnFocus:!1,factory:sf}),D=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[E]}:E,I=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),W=[yn.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:V=>{Io.getField(V).each(yn.disable)},onEnabled:V=>{Io.getField(V).each(yn.enable)}}),vr(()=>s.checkUiComponentContext(t.context))];return pw(a,D,I,W)},SZ=(t,s,a)=>JO({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:k.none(),maximized:t.maximized,data:a,context:t.context,spellcheck:k.none()},s),m8=(t,s,a)=>JO({name:t.name,multiline:!0,label:t.label,inputMode:k.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:k.none(),maximized:t.maximized,data:a,context:t.context,spellcheck:t.spellcheck},s),f8=t=>({isEnabled:()=>!yn.isDisabled(t),setEnabled:s=>yn.set(t,!s),setActive:s=>{const a=t.element;s?(Hs(a,"tox-tbtn--enabled"),zn(a,"aria-pressed",!0)):(Sr(a,"tox-tbtn--enabled"),tr(a,"aria-pressed"))},isActive:()=>Wr(t.element,"tox-tbtn--enabled"),setTooltip:s=>{Bn(t,GO,{text:s})},setText:s=>{Bn(t,Bd,{text:s})},setIcon:s=>Bn(t,Sh,{icon:s})}),Tw=(t,s,a,i,d=!0,g)=>{const h=t.buttonType==="bordered"?["bordered"]:[];return Ew({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(C,w)=>{const E={pattern:t.search.isSome()?UW(C):""};t.fetch(D=>{w(iy(D,Sm.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},E,f8(C))},onSetup:t.onSetup,getApi:C=>f8(C),columns:1,presets:"normal",classes:h,dropdownBehaviours:[...d?[Ys.config({})]:[]],context:t.context},s,a.shared,g)},g8=(t,s,a)=>{const i=g=>h=>{const C=!h.isActive();h.setActive(C),g.storage.set(C),a.shared.getSink().each(w=>{s().getOpt(w).each(E=>{Ta(E.element),Bn(E,Qf,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(Oe(t,h=>{const C=h.text.fold(()=>({}),w=>({text:w}));return{type:h.type,active:!1,...C,context:h.context,onAction:i(h),onSetup:d(h)}}))}},h8=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[pr(t)]}),CA=(t,s,a)=>{t.customStateIcon.each(i=>s.push(SA(i,a.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],d=>[br.config(a.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"])))},wA=Z("leaf-label-event-id"),QO=({leaf:t,onLeafAction:s,visible:a,treeId:i,selectedId:d,backstage:g})=>{const h=t.menu.map(w=>Tw(w,"tox-mbtn",g,k.none(),a)),C=[h8(t.title)];return CA(t,C,g),h.each(w=>C.push(w)),ei.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:w=>{s(t.id),w.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[Ha()]:[wA,"keying"]},buttonBehaviours:Dt([...a?[Ys.config({})]:[],ts.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),tu.config({channels:{[`update-active-item-${i}`]:{onReceive:(w,E)=>{(E.value===t.id?ts.on:ts.off)(w)}}}}),ao(wA,[or((w,E)=>{d.each(D=>{(D===t.id?ts.on:ts.off)(w)})}),Ye(Ha(),(w,E)=>{const D=E.event.raw.code==="ArrowLeft",B=E.event.raw.code==="ArrowRight";D?(bl(w.element,".tox-tree--directory").each(I=>{w.getSystem().getByDom(I).each(W=>{Wd(I,".tox-tree--directory__label").each(V=>{W.getSystem().getByDom(V).each(co.focus)})})}),E.stop()):B&&E.stop()})])])})},SA=(t,s,a,i,d)=>Wu(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(i||[]),behaviours:a,attributes:d},s),p8=(t,s)=>SA(t,s,[]),eR=Z("directory-label-event-id"),xZ=({directory:t,visible:s,noChildren:a,backstage:i})=>{const d=t.menu.map(C=>Tw(C,"tox-mbtn",i,k.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[p8("chevron-right",i.shared.providers.icons)]},h8(t.title)];CA(t,g,i),d.each(C=>{g.push(C)});const h=C=>{bl(C.element,".tox-tree--directory").each(w=>{C.getSystem().getByDom(w).each(E=>{const D=!ts.isOn(E);ts.toggle(E),Bn(C,"expand-tree-node",{expanded:D,node:t.id})})})};return ei.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[Ha()]:[eR,"keying"]},buttonBehaviours:Dt([...s?[Ys.config({})]:[],ao(eR,[Ye(Ha(),(C,w)=>{const E=w.event.raw.code==="ArrowRight",D=w.event.raw.code==="ArrowLeft";E&&a&&w.stop(),(E||D)&&bl(C.element,".tox-tree--directory").each(B=>{C.getSystem().getByDom(B).each(I=>{!ts.isOn(I)&&E||ts.isOn(I)&&D?(h(C),w.stop()):D&&!ts.isOn(I)&&(bl(I.element,".tox-tree--directory").each(W=>{Wd(W,".tox-tree--directory__label").each(V=>{I.getSystem().getByDom(V).each(co.focus)})}),w.stop())})})})])])})},b8=({children:t,onLeafAction:s,visible:a,treeId:i,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(C=>C.type==="leaf"?QO({leaf:C,selectedId:g,onLeafAction:s,visible:a,treeId:i,backstage:h}):tR({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:h})),behaviours:Dt([sl.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),io.config({})])}),v8=Z("directory-event-id"),tR=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d,expandedIds:g,selectedId:h})=>{const{children:C}=t,w=tn(g),E=B=>C.map(I=>I.type==="leaf"?QO({leaf:I,selectedId:h,onLeafAction:s,visible:B,treeId:i,backstage:d}):tR({directory:I,expandedIds:w.get(),selectedId:h,onLeafAction:s,labelTabstopping:B,treeId:i,backstage:d})),D=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[xZ({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),b8({children:C,expandedIds:g,selectedId:h,onLeafAction:s,visible:D,treeId:i,backstage:d})],behaviours:Dt([ao(v8,[or((B,I)=>{ts.set(B,D)}),Ye("expand-tree-node",(B,I)=>{const{expanded:W,node:V}=I.event;w.set(W?[...w.get(),V]:w.get().filter(se=>se!==V))})]),ts.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(B,I)=>{const W=B.components()[1],V=E(I);I?sl.grow(W):sl.shrink(W),io.set(W,V)}})])}},y8=Z("tree-event-id"),EZ=(t,s)=>{const a=t.onLeafAction.getOr(ae),i=t.onToggleExpand.getOr(ae),d=t.defaultExpandedIds,g=tn(d),h=tn(t.defaultSelectedId),C=Z("tree-id"),w=(E,D)=>t.items.map(B=>B.type==="leaf"?QO({leaf:B,selectedId:E,onLeafAction:a,visible:!0,treeId:C,backstage:s}):tR({directory:B,selectedId:E,onLeafAction:a,expandedIds:D,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:w(h.get(),g.get()),behaviours:Dt([En.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),ao(y8,[Ye("expand-tree-node",(E,D)=>{const{expanded:B,node:I}=D.event;g.set(B?[...g.get(),I]:g.get().filter(W=>W!==I)),i(g.get(),{expanded:B,node:I})})]),tu.config({channels:{[`update-active-item-${C}`]:{onReceive:(E,D)=>{h.set(k.some(D.value)),io.set(E,w(k.some(D.value),g.get()))}}}}),io.config({})])}},Aw=(t,s,a=[],i,d,g,h)=>{const C=s.fold(()=>({}),D=>({action:D})),w={buttonBehaviours:Dt([ju.item(()=>!t.enabled||h.checkUiComponentContext(t.context).shouldDisable),vr(()=>h.checkUiComponentContext(t.context)),Ys.config({}),...g.map(D=>br.config(h.tooltips.getConfig({tooltipText:h.translate(D)}))).toArray(),ao("button press",[Vg("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...C},E=yt(w,{dom:i});return yt(E,{components:d})},PY=(t,s,a,i=[],d)=>{const g=t.tooltip.map(E=>({"aria-label":a.translate(E)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},C=t.icon.map(E=>cy(E,a.icons)),w=oy([C]);return Aw(t,s,i,h,w,t.tooltip,a)},C8=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},w8=(t,s,a,i=[],d=[])=>{const g=a.translate(t.text),h=t.icon.map(W=>cy(W,a.icons)),C=[h.getOrThunk(()=>pr(g))],w=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),B={tag:"button",classes:[...C8(w),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},I=t.icon.map(q(g));return Aw(t,s,i,B,C,I,a)},S8=(t,s,a,i=[],d=[])=>{const g=w8(t,k.some(s),a,i,d);return ei.sketch(g)},nR=(t,s)=>a=>{s==="custom"?Bn(a,Qf,{name:t,value:{}}):s==="submit"?zo(a,bw):s==="cancel"?zo(a,Wp):console.error("Unknown button type: ",s)},TZ=(t,s)=>s==="menu",AZ=(t,s)=>s==="custom"||s==="cancel"||s==="submit",kZ=(t,s)=>s==="togglebutton",_Z=(t,s,a)=>{var i,d;const g=t.icon.map(Te=>jp(Te,s.icons)).map(ps),h=Te=>{Bn(Te,Qf,{name:t.name,value:{setIcon:ze=>{g.map(Ue=>Ue.getOpt(Te).each(Wt=>{io.set(Wt,[jp(ze,s.icons)])}))}}})},C=t.buttonType.getOr(t.primary?"primary":"secondary"),w={...t,name:(i=t.name)!==null&&i!==void 0?i:"",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1},E=w.tooltip.or(t.text).map(Te=>({"aria-label":s.translate(Te)})).getOr({}),D=C8(C??"secondary"),B=t.icon.isSome()&&t.text.isSome(),I={tag:"button",classes:[...D.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...B?["tox-button--icon-and-text"]:[]],attributes:{...E,...In(a)?{"data-mce-name":a}:{}}},W=[],V=s.translate(t.text.getOr("")),se=pr(V),re=[...oy([g.map(Te=>Te.asSpec())]),...t.text.isSome()?[se]:[]],we=Aw(w,k.some(h),W,I,re,t.tooltip,s);return ei.sketch(we)},kw=(t,s,a)=>{if(TZ(t,s)){const i=()=>h,d=t,g={...t,buttonType:"default",type:"menubutton",search:k.none(),onSetup:C=>(C.setEnabled(t.enabled),ae),fetch:g8(d.items,i,a)},h=ps(Tw(g,"tox-tbtn",a,k.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(AZ(t,s)){const i=nR(t.name,s),d={...t,context:s==="cancel"?"any":t.context,borderless:!1};return S8(d,i,a.shared.providers,[])}else{if(kZ(t,s))return _Z(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},DZ=(t,s)=>{const a=nR(t.name,"custom");return GW(k.none(),Io.parts.field({factory:ei,...w8(t,k.some(a),s,[lA(""),Tm.self()])}))},OZ={type:"separator"},x8=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ae}),xA=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ae}),ly=t=>Oe(t,x8),RZ=(t,s)=>jn(s,a=>a.type===t),oR=(t,s)=>ly(RZ(t,s)),E8=t=>oR("header",t.targets),T8=t=>oR("anchor",t.targets),BZ=t=>k.from(t.anchorTop).map(s=>xA("<top>",s)).toArray(),A8=t=>k.from(t.anchorBottom).map(s=>xA("<bottom>",s)).toArray(),k8=t=>Oe(t,s=>xA(s,s)),MZ=t=>yo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(OZ,a),[]),sR=(t,s)=>{const a=t.toLowerCase();return jn(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,h=(d=i.value)!==null&&d!==void 0?d:"";return Js(g.toLowerCase(),a)||Js(h.toLowerCase(),a)})},_8=(t,s,a)=>{var i,d;const g=jt.getValue(s),h=(d=(i=g?.meta)===null||i===void 0?void 0:i.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],w=>{const E=sR(h,k8(a.getHistory(t)));return t==="file"?MZ([E,sR(h,E8(w)),sR(h,de([BZ(w),T8(w),A8(w)]))]):E})},rR=Z("aria-invalid"),FZ=(t,s,a,i)=>{const d=s.shared.providers,g=we=>{const Te=jt.getValue(we);a.addToHistory(Te.value,t.filetype)},h={...i.map(we=>({initialData:we})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{type:"url"},minChars:0,responseTime:0,fetch:we=>{const Te=_8(t.filetype,we,a),ze=iy(Te,Sm.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:k.none()});return rs.pure(ze)},getHotspot:we=>V.getOpt(we),onSetValue:(we,Te)=>{we.hasConfigured(pm)&&pm.run(we).get(ae)},typeaheadBehaviours:Dt([...a.getValidationHandler().map(we=>pm.config({getRoot:Te=>Cu(Te.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Te,ze)=>{D.getOpt(Te).each(Ue=>{zn(Ue.element,"title",d.translate(ze))})}},validator:{validate:Te=>{const ze=jt.getValue(Te);return Dn.nu(Ue=>{we({type:t.filetype,url:ze.value},Wt=>{if(Wt.status==="invalid"){zn(Te.element,"aria-errormessage",rR);const vt=dn.error(Wt.message);Ue(vt)}else{tr(Te.element,"aria-errormessage");const vt=dn.value(Wt.message);Ue(vt)}})})},validateOnLoad:!1}})).toArray(),yn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable}),Ys.config({}),ao("urlinput-events",[Ye(Hm(),we=>{const Te=ui(we.element),ze=Te.trim();ze!==Te&&Vl(we.element,ze),t.filetype==="file"&&Bn(we,ni,{name:t.name})}),Ye(_g(),we=>{Bn(we,ni,{name:t.name}),g(we)}),Ye(t2(),we=>{Bn(we,ni,{name:t.name}),g(we)})])]),eventOrder:{[Hm()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:we=>we.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:jv(!1,1,"normal")},onExecute:(we,Te,ze)=>{Bn(Te,bw,{})},onItemExecute:(we,Te,ze,Ue)=>{g(we),Bn(we,ni,{name:t.name})}},C=Io.parts.field({...h,factory:Sz}),w=t.label.map(we=>V0(we,d)),D=ps(((we,Te,ze=we,Ue=we)=>Wu(ze,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+we],attributes:{title:d.translate(Ue),"aria-live":"polite",...Te.fold(()=>({}),Wt=>({id:Wt}))}},d.icons))("invalid",k.some(rR),"warning")),B=ps({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[D.asSpec()]}),I=a.getUrlPicker(t.filetype),W=Z("browser.url.event"),V=ps({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,B.asSpec()],behaviours:Dt([yn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable})])}),se=ps(S8({context:t.context,name:t.name,icon:k.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:k.none(),borderless:!0},we=>zo(we,W),d,[],["tox-browse-url"])),pe=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:de([[V.asSpec()],I.map(()=>se.asSpec()).toArray()])}),re=we=>{Qe.getCurrent(we).each(Te=>{const ze=jt.getValue(Te),Ue={fieldname:t.name,...ze};I.each(Wt=>{Wt(Ue).get(vt=>{jt.setValue(Te,vt),Bn(we,ni,{name:t.name})})})})};return Io.sketch({dom:BP(),components:w.toArray().concat([pe()]),fieldBehaviours:Dt([yn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:we=>{Io.getField(we).each(yn.disable),se.getOpt(we).each(yn.disable)},onEnabled:we=>{Io.getField(we).each(yn.enable),se.getOpt(we).each(yn.enable)}}),vr(()=>d.checkUiComponentContext(t.context)),ao("url-input-events",[Ye(W,re)])])})},NZ=(t,s)=>{const a=mD(t.icon,s.icons);return hm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[ei.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:i=>Bn(i,Qf,{name:"alert-banner",value:t.url}),buttonBehaviours:Dt([I6()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},PZ=(t,s,a)=>{const i=w=>(w.element.dom.click(),k.some(!0)),d=Io.parts.field({factory:{sketch:Rt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Dt([Tm.self(),yn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:w=>{Cu(w.element).each(E=>Hs(E,"tox-checkbox--disabled"))},onEnabled:w=>{Cu(w.element).each(E=>Sr(E,"tox-checkbox--disabled"))}}),Ys.config({}),co.config({}),eZ(a,m1,Eu),En.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),ao("checkbox-events",[Ye(_g(),(w,E)=>{Bn(w,ni,{name:t.name})})])])}),g=Io.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[pr(s.translate(t.label))],behaviours:Dt([$v.config({})])}),h=w=>Wu(w==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+w]},s.icons),C=ps({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return Io.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:Dt([yn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),vr(()=>s.checkUiComponentContext(t.context))])})},$Z=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],i=ao("htmlpanel",[or(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?hm.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:Dt([br.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{Fs(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Vr(d.element)).each(g=>{$a(g,"data-mce-tooltip").each(h=>{br.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:Fs(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Vr(d.element).filter(g=>$a(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:q([aa,za,Ca,hc,gr,Ra]),onRtl:q([aa,za,Ca,hc,gr,Ra])},bubble:El(0,-2,{})})}),i])}):hm.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Dt([Ys.config({}),co.config({}),i])})},Wa=t=>(s,a,i,d,g)=>sn(a,"name").fold(()=>t(a,d,k.none(),g),h=>s.field(h,t(a,d,sn(i,h),g))),IZ=t=>(s,a,i,d,g)=>{const h=yt(a,{source:"dynamic"});return Wa(t)(s,h,i,d,g)},LZ={bar:Wa((t,s)=>qW(t,s.shared)),collection:Wa((t,s,a)=>YW(t,s.shared.providers,a)),alertbanner:Wa((t,s)=>NZ(t,s.shared.providers)),input:Wa((t,s,a)=>SZ(t,s.shared.providers,a)),textarea:Wa((t,s,a)=>m8(t,s.shared.providers,a)),label:Wa((t,s,a,i)=>gA(t,s.shared,i)),iframe:IZ((t,s,a)=>JP(t,s.shared.providers,a)),button:Wa((t,s)=>DZ(t,s.shared.providers)),checkbox:Wa((t,s,a)=>PZ(t,s.shared.providers,a)),colorinput:Wa((t,s,a)=>JW(t,s.shared,s.colorinput,a)),colorpicker:Wa((t,s,a)=>rZ(t,s.shared.providers,a)),dropzone:Wa((t,s,a)=>iZ(t,s.shared.providers,a)),grid:Wa((t,s)=>lZ(t,s.shared)),listbox:Wa((t,s,a)=>uf(t,s,a)),selectbox:Wa((t,s,a)=>wZ(t,s.shared.providers,a)),sizeinput:Wa((t,s)=>FY(t,s.shared.providers)),slider:Wa((t,s,a)=>NY(t,s.shared.providers,a)),urlinput:Wa((t,s,a)=>FZ(t,s,s.urlinput,a)),customeditor:Wa(cZ),htmlpanel:Wa((t,s)=>$Z(t,s.shared.providers)),imagepreview:Wa((t,s,a)=>pZ(t,a)),table:Wa((t,s)=>al(t,s.shared.providers)),tree:Wa((t,s)=>EZ(t,s)),panel:Wa((t,s)=>YO(t,s))},HZ={field:(t,s)=>s,record:q([])},D8=(t,s,a,i,d)=>{const g=yt(i,{shared:{interpreter:h=>aR(t,h,a,g,d)}});return aR(t,s,a,g,d)},aR=(t,s,a,i,d)=>sn(LZ,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,a,i,d)),O8=(t,s,a,i)=>aR(HZ,t,s,a,i),EA={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},zZ=(t,s,a)=>{const d={maxHeightFunction:zg()},g=()=>({type:"node",root:Pl(Xr(t())),node:k.from(t()),bubble:El(12,12,EA),layouts:{onRtl:()=>[qe],onLtr:()=>[sp]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:El(-12,12,EA),layouts:{onRtl:()=>[Ca,gr,aa],onLtr:()=>[gr,Ca,aa]},overrides:d});return()=>a()?g():h()},R8=(t,s,a,i)=>{const g={maxHeightFunction:zg()},h=()=>({type:"node",root:Pl(Xr(s())),node:k.from(s()),bubble:El(12,12,EA),layouts:{onRtl:()=>[Fi],onLtr:()=>[Fi]},overrides:g}),C=()=>t?{type:"node",root:Pl(Xr(s())),node:k.from(s()),bubble:El(0,-ta(s()),EA),layouts:{onRtl:()=>[za],onLtr:()=>[za]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:El(0,0,EA),layouts:{onRtl:()=>[za],onLtr:()=>[za]},overrides:g};return()=>i()?h():C()},B8=(t,s,a)=>{const i=()=>({type:"node",root:Pl(Xr(t())),node:k.from(t()),layouts:{onRtl:()=>[Fi],onLtr:()=>[Fi]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[aa],onLtr:()=>[aa]}});return()=>a()?i():d()},TA=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],h={firstCell:Nt.fromDom(d),lastCell:Nt.fromDom(g)};return k.some(h)}return k.some(yl.range(Nt.fromDom(a.startContainer),a.startOffset,Nt.fromDom(a.endContainer),a.endOffset))}}),M8=t=>s=>({type:"node",root:t(),node:s}),VZ=(t,s,a,i)=>{const d=Wv(t),g=()=>Nt.fromDom(t.getBody()),h=()=>Nt.fromDom(t.getContentAreaContainer()),C=()=>d||!i();return{inlineDialog:zZ(h,s,C),inlineBottomDialog:R8(t.inline,h,a,C),banner:B8(h,s,C),cursor:TA(t,g),node:M8(g)}},UZ=t=>(s,a)=>{rA(t)(s,a)},WZ=t=>()=>SO(t),ZZ=t=>s=>fw(t,s),jZ=t=>s=>cP(t,s),qZ=t=>({colorPicker:UZ(t),hasCustomColors:WZ(t),getColors:ZZ(t),getColorCols:jZ(t)}),GZ=t=>()=>m6(t),F8=t=>({isDraggableModal:GZ(t)}),N8=t=>{const s=tn(Y_(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},P8=t=>To(t,"items"),cR=t=>To(t,"format"),$8=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],KZ=t=>Do(t,"items"),YZ=t=>Do(t,"block"),W0=t=>Do(t,"inline"),I8=t=>Do(t,"selector"),uy=t=>yo(t,(s,a)=>{if(KZ(a)){const i=uy(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(W0(a)||YZ(a)||I8(a)){const d=`custom-${ct(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),AA=(t,s)=>{const a=uy(s),i=d=>{ot(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},iR=t=>JF(t).map(s=>{const a=AA(t,s);return QF(t)?$8.concat(a):a}).getOr($8),L8=t=>{const s=_n(t);return s.length===1&&dt(s,"title")},lR=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),XZ=(t,s,a,i)=>{const d=w=>lR(w,a,i),g=w=>{const E=C(w.items);return{...w,type:"submenu",getStyleItems:q(E)}},h=w=>{const E=ct(w.name)?w.name:Z(w.title),D=`custom-${E}`,B={...w,type:"formatter",format:D,isSelected:a(D),getStylePreview:i(D)};return t.formatter.register(E,B),B},C=w=>Oe(w,E=>P8(E)?g(E):cR(E)?d(E):L8(E)?{...E,type:"separator"}:h(E));return C(s)},JZ=t=>{const s=C=>()=>t.formatter.match(C),a=C=>()=>{const w=t.formatter.get(C);return w!==void 0?k.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):k.none()},i=tn([]),d=tn([]),g=tn(!1);return t.on("PreInit",C=>{const w=iR(t),E=XZ(t,w,s,a);i.set(E)}),t.on("addStyleModifications",C=>{const w=XZ(t,C.items,s,a);d.set(w),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:i.get(),w=d.get();return C.concat(w)}}},QZ=t=>{let i=0;const d=()=>i>0,g=C=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[pr(C.tooltipText)]}];return{getConfig:C=>({delayForShow:()=>d()?60:300,delayForHide:q(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(C),onShow:(w,E)=>{i++,C.onShow&&C.onShow(w,E)},onHide:(w,E)=>{i--,C.onHide&&C.onHide(w,E)},onSetup:C.onSetup}),getComponents:g}},ej=t=>In(t)&&t.nodeType===1,tj=wh.trim,H8=t=>s=>!!(ej(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),nj=H8("true"),dy=H8("false"),my=(t,s,a,i,d)=>({type:t,title:s,url:a,level:i,attach:d}),uR=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return nj(s)}return!1},oj=(t,s)=>Oe(_a(Nt.fromDom(s),t),a=>a.dom),z8=t=>t.innerText||t.textContent,dR=t=>t.id?t.id:Z("h"),sj=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,_w=t=>sj(t)&&V8(t),mR=t=>t&&/^(H[1-6])$/.test(t.nodeName),V8=t=>uR(t)&&!dy(t),rj=t=>mR(t)&&V8(t),aj=t=>mR(t)?parseInt(t.nodeName.substr(1),10):0,cj=t=>{var s;const a=dR(t),i=()=>{t.id=a};return my("header",(s=z8(t))!==null&&s!==void 0?s:"","#"+a,aj(t),i)},ij=t=>{const s=t.id||t.name,a=z8(t);return my("anchor",a||"#"+s,"#"+s,0,ae)},lj=t=>Oe(jn(t,rj),cj),U8=t=>Oe(jn(t,_w),ij),W8=t=>oj("h1,h2,h3,h4,h5,h6,a:not([href])",t),fR=t=>tj(t.title).length>0,kA={find:t=>{const s=W8(t);return jn(lj(s).concat(U8(s)),fR)}},Z0="tinymce-url-history",gR=5,Z8=t=>ct(t)&&/^https?/.test(t),uj=t=>qo(t)&&t.length<=gR&&Q(t,Z8),j8=t=>Lt(t)&&Ds(t,s=>!uj(s)).isNone(),q8=()=>{const t=Ch.getItem(Z0);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Z0+" was not valid JSON",a),{};throw a}return j8(s)?s:(console.log("Local storage "+Z0+" was not valid format",s),{})},hR=t=>{if(!j8(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Ch.setItem(Z0,JSON.stringify(t))},dj=t=>{const s=q8();return sn(s,t).getOr([])},pR=(t,s)=>{if(!Z8(t))return;const a=q8(),i=sn(a,s).getOr([]),d=jn(i,g=>g!==t);a[s]=[t].concat(d).slice(0,gR),hR(a)},G8=t=>!!t,bR=t=>Ke(wh.makeMap(t,/[, ]/),G8),vR=t=>k.from(c6(t)),mj=t=>{const s=k.from(u6(t)).filter(G8).map(bR);return vR(t).fold(Je,a=>s.fold(rt,i=>_n(i).length>0?i:!1))},fj=(t,s)=>{const a=mj(t);return Tt(a)?a?vR(t):k.none():a[s]?vR(t):k.none()},gj=(t,s)=>fj(t,s).map(a=>i=>rs.nu(d=>{const g=(C,w)=>{if(!ct(C))throw new Error("Expected value to be string");if(w!==void 0&&!Lt(w))throw new Error("Expected meta to be a object");d({value:C,meta:w})},h={filetype:s,fieldname:i.fieldname,...k.from(i.meta).getOr({})};a.call(t,g,i.value,h)})),K8=t=>k.from(t).filter(ct).getOrUndefined(),IY=t=>j_(t)?k.some({targets:kA.find(t.getBody()),anchorTop:K8(d6(t)),anchorBottom:K8(q_(t))}):k.none(),LY=t=>k.from(i6(t)),Y8=t=>({getHistory:dj,addToHistory:pR,getLinkInformation:()=>IY(t),getValidationHandler:()=>LY(t),getUrlPicker:s=>gj(t,s)}),hj=(t,s,a,i)=>{const d=tn(!1),g=N8(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:ia.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:QZ(t.dialog),checkUiComponentContext:re=>{if(cT(s))return{contextType:"disabled",shouldDisable:!0};const[we,Te=""]=re.split(":"),ze=s.ui.registry.getAll().contexts,Ue=sn(ze,we).fold(()=>sn(ze,"mode").map(Wt=>Wt("design")).getOr(!1),Wt=>Te.charAt(0)==="!"?!Wt(Te.slice(1)):Wt(Te));return{contextType:we,shouldDisable:!Ue}}},C=Y8(s),w=JZ(s),E=qZ(s),D=F8(s),B=()=>d.get(),I=re=>d.set(re),W={shared:{providers:h,anchors:VZ(s,a,i,g.isPositionedAtTop),header:g},urlinput:C,styles:w,colorinput:E,dialog:D,isContextMenuOpen:B,setContextMenuState:I},V=re=>k.none(),se={...W,shared:{...W.shared,interpreter:re=>O8(re,{},se,V),getSink:t.popup}},pe={...W,shared:{...W.shared,interpreter:re=>O8(re,{},pe,V),getSink:t.dialog}};return{popup:se,dialog:pe}},bj={skipFocus:"ToggleToolbarDrawer skipFocus is deprecated see migration guide: https://www.tiny.cloud/docs/tinymce/latest/migration-from-7x/"},vj=t=>{console.warn(bj[t],new Error().stack)},yj=(t,s,a)=>{const i=(gt,Rn)=>{ot([s,...a],pn=>{pn.broadcastEvent(gt,Rn)})},d=(gt,Rn)=>{ot([s,...a],pn=>{pn.broadcastOn([gt],Rn)})},g=gt=>d(Gm(),{target:gt.target}),h=gt=>{d(z1(),{closedTooltip:()=>{gt.preventDefault()}})},C=Pa(),w=_s(C,"touchstart",g),E=_s(C,"touchmove",gt=>i(o2(),gt)),D=_s(C,"touchend",gt=>i(wS(),gt)),B=_s(C,"mousedown",g),I=_s(C,"mouseup",gt=>{gt.raw.button===0&&d(sm(),{target:gt.target})}),W=gt=>d(Gm(),{target:Nt.fromDom(gt.target)}),V=gt=>{gt.button===0&&d(sm(),{target:Nt.fromDom(gt.target)})},se=()=>{ot(t.editorManager.get(),gt=>{t!==gt&&gt.dispatch("DismissPopups",{relatedTarget:t})})},pe=gt=>i(Mg(),Hc(gt)),re=gt=>{d(_c(),{}),i(Fg(),Hc(gt))},we=Xr(Nt.fromDom(t.getElement())),Te=Zi(we,"scroll",gt=>{requestAnimationFrame(()=>{const Rn=t.getContainer();if(Rn!=null){const Go=_d(t,s.element).map(Un=>[Un.element,...Un.others]).getOr([]);wn(Go,Un=>Jo(Un,gt.target))&&(t.dispatch("ElementScroll",{target:gt.target.dom}),i(xS(),gt))}})}),ze=()=>d(_c(),{}),Ue=gt=>{gt.state&&d(Gm(),{target:Nt.fromDom(t.getContainer())})},Wt=gt=>{d(Gm(),{target:Nt.fromDom(gt.relatedTarget.getContainer())})},vt=gt=>t.dispatch("focusin",gt),Ct=gt=>t.dispatch("focusout",gt);t.on("PostRender",()=>{t.on("click",W),t.on("tap",W),t.on("mouseup",V),t.on("mousedown",se),t.on("ScrollWindow",pe),t.on("ResizeWindow",re),t.on("ResizeEditor",ze),t.on("AfterProgressState",Ue),t.on("DismissPopups",Wt),t.on("CloseActiveTooltips",h),ot([s,...a],gt=>{gt.element.dom.addEventListener("focusin",vt),gt.element.dom.addEventListener("focusout",Ct)})}),t.on("remove",()=>{t.off("click",W),t.off("tap",W),t.off("mouseup",V),t.off("mousedown",se),t.off("ScrollWindow",pe),t.off("ResizeWindow",re),t.off("ResizeEditor",ze),t.off("AfterProgressState",Ue),t.off("DismissPopups",Wt),t.off("CloseActiveTooltips",h),ot([s,...a],gt=>{gt.element.dom.removeEventListener("focusin",vt),gt.element.dom.removeEventListener("focusout",Ct)}),B.unbind(),w.unbind(),E.unbind(),D.unbind(),I.unbind(),Te.unbind()}),t.on("detach",()=>{ot([s,...a],jx),ot([s,...a],gt=>gt.destroy())})},Cj=ae,wj=Je,yR=q([]);var Sj=Object.freeze({__proto__:null,setup:Cj,isDocked:wj,getBehaviours:yR});const CR=q(Z("toolbar-height-change")),eg={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},xj="tox-tinymce--toolbar-sticky-on",Ej="tox-tinymce--toolbar-sticky-off",X8=(t,s)=>{const a=ai(s),d=mg(s).dom.innerHeight,g=Pr(a),h=Nt.fromDom(t.elm),C=ld(h),w=ea(h),E=C.y,D=E+w,B=lc(s),I=ea(s),W=B.top,V=W+I,se=Math.abs(W-g.top)<2,pe=Math.abs(V-(g.top+d))<2;if(se&&E<V)rd(g.left,E-I,a);else if(pe&&D>W){const re=E-d+w+I;rd(g.left,re,a)}},Dw=(t,s)=>dt(Ar.getModes(t),s),wR=t=>{const s=i=>ta(i)+(parseInt(nr(i,"margin-top"),10)||0)+(parseInt(nr(i,"margin-bottom"),10)||0),a=t.element;Cu(a).each(i=>{const d="padding-"+Ar.getModes(t)[0];if(Ar.isDocked(t)){const g=Xa(i);Jn(a,"width",g+"px"),Jn(i,d,s(a)+"px")}else Wo(a,"width"),Wo(i,d)})},J8=(t,s)=>{s?(Sr(t,eg.fadeOutClass),ku(t,[eg.transitionClass,eg.fadeInClass])):(Sr(t,eg.fadeInClass),ku(t,[eg.fadeOutClass,eg.transitionClass]))},mu=(t,s)=>{const a=Nt.fromDom(t.getContainer());s?(Hs(a,xj),Sr(a,Ej)):(Hs(a,Ej),Sr(a,xj))},Tj=(t,s)=>{const a=ai(s);Aa(a).filter(i=>!Jo(s,i)).filter(i=>Jo(i,Nt.fromDom(a.dom.body))||ul(t,i)).each(()=>Ta(s))},Q8=(t,s)=>Vr(t).orThunk(()=>s().toOptional().bind(a=>Vr(a.element))),e$=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Ar.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(wR)}),t.on("SkinLoaded",()=>{a().each(i=>{Ar.isDocked(i)?Ar.reset(i):Ar.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(Ar.reset)})),t.on("AfterScrollIntoView",i=>{a().each(d=>{Ar.refresh(d);const g=d.element;od(g)&&X8(i,g)})}),t.on("PostRender",()=>{mu(t,!1)})},Aj=t=>t().map(Ar.isDocked).getOr(!1),Ow=()=>[tu.config({channels:{[CR()]:{onReceive:wR}}})],t$=(t,s)=>{const a=Kn(),i=s.getSink,d=C=>{i().each(w=>C(w.element))},g=C=>{t.inline||wR(C),mu(t,Ar.isDocked(C)),C.getSystem().broadcastOn([_c()],{}),i().each(w=>w.getSystem().broadcastOn([_c()],{}))},h=t.inline?[]:Ow();return[co.config({}),Ar.config({contextual:{lazyContext:C=>{const w=ta(C.element),E=t.inline?t.getContentAreaContainer():t.getContainer();return k.from(E).map(D=>{const B=sa(Nt.fromDom(D));return _d(t,C.element).fold(()=>{const W=B.height-w,V=B.y+(Dw(C,"top")?0:w);return ba(B.x,V,B.width,W)},W=>{const V=Uh(B,Rp(W)),se=Dw(C,"top")?V.y:V.y+w;return ba(V.x,se,V.width,V.height-w)})})},onShow:()=>{d(C=>J8(C,!0))},onShown:C=>{d(w=>dc(w,[eg.transitionClass,eg.fadeInClass])),a.get().each(w=>{Tj(C.element,w),a.clear()})},onHide:C=>{Q8(C.element,i).fold(a.clear,a.set),d(w=>J8(w,!1))},onHidden:()=>{d(C=>dc(C,[eg.transitionClass]))},...eg},lazyViewport:C=>_d(t,C.element).fold(()=>{const E=Vc(),D=r6(t),B=E.y+(Dw(C,"top")&&!Dz(t)?D:0),I=E.height-(Dw(C,"bottom")?D:0);return{bounds:ba(E.x,B,E.width,I),optScrollEnv:k.none()}},E=>({bounds:Rp(E),optScrollEnv:k.some({currentScrollTop:E.element.dom.scrollTop,scrollElmTop:lc(E.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var _A=Object.freeze({__proto__:null,setup:e$,isDocked:Aj,getBehaviours:t$});const kj=t=>{const s=t.editor,a=t.sticky?t$:yR;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Dt(a(s,t.sharedBackstage))}};var xR=eu({factory:(t,s)=>{const a=(d,g)=>{const h=Oe(g,C=>{const w={type:"menubutton",text:C.text,fetch:D=>{D(C.getItems())},context:"any"},E=fN(w).mapError(D=>Df(D)).getOrDie();return Tw(E,"tox-mbtn",s.backstage,k.some("menuitem"))});io.set(d,h)},i={focus:En.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:Dt([io.config({}),ao("menubar-events",[or(d=>{t.onSetup(d)}),Ye(Bu(),(d,g)=>{Fs(d.element,".tox-mbtn--active").each(h=>{uc(g.event.target,".tox-mbtn").each(C=>{Jo(h,C)||d.getSystem().getByDom(h).each(w=>{d.getSystem().getByDom(C).each(E=>{su.expand(E),su.close(w),co.focus(E)})})})})}),Ye(S1(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{su.isOpen(h)&&(su.expand(C),su.close(h))})})})]),En.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),k.some(!0))}),Ys.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[ft("dom"),ft("uid"),ft("onEscape"),ft("backstage"),$e("onSetup",ae)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const _j="💝 Get all features",Md="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",Dj=t=>{const s=t.promotionLink?[{dom:{tag:"a",attributes:{href:Md,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:_j}}]:[];return{uid:t.uid,dom:t.dom,components:s}},DA=t=>{const{sidebars:s}=t.ui.registry.getAll();ot(_n(s),a=>{const i=s[a],d=()=>Sn(k.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}},context:"any"})})},n$=t=>({element:()=>t.element.dom}),o$=(t,s)=>{const a=Oe(_n(s),i=>{const d=s[i],g=Ou(kN(d));return{name:i,getApi:n$,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Oe(a,i=>{const d=tn(ae);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:cw.unnamedEvents([qu(i,d),yh(i,d),Ye(x1(),(g,h)=>{const C=h.event;j(a,E=>E.name===C.name).each(E=>{(C.visible?E.onShow:E.onHide)(E.getApi(g))})})])})})},Oj=t=>Si.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:o$(s,t),slotBehaviours:cw.unnamedEvents([or(a=>Si.hideAllSlots(a))])})),s$=(t,s,a)=>{Qe.getCurrent(t).each(d=>{io.set(d,[Oj(s)]);const g=a?.toLowerCase();ct(g)&&Do(s,g)&&Qe.getCurrent(d).each(h=>{Si.showSlot(h,g),sl.immediateGrow(d),Wo(d.element,"width"),OA(t.element,"region")})})},OA=(t,s)=>{zn(t,"role",s)},Rj=(t,s)=>{Qe.getCurrent(t).each(i=>{Qe.getCurrent(i).each(g=>{sl.hasGrown(i)?Si.isShowing(g,s)?(sl.shrink(i),OA(t.element,"presentation")):(Si.hideAllSlots(g),Si.showSlot(g,s),OA(t.element,"region")):(Si.hideAllSlots(g),Si.showSlot(g,s),sl.grow(i),OA(t.element,"region"))})})},Bj=t=>Qe.getCurrent(t).bind(a=>sl.isGrowing(a)||sl.hasGrown(a)?Qe.getCurrent(a).bind(g=>j(Si.getSlotNames(g),h=>Si.isShowing(g,h))):k.none()),ER=Z("FixSizeEvent"),TR=Z("AutoSizeEvent"),Mj=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Dt([Ys.config({}),co.config({}),sl.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Qe.getCurrent(s).each(Si.hideAllSlots),zo(s,TR)},onGrown:s=>{zo(s,TR)},onStartGrow:s=>{Bn(s,ER,{width:lr(s.element,"width").getOr("")})},onStartShrink:s=>{Bn(s,ER,{width:Xa(s.element)+"px"})}}),io.config({}),Qe.config({find:s=>{const a=io.contents(s);return Gt(a)}})])}],behaviours:Dt([Tm.childAt(0),ao("sidebar-sliding-events",[Ye(ER,(s,a)=>{Jn(s.element,"width",a.event.width)}),Ye(TR,(s,a)=>{Wo(s.element,"width")})])])}),Fj=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:nf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),AR=t=>Qe.getCurrent(t).each(s=>Ta(s.element,!0)),r$=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;k.from(t.iframeElement).map(Nt.fromDom).each(d=>{s?($a(d,a).each(g=>zn(d,i,g)),zn(d,a,-1)):(tr(d,a),$a(d,i).each(g=>{zn(d,a,g),tr(d,i)}))})},a$=(t,s,a,i)=>{const d=s.element;if(r$(t,a),a)pt.block(s,Fj(i)),Wo(d,"display"),tr(d,"aria-hidden"),t.hasFocus()&&AR(s);else{const g=Qe.getCurrent(s).exists(h=>gl(h.element));pt.unblock(s),Jn(d,"display","none"),zn(d,"aria-hidden","true"),g&&t.focus()}},Nj=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Dt([io.config({}),pt.config({focus:!1}),Qe.config({find:s=>Gt(s.components())})]),components:[]}),c$=t=>t.type==="focusin",Pj=t=>c$(t)?(t.composed?Gt(t.composedPath()):k.from(t.target)).map(Nt.fromDom).filter(ri).exists(a=>Wr(a,"mce-pastebin")):!1,$j=(t,s,a)=>{const i=tn(!1),d=Kn(),g=C=>{i.get()&&!Pj(C)&&(C.preventDefault(),AR(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const h=C=>{C!==i.get()&&(i.set(C),a$(t,s(),C,a.providers),lW(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),Oo(C.time)){const w=rT.setEditorTimeout(t,()=>h(C.state),C.time);d.set(w)}else h(C.state),d.clear()})},kR=t=>{const s=t.label.isNone()?t.title.fold(()=>({}),a=>({attributes:{"aria-label":a}})):t.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...t.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[pr(a)]})).toArray(),QE.parts.items({})],items:t.items,markers:{itemSelector:".tox-tbtn:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Dt([Ys.config({}),co.config({ignore:!0})])}},Rw=t=>QE.sketch(kR(t)),_R=(t,s)=>{const a=or(i=>{const d=Oe(t.initGroups,Rw);As.setGroups(i,d)});return Dt([ju.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),vr(()=>t.providers.checkUiComponentContext("any")),En.config({mode:s,onEscape:t.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),ao("toolbar-events",[a])])},i$=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":kR({title:k.none(),label:k.none(),items:[]}),"overflow-button":PY({context:"any",icon:k.some("more-drawer"),enabled:!0,tooltip:k.some("Reveal or hide additional toolbar items")},k.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:_R(t,s)}},Ij=t=>{const s=i$(t),a=4,i=B_.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return B_.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=ld(d),h=Qp(d),C=ld(h),w=Math.max(h.dom.scrollHeight,C.height);return ba(g.x+a,C.y,g.width-a*2,w)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},Lj=t=>{const s=N_.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=N_.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=i$(t);return N_.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([CR()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([CR()],{type:"closed"}),t.onToggled(d,!1)}})},Bw=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return As.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Vu.scrolling?["tox-toolbar--scrolling"]:[])},components:[As.parts.groups({})],toolbarBehaviours:_R(t,s)})},Hj=(t,s)=>{var a,i;const d=t.type==="togglebutton",g=t.icon.map(Te=>jp(Te,s.icons)).map(ps),C=Te=>{const ze=Ct=>{g.map(gt=>gt.getOpt(Te).each(Rn=>{io.set(Rn,[jp(Ct,s.icons)])}))},Ue=Ct=>{const gt=Te.element;Ct?(Hs(gt,"tox-button--enabled"),zn(gt,"aria-pressed",!0)):(Sr(gt,"tox-button--enabled"),tr(gt,"aria-pressed"))},Wt=()=>Wr(Te.element,"tox-button--enabled"),vt=()=>Ta(Te.element);if(d)return t.onAction({setIcon:ze,setActive:Ue,isActive:Wt,focus:vt});if(t.type==="button")return t.onAction({setIcon:ze})},w={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:k.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},E=C8((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),D=d?t.text.map(s.translate):k.some(s.translate(t.text)),B=D.map(pr),I=w.tooltip.or(D).map(Te=>({"aria-label":s.translate(Te)})).getOr({}),W=g.map(Te=>Te.asSpec()),V=oy([W,B]),se=t.icon.isSome()&&B.isSome(),pe={tag:"button",classes:E.concat(...t.icon.isSome()&&!se?["tox-button--icon"]:[]).concat(...se?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:I},re=[],we=Aw(w,k.some(C),re,pe,V,t.tooltip,s);return ei.sketch(we)},l$=(t,s)=>Hj(t,s),zj=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Oe(t.buttons,a=>l$(a,s))}),u$=Nr().deviceType,Vj=u$.isPhone(),Uj=u$.isTablet(),Wj=t=>{let s=!1;const a=Oe(t.buttons,i=>i.type==="group"?(s=!0,zj(i,t.providers)):l$(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...Vj||Uj?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Dt([co.config({}),En.config({mode:"flow",selector:"button, .tox-button",focusInside:$u.OnEnterOrSpaceMode})]),components:s?a:[hm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),hm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},Zj=t=>({uid:t.uid,behaviours:Dt([co.config({}),Ys.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),jj=(t,s,a,i)=>{const d={getPane:g=>sc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:Dt([co.config({}),En.config({mode:"cyclic",focusInside:$u.OnEnterOrSpaceMode})]),apis:d}};var fy=Pi({name:"silver.View",configFields:[ft("viewConfig")],partFields:[tl({factory:{sketch:Wj},schema:[ft("buttons"),ft("providers")],name:"header"}),tl({factory:{sketch:Zj},schema:[],name:"pane"})],factory:jj,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const DR=(t,s,a)=>Eo(s,(i,d)=>{const g=Ou(BN(i));return t.slot(d,fy.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[fy.parts.header({buttons:g.buttons,providers:a})]:[],fy.parts.pane({})]}))}),qj=(t,s)=>Si.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:DR(a,t,s),slotBehaviours:cw.unnamedEvents([or(i=>Si.hideAllSlots(i))])})),d$=t=>j(Si.getSlotNames(t),s=>Si.isShowing(t,s)),m$=t=>{const s=t.element;Jn(s,"display","none"),zn(s,"aria-hidden","true")},f$=t=>{const s=t.element;Wo(s,"display"),tr(s,"aria-hidden")},Gj=t=>({getContainer:q(t)}),g$=(t,s,a)=>{Si.getSlot(t,s).each(i=>{fy.getPane(i).each(d=>{a(i)(Gj(d.element.dom))})})},Kj=(t,s)=>g$(t,s,fy.getOnShow),Yj=(t,s)=>g$(t,s,fy.getOnHide);var RA=eu({factory:(t,s)=>{const g={setViews:(h,C)=>{io.set(h,[qj(C,s.backstage.shared.providers)])},whichView:h=>Qe.getCurrent(h).bind(d$),toggleView:(h,C,w,E)=>Qe.getCurrent(h).exists(D=>{const B=d$(D),I=B.exists(V=>E===V),W=Si.getSlot(D,E).isSome();return W&&(Si.hideAllSlots(D),I?(m$(h),C()):(w(),f$(h),Si.showSlot(D,E),Kj(D,E)),B.each(V=>Yj(D,V))),W})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Dt([io.config({}),Qe.config({find:h=>{const C=io.contents(h);return Gt(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[ft("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,d)=>t.toggleView(s,a,i,d),whichView:(t,s)=>t.whichView(s)}});const h$=(t,s,a)=>{let i=!1;const d=h=>{My(h,".tox-statusbar").each(C=>{nr(C,"display")==="none"&&ha(C,"aria-hidden")==="true"?(Wo(C,"display"),tr(C,"aria-hidden")):(Jn(C,"display","none"),zn(C,"aria-hidden","true"))})},g={getSocket:h=>sc.getPart(h,t,"socket"),setSidebar:(h,C,w)=>{sc.getPart(h,t,"sidebar").each(E=>s$(E,C,w))},toggleSidebar:(h,C)=>{sc.getPart(h,t,"sidebar").each(w=>Rj(w,C))},whichSidebar:h=>sc.getPart(h,t,"sidebar").bind(Bj).getOrNull(),getHeader:h=>sc.getPart(h,t,"header"),getToolbar:h=>sc.getPart(h,t,"toolbar"),setToolbar:(h,C)=>{sc.getPart(h,t,"toolbar").each(w=>{const E=Oe(C,Rw);w.getApis().setGroups(w,E)})},setToolbars:(h,C)=>{sc.getPart(h,t,"multiple-toolbar").each(w=>{const E=Oe(C,D=>Oe(D,Rw));j3.setItems(w,E)})},refreshToolbar:h=>{sc.getPart(h,t,"toolbar").each(w=>w.getApis().refresh(w))},toggleToolbarDrawer:h=>{sc.getPart(h,t,"toolbar").each(C=>{xa(C.getApis().toggle,w=>w(C))})},toggleToolbarDrawerWithoutFocusing:h=>{sc.getPart(h,t,"toolbar").each(C=>{xa(C.getApis().toggleWithoutFocusing,w=>w(C))})},isToolbarDrawerToggled:h=>sc.getPart(h,t,"toolbar").bind(C=>k.from(C.getApis().isOpen).map(w=>w(C))).getOr(!1),getThrobber:h=>sc.getPart(h,t,"throbber"),focusToolbar:h=>{sc.getPart(h,t,"toolbar").orThunk(()=>sc.getPart(h,t,"multiple-toolbar")).each(w=>{En.focusIn(w)})},setMenubar:(h,C)=>{sc.getPart(h,t,"menubar").each(w=>{xR.setMenus(w,C)})},focusMenubar:h=>{sc.getPart(h,t,"menubar").each(C=>{xR.focus(C)})},setViews:(h,C)=>{sc.getPart(h,t,"viewWrapper").each(w=>{RA.setViews(w,C)})},toggleView:(h,C)=>sc.getPart(h,t,"viewWrapper").exists(w=>RA.toggleView(w,()=>g.showMainView(h),()=>g.hideMainView(h),C)),whichView:h=>sc.getPart(h,t,"viewWrapper").bind(RA.whichView).getOrNull(),hideMainView:h=>{i=g.isToolbarDrawerToggled(h),i&&g.toggleToolbarDrawer(h),sc.getPart(h,t,"editorContainer").each(C=>{const w=C.element;d(w),Jn(w,"display","none"),zn(w,"aria-hidden","true")})},showMainView:h=>{i&&g.toggleToolbarDrawer(h),sc.getPart(h,t,"editorContainer").each(C=>{const w=C.element;d(w),Wo(w,"display"),tr(w,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},BA=of.optional({factory:xR,name:"menubar",schema:[ft("backstage")]}),OR=t=>t.type===Vu.sliding?Lj:t.type===Vu.floating?Ij:Bw,Xj=of.optional({factory:{sketch:t=>j3.sketch({uid:t.uid,dom:t.dom,listBehaviours:Dt([En.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>Bw({type:t.type,uid:Z("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),k.some(!0))}),setupItem:(s,a,i,d)=>{As.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[ft("dom"),ft("onEscape")]}),Jj=of.optional({factory:{sketch:t=>{const s=OR(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),k.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[ft("dom"),ft("onEscape"),ft("getSink")]}),p$=of.optional({factory:{sketch:kj},name:"header",schema:[ft("dom")]}),Qj=of.optional({factory:{sketch:Dj},name:"promotion",schema:[ft("dom"),ft("promotionLink")]}),eq=of.optional({name:"socket",schema:[ft("dom")]}),tq=of.optional({factory:{sketch:Mj},name:"sidebar",schema:[ft("dom")]}),b$=of.optional({factory:{sketch:Nj},name:"throbber",schema:[ft("dom")]}),nq=of.optional({factory:RA,name:"viewWrapper",schema:[ft("backstage")]}),oq=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),RR=of.optional({factory:{sketch:oq},name:"editorContainer",schema:[]});var qs=Pi({name:"OuterContainer",factory:h$,configFields:[ft("dom"),ft("behaviours")],partFields:[p$,BA,Jj,Xj,eq,tq,Qj,b$,nq,RR],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const sq="file edit view insert format tools table help",BR={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code suggestededits revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},rq=(t,s,a)=>{const i=n6(a).split(/[ ,]/);return{text:t.title,getItems:()=>ne(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:wn(i,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},MA=t=>t.split(" "),v$=(t,s)=>{const a={...BR,...s.menus},i=_n(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?MA(sq):MA(s.menubar===!1?"":s.menubar),g=jn(d,C=>{const w=Do(BR,C);return i?w||sn(s.menus,C).exists(E=>Do(E,"items")):w}),h=Oe(g,C=>{const w=a[C];return rq({title:w.title,items:MA(w.items)},s,t)});return jn(h,C=>{const w=E=>ct(E)||E.type!=="separator";return C.getItems().length>0&&wn(C.getItems(),w)})},y$=t=>{const s=()=>{t._skinLoaded=!0,cW(t)};return()=>{t.initialized?s():t.on("init",s)}},aq=(t,s)=>()=>iW(t,{message:s}),cq=t=>{const s=C6(t);return s?k.from(s):k.none()},C$=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),Mw=(t,s,a,i)=>(t.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,a)),iq=(t,s)=>"ui/"+t+"/"+s,lq=t=>k.from(tinymce.Resource.get(t)).filter(ct),MR=(t,s,a="")=>{const i=cq(t).map(g=>iq(g,`${s}.css`)),d=i.bind(lq);return os(i,d,(g,h)=>({_kind:"load-raw",key:g,css:h})).getOrThunk(()=>{const g=t.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${g}.css`}})},FR=(t,s)=>{const a=t.ui.styleSheetLoader,i=MR(t,"skin",s);switch(i._kind){case"load-raw":const{key:d,css:g}=i;return Mw(t,d,g,a),Promise.resolve();case"load-stylesheet":const{url:h}=i;return C$(t,h,a);default:return Promise.resolve()}},NR=(t,s)=>{if($l(Nt.fromDom(t.getElement()))){const i=ZC.DOM.styleSheetLoader,d=MR(t,"skin.shadowdom",s);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return Mw(t,g,h,i),Promise.resolve();case"load-stylesheet":const{url:C}=d;return C$(t,C,i);default:return Promise.resolve()}}else return Promise.resolve()},uq=(t,s,a)=>{const d=MR(t,s?"content.inline":"content",a);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return s?Mw(t,g,h,t.ui.styleSheetLoader):t.on("PostRender",()=>{Mw(t,g,h,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:C}=d;return a&&t.contentCSS.push(C),Promise.resolve();default:return Promise.resolve()}},dq=async(t,s)=>{const a=w6(s);if(await uq(s,t,a),!K_(s)&&ct(a))return Promise.all([FR(s,a),NR(s,a)]).then()},w$=(t,s)=>dq(t,s).then(y$(s),aq(s,"Skin could not be loaded")),mq=gn(w$,!1),fq=gn(w$,!0),S$=t=>({isEnabled:()=>!yn.isDisabled(t),setEnabled:s=>yn.set(t,!s),setText:s=>Bn(t,Bd,{text:s}),setIcon:s=>Bn(t,Sh,{icon:s})}),gq=t=>({setActive:s=>{ts.set(t,s)},isActive:()=>ts.isOn(t),isEnabled:()=>!yn.isDisabled(t),setEnabled:s=>yn.set(t,!s),setText:s=>Bn(t,Bd,{text:s}),setIcon:s=>Bn(t,Sh,{icon:s})}),hq=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),pq=Z("focus-button"),Fw=(t,s,a,i,d,g,h)=>{const C=s.map(E=>ps(hA(E,"tox-tbtn",d))),w=t.map(E=>ps(jp(E,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...hq(a,d),...In(h)?{"data-mce-name":h}:{}}},components:oy([w.map(E=>E.asSpec()),C.map(E=>E.asSpec())]),eventOrder:{[bi()]:["focusing","alloy.base.behaviour",Zp],[dd()]:[Zp,"toolbar-group-button-events"],[zm()]:[Zp,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:Dt([ju.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),vr(()=>d.checkUiComponentContext(g)),ao(Zp,[or((E,D)=>Rd(E)),Ye(Bd,(E,D)=>{C.bind(B=>B.getOpt(E)).each(B=>{io.set(B,[pr(d.translate(D.event.text))])})}),Ye(Sh,(E,D)=>{w.bind(B=>B.getOpt(E)).each(B=>{io.set(B,[jp(D.event.icon,d.icons)])})}),Ye(bi(),(E,D)=>{D.event.prevent(),zo(E,pq)})])].concat(i.getOr([])))}},FA=(t,s,a,i,d)=>{const g=s.shared,h=tn(ae),C={toolbarButtonBehaviours:[],getApi:S$,onSetup:t.onSetup},w=[ao("toolbar-group-button-events",[qu(C,h),yh(C,h)]),...t.tooltip.map(E=>br.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(E)}))).toArray()];return uh.sketch({lazySink:g.getSink,fetch:()=>rs.nu(E=>{E(Oe(a(t.items),Rw))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:Fw(t.icon,t.text,t.tooltip,k.some(w),g.providers,t.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},NA=(t,s,a,i)=>{var d;const g=tn(ae),h=Fw(t.icon,t.text,t.tooltip,k.none(),a,t.context,i);return ei.sketch({dom:h.dom,components:h.components,eventOrder:t8,buttonBehaviours:{...Dt([ao("toolbar-button-events",[e8({onAction:t.onAction,getApi:s.getApi}),qu(s,g),yh(s,g)]),...t.tooltip.map(C=>br.config(a.tooltips.getConfig({tooltipText:a.translate(C)+t.shortcut.map(w=>` (${P0(w)})`).getOr("")}))).toArray(),ju.toolbarButton(()=>!t.enabled||a.checkUiComponentContext(t.context).shouldDisable),vr(()=>a.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[Zp]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[Zp]}})},x$=(t,s,a)=>tg(t,s,[],a),tg=(t,s,a,i)=>NA(t,{toolbarButtonBehaviours:a.length>0?[ao("toolbarButtonWith",a)]:[],getApi:S$,onSetup:t.onSetup},s,i),E$=(t,s,a)=>T$(t,s,[],a),T$=(t,s,a,i)=>NA(t,{toolbarButtonBehaviours:[io.config({}),ts.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[ao("toolbarToggleButtonWith",a)]:[]),getApi:gq,onSetup:t.onSetup},s,i),bq=(t,s,a)=>i=>rs.nu(d=>s.fetch(d)).map(d=>k.from(z0(yt(aA(Z("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,Sm.CLOSE_ON_EXECUTE,s.select.getOr(Je),a),{movement:gw(s.columns,s.presets),menuBehaviours:cw.unnamedEvents(s.columns!=="auto"?[]:[or((g,h)=>{XD(g,4,DT(s.presets)).each(({numRows:C,numColumns:w})=>{En.setGridSize(g,C,w)})})])})))),vq=(t,s,a)=>i=>{const d=i.getSystem(),g=i.element,h=()=>{const w=Wr(g,"tox-split-button__chevron"),E=w?ki(g).bind(B=>d.getByDom(B).toOptional()):k.some(i),D=w?k.some(i):n1(g).bind(B=>d.getByDom(B).toOptional().filter(I=>Wr(I.element,"tox-split-button__chevron")));return{mainOpt:E,chevronOpt:D}},C=w=>{const{mainOpt:E,chevronOpt:D}=h();E.each(w),D.each(w)};return{isEnabled:()=>{const{mainOpt:w}=h();return w.exists(E=>!yn.isDisabled(E))},setEnabled:w=>C(E=>yn.set(E,!w)),setText:w=>{const{mainOpt:E}=h();E.each(D=>Bn(D,Bd,{text:w}))},setIcon:w=>{const{mainOpt:E}=h();E.each(D=>Bn(D,Sh,{icon:w}))},setIconFill:(w,E)=>C(D=>{Fs(D.element,`svg path[class="${w}"], rect[class="${w}"]`).each(B=>{zn(B,"fill",E)})}),isActive:()=>{const{mainOpt:w}=h();return w.exists(E=>ts.isOn(E))},setActive:w=>{const{mainOpt:E}=h();E.each(D=>ts.set(D,w))},setTooltip:w=>{t.set(w);const{mainOpt:E,chevronOpt:D}=h();E.each(I=>zn(I.element,"aria-label",s.providers.translate(w)));const B=a.chevronTooltip.map(I=>s.providers.translate(I)).getOr(s.providers.translate(`${w} menu`));D.each(I=>zn(I.element,"aria-label",B))}}},yq=(t,s,a)=>{const i=tn(ae),d=tn(t.tooltip.getOr("")),g=vq(d,s,t),h=Z("tox-split-menu"),C=tn(!1),w=()=>({"aria-haspopup":"menu","aria-expanded":String(C.get()),"aria-controls":h}),E=()=>t.tooltip.map(V=>s.providers.translate(V)).getOr(s.providers.translate("Text color")),D=()=>t.chevronTooltip.map(V=>s.providers.translate(V)).getOrThunk(()=>{const V=E();return s.providers.translate(["{0} menu",V])}),B=(V,se)=>{C.set(V),zn(se.element,"aria-expanded",String(V))},I=su.sketch({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:mD("chevron-down",s.providers.icons),attributes:{"aria-label":D(),...In(a)?{"data-mce-name":a+"-chevron"}:{},...w()}},components:[],toggleClass:"tox-tbtn--enabled",dropdownBehaviours:Dt([ao("split-dropdown-events",[or((V,se)=>Rd(V)),qu({getApi:g,onSetup:t.onSetup},i),Ye("alloy-dropdown-open",V=>B(!0,V)),Ye("alloy-dropdown-close",V=>B(!1,V))]),ju.toolbarButton(()=>s.providers.checkUiComponentContext(t.context).shouldDisable),vr(()=>s.providers.checkUiComponentContext(t.context)),$v.config({}),br.config(s.providers.tooltips.getConfig({tooltipText:D(),onShow:V=>{if(d.get()!==t.tooltip.getOr("")){const se=t.chevronTooltip.map(pe=>s.providers.translate(pe)).getOr(`${s.providers.translate(d.get())} menu`);br.setComponents(V,s.providers.tooltips.getComponents({tooltipText:se}))}}}))]),lazySink:s.getSink,fetch:bq(g,t,s.providers),getHotspot:V=>ki(V.element).bind(se=>V.getSystem().getByDom(se).toOptional()),onOpen:(V,se,pe)=>{ws.highlightBy(pe,re=>Wr(re.element,"tox-collection__item--active")),ws.getHighlighted(pe).each(En.focusIn)},parts:{menu:{...jv(!1,t.columns,t.presets),dom:{...jv(!1,t.columns,t.presets).dom,tag:"div",attributes:{id:h}}}}});return[ei.sketch({...Fw(t.icon,t.text,k.none(),k.some([ts.config({toggleClass:"tox-tbtn--enabled",aria:t.presets==="color"?{mode:"none"}:{mode:"pressed"},toggleOnExecute:!1}),ju.toolbarButton(()=>s.providers.checkUiComponentContext(t.context).shouldDisable),vr(()=>s.providers.checkUiComponentContext(t.context)),ao("split-main-aria-events",[]),...t.tooltip.isSome()?[br.config(s.providers.tooltips.getConfig({tooltipText:s.providers.translate(t.tooltip.getOr("")),onShow:V=>{if(d.get()!==t.tooltip.getOr("")){const se=s.providers.translate(d.get());br.setComponents(V,s.providers.tooltips.getComponents({tooltipText:se}))}}}))]:[]]),s.providers,t.context,a),dom:{...Fw(t.icon,t.text,k.none(),k.none(),s.providers,t.context,a).dom,classes:["tox-tbtn","tox-split-button__main"],attributes:{"aria-label":E(),...In(a)?{"data-mce-name":a}:{}}},action:V=>{if(t.onAction){const se=g(V);se.isEnabled()&&t.onAction(se)}}}),I]},Cq=".tox-toolbar-slider__input,.tox-toolbar-textfield",A$=t=>{kr.getContent(t).each(s=>{Fs(s.element,Cq).fold(()=>En.focusIn(s),Ta)})},wq=t=>Vr(t.element).each(s=>{bl(s,'[tabindex="-1"]').each(a=>{Ta(a)})}),PR=Z("forward-slide"),PA=Z("backward-slide"),$R=Z("change-slide-event"),Nw="tox-pop--resizing",Sq=t=>{const s=tn([]);return{sketch:kr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:i=>{s.set([]),kr.getContent(i).each(d=>{Wo(d.element,"visibility")}),Sr(i.element,Nw),Wo(i.element,"width")},onHide:()=>{s.set([]),t.onHide()},inlineBehaviours:Dt([ao("context-toolbar-events",[Zg(xl(),(i,d)=>{d.event.raw.propertyName==="width"&&(Sr(i.element,Nw),Wo(i.element,"width"))}),Ye($R,(i,d)=>{const g=i.element;Wo(g,"width");const h=Xa(g),C=Vr(i.element).isSome();Wo(g,"left"),Wo(g,"right"),Wo(g,"max-width"),kr.setContent(i,d.event.contents),Hs(g,Nw);const w=Xa(g);Jn(g,"transition","none"),kr.reposition(i),Wo(g,"transition"),Jn(g,"width",h+"px"),d.event.focus.fold(()=>{C&&A$(i)},E=>{Aa(Xr(i.element)).fold(()=>Ta(E),D=>{Jo(D,E)||t.focusElement(E)})}),setTimeout(()=>{Jn(i.element,"width",w+"px")},0)}),Ye(PR,(i,d)=>{kr.getContent(i).each(g=>{s.set(s.get().concat([{bar:g,focus:Aa(Xr(i.element))}]))}),Bn(i,$R,{contents:d.event.forwardContents,focus:k.none()})}),Ye(PA,(i,d)=>{t.onBack(),go(s.get()).each(g=>{s.set(s.get().slice(0,s.get().length-1)),Bn(i,$R,{contents:y(g.bar),focus:g.focus})})})]),En.config({mode:"special",onEscape:i=>go(s.get()).fold(()=>t.onEscape(),d=>(zo(i,PA),k.some(!0)))})]),lazySink:()=>dn.value(t.sink)}),inSubtoolbar:()=>s.get().length>0}},xq=(t,s)=>{const a=Ou(HT({type:"button",icon:"chevron-left",tooltip:"Back",onAction:ae}));return tg(a,s.shared.providers,[Ye(qO,i=>{zo(i,PA)})])},gy=(t,s,a)=>Fa(a)?t.translate(s):t.translate([s,t.translate(a)]),Eq=(t,s)=>{const a=(h,C,w,E)=>{const D=t.shared.providers.translate(h.title);if(h.type==="separator")return k.some({type:"separator",text:D});if(h.type==="submenu"){const B=ne(h.getStyleItems(),I=>i(I,C,E));return C===0&&B.length<=0?k.none():k.some({type:"nestedmenuitem",text:D,enabled:B.length>0,getSubmenuItems:()=>ne(h.getStyleItems(),I=>i(I,C,E))})}else return k.some({type:"togglemenuitem",text:D,icon:h.icon,active:h.isSelected(E),enabled:!w,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),B=>({meta:{style:B}}))})},i=(h,C,w)=>{const E=h.type==="formatter"&&s.isInvalid(h);return C===0?E?[]:a(h,C,!1,w).toArray():a(h,C,E,w).toArray()},d=h=>{const C=s.getCurrentValue(),w=s.shouldHide?0:1;return ne(h,E=>i(E,w,C))};return{validateItems:d,getFetch:(h,C)=>(w,E)=>{const D=C(),B=d(D),I=iy(B,Sm.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:k.none()});E(I)}}},hy=(t,s)=>{const a=s.dataset,i=a.type==="basic"?()=>Oe(a.data,d=>lR(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:Eq(t,s),getStyleItems:i}},Pw=(t,s,a,i,d,g)=>{const{items:h,getStyleItems:C}=hy(s,a),w=tn(a.tooltip),E=B=>({getComponent:q(B),setTooltip:I=>{const W=s.shared.providers.translate(I);zn(B.element,"aria-label",W),w.set(I)}}),D=B=>{const I=W=>B.setTooltip(gy(t,i(W.value),W.value));return t.on(d,I),JT(H0(t,"NodeChange",W=>{const V=W.getComponent();a.updateText(V),yn.set(W.getComponent(),!t.selection.isEditable()||C().length===0)})(B),()=>t.off(d,I))};return Ew({context:"mode:design",text:a.icon.isSome()?k.none():a.text,icon:a.icon,ariaLabel:k.some(a.tooltip),tooltip:k.none(),role:k.none(),fetch:h.getFetch(s,C),onSetup:D,getApi:E,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[br.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:B=>{if(a.tooltip!==w.get()){const I=s.shared.providers.translate(w.get());br.setComponents(B,s.shared.providers.tooltips.getComponents({tooltipText:I}))}}})})]},"tox-tbtn",s.shared,g)},k$=t=>Oe(t,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),_$=t=>({type:"basic",data:t});var j0;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(j0||(j0={}));const Tq=(t,s)=>s===j0.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),$A=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:k$(Tq(i,a))}},Aq="Align",D$=q("Alignment {0}"),O$="left",IA=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],R$=t=>{const s=()=>j(IA,C=>t.formatter.match(C.format)),a=C=>()=>t.formatter.match(C),i=C=>k.none,d=C=>{const E=s().fold(q(O$),D=>D.title.toLowerCase());Bn(C,Sh,{icon:`align-${E}`}),dW(t,{value:E})},g=_$(IA),h=C=>()=>j(IA,w=>w.format===C.format).each(w=>t.execCommand(w.command));return{tooltip:gy(t,D$(),O$),text:k.none(),icon:k.some("align-left"),isSelectedFor:a,getCurrentValue:k.none,getPreviewFor:i,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},B$=(t,s)=>Pw(t,s,R$(t),D$,"AlignTextUpdate","align"),kq=(t,s)=>{const a=hy(s,R$(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(Aq),onSetup:Ii(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},M$=(t,s)=>{const a=s(),i=Oe(a,d=>d.format);return k.from(t.formatter.closest(i)).bind(d=>j(a,g=>g.format===d))},_q="Blocks",F$=q("Block {0}"),IR="Paragraph",N$=t=>{const s=g=>()=>t.formatter.match(g),a=g=>()=>{const h=t.formatter.get(g);return h?k.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):k.none()},i=g=>{const C=M$(t,()=>d.data).fold(q(IR),w=>w.title);Bn(g,Bd,{text:C}),gW(t,{value:C})},d=$A(t,"block_formats",j0.SemiColon);return{tooltip:gy(t,F$(),IR),text:k.some(IR),icon:k.none(),isSelectedFor:s,getCurrentValue:k.none,getPreviewFor:a,onAction:sP(t),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},Dq=(t,s)=>Pw(t,s,N$(t),F$,"BlocksTextUpdate","blocks"),P$=(t,s)=>{const a=hy(s,N$(t));t.ui.registry.addNestedMenuItem("blocks",{text:_q,onSetup:Ii(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},Oq="Fonts",$$=q("Font {0}"),LR="System Font",Rq=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],I$=t=>{const s=t.split(/\s*,\s*/);return Oe(s,a=>a.replace(/^['"]+|['"]+$/g,""))},L$=(t,s)=>s.length>0&&Q(s,a=>t.indexOf(a.toLowerCase())>-1),Bq=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=I$(t.toLowerCase());return L$(a,Rq)||L$(a,s)}else return!1},HR=t=>{const s=()=>{const w=V=>V?I$(V)[0]:"",E=t.queryCommandValue("FontName"),D=C.data,B=E?E.toLowerCase():"",I=y6(t);return{matchOpt:j(D,V=>{const se=V.format;return se.toLowerCase()===B||w(se).toLowerCase()===w(B).toLowerCase()}).orThunk(()=>Er(Bq(B,I),{title:LR,format:B})),font:E}},a=w=>E=>E.exists(D=>D.format===w),i=()=>{const{matchOpt:w}=s();return w},d=w=>()=>k.some({tag:"div",styles:w.indexOf("dings")===-1?{"font-family":w}:{}}),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,w.format)})},h=w=>{const{matchOpt:E,font:D}=s(),B=E.fold(q(D),I=>I.title);Bn(w,Bd,{text:B}),eP(t,{value:B})},C=$A(t,"font_family_formats",j0.SemiColon);return{tooltip:gy(t,$$(),LR),text:k.some(LR),icon:k.none(),isSelectedFor:a,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:Je}},Mq=(t,s)=>Pw(t,s,HR(t),$$,"FontFamilyTextUpdate","fontfamily"),Fq=(t,s)=>{const a=hy(s,HR(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(Oq),onSetup:Ii(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})};var $w=tinymce.util.Tools.resolve("tinymce.util.VK");const Nq=(t,s,a,i)=>{let d=k.none();const g=Te=>Te.map(ze=>jt.getValue(ze)).getOr(""),h=H0(t,"NodeChange SwitchMode DisabledStateChange",Te=>{const ze=Te.getComponent();d=k.some(ze),a.updateInputValue(ze),yn.set(ze,!t.selection.isEditable()||cT(t))}),C=Te=>({getComponent:q(Te)}),w=tn(ae),E=Z("custom-number-input-events"),D=(Te,ze,Ue)=>{const Wt=g(d),vt=a.getNewValue(Wt,Te),Ct=Wt.length-`${vt}`.length,gt=d.map(pn=>pn.element.dom.selectionStart-Ct),Rn=d.map(pn=>pn.element.dom.selectionEnd-Ct);a.onAction(vt,Ue),d.each(pn=>{jt.setValue(pn,vt),ze&&(gt.each(Go=>pn.element.dom.selectionStart=Go),Rn.each(Go=>pn.element.dom.selectionEnd=Go))})},B=(Te,ze)=>D((Ue,Wt)=>Ue-Wt,Te,ze),I=(Te,ze)=>D((Ue,Wt)=>Ue+Wt,Te,ze),W=Te=>Cu(Te.element).fold(k.none,ze=>(Ta(ze),k.some(!0))),V=Te=>gl(Te.element)?(Qo(Te.element).each(ze=>Ta(ze)),k.some(!0)):k.none(),se=(Te,ze,Ue,Wt)=>{const vt=tn(ae),Ct=s.shared.providers.translate(Ue),gt=Z("altExecuting"),Rn=H0(t,"NodeChange SwitchMode DisabledStateChange",Go=>{yn.set(Go.getComponent(),!t.selection.isEditable()||cT(t))}),pn=Go=>{yn.isDisabled(Go)||Te(!0)};return ei.sketch({dom:{tag:"button",attributes:{"aria-label":Ct,"data-mce-name":ze},classes:Wt.concat(ze)},components:[cy(ze,s.shared.providers.icons)],buttonBehaviours:Dt([yn.config({}),br.config(s.shared.providers.tooltips.getConfig({tooltipText:Ct})),ao(gt,[qu({onSetup:Rn,getApi:C},vt),yh({getApi:C},vt),Ye(Ha(),(Go,Un)=>{(Un.event.raw.keyCode===$w.SPACEBAR||Un.event.raw.keyCode===$w.ENTER)&&(yn.isDisabled(Go)||Te(!1))}),Ye(Kd(),pn),Ye(kg(),pn)])]),eventOrder:{[Ha()]:[gt,"keying"],[Kd()]:[gt,"alloy.base.behaviour"],[kg()]:[gt,"alloy.base.behaviour"],[dd()]:["alloy.base.behaviour",gt,"tooltipping"],[zm()]:[gt,"tooltipping"]}})},pe=ps(se(Te=>B(!1,Te),"minus","Decrease font size",[])),re=ps(se(Te=>I(!1,Te),"plus","Increase font size",[])),we=ps({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[sf.sketch({inputBehaviours:Dt([yn.config({}),ao(E,[qu({onSetup:h,getApi:C},w),yh({getApi:C},w)]),ao("input-update-display-text",[Ye(Bd,(Te,ze)=>{jt.setValue(Te,ze.event.text)}),Ye(wb(),Te=>{a.onAction(jt.getValue(Te))}),Ye(_g(),Te=>{a.onAction(jt.getValue(Te))})]),En.config({mode:"special",onEnter:Te=>(D(Rt,!0,!0),k.some(!0)),onEscape:W,onUp:Te=>(I(!0,!1),k.some(!0)),onDown:Te=>(B(!0,!1),k.some(!0)),onLeft:(Te,ze)=>(ze.cut(),k.none()),onRight:(Te,ze)=>(ze.cut(),k.none())})])})],behaviours:Dt([co.config({}),En.config({mode:"special",onEnter:V,onSpace:V,onEscape:W}),ao("input-wrapper-events",[Ye(Bu(),Te=>{ot([pe,re],ze=>{const Ue=Nt.fromDom(ze.get(Te).element.dom);gl(Ue)&&wr(Ue)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...In(i)?{"data-mce-name":i}:{}}},components:[pe.asSpec(),we.asSpec(),re.asSpec()],behaviours:Dt([co.config({}),En.config({mode:"flow",focusInside:$u.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Te=>gl(Te.element)?k.none():(Ta(Te.element),k.some(!0))})])}},H$="Font sizes",zR=q("Font size {0}"),z$="12pt",Pq={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},$q={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},py=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},Iq=(t,s)=>/[0-9.]+px$/.test(t)?py(parseInt(t,10)*72/96,s||0)+"pt":sn($q,t).getOr(t),Lq=t=>sn(Pq,t).getOr(""),V$=t=>{const s=()=>{let w=k.none();const E=C.data,D=t.queryCommandValue("FontSize");if(D)for(let B=3;w.isNone()&&B>=0;B--){const I=Iq(D,B),W=Lq(I);w=j(E,V=>V.format===D||V.format===I||V.format===W)}return{matchOpt:w,size:D}},a=w=>E=>E.exists(D=>D.format===w),i=()=>{const{matchOpt:w}=s();return w},d=q(k.none),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,w.format)})},h=w=>{const{matchOpt:E,size:D}=s(),B=E.fold(q(D),I=>I.title);Bn(w,Bd,{text:B}),mW(t,{value:B})},C=$A(t,"font_size_formats",j0.Space);return{tooltip:gy(t,zR(),z$),text:k.some(z$),icon:k.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:Je}},Hq=(t,s)=>Pw(t,s,V$(t),zR,"FontSizeTextUpdate","fontsize"),zq=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},Vq=16,Uq=t=>t>=0,Wq=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>Bn(i,Bd,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{ms(i,["unsupportedLength","empty"]);const g=s(),h=ms(i,["unsupportedLength","empty"]).or(ms(g,["unsupportedLength","empty"])),C=h.map(I=>I.value).getOr(Vq),w=l6(t),E=h.map(I=>I.unit).filter(I=>I!=="").getOr(w),D=d(C,zq(E).step),B=`${Uq(D)?D:C}${E}`;return B!==g&&fW(t,{value:B}),B}}},VR=(t,s)=>Nq(t,s,Wq(t),"fontsizeinput"),Zq=(t,s)=>{const a=hy(s,V$(t));t.ui.registry.addNestedMenuItem("fontsize",{text:H$,onSetup:Ii(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},jq="Formats",UR=t=>Fa(t)?"Formats":"Format {0}",WR=(t,s)=>{const a="Formats",i=h=>()=>t.formatter.match(h),d=h=>()=>{const C=t.formatter.get(h);return C!==void 0?k.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):k.none()},g=h=>{const C=B=>P8(B)?ne(B.items,C):cR(B)?[{title:B.title,format:B.format}]:[],w=ne(iR(t),C),D=M$(t,q(w)).fold(q({title:a,tooltipLabel:""}),B=>({title:B.title,tooltipLabel:B.title}));Bn(h,Bd,{text:D.title}),hO(t,{value:D.tooltipLabel})};return{tooltip:gy(t,UR(""),""),text:k.some(a),icon:k.none(),isSelectedFor:i,getCurrentValue:k.none,getPreviewFor:d,onAction:sP(t),updateText:g,shouldHide:e6(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},qq=(t,s)=>{const a={type:"advanced",...s.styles};return Pw(t,s,WR(t,a),UR,"StylesTextUpdate","styles")},Gq=(t,s)=>{const a={type:"advanced",...s.styles},i=hy(s,WR(t,a));t.ui.registry.addNestedMenuItem("styles",{text:jq,onSetup:Ii(t,()=>i.getStyleItems().length>0),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},Kq=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Iw=(t,s)=>(a,i,d,g)=>{const h=t(a).mapError(C=>Df(C)).getOrDie();return s(h,i,d,g)},Yq={button:Iw(HT,(t,s,a,i)=>x$(t,s.shared.providers,i)),togglebutton:Iw(VT,(t,s,a,i)=>E$(t,s.shared.providers,i)),menubutton:Iw(fN,(t,s,a,i)=>Tw(t,"tox-tbtn",s,k.none(),!1,i)),splitbutton:Iw(WT,(t,s,a,i)=>yq(t,s.shared,i)),grouptoolbarbutton:Iw(WU,(t,s,a,i)=>{const d=a.ui.registry.getAll().buttons,g=C=>HA(a,{buttons:d,toolbar:C,allowToolbarGroups:!1},s,k.none()),h={[C2]:s.shared.header.isPositionedAtTop()?om.TopToBottom:om.BottomToTop};switch(T0(a)){case Vu.floating:return FA(t,s,g,h,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},Xq=(t,s,a,i)=>sn(Yq,t.type).fold(()=>(console.error("skipping button defined by",t),k.none()),d=>k.some(d(t,s,a,i))),ZR={styles:qq,fontsize:Hq,fontsizeinput:VR,fontfamily:Mq,blocks:Dq,align:B$,navigateback:xq},Jq=t=>{const s=Oe(Kq,a=>{const i=jn(a.items,d=>Do(t,d)||Do(ZR,d));return{name:a.name,items:i}});return jn(s,a=>a.items.length>0)},Qq=t=>{const s=t.split("|");return Oe(s,a=>({items:a.trim().split(" ")}))},eG=t=>_t(t,s=>(Do(s,"name")||Do(s,"label"))&&Do(s,"items")),tG=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?Jq(a):ct(s)?Qq(s):eG(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},LA=(t,s,a,i,d,g)=>sn(s,a.toLowerCase()).orThunk(()=>g.bind(h=>_o(h,C=>sn(s,C+a.toLowerCase())))).fold(()=>sn(ZR,a.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),k.none()):Xq(h,d,t,a.toLowerCase())),HA=(t,s,a,i)=>{const d=tG(s),g=Oe(d,h=>{const C=ne(h.items,w=>w.trim().length===0?[]:LA(t,s.buttons,w,s.allowToolbarGroups,a,i).map(E=>Array.isArray(E)?E:[E]).getOr([]));return{title:k.from(t.translate(h.name)),label:Er(h.label!==void 0,t.translate(h.label)),items:C}});return jn(g,h=>h.items.length>0)},Lw=(t,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,h=a.buttons;if(_t(g,ct)){const C=g.map(w=>{const E={toolbar:w,buttons:h,allowToolbarGroups:a.allowToolbarGroups};return HA(t,E,i,k.none())});qs.setToolbars(d,C)}else qs.setToolbar(d,HA(t,a,i,k.none()))},Hw=Nr(),U$=Hw.os.isiOS()&&Hw.os.version.major<=12,nG=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=tn(Ms(d.innerWidth,d.innerHeight)),C=tn(Ms(g.offsetWidth,g.offsetHeight)),w=()=>{const I=h.get();(I.left!==d.innerWidth||I.top!==d.innerHeight)&&(h.set(Ms(d.innerWidth,d.innerHeight)),gO(t))},E=()=>{const I=t.getDoc().documentElement,W=C.get();(W.left!==I.offsetWidth||W.top!==I.offsetHeight)&&(C.set(Ms(I.offsetWidth,I.offsetHeight)),gO(t))},D=I=>{XN(t,I)};i.bind(d,"resize",w),i.bind(d,"scroll",D);const B=Zi(Nt.fromDom(t.getBody()),"load",E);t.on("hide",()=>{ot(a,I=>{Jn(I.element,"display","none")})}),t.on("show",()=>{ot(a,I=>{Wo(I.element,"display")})}),t.on("NodeChange",E),t.on("remove",()=>{B.unbind(),i.unbind(d,"resize",w),i.unbind(d,"scroll",D),d=null})},oG=(t,s,a)=>{Op(t)&&xd(a.mainUi.mothership.element,a.popupUi.mothership),r0(s,a.dialogUi.mothership)};var sG=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=s,C=tn(0),w=g.outerContainer;mq(t);const E=Nt.fromDom(d.targetNode),D=Pl(Xr(E));xd(E,g.mothership),oG(t,D,s),t.on("PostRender",()=>{qs.setSidebar(w,a.sidebar,p6(t))}),t.on("SkinLoaded",()=>{Lw(t,s,a,i),C.set(t.getWin().innerWidth),qs.setMenubar(w,v$(t,a)),qs.setViews(w,a.views),nG(t,s)});const B=qs.getSocket(w).getOrDie("Could not find expected socket element");if(U$){Cr(B.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const se=pu(()=>{t.dispatch("ScrollContent")},20),pe=_s(B.element,"scroll",se.throttle);t.on("remove",pe.unbind)}PN(t,s),t.addCommand("ToggleSidebar",(se,pe)=>{qs.toggleSidebar(w,pe),tP(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var se;return(se=qs.whichSidebar(w))!==null&&se!==void 0?se:""}),t.addCommand("ToggleView",(se,pe)=>{if(qs.toggleView(w,pe)){const re=w.element;g.mothership.broadcastOn([Gm()],{target:re}),ot(h,we=>{we.broadcastOn([Gm()],{target:re})}),rn(qs.whichView(w))&&(t.focus(),t.nodeChanged(),qs.refreshToolbar(w)),nP(t)}}),t.addQueryValueHandler("ToggleView",()=>{var se;return(se=qs.whichView(w))!==null&&se!==void 0?se:""});const I=T0(t),W=()=>{qs.refreshToolbar(s.mainUi.outerContainer)};(I===Vu.sliding||I===Vu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const se=t.getWin().innerWidth;se!==C.get()&&(W(),C.set(se))});const V={setEnabled:se=>{ny(s,se?"setEnabled":"setDisabled")},isEnabled:()=>!yn.isDisabled(w)};return{iframeContainer:B.element.dom,editorContainer:w.element.dom,api:V}}});const rG=t=>/^[0-9\.]+(|px)$/i.test(""+t)?k.some(parseInt(""+t,10)):k.none(),by=t=>Oo(t)?t+"px":t,zw=(t,s,a)=>{const i=s.filter(g=>t<g),d=a.filter(g=>t>g);return i.or(d).getOr(t)},W$=(t,s)=>{if(typeof s=="number")return k.from(s);const a=/^([0-9.]+)(pt|em|px)$/.exec(s.trim());if(a){const i=a[2],d=Number.parseFloat(a[1]);if(Number.isNaN(d)||d<0)return k.none();if(i==="em")return k.from(d*Number.parseFloat(window.getComputedStyle(t.dom).fontSize));if(i==="pt")return k.from(d*(72/96));if(i==="px")return k.from(d)}return k.none()},Z$=t=>{const s=W$(Nt.fromDom(t.targetElm),H_(t)),a=U_(t),i=W_(t);return s.map(d=>zw(d,a,i))},j$=t=>Z$(t).getOr(H_(t)),q$=t=>{const s=z_(t),a=V_(t),i=iT(t);return rG(s).map(d=>zw(d,a,i))},G$=t=>q$(t).getOr(z_(t)),{ToolbarLocation:jR,ToolbarMode:K$}=kz,aG=40,cG=(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=a,C=ZC.DOM,w=Wv(t),E=fh(t),D=iT(t).or(q$(t)),B=i.shared.header,I=B.isPositionedAtTop,W=150,V=T0(t),se=V===K$.sliding||V===K$.floating,pe=tn(!1),re=()=>pe.get()&&!t.removed,we=hn=>se?hn.fold(q(0),mt=>mt.components().length>1?ea(mt.components()[1].element):0):0,Te=hn=>{switch(Z_(t)){case jR.auto:const mt=qs.getToolbar(g.outerContainer),$t=we(mt),Yn=ea(hn.element)-$t,wo=sa(s);if(wo.y>Yn)return"top";{const vo=Qp(s),Ss=Math.max(vo.dom.scrollHeight,ea(vo));return wo.bottom<Ss-Yn||Vc().bottom<wo.bottom-Yn?"bottom":"top"}case jR.bottom:return"bottom";case jR.top:default:return"top"}},ze=hn=>{d.on(mt=>{Ar.setModes(mt,[hn]),B.setDockingMode(hn);const $t=I()?om.TopToBottom:om.BottomToTop;zn(mt.element,C2,$t)})},Ue=()=>{d.on(hn=>{const mt=D.getOrThunk(()=>Hh().width-li(s).left-10);Jn(hn.element,"max-width",mt+"px")})},Wt=(hn,mt)=>{d.on($t=>{const Yn=qs.getToolbar(g.outerContainer),wo=we(Yn),Cn=sa(s),vo=vt(t,g.outerContainer.element),Ss=()=>vo.fold(()=>Cn.x,Ba=>{const cl=sa(Ba);return Jo(Ba,Di())?Cn.x:Cn.x-cl.x}),bs=()=>vo.fold(()=>I()?Math.max(Cn.y-ea($t.element)+wo,0):Cn.bottom,Ba=>{var cl;const xi=sa(Ba),Gr=(cl=Ba.dom.scrollTop)!==null&&cl!==void 0?cl:0,Fd=Jo(Ba,Di())?Math.max(Cn.y-ea($t.element)+wo,0):Cn.y-xi.y+Gr-ea($t.element)+wo;return I()?Fd:Cn.bottom}),Li=Ss(),rr=Er(hn,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Ba=>Ba>W).map(Ba=>{const cl=mt.getOr(Pr()),xi=window.innerWidth-(Li-cl.left),Gr=Math.max(Math.min(Ba,xi),W);return xi<Ba&&Jn(g.outerContainer.element,"width",Gr+"px"),{width:Gr+"px"}}).getOr({width:"max-content"}),Dc={position:"absolute",left:Math.round(Li)+"px",top:bs()+"px"};Cr(g.outerContainer.element,{...Dc,...rr})})},vt=(hn,mt)=>Op(hn)?Af(mt):k.none(),Ct=()=>{ot(h,hn=>{hn.broadcastOn([_c()],{})})},gt=()=>!w&&(lc(g.outerContainer.element).left+sd(g.outerContainer.element)>=window.innerWidth-aG||lr(g.outerContainer.element,"width").isSome())?(Jn(g.outerContainer.element,"position","absolute"),Jn(g.outerContainer.element,"left","0px"),Wo(g.outerContainer.element,"width"),!0):!1,Rn=hn=>{if(!re())return;w||Ue();const mt=Pr(),$t=w?!1:gt();if(se&&qs.refreshToolbar(g.outerContainer),!w){const Yn=Pr(),wo=Er(mt.left!==Yn.left,mt);Wt($t,wo),wo.each(Cn=>{rd(Cn.left,Yn.top)})}E&&d.on(hn),Ct()},pn=()=>w||!E||!re()?!1:d.get().exists(hn=>{const mt=B.getDockingMode(),$t=Te(hn);return $t!==mt?(ze($t),!0):!1});return{isVisible:re,isPositionedAtTop:I,show:()=>{pe.set(!0),Jn(g.outerContainer.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),ot(h,hn=>{Wo(hn.element,"display")}),pn(),Op(t)?Rn(hn=>Ar.isDocked(hn)?Ar.reset(hn):Ar.refresh(hn)):Rn(Ar.refresh)},hide:()=>{pe.set(!1),Jn(g.outerContainer.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus"),ot(h,hn=>{Jn(hn.element,"display","none")})},update:Rn,updateMode:()=>{pn()&&Rn(Ar.reset)},repositionPopups:Ct}},Y$=(t,s)=>{const a=sa(t);return{pos:s?a.y:a.bottom,bounds:a}},Vw=(t,s,a,i)=>{const d=tn(Y$(s,a.isPositionedAtTop())),g=E=>{const{pos:D,bounds:B}=Y$(s,a.isPositionedAtTop()),{pos:I,bounds:W}=d.get(),V=B.height!==W.height||B.width!==W.width;d.set({pos:D,bounds:B}),V&&gO(t,E),a.isVisible()&&(I!==D?a.update(Ar.reset):V&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Ar.reset)),t.on("NodeChange keydown",E=>{requestAnimationFrame(()=>g(E))});let h=0;const C=Ga(()=>a.update(Ar.refresh),33);t.on("ScrollWindow",()=>{const E=Pr().left;E!==h&&(h=E,C.throttle()),a.updateMode()}),Op(t)&&t.on("ElementScroll",E=>{a.update(Ar.refresh)});const w=er();w.set(Zi(Nt.fromDom(t.getBody()),"load",E=>g(E.raw))),t.on("remove",()=>{w.clear()})};var iG=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g}=s,h=Kn(),C=Nt.fromDom(d.targetNode),w=cG(t,C,s,i,h),E=s6(t);fq(t);const D=()=>{if(h.isSet()){w.show();return}h.set(qs.getHeader(g.outerContainer).getOrDie());const I=X_(t);Op(t)?(xd(C,g.mothership),xd(C,s.popupUi.mothership)):r0(I,g.mothership),r0(I,s.dialogUi.mothership);const W=()=>{Lw(t,s,a,i),qs.setMenubar(g.outerContainer,v$(t,a)),w.show(),Vw(t,C,w,E),t.nodeChanged()};E?t.once("SkinLoaded",W):W()};t.on("show",D),t.on("hide",w.hide),E||(t.on("focus",D),t.on("blur",w.hide)),t.on("init",()=>{(t.hasFocus()||E)&&D()}),PN(t,s);const B={show:D,hide:w.hide,setEnabled:I=>{ny(s,I?"setEnabled":"setDisabled")},isEnabled:()=>!yn.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:B}}});const lG=()=>{const t=Kn(),s=Kn(),a=Kn();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(C=>C.mothership),h=s.get().map(C=>C.mothership);return g.fold(()=>h.toArray(),C=>h.fold(()=>[C],w=>Jo(C.element,w.element)?[C]:[C,w]))},lazyGetInOuterOrDie:(g,h)=>()=>a.get().bind(C=>h(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},X$="contexttoolbar-show",J$="contexttoolbar-hide",zA=(t,s,a)=>({setInputEnabled:i=>{!i&&a&&Ta(a),yn.set(t,!i)},isInputEnabled:()=>!yn.isDisabled(t),hide:()=>{zo(t,Sb())},back:()=>{zo(t,PA)},getValue:()=>s.get().getOrThunk(()=>jt.getValue(t)),setValue:i=>{t.getSystem().isConnected()?jt.setValue(t,i):s.set(i)}}),VA=(t,s,a)=>{const d=ci(t.element).bind(g=>t.getSystem().getByDom(g).toOptional());return zA(d.getOr(t),s,a)},Q$=(t,s,a)=>Ye(qO,(i,d)=>{const g=t.get(i),h=zA(g,a,i.element);s.onAction(h,d.event.buttonApi)}),uG=(t,s,a,i)=>{const{primary:d,...g}=s.original,h=Ou(HT({...g,type:"button",onAction:ae}));return tg(h,a,[Q$(t,s,i)])},dG=(t,s,a,i)=>{const{primary:d,...g}=s.original,h=Ou(VT({...g,type:"togglebutton",onAction:ae}));return T$(h,a,[Q$(t,s,i)])},mG=t=>t.type==="contextformtogglebutton",Uw=(t,s,a,i)=>mG(s)?dG(t,s,a,i):uG(t,s,a,i),qR=(t,s,a,i)=>{const d=Oe(s,C=>ps(Uw(t,C,a,i)));return{asSpecs:()=>Oe(d,C=>C.asSpec()),findPrimary:C=>_o(s,(w,E)=>w.primary?k.from(d[E]).bind(D=>D.getOpt(C)).filter(_e(yn.isDisabled)):k.none())}},fG=(t,s,a,i)=>{const{width:d,height:g}=t.initValue();let h=yA;const C=Z("ratio-event"),w=vt=>zA(vt,i),E=vt=>Wu(vt,{tag:"span",classes:["tox-icon","tox-lock-icon__"+vt]},s.icons),D=()=>!1,B=t.label.getOr("Constrain proportions"),I=s.translate(B),W=qr.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":I,"data-mce-name":B}},components:[E("lock"),E("unlock")],buttonBehaviours:Dt([yn.config({disabled:D}),Ys.config({}),br.config(s.tooltips.getConfig({tooltipText:I}))])}),V=vt=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:vt}),se=vt=>bl(vt.element,"div.tox-focusable-wrapper").fold(k.none,gt=>(Ta(gt),k.some(!0))),pe=vt=>Io.parts.field({factory:sf,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:vt?d:g,inputBehaviours:Dt([yn.config({disabled:D}),Ys.config({}),ao("size-input-toolbar-events",[Ye(Mu(),(Ct,gt)=>{Bn(Ct,C,{isField1:vt})})]),En.config({mode:"special",onEnter:a,onEscape:se})]),selectOnFocus:!1}),re=vt=>({dom:{tag:"label",classes:["tox-label"]},components:[pr(s.translate(vt))]}),we=vt=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[vt],behaviours:Dt([Ys.config({}),co.config({}),En.config({mode:"special",onEnter:Ct=>Fs(Ct.element,"input").fold(k.none,Rn=>(Ta(Rn),k.some(!0)))})])}),Te=we(qr.parts.field1(V([Io.parts.label(re("Width:")),pe(!0)]))),ze=we(qr.parts.field2(V([Io.parts.label(re("Height:")),pe(!1)]))),Ue=tn(ae),Wt=[qu({onBeforeSetup:vt=>Fs(vt.element,"input").each(Ta),onSetup:t.onSetup,getApi:w},Ue),JD({getApi:w},Ue,i)];return qr.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[Te,V([W]),ze],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(vt,Ct,gt)=>{vA(jt.getValue(vt)).each(Rn=>{h(Rn).each(pn=>{jt.setValue(Ct,l8(pn))})})},onInput:vt=>zo(vt,iA),coupledFieldBehaviours:Dt([co.config({}),En.config({mode:"flow",focusInside:$u.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),yn.config({disabled:D,onDisabled:vt=>{qr.getField1(vt).bind(Io.getField).each(yn.disable),qr.getField2(vt).bind(Io.getField).each(yn.disable),qr.getLock(vt).each(yn.disable)},onEnabled:vt=>{qr.getField1(vt).bind(Io.getField).each(yn.enable),qr.getField2(vt).bind(Io.getField).each(yn.enable),qr.getLock(vt).each(yn.enable)}}),vr(()=>s.checkUiComponentContext("mode:design")),ao("size-input-toolbar-events2",[Ye(C,(vt,Ct)=>{const gt=Ct.event.isField1,Rn=gt?qr.getField1(vt):qr.getField2(vt),pn=gt?qr.getField2(vt):qr.getField1(vt),Go=Rn.map(jt.getValue).getOr(""),Un=pn.map(jt.getValue).getOr("");h=XO(Go,Un)}),Ye(iA,vt=>t.onInput(w(vt))),...Wt])])})},e7=(t,s,a)=>Io.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),s],fieldBehaviours:Dt([yn.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:i=>{wq(i),Io.getField(i).each(yn.disable)},onEnabled:i=>{Io.getField(i).each(yn.enable)}})])}),t7=(t,s,a,i)=>{const d=tn(ae),g=w=>VA(w,i),h=t.label.map(w=>Io.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[pr(s.translate(w))]})),C=Io.parts.field({factory:sf,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:w=>qa(w).getOr(t.min()),toInputValue:w=>String(w),inputBehaviours:Dt([yn.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),vr(()=>s.checkUiComponentContext("mode:design")),En.config({mode:"special",onEnter:a,onLeft:(w,E)=>(E.cut(),k.none()),onRight:(w,E)=>(E.cut(),k.none())}),ao("slider-events",[qu({onSetup:t.onSetup,getApi:g,onBeforeSetup:En.focusIn},d),JD({getApi:g},d,i),Ye(Hm(),w=>{t.onInput(g(w))})])])});return e7(h,C,s)},GR=(t,s,a,i)=>{const d=tn(ae),g=D=>VA(D,i),h=t.label.map(D=>Io.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[pr(s.translate(D))]})),w={...t.placeholder.map(D=>({placeholder:s.translate(D)})).getOr({})},E=Io.parts.field({factory:sf,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:w,data:t.initValue(),selectOnFocus:!0,inputBehaviours:Dt([yn.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),vr(()=>s.checkUiComponentContext("mode:design")),En.config({mode:"special",onEnter:a,onLeft:(D,B)=>(B.cut(),k.none()),onRight:(D,B)=>(B.cut(),k.none())}),ao("input-events",[qu({onSetup:t.onSetup,getApi:D=>bl(D.element,".tox-toolbar").bind(I=>Fs(I,"button:enabled")).fold(()=>VA(D,i),I=>VA(D,i,I)),onBeforeSetup:En.focusIn},d),JD({getApi:g},d,i),Ye(Hm(),D=>{t.onInput(g(D))})])])});return e7(h,E,s)},UA=(t,s,a)=>{const i=Kn(),g=ps(t(a,E=>C.findPrimary(E).orThunk(()=>w.findPrimary(E)).map(D=>($1(D),!0)),i)),h=No(s.commands,E=>E.align==="start"),C=qR(g,h.pass,a,i),w=qR(g,h.fail,a,i);return jn([{title:k.none(),label:k.none(),items:C.asSpecs()},{title:k.none(),label:k.none(),items:[g.asSpec()]},{title:k.none(),label:k.none(),items:w.asSpecs()}],E=>E.items.length>0)},KR=(t,s)=>{switch(t.type){case"contextform":return UA(gn(GR,t),t,s);case"contextsliderform":return UA(gn(t7,t),t,s);case"contextsizeinputform":return UA(gn(fG,t),t,s)}},vy={renderContextForm:(t,s,a)=>Bw({type:t,uid:Z("context-toolbar"),initGroups:KR(s,a),onEscape:k.none,cyclicKeying:!0,providers:a}),buildInitGroups:KR},Ww=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,WA=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=bf(Nt.fromDom(t.startContainer),t.startOffset).element;return($d(a)?ci(a):k.some(a)).filter(ri).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},Zw=t=>{const s=t.selection.getRng(),a=WA(s);if(t.inline){const i=Pr();return ba(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=ld(Nt.fromDom(t.getBody()));return ba(i.x+a.left,i.y+a.top,a.width,a.height)}},YR=(t,s)=>s.filter(a=>gs(a)&&oe(a)).map(ld).getOrThunk(()=>Zw(t)),n7=(t,s,a)=>{const i=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:i,width:d-i}},ZA=(t,s,a,i,d,g)=>{const h=Nt.fromDom(t.getContainer()),C=Fs(h,".tox-editor-header").getOr(h),w=sa(C),E=w.y>=s.bottom,D=i&&!E;if(t.inline&&D)return{y:Math.max(w.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!D)return{y:a.y,bottom:Math.min(w.y-g,a.bottom)};const B=d==="line"?sa(h):s;return D?{y:Math.max(w.bottom+g,a.y),bottom:Math.min(B.bottom-g,a.bottom)}:{y:Math.max(B.y+g,a.y),bottom:Math.min(w.y-g,a.bottom)}},XR=(t,s,a,i=0)=>{const d=Hh(window),g=sa(Nt.fromDom(t.getContentAreaContainer())),h=dT(t)||mT(t)||qC(t),{x:C,width:w}=n7(g,d,i);if(t.inline&&!h)return ba(C,d.y,w,d.height);{const E=s.header.isPositionedAtTop(),{y:D,bottom:B}=ZA(t,g,d,E,a,i);return ba(C,D,w,B-D)}},jw=12,jA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},o7={maxHeightFunction:zg(),maxWidthFunction:y2()},s7=(t,s)=>{const a=t.selection.getRng(),i=bf(Nt.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Jo(i.element,s)},gG=(t,s,a)=>{const i=lr(t,"position");Jn(t,"position",s);const d=a(t);return i.each(g=>Jn(t,"position",g)),d},r7=t=>t==="node",qA=(t,s,a,i,d)=>{const g=Zw(t),h=i.lastElement().exists(C=>Jo(a,C));if(s7(t,a))return h?Wc:Fi;if(h)return gG(s,i.getMode(),()=>Ww(g,sa(s),-20)&&!i.isReposition()?YS:Wc);{const C=i.getMode()==="fixed"?d.y+Pr().top:d.y,w=ea(s)+jw;return C+w<=g.y?Fi:rp}},a7=(t,s,a,i)=>{const d=w=>(E,D,B,I,W)=>{const V=qA(t,I,w,a,W),se={...E,y:W.y,height:W.height};return{...V(se,D,B,I,W),alwaysFit:!0}},g=w=>r7(i)?[d(w)]:[];return s?{onLtr:w=>[aa,Ca,gr,hc,Ra,za].concat(g(w)),onRtl:w=>[aa,gr,Ca,Ra,hc,za].concat(g(w))}:{onLtr:w=>[za,aa,hc,Ca,Ra,gr].concat(g(w)),onRtl:w=>[za,aa,Ra,gr,hc,Ca].concat(g(w))}},hG=(t,s,a,i)=>s==="line"?{bubble:El(jw,0,jA),layouts:{onLtr:()=>[Vb],onRtl:()=>[Ub]},overrides:o7}:{bubble:El(0,jw,jA,1/jw),layouts:a7(t,a,i,s),overrides:o7},JR=(t,s)=>{const a=jn(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=No(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},pG=t=>{if(t.length<=1)return t;{const s=g=>wn(t,h=>h.position===g),a=g=>jn(t,h=>h.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),h=Oe(a("selection"),C=>({...C,position:"node"}));return g.concat(h)}else return a(i?"selection":"node");else return a("line")}},bG=t=>{if(t.length<=1)return t;{const s=i=>j(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>jn(t,d=>d.position===i))}},vG=(t,s,a)=>{const i=JR(t,s);if(i.contextForms.length>0)return k.some({elem:t,toolbars:[i.contextForms[0]]});{const d=JR(t,a);if(d.contextForms.length>0)return k.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=pG(i.contextToolbars.concat(d.contextToolbars));return k.some({elem:t,toolbars:g})}else return k.none()}},c7=(t,s,a)=>t(s)?k.none():ib(s,i=>{if(ri(i)){const{contextToolbars:d,contextForms:g}=JR(i,a.inNodeScope),h=g.length>0?g:bG(d);return h.length>0?k.some({elem:i,toolbars:h}):k.none()}else return k.none()},t),i7=(t,s)=>{const a=Nt.fromDom(s.getBody()),i=h=>Jo(h,a),d=h=>!i(h)&&!ul(a,h),g=Nt.fromDom(s.selection.getNode());return d(g)?k.none():vG(g,t.inNodeScope,t.inEditorScope).orThunk(()=>c7(i,g,t))},l7=(t,s)=>{const a={},i=[],d=[],g={},h={},C=(D,B)=>{const I=Ou(zD(B));a[D]=I,I.launch.map(W=>{g["form:"+D]={...B.launch,type:W.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(I)}}}),I.scope==="editor"?d.push(I):i.push(I),h[D]=I},w=(D,B)=>{OU(B).each(I=>{I.launch.isSome()&&(g["toolbar:"+D]={...B.launch,type:"button",onAction:()=>{s(I)}}),B.scope==="editor"?d.push(I):i.push(I),h[D]=I})},E=_n(t);return ot(E,D=>{const B=t[D];B.type==="contextform"||B.type==="contextsliderform"||B.type==="contextsizeinputform"?C(D,B):B.type==="contexttoolbar"&&w(D,B)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:h,formNavigators:g}},GA="tox-pop--transition",yG=t=>t===$w.ENTER||t===$w.SPACEBAR,u7=(t,s,a,i)=>{const d=i.backstage,g=d.shared,h=Nr().deviceType.isTouch,C=Kn(),w=Kn(),E=Kn(),D=Sq({sink:a,onEscape:()=>(t.focus(),oP(t),k.some(!0)),onHide:()=>{oP(t)},onBack:()=>{hW(t)},focusElement:Un=>{t.getBody().contains(Un.dom)?t.focus():Ta(Un)}}),B=p(D.sketch),I=()=>{const Un=E.get().getOr("node"),ho=r7(Un)?1:0;return XR(t,g,Un,ho)},W=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),V=Un=>Sn(os(Un,C.get(),Jo),!0),se=()=>{if(W()){const Un=I(),ho=Sn(E.get(),"node")?YR(t,C.get()):Zw(t);return Un.height<=0||!Ww(ho,Un,.01)}else return!0},pe=()=>{C.clear(),w.clear(),E.clear(),kr.hide(B)},re=()=>{if(kr.isOpen(B)){const Un=B.element;Wo(Un,"display"),se()?Jn(Un,"display","none"):(w.set(0),kr.reposition(B))}},we=Un=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Un],behaviours:Dt([En.config({mode:"acyclic"}),ao("pop-dialog-wrap-events",[or(ho=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>En.focusIn(ho))}),vd(ho=>{t.shortcuts.remove("ctrl+F9")})])])}),Te=Un=>{const ho=vt([Un]);Bn(B,PR,{forwardContents:we(ho)})},ze=yc(()=>l7(s,Te)),Ue=(Un,ho)=>HA(t,{buttons:Un,toolbar:ho.items,allowToolbarGroups:!1},i.backstage,k.some(["form:","toolbar:"])),Wt=(Un,ho)=>vy.buildInitGroups(Un,ho),vt=Un=>{const{buttons:ho}=t.ui.registry.getAll(),hn=ze(),mt={...ho,...hn.formNavigators},$t=T0(t)===Vu.scrolling?Vu.scrolling:Vu.default,Yn=de(Oe(Un,wo=>wo.type==="contexttoolbar"?Ue(mt,wN(wo)):Wt(wo,g.providers)));return Bw({type:$t,uid:Z("context-toolbar"),initGroups:Yn,onEscape:k.none,cyclicKeying:!0,providers:g.providers})},Ct=(Un,ho)=>{const hn=Un==="node"?g.anchors.node(ho):g.anchors.cursor(),mt=hG(t,Un,h(),{lastElement:C.get,isReposition:()=>Sn(w.get(),0),getMode:()=>Ci.getMode(a)});return yt(hn,mt)},gt=(Un,ho)=>{if(Go.cancel(),!W())return;const hn=vt(Un),mt=Un[0].position,$t=Ct(mt,ho);E.set(mt),w.set(1);const Yn=B.element;Wo(Yn,"display"),V(ho)||(Sr(Yn,GA),Ci.reset(a,B)),kr.showWithinBounds(B,we(hn),{anchor:$t,transition:{classes:[GA],mode:"placement"}},()=>k.some(I())),ho.fold(C.clear,C.set),se()&&Jn(Yn,"display","none")},Rn=()=>{Jn(B.element,"transition","none"),re(),Wo(B.element,"transition")};let pn=!1;const Go=Ga(()=>{if(!(!t.hasFocus()||t.removed||pn))if(Wr(B.element,GA))Go.throttle();else{const Un=ze();i7(Un,t).fold(pe,ho=>{gt(ho.toolbars,k.some(ho.elem))})}},17);t.on("init",()=>{t.on("remove",pe),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",re),t.on("click focus SetContent",Go.throttle),t.on("keyup",Un=>{(!yG(Un.keyCode)||!D.inSubtoolbar())&&Go.throttle()}),t.on(J$,pe),t.on(X$,Un=>{const ho=ze();sn(ho.lookupTable,Un.toolbarKey).each(hn=>{gt([hn],Er(Un.target!==t,Un.target)),A$(B)})}),t.on("focusout",Un=>{rT.setEditorTimeout(t,()=>{Vr(a.element).isNone()&&Vr(B.element).isNone()&&!t.hasFocus()&&pe()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&pe()}),t.on("DisabledStateChange",Un=>{Un.state&&pe()}),t.on("ExecCommand",({command:Un})=>{Un.toLowerCase()==="toggleview"&&pe()}),t.on("AfterProgressState",Un=>{Un.state?pe():t.hasFocus()&&Go.throttle()}),t.on("dragstart",()=>{pn=!0}),t.on("dragend drop",()=>{pn=!1}),t.on("NodeChange",Un=>{D.inSubtoolbar()?Rn():Vr(B.element).fold(Go.throttle,ae)})})},d7=t=>{ot([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:du(t,a.cmd),onSetup:QT(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Ii(t),onAction:du(t,"JustifyNone")})},m7=(t,s)=>{const a=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Kn();return Oe(i,h=>({type:"togglemenuitem",text:s.display(h),onSetup:C=>{const w=D=>{D&&(g.on(B=>B.setActive(!1)),g.set(C)),C.setActive(D)};w(Sn(d,s.hash(h)));const E=s.watcher(t,h,w);return()=>{g.clear(),E()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},WY=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:S6,hash:s=>Zs(s,["fixed","relative","empty"]).getOr(s),display:Rt,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>k.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Ii(t),onMenuSetup:Ii(t)}),CG=t=>k.from(t6(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:q(a),hash:i=>mn(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var h;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:i=>{const d=Nt.fromDom(i.selection.getNode());return vl(d,g=>k.some(g).filter(ri).bind(h=>$a(h,"lang").map(w=>{const E=$a(h,"data-mce-lang").getOrUndefined();return{code:w,customCode:E,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=er();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),JT(d.clear,Ii(t)(i))},onMenuSetup:Ii(t)})),wG=t=>{m7(t,WY(t)),CG(t).each(s=>m7(t,s))},SG=(t,s)=>{kq(t,s),Fq(t,s),Gq(t,s),P$(t,s),Zq(t,s)},xG=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",rt),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},EG=t=>H0(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),TG=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:EG(t),onAction:du(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Ii(t,()=>t.queryCommandState("indent")),onAction:du(t,"indent")})},AG=t=>{TG(t)},f7=(t,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",i),JT(()=>t.off("PastePlainTextToggle",i),Ii(t)(a))},kG=t=>{const s=tn(h6(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:f7(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:f7(t,s)})},QR=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},_G=t=>{wh.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:QT(t,s.name),onAction:QR(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,i=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:QT(t,a),onAction:QR(t,a),shortcut:i})}},DG=t=>{wh.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:du(t,s.action),shortcut:s.shortcut,context:s.context})}),wh.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Ii(t),onAction:du(t,s.action)})})},OG=t=>{wh.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:du(t,s.action),onSetup:QT(t,s.name)})})},g7=t=>{_G(t),DG(t),OG(t)},RG=t=>{wh.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:du(t,s.action),context:s.context})}),wh.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Ii(t),onAction:du(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Ii(t),onAction:QR(t,"code")})},BG=t=>{g7(t),RG(t)},KA=(t,s)=>H0(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),MG=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:KA(t,"hasUndo"),onAction:du(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:KA(t,"hasRedo"),onAction:du(t,"redo")})},FG=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:KA(t,"hasUndo"),onAction:du(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:KA(t,"hasRedo"),onAction:du(t,"redo"),shortcut:"Meta+Y"})},e5=t=>{MG(t),FG(t)},NG=t=>H0(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),PG=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:NG(t),onAction:du(t,"mceToggleVisualAid"),context:"any"})},t5=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:du(t,"mceToggleVisualAid"),context:"any"})},h7=t=>{t5(t),PG(t)},p7=(t,s)=>{d7(t),BG(t),SG(t,s),e5(t),xW(t),h7(t),AG(t),wG(t),kG(t),xG(t)},$G=t=>ct(t)?t.split(/[ ,]/):t,b7=t=>s=>s.options.get(t),IG=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:ct(a)||_t(a,ct)?{value:$G(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},v7=b7("contextmenu_never_use_native"),LG=b7("contextmenu_avoid_overlap"),n5=t=>y7(t).length===0,y7=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:jn(a,i=>Do(s,i))},yy=(t,s)=>({type:"makeshift",x:t,y:s}),HG=(t,s,a)=>yy(t.x+s,t.y+a),C7=t=>t.type==="longpress"||t.type.indexOf("touch")===0,o5=t=>{if(C7(t)){const s=t.touches[0];return yy(s.pageX,s.pageY)}else return yy(t.pageX,t.pageY)},zG=t=>{if(C7(t)){const s=t.touches[0];return yy(s.clientX,s.clientY)}else return yy(t.clientX,t.clientY)},w7=(t,s)=>{const a=ZC.DOM.getPos(t);return HG(s,a.x,a.y)},s5=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?o5(s):w7(t.getContentAreaContainer(),zG(s)):S7(t),S7=t=>({type:"selection",root:Nt.fromDom(t.selection.getNode())}),VG=t=>({type:"node",node:k.some(Nt.fromDom(t.selection.getNode())),root:Nt.fromDom(t.getBody())}),x7=(t,s,a)=>{switch(a){case"node":return VG(t);case"point":return s5(t,s);case"selection":return S7(t)}},UG=(t,s,a,i,d,g)=>{const h=a(),C=x7(t,s,g);iy(h,Sm.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:k.none()}).map(w=>{s.preventDefault(),kr.showMenuAt(d,{anchor:C},{menu:{markers:Fp("normal")},data:w})})},WG={onLtr:()=>[aa,Ca,gr,hc,Ra,za,Fi,rp,qe,nm,sp,Iu],onRtl:()=>[aa,gr,Ca,Ra,hc,za,Fi,rp,sp,Iu,qe,nm]},E7=12,ZG={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},jG=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return Tf(t.getWin(),yl.domRange(d)).exists(h=>h.left<=i.clientX&&h.right>=i.clientX&&h.top<=i.clientY&&h.bottom>=i.clientY)}},qG=t=>{const s=t.selection.getRng(),a=()=>{rT.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const i=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",i)}},GG=(t,s,a)=>{const i=x7(t,s,a);return{bubble:El(0,a==="point"?E7:0,ZG),layouts:WG,overrides:{maxWidthFunction:y2(),maxHeightFunction:zg()},...i}},KG=(t,s,a,i,d,g,h)=>{const C=GG(t,s,g);iy(a,Sm.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:k.none()}).map(w=>{s.preventDefault();const E=h?Zc.HighlightMenuAndItem:Zc.HighlightNone;kr.showMenuWithinBounds(d,{anchor:C},{menu:{markers:Fp("normal"),highlightOnOpen:E},data:w,type:"horizontal"},()=>k.some(XR(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(J$)})},YG=(t,s,a,i,d,g)=>{const h=Nr(),C=h.os.isiOS(),w=h.os.isMacOS(),E=h.os.isAndroid(),D=h.deviceType.isTouch(),B=()=>!(E||C||w&&D),I=()=>{const W=a();KG(t,s,W,i,d,g,B())};if((w||C)&&g!=="node"){const W=()=>{qG(t),I()};jG(t,s)?W():(t.once("selectionchange",W),t.once("touchend",()=>t.off("selectionchange",W)))}else I()},T7=t=>ct(t)?t==="|":t.type==="separator",r5={type:"separator"},A7=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(ct(t))return t;switch(t.type){case"separator":return r5;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return ct(i)?i:Oe(i,A7)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Jt(a.onAction)}}},k7=(t,s)=>{if(s.length===0)return t;const i=go(t).filter(d=>!T7(d)).fold(()=>[],d=>[r5]);return t.concat(i).concat(s).concat([r5])},_7=(t,s,a)=>{const i=yo(s,(d,g)=>sn(t,g.toLowerCase()).map(h=>{const C=h.update(a);if(ct(C)&&Nc(Ut(C)))return k7(d,C.split(" "));if(qo(C)&&C.length>0){const w=Oe(C,A7);return k7(d,w)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&T7(i[i.length-1])&&i.pop(),i},XG=(t,s)=>s.ctrlKey&&!v7(t),D7=t=>t.type==="longpress"||Do(t,"touches"),O7=(t,s)=>!D7(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),R7=(t,s)=>O7(t,s)?t.selection.getStart(!0):s.target,JG=(t,s)=>{const a=LG(t),i=O7(t,s)?"selection":"point";if(Nc(a)){const d=R7(t,s);return vg(Nt.fromDom(d),a)?"node":i}else return i},q0=(t,s,a)=>{const d=Nr().deviceType.isTouch,g=p(kr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Dt([ao("dismissContextMenu",[Ye(Ng(),(w,E)=>{hs.close(w),t.focus()})])])})),h=()=>kr.hide(g),C=w=>{if(v7(t)&&w.preventDefault(),XG(t,w)||n5(t))return;const E=JG(t,w),D=()=>{const I=R7(t,w),W=t.ui.registry.getAll(),V=y7(t);return _7(W.contextMenus,V,I)};(d()?YG:UG)(t,w,D,a,g,E)};t.on("init",()=>{const w="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(w,h),t.on("longpress contextmenu",C)})},YA=40,XA=YA/2,B7=(t,s,a,i,d,g)=>t.fold(()=>g0.snap({sensor:vp(a-XA,i-XA),range:Ms(d,g),output:vp(k.some(a),k.some(i)),extra:{td:s}}),h=>{const C=a-XA,w=i-XA,E=YA,D=YA,B=h.element.dom.getBoundingClientRect();return g0.snap({sensor:vp(C,w),range:Ms(E,D),output:vp(k.some(a-B.width/2),k.some(i-B.height/2)),extra:{td:s}})}),M7=(t,s,a)=>{const i=(d,g)=>d.exists(h=>Jo(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;i(s.get(),h)||(s.set(h),a(h))},mustSnap:!0}},F7=t=>ps(ei.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Dt([g0.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),$v.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),QG=(t,s)=>{const a=tn([]),i=tn([]),d=tn(!1),g=Kn(),h=Kn(),C=vt=>{const Ct=ld(vt);return B7(W.getOpt(s),vt,Ct.x,Ct.y,Ct.width,Ct.height)},w=()=>Oe(a.get(),vt=>C(vt)),E=vt=>{const Ct=ld(vt);return B7(V.getOpt(s),vt,Ct.right,Ct.bottom,Ct.width,Ct.height)},D=()=>Oe(i.get(),vt=>E(vt)),B=M7(w,g,vt=>{h.get().each(Ct=>{t.dispatch("TableSelectorChange",{start:vt,finish:Ct})})}),I=M7(D,h,vt=>{g.get().each(Ct=>{t.dispatch("TableSelectorChange",{start:Ct,finish:vt})})}),W=F7(B),V=F7(I),se=p(W.asSpec()),pe=p(V.asSpec()),re=(vt,Ct,gt,Rn)=>{const pn=Ct.dom.getBoundingClientRect();Wo(vt.element,"display");const Go=mg(Nt.fromDom(t.getBody())).dom.innerHeight,Un=gt(pn),ho=Rn(pn,Go);(Un||ho)&&Jn(vt.element,"display","none")},we=(vt,Ct,gt,Rn)=>{const pn=gt(Ct);g0.snapTo(vt,pn),re(vt,Ct,ho=>ho[Rn]<0,(ho,hn)=>ho[Rn]>hn)},Te=vt=>we(se,vt,C,"top"),ze=()=>g.get().each(Te),Ue=vt=>we(pe,vt,E,"bottom"),Wt=()=>h.get().each(Ue);if(Nr().deviceType.isTouch()){const vt=Ct=>Oe(Ct,Nt.fromDom);t.on("TableSelectionChange",Ct=>{d.get()||(um(s,se),um(s,pe),d.set(!0));const gt=Nt.fromDom(Ct.start),Rn=Nt.fromDom(Ct.finish);g.set(gt),h.set(Rn),k.from(Ct.otherCells).each(pn=>{a.set(vt(pn.upOrLeftCells)),i.set(vt(pn.downOrRightCells)),Te(gt),Ue(Rn)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{ze(),Wt()}),t.on("TableSelectionClear",()=>{d.get()&&(dm(se),dm(pe),d.set(!1)),g.clear(),h.clear()})}};var N7=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const eK=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",tK=(t,s,a)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"›",g=(E,D,B)=>ei.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":B}},components:[pr(E)],action:I=>{t.focus(),t.selection.select(D),t.nodeChanged()},buttonBehaviours:Dt([br.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",D.nodeName.toLowerCase()]),onShow:(I,W)=>{Yi(I.element,W.element)},onHide:I=>{db(I.element)}})}),ju.button(a.isDisabled),vr(()=>a.checkUiComponentContext("any"))])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[pr(` ${d} `)]}),C=E=>yo(E,(D,B,I)=>{const W=g(B.name,B.element,I);return I===0?D.concat([W]):D.concat([h(),W])},[]),w=E=>{const D=[];let B=E.length;for(;B-- >0;){const I=E[B];if(I.nodeType===1&&!eK(I)){const W=uW(t,I);if(W.isDefaultPrevented()||D.push({name:W.name,element:I}),W.isPropagationStopped())break}}return D};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Dt([En.config({mode:"flow",selector:"div[role=button]"}),yn.config({disabled:a.isDisabled}),vr(()=>a.checkUiComponentContext("any")),Ys.config({}),io.config({}),ao("elementPathEvents",[or((E,D)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>En.focusIn(E)),t.on("NodeChange",B=>{const I=w(B.parents),W=I.length>0?C(I):[];io.set(E,W)})})])]),components:[]}};var ng;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(ng||(ng={}));const P7=t=>{const s=Nt.fromDom(t.getContainer()),a=ea(s),i=Xa(s);return{height:a,width:i}},nK=(t,s,a,i)=>({height:zw(i.height+s.top,U_(t),W_(t)),width:a===ng.Both?zw(i.width+s.left,V_(t),iT(t)):i.width}),$7=(t,s,a)=>{const i=Nt.fromDom(t.getContainer()),d=P7(t),g=nK(t,s,a,d);return Ln(g,(h,C)=>{Oo(h)&&Jn(i,C,by(h))}),fO(t),g},oK=t=>{const s=g6(t);return s===!1?ng.None:s==="both"?ng.Both:ng.Vertical},I7=(t,s)=>s===ng.Both?ia.translate(["Editor's height: {0} pixels, Editor's width: {1} pixels",t.height,t.width]):ia.translate(["Editor's height: {0} pixels",t.height]),a5=(t,s,a)=>{zn(t.element,"aria-valuetext",I7(s,a))},JA=(t,s,a,i,d)=>{const h=Ms(i*20,d*20),C=$7(t,h,a);return a5(s,C,a),k.some(!0)},sK=(t,s)=>{const a=oK(t);if(a===ng.None)return k.none();const i=a===ng.Both?ia.translate("Press the arrow keys to resize the editor."):ia.translate("Press the Up and Down arrow keys to resize the editor."),d=a===ng.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return k.some(Wu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",d],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle",role:"separator"},behaviours:[g0.config({mode:"mouse",repositionTarget:!1,onDrag:(g,h,C)=>{const w=$7(t,C,a);a5(g,w,a)},blockerClass:"tox-blocker"}),En.config({mode:"special",onLeft:g=>JA(t,g,a,-1,0),onRight:g=>JA(t,g,a,1,0),onUp:g=>JA(t,g,a,0,-1),onDown:g=>JA(t,g,a,0,1)}),Ys.config({}),co.config({}),br.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")})),ao("set-aria-valuetext",[or(g=>{const h=()=>{a5(g,P7(t),a)};t._skinLoaded?h():t.once("SkinLoaded",h)})])],eventOrder:{[dd()]:["add-focusable","set-aria-valuetext"]}},s.icons))},rK=(t,s)=>{const a=(i,d,g)=>io.set(i,[pr(s.translate(["{0} "+g,d[g]]))]);return ei.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Dt([ju.button(s.isDisabled),vr(()=>s.checkUiComponentContext("any")),Ys.config({}),io.config({}),jt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),ao("wordcount-events",[jm(i=>{const d=jt.getValue(i),g=d.mode==="words"?"characters":"words";jt.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),or(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=jt.getValue(i);jt.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[Ji()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},aK=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",N7.trim()])},behaviours:Dt([co.config({})])}]}),i=()=>{const C=P0("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[pr(ia.translate(["Press {0} for help",C]))]}},d=()=>{const C=[];return t.hasPlugin("wordcount")&&C.push(rK(t,s)),uT(t)&&C.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],w=v6(t),E=f6(t),D=uT(t)||t.hasPlugin("wordcount"),B=()=>{const I="tox-statusbar__text-container--flex-start",W="tox-statusbar__text-container--flex-end",V="tox-statusbar__text-container--space-around";if(w){const se="tox-statusbar__text-container-3-cols";return!D&&!E?[se,V]:D&&!E?[se,W]:[se,I]}return[D&&!E?W:I]};return E&&C.push(tK(t,{},s)),w&&C.push(i()),D&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...B()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),w=sK(t,s);return C.concat(w.toArray())})()}},QA=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),cK=(t,s)=>{const a=t.inline,i=a?iG:sG,d=fh(t)?_A:Sj,g=lG(),h=Kn(),C=Kn(),w=Kn(),I=Nr().deviceType.isTouch()?["tox-platform-touch"]:[],W=Y_(t),V=T0(t),se=ps({dom:{tag:"div",classes:["tox-anchorbar"]}}),pe=ps({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),re=()=>g.mainUi.get().map(Cn=>Cn.outerContainer).bind(qs.getHeader),we=()=>dn.fromOption(g.dialogUi.get().map(Cn=>Cn.sink),"UI has not been rendered"),Te=()=>dn.fromOption(g.popupUi.get().map(Cn=>Cn.sink),"(popup) UI has not been rendered"),ze=g.lazyGetInOuterOrDie("anchor bar",se.getOpt),Ue=g.lazyGetInOuterOrDie("bottom anchor bar",pe.getOpt),Wt=g.lazyGetInOuterOrDie("toolbar",qs.getToolbar),vt=g.lazyGetInOuterOrDie("throbber",qs.getThrobber),Ct=hj({popup:Te,dialog:we},t,ze,Ue),gt=()=>{const Cn={attributes:{[C2]:W?om.BottomToTop:om.TopToBottom}},vo=qs.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Ct.popup,onEscape:()=>{t.focus()}}),Ss=qs.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Ct.popup.shared.getSink,providers:Ct.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Fd=>{QN(t,Fd)},type:V,lazyToolbar:Wt,lazyHeader:()=>re().getOrDie("Could not find header element"),...Cn}),bs=qs.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Ct.popup.shared.providers,onEscape:()=>{t.focus()},type:V}),Li=qC(t),rr=mT(t),Dc=dT(t),Ba=b6(t),cl=Rn(Ba),xi=Li||rr||Dc,Gr=()=>Li?[bs]:rr?[Ss]:[],og=[cl,vo];return qs.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(xi?[]:["tox-editor-header--empty"]),...Cn},components:de([Dc?og:[],Gr(),Wv(t)?[]:[se.asSpec()]]),sticky:fh(t),editor:t,sharedBackstage:Ct.popup.shared})},Rn=Cn=>qs.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:Cn}),pn=()=>{const Cn=qs.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),vo=qs.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Cn,vo]}},Go=()=>{const Cn=X_(t),vo=Jo(Di(),Cn)&&nr(Cn,"display")==="grid",Ss={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(I),attributes:{...ia.isRtl()?{dir:"rtl"}:{}}},behaviours:Dt([Ci.config({useFixed:()=>d.isDocked(re)})])},bs={dom:{styles:{width:document.body.clientWidth+"px"}},events:hr([Ye(Fg(),Dc=>{Jn(Dc.element,"width",document.body.clientWidth+"px")})])},Li=p(yt(Ss,vo?bs:{})),rr=W3(Li);return C.set(rr),{sink:Li,mothership:rr}},Un=()=>{const Cn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(I),attributes:{...ia.isRtl()?{dir:"rtl"}:{}}},behaviours:Dt([Ci.config({useFixed:()=>d.isDocked(re),getBounds:()=>s.getPopupSinkBounds()})])},vo=p(Cn),Ss=W3(vo);return w.set(Ss),{sink:vo,mothership:Ss}},ho=()=>{const Cn=gt(),vo=pn(),Ss=qs.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Ct.popup}),bs=qs.parts.viewWrapper({backstage:Ct.popup}),Li=G_(t)&&!a?k.some(aK(t,Ct.popup.shared.providers)):k.none(),rr=de([W?[]:[Cn],a?[]:[vo],W?[Cn]:[]]),Dc=qs.parts.editorContainer({components:de([rr,a?[]:[pe.asSpec()]])}),Ba=GC(t),cl={role:"application",...ia.isRtl()?{dir:"rtl"}:{},...Ba?{"aria-hidden":"true"}:{}},xi=p(qs.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(W?["tox-tinymce--toolbar-bottom"]:[]).concat(I),styles:{visibility:"hidden",...Ba?{opacity:"0",border:"0"}:{}},attributes:cl},components:[Dc,...a?[]:[bs,...Li.toArray()],Ss],behaviours:Dt([vr(()=>Ct.popup.shared.providers.checkUiComponentContext("any")),yn.config({disableClass:"tox-tinymce--disabled"}),En.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Gr=W3(xi);return h.set(Gr),{mothership:Gr,outerContainer:xi}},hn=Cn=>{const vo=by(j$(t)),Ss=by(G$(t));return t.inline||(vf("div","width",Ss)&&Jn(Cn.element,"width",Ss),vf("div","height",vo)?Jn(Cn.element,"height",vo):Jn(Cn.element,"height","400px")),vo},mt=Cn=>{t.addShortcut("alt+F9","focus menubar",()=>{qs.focusMenubar(Cn)}),t.addShortcut("alt+F10","focus toolbar",()=>{qs.focusToolbar(Cn)}),t.addCommand("ToggleToolbarDrawer",(vo,Ss,bs)=>{Ss?.skipFocus?(vj("skipFocus"),qs.toggleToolbarDrawerWithoutFocusing(Cn)):bs?.skip_focus?qs.toggleToolbarDrawerWithoutFocusing(Cn):qs.toggleToolbarDrawer(Cn)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>qs.isToolbarDrawerToggled(Cn)),t.on("blur",()=>{T0(t)===Vu.floating&&qs.isToolbarDrawerToggled(Cn)&&qs.toggleToolbarDrawerWithoutFocusing(Cn)})},$t=Cn=>{const{mainUi:vo,popupUi:Ss,uiMotherships:bs}=Cn;Ke(o6(t),(xh,Kw)=>{t.ui.registry.addGroupToolbarButton(Kw,xh)});const{buttons:Li,menuItems:rr,contextToolbars:Dc,sidebars:Ba,views:cl}=t.ui.registry.getAll(),xi=fT(t),Gr={menuItems:rr,menus:KC(t),menubar:a6(t),toolbar:xi.getOrThunk(()=>lT(t)),allowToolbarGroups:V===Vu.floating,buttons:Li,sidebar:Ba,views:cl};mt(vo.outerContainer),yj(t,vo.mothership,bs),d.setup(t,Ct.popup.shared,re),p7(t,Ct.popup),q0(t,Ct.popup.shared.getSink,Ct.popup),DA(t),$j(t,vt,Ct.popup.shared),u7(t,Dc,Ss.sink,{backstage:Ct.popup}),QG(t,Ss.sink);const og=t.getElement(),Fd=hn(vo.outerContainer),G0={targetNode:og,height:Fd};return i.render(t,Cn,Gr,Ct.popup,G0)},Yn=Cn=>(w.set(Cn.mothership),Cn),wo=()=>{const Cn=ho(),vo=Go(),Ss=Op(t)?Un():Yn(vo);g.dialogUi.set(vo),g.popupUi.set(Ss),g.mainUi.set(Cn);const bs={popupUi:Ss,dialogUi:vo,mainUi:Cn,uiMotherships:g.getUiMotherships()};return $t(bs)};return{popups:{backstage:Ct.popup,getMothership:()=>QA("popups",w)},dialogs:{backstage:Ct.dialog,getMothership:()=>QA("dialogs",C)},renderUI:wo}},L7=t=>{const s=[],a={};return Ln(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?dn.error(s):dn.value(a)},iK=(t,s,a,i)=>{const d=ps(kl.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Oe(t.items,h=>D8(g,h,s,a,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:Dt([En.config({mode:"acyclic",useTabstopAt:_e(ww)}),Tm.memento(d),QW(d,{postprocess:g=>L7(g).fold(h=>(console.error(h),{}),Rt)}),ao("dialog-body-panel",[Ye(Mu(),(g,h)=>{g.getSystem().broadcastOn([fA],{newFocus:k.some(h.event.target)})})])])}},lK=(t,s,a)=>Oe(t,(i,d)=>{io.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return io.set(a,[]),g.height}),uK=t=>Gt(Ne(t,(s,a)=>s>a?-1:s<a?1:0)),dK=(t,s,a)=>{const i=Qp(t).dom,d=bl(t,".tox-dialog-wrap").getOr(t),g=nr(d,"position")==="fixed";let h;g?h=Math.max(i.clientHeight,window.innerHeight):h=Math.max(i.offsetHeight,i.scrollHeight);const C=ea(s),E=s.dom.offsetLeft>=a.dom.offsetLeft+Xa(a)?Math.max(ea(a),C):C,D=parseInt(nr(t,"margin-top"),10)||0,B=parseInt(nr(t,"margin-bottom"),10)||0,W=ea(t)+D+B-E;return h-W},mK=(t,s)=>{Gt(t).each(a=>E0.showTab(s,a.value))},H7=(t,s)=>{Jn(t,"height",s+"px"),Jn(t,"flex-basis",s+"px")},qw=(t,s,a)=>{bl(t,'[role="dialog"]').each(i=>{Fs(i,'[role="tablist"]').each(d=>{a.get().map(g=>(Jn(s,"height","0"),Jn(s,"flex-basis","0"),Math.min(g,dK(i,s,d)))).each(g=>{H7(s,g)})})})},ek=t=>Fs(t,'[role="tabpanel"]'),fK=t=>{const s=Kn();return{extraEvents:[or(d=>{const g=d.element;ek(g).each(h=>{Jn(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(C=>{const w=lK(t,h,C);uK(w).fold(s.clear,s.set)}),qw(g,h,s),Wo(h,"visibility"),mK(t,d),requestAnimationFrame(()=>{qw(g,h,s)})})}),Ye(Fg(),d=>{const g=d.element;ek(g).each(h=>{qw(g,h,s)})}),Ye(FO,(d,g)=>{const h=d.element;ek(h).each(C=>{const w=Aa(Xr(C));Jn(C,"visibility","hidden");const E=lr(C,"height").map(I=>parseInt(I,10));Wo(C,"height"),Wo(C,"flex-basis");const D=C.dom.getBoundingClientRect().height;E.forall(I=>D>I)?(s.set(D),qw(h,C,s)):E.each(I=>{H7(C,I)}),Wo(C,"visibility"),w.each(Ta)})})],selectFirst:!1}},Cy="send-data-to-section",z7="send-data-to-view",gK=(t,s,a,i)=>{const d=tn({}),g=D=>{const B=jt.getValue(D),I=L7(B).getOr({}),W=d.get(),V=yt(W,I);d.set(V)},h=D=>{const B=d.get();jt.setValue(D,B)},C=tn(null),w=Oe(t.tabs,D=>({value:D.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[pr(a.shared.providers.translate(D.title))],view:()=>[kl.sketch(B=>({dom:{tag:"div",classes:["tox-form"]},components:Oe(D.items,I=>D8(B,I,s,a,i)),formBehaviours:Dt([En.config({mode:"acyclic",useTabstopAt:_e(ww)}),ao("TabView.form.events",[or(h),vd(g)]),tu.config({channels:C1([{key:Cy,value:{onReceive:g}},{key:z7,value:{onReceive:h}}])})])}))]})),E=fK(w);return E0.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(D,B,I)=>{const W=jt.getValue(B);Bn(D,MO,{name:W,oldName:C.get()}),C.set(W)},tabs:w,components:[E0.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[nT.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Dt([Ys.config({})])}),E0.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:E.selectFirst,tabSectionBehaviours:Dt([ao("tabpanel",E.extraEvents),En.config({mode:"acyclic"}),Qe.config({find:D=>Gt(E0.getViewItems(D))}),U0(k.none(),D=>(D.getSystem().broadcastOn([Cy],{}),d.get()),(D,B)=>{d.set(B),D.getSystem().broadcastOn([z7],{})})])})},tk=(t,s,a,i,d,g)=>{const h=E=>{const D=E.body;switch(D.type){case"tabpanel":return[gK(D,E.initialData,i,g)];default:return[iK(D,E.initialData,i,g)]}},C=(E,D)=>k.some({isTabPanel:()=>D.body.type==="tabpanel"}),w={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(E=>({id:E})).getOr({}),...d?w:{}}},components:[],behaviours:Dt([Tm.childAt(0),nu.config({channel:`${UO}-${s}`,updateState:C,renderComponents:h,initialData:t})])}},hK=(t,s,a,i,d,g)=>tk(t,s,k.some(a),i,d,g),pK=(t,s,a,i)=>{const d=tk(t,s,k.none(),a,!1,i);return Va.parts.body(d)},bK=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[UP(k.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Dt([Ys.config({}),co.config({})])})]}],behaviours:Dt([En.config({mode:"acyclic",useTabstopAt:_e(ww)})])};return Va.parts.body(s)},vK=Uv.deviceType.isTouch(),V7=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),U7=(t,s)=>Va.parts.close(ei.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Dt([Ys.config({})])})),W7=()=>Va.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Z7=(t,s)=>Va.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:nf(`<p>${uD(s.translate(t))}</p>`)}]}]}),j7=t=>Va.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),q7=(t,s)=>[hm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),hm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],c5=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return Va.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),k.some(!0)),useTabstopAt:g=>!ww(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:nf(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:vK?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:Dt([co.config({}),ao("dialog-events",t.dialogEvents.concat([Zg(Mu(),(g,h)=>{pt.isBlocked(g)?ae():En.focusIn(g)}),Ye(S1(),(g,h)=>{g.getSystem().broadcastOn([fA],{newFocus:h.event.newFocus})})])),ao("scroll-lock",[or(()=>{Hs(Di(),d)}),vd(()=>{Sr(Di(),d)})]),...t.extraBehaviours]),eventOrder:{[Ji()]:["dialog-events"],[dd()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[zm()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},G7=t=>ei.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Dt([Ys.config({}),br.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Wu("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{zo(s,Wp)}}),K7=(t,s,a,i)=>{const d=g=>[pr(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:Dt([nu.config({channel:`${ZP}-${s}`,initialData:t,renderComponents:d})])}},Y7=()=>({dom:nf('<div class="tox-dialog__draghandle"></div>')}),yK=(t,s,a,i)=>hm.sketch({dom:nf('<div class="tox-dialog__header"></div>'),components:[K7(t,s,k.some(a),i),Y7(),G7(i)],containerBehaviours:Dt([g0.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>uc(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(d,g)=>{d.getSystem().broadcastOn([_c()],{target:g})}})])}),CK=(t,s,a)=>{const i=Va.parts.title(K7(t,s,k.none(),a)),d=Va.parts.draghandle(Y7()),g=Va.parts.close(G7(a)),h=[i].concat(t.draggable?[d]:[]).concat([g]);return hm.sketch({dom:nf('<div class="tox-dialog__header"></div>'),components:h})},X7=(t,s,a)=>CK({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),Gw=(t,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:nf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),J7=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const d=Fs(t().element,".tox-dialog__header").map(g=>ea(g));Va.setBusy(t(),(g,h)=>Gw(i.message,h,s,d))},onUnblock:()=>{Va.setIdle(t())}}),Q7="tox-dialog--fullscreen",i5="tox-dialog--width-lg",l5="tox-dialog--width-md",nk=t=>{switch(t){case"large":return k.some(i5);case"medium":return k.some(l5);default:return k.none()}},eI=(t,s)=>{const a=Nt.fromDom(s.element.dom);Wr(a,Q7)||(dc(a,[i5,l5]),nk(t).each(i=>Hs(a,i)))},u5=(t,s)=>{const a=Nt.fromDom(t.element.dom),i=h1(a),d=j(i,g=>g===i5||g===l5).or(nk(s));ad(a,[Q7,...d.toArray()])},tI=(t,s,a)=>p(c5({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[lA({}),...t.extraBehaviours],onEscape:i=>{zo(i,Wp)},dialogEvents:s,eventOrder:{[Og()]:[nu.name(),tu.name()],[dd()]:["scroll-lock",nu.name(),"messages","dialog-events","alloy.base.behaviour"],[zm()]:["alloy.base.behaviour","dialog-events","messages",nu.name(),"scroll-lock"]}})),d5=(t,s={})=>{const a=i=>{const d=Oe(i.items,g=>{const h=sn(s,g.name).getOr(tn(!1));return{...g,storage:h}});return{...i,items:d}};return Oe(t,i=>i.type==="menu"?a(i):i)},nI=t=>yo(t,(s,a)=>a.type==="menu"?yo(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),oI=(t,s)=>[Ug(Mu(),uZ),t(ry,(a,i,d,g)=>{gl(g.element)&&Aa(Xr(g.element)).each(wr),s.onClose(),i.onClose()}),t(Wp,(a,i,d,g)=>{i.onCancel(a),zo(g,ry)}),Ye(vw,(a,i)=>s.onUnblock()),Ye(BO,(a,i)=>s.onBlock(i.event))],wK=(t,s)=>{const a=(d,g)=>Ye(d,(h,C)=>{i(h,(w,E)=>{g(t(),w,C.event,h)})}),i=(d,g)=>{nu.getState(d).get().each(h=>{g(h,d)})};return[...oI(a,s),a(Qf,(d,g,h)=>{g.onAction(d,{name:h.name})})]},ok=(t,s,a)=>{const i=(g,h)=>Ye(g,(C,w)=>{d(C,(E,D)=>{h(t(),E,w.event,C)})}),d=(g,h)=>{nu.getState(g).get().each(C=>{h(C.internalDialog,g)})};return[...oI(i,s),i(bw,(g,h)=>h.onSubmit(g)),i(ni,(g,h,C)=>{h.onChange(g,{name:C.name})}),i(Qf,(g,h,C,w)=>{const E=()=>w.getSystem().isConnected()?En.focusIn(w):void 0,D=W=>Ia(W,"disabled")||$a(W,"aria-disabled").exists(V=>V==="true"),B=Xr(w.element),I=Aa(B);h.onAction(g,{name:C.name,value:C.value}),Aa(B).fold(E,W=>{D(W)||I.exists(V=>ul(W,V)&&D(V))?E():a().toOptional().filter(V=>!ul(V.element,W)).each(E)})}),i(MO,(g,h,C)=>{h.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),vd(g=>{const h=t();jt.setValue(g,h.getData())})]},sI=(t,s)=>kw(t,t.type,s),SK=(t,s,a)=>j(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),xK=(t,s)=>{const a=s.map(C=>C.footerButtons).getOr([]),i=No(a,C=>C.align==="start"),d=(C,w)=>hm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:Oe(w,E=>E.memento.asSpec())}),g=d("start",i.pass),h=d("end",i.fail);return[g,h]},rI=(t,s,a)=>{const i=(d,g)=>{const h=Oe(g.buttons,w=>{const E=ps(sI(w,a));return{name:w.name,align:w.align,memento:E}}),C=w=>SK(d,h,w);return k.some({lookupByName:C,footerButtons:h})};return{dom:nf('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Dt([nu.config({channel:`${jP}-${s}`,initialData:t,updateState:i,renderComponents:xK})])}},EK=(t,s,a)=>rI(t,s,a),aI=(t,s,a)=>Va.parts.footer(rI(t,s,a)),sk=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=Qe.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return kl.getField(i,s).orThunk(()=>t.getFooter().bind(h=>nu.getState(h).get()).bind(h=>h.lookupByName(s)))}else return k.none()},TK=(t,s)=>{const a=t.getRoot();return nu.getState(a).get().map(i=>Ou(Br("data",i.dataValidator,s))).getOr(s)},cI=(t,s,a)=>{const i=V=>{const se=t.getRoot();se.getSystem().isConnected()&&V(se)},W={getData:()=>{const V=t.getRoot(),se=V.getSystem().isConnected()?t.getFormWrapper():V,pe=jt.getValue(se),re=Ke(a,we=>we.get());return{...pe,...re}},setData:V=>{i(se=>{const pe=W.getData(),re=yt(pe,V),we=TK(t,re),Te=t.getFormWrapper();jt.setValue(Te,we),Ln(a,(ze,Ue)=>{Do(re,Ue)&&ze.set(re[Ue])})})},setEnabled:(V,se)=>{sk(t,V).each(se?yn.enable:yn.disable)},focus:V=>{sk(t,V).each(co.focus)},block:V=>{if(!ct(V))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(se=>{Bn(se,BO,{message:V})})},unblock:()=>{i(V=>{zo(V,vw)})},showTab:V=>{i(se=>{const pe=t.getBody();nu.getState(pe).get().exists(we=>we.isTabPanel())&&Qe.getCurrent(pe).each(we=>{E0.showTab(we,V)})})},redial:V=>{i(se=>{const pe=t.getId(),re=s(V),we=d5(re.internalDialog.buttons,a);se.getSystem().broadcastOn([`${mA}-${pe}`],re),se.getSystem().broadcastOn([`${ZP}-${pe}`],re.internalDialog),se.getSystem().broadcastOn([`${UO}-${pe}`],re.internalDialog),se.getSystem().broadcastOn([`${jP}-${pe}`],{...re.internalDialog,buttons:we}),W.setData(re.initialData)})},close:()=>{i(V=>{zo(V,ry)})},toggleFullscreen:t.toggleFullscreen};return W},AK=(t,s,a)=>{const i=Z("dialog"),d=t.internalDialog,g=X7(d.title,i,a),h=tn(d.size),C=Te=>sk(re,Te),w=nk(h.get()).toArray(),E=(Te,ze)=>(h.set(ze.internalDialog.size),eI(ze.internalDialog.size,Te),k.some(ze)),D=pK({body:d.body,initialData:d.initialData},i,a,C),B=d5(d.buttons),I=nI(B),W=Er(B.length!==0,aI({buttons:B},i,a)),V=ok(()=>we,J7(()=>pe,a.shared.providers,s),a.shared.getSink),se={id:i,header:g,body:D,footer:W,extraClasses:w,extraBehaviours:[nu.config({channel:`${mA}-${i}`,updateState:E,initialData:t})],extraStyles:{}},pe=tI(se,V,a),re=(()=>{const Te=()=>{const Ue=Va.getBody(pe);return Qe.getCurrent(Ue).getOr(Ue)},ze=()=>{u5(pe,h.get())};return{getId:q(i),getRoot:q(pe),getBody:()=>Va.getBody(pe),getFooter:()=>Va.getFooter(pe),getFormWrapper:Te,toggleFullscreen:ze}})(),we=cI(re,s.redial,I);return{dialog:pe,instanceApi:we}},iI=(t,s,a,i=!1,d)=>{const g=Z("dialog"),h=Z("dialog-label"),C=Z("dialog-content"),w=t.internalDialog,E=gt=>sk(vt,gt),D=tn(w.size),B=nk(D.get()).toArray(),I=(gt,Rn)=>(D.set(Rn.internalDialog.size),eI(Rn.internalDialog.size,gt),d(),k.some(Rn)),W=ps(yK({title:w.title,draggable:!0},g,h,a.shared.providers)),V=ps(hK({body:w.body,initialData:w.initialData},g,C,a,i,E)),se=d5(w.buttons),pe=nI(se),re=Er(se.length!==0,ps(EK({buttons:se},g,a))),we=ok(()=>Ct,{onBlock:gt=>{pt.block(Ue,(Rn,pn)=>{const Go=W.getOpt(Ue).map(Un=>ea(Un.element));return Gw(gt.message,pn,a.shared.providers,Go)})},onUnblock:()=>{pt.unblock(Ue)},onClose:()=>s.closeWindow()},a.shared.getSink),Te="tox-dialog-inline",ze=Nr().os,Ue=p({dom:{tag:"div",classes:["tox-dialog",Te,...B],attributes:{role:"dialog",...ze.isMacOS()?{"aria-label":w.title}:{"aria-labelledby":h}}},eventOrder:{[Og()]:[nu.name(),tu.name()],[Ji()]:["execute-on-form"],[dd()]:["reflecting","execute-on-form"]},behaviours:Dt([En.config({mode:"cyclic",onEscape:gt=>(zo(gt,ry),k.some(!0)),useTabstopAt:gt=>!ww(gt)&&(dl(gt)!=="button"||ha(gt,"disabled")!=="disabled"),firstTabstop:1}),nu.config({channel:`${mA}-${g}`,updateState:I,initialData:t}),co.config({}),ao("execute-on-form",we.concat([Zg(Mu(),(gt,Rn)=>{En.focusIn(gt)}),Ye(S1(),(gt,Rn)=>{gt.getSystem().broadcastOn([fA],{newFocus:Rn.event.newFocus})})])),pt.config({getRoot:()=>k.some(Ue)}),io.config({}),lA({})]),components:[W.asSpec(),V.asSpec(),...re.map(gt=>gt.asSpec()).toArray()]}),Wt=()=>{u5(Ue,D.get())},vt={getId:q(g),getRoot:q(Ue),getFooter:()=>re.map(gt=>gt.get(Ue)),getBody:()=>V.get(Ue),getFormWrapper:()=>{const gt=V.get(Ue);return Qe.getCurrent(gt).getOr(gt)},toggleFullscreen:Wt},Ct=cI(vt,s.redial,pe);return{dialog:Ue,instanceApi:Ct}};var m5=tinymce.util.Tools.resolve("tinymce.util.URI");const kK=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!ct(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{Bn(C,BO,{message:h})})},unblock:()=>{s(h=>{zo(h,vw)})},close:()=>{s(h=>{zo(h,ry)})},sendMessage:h=>{s(C=>{C.getSystem().broadcastOn([qP],h)})}}},_K=["insertContent","setContent","execCommand","close","block","unblock"],lI=t=>Lt(t)&&_K.indexOf(t.mceAction)!==-1,uI=t=>!lI(t)&&Lt(t)&&Do(t,"mceAction"),DK=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=Tt(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},OK=(t,s,a,i)=>{const d=Z("dialog"),g=X7(t.title,d,i),h=bK(t),C=t.buttons.bind(Te=>Te.length===0?k.none():k.some(aI({buttons:Te},d,i))),w=wK(()=>we,J7(()=>re,i.shared.providers,s)),E={...t.height.fold(()=>({}),Te=>({height:Te+"px","max-height":Te+"px"})),...t.width.fold(()=>({}),Te=>({width:Te+"px","max-width":Te+"px"}))},D=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],B=new m5(t.url,{base_uri:new m5(window.location.href)}),I=`${B.protocol}://${B.host}${B.port?":"+B.port:""}`,W=er(),V=(Te,ze)=>k.some(ze),se=[nu.config({channel:`${mA}-${d}`,updateState:V,initialData:t}),ao("messages",[or(()=>{const Te=_s(Nt.fromDom(window),"message",ze=>{if(B.isSameOrigin(new m5(ze.raw.origin))){const Ue=ze.raw.data;lI(Ue)?DK(a,we,Ue):uI(Ue)&&t.onMessage(we,Ue)}});W.set(Te)}),vd(W.clear)]),tu.config({channels:{[qP]:{onReceive:(Te,ze)=>{Fs(Te.element,"iframe").each(Ue=>{const Wt=Ue.dom.contentWindow;In(Wt)&&Wt.postMessage(ze,I)})}}}})],re=tI({id:d,header:g,body:h,footer:C,extraClasses:D,extraBehaviours:se,extraStyles:E},w,i),we=kK(re);return{dialog:re,instanceApi:we}},RK=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{Va.hide(E),d()},h=ps(kw({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"cancel",t)),C=W7(),w=U7(g,s.providers),E=p(c5({lazySink:()=>s.getSink(),header:V7(C,w),body:Z7(i,s.providers),footer:k.some(j7(q7([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ye(Wp,g)],eventOrder:{}}));Va.show(E);const D=h.get(E);co.focus(D)}}},BK=t=>{const s=t.shared;return{open:(i,d)=>{const g=I=>{Va.hide(D),d(I)},h=ps(kw({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"submit",t)),C=kw({context:"any",name:"no",text:"No",primary:!1,buttonType:k.some("secondary"),align:"end",enabled:!0,icon:k.none()},"cancel",t),w=W7(),E=U7(()=>g(!1),s.providers),D=p(c5({lazySink:()=>s.getSink(),header:V7(w,E),body:Z7(i,s.providers),footer:k.some(j7(q7([],[C,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ye(Wp,()=>g(!1)),Ye(bw,()=>g(!0))],eventOrder:{}}));Va.show(D);const B=h.get(D);co.focus(B)}}},dI=(t,s)=>Ou(Br("data",s,t)),mI=t=>vg(t,".tox-alert-dialog")||vg(t,".tox-confirm-dialog"),MK=(t,s,a,i)=>s&&a?[]:[Ar.config({contextual:{lazyContext:()=>k.some(sa(Nt.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:i},modes:["top"],lazyViewport:d=>_d(t,d.element).map(h=>({bounds:Rp(h),optScrollEnv:k.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:lc(h.element).top})})).getOrThunk(()=>({bounds:Vc(),optScrollEnv:k.none()}))})],FK=t=>{const s=t.editor,a=fh(s),i=RK(t.backstages.dialog),d=BK(t.backstages.dialog),g=(V,se,pe)=>{if(!mn(se)){if(se.inline==="toolbar")return E(V,t.backstages.popup.shared.anchors.inlineDialog(),pe,se);if(se.inline==="bottom")return D(V,t.backstages.popup.shared.anchors.inlineBottomDialog(),pe,se);if(se.inline==="cursor")return E(V,t.backstages.popup.shared.anchors.cursor(),pe,se)}return w(V,pe)},h=(V,se)=>C(V,se),C=(V,se)=>{const pe=re=>{const we=OK(re,{closeWindow:()=>{Va.hide(we.dialog),se(we.instanceApi)}},s,t.backstages.dialog);return Va.show(we.dialog),we.instanceApi};return Lp.openUrl(pe,V)},w=(V,se)=>{const pe=(re,we,Te)=>{const ze=we,Wt=AK({dataValidator:Te,initialData:ze,internalDialog:re},{redial:Lp.redial,closeWindow:()=>{Va.hide(Wt.dialog),se(Wt.instanceApi)}},t.backstages.dialog);return Va.show(Wt.dialog),Wt.instanceApi.setData(ze),Wt.instanceApi};return Lp.open(pe,V)},E=(V,se,pe,re)=>{const we=(Te,ze,Ue)=>{const Wt=dI(ze,Ue),vt=Kn(),Ct=t.backstages.popup.shared.header.isPositionedAtTop(),gt={dataValidator:Ue,initialData:Wt,internalDialog:Te},Rn=()=>vt.on(mt=>{kr.reposition(mt),(!a||!Ct)&&Ar.refresh(mt)}),pn=iI(gt,{redial:Lp.redial,closeWindow:()=>{vt.on(kr.hide),s.off("ResizeEditor",Rn),s.off("ScrollWindow",Go),vt.clear(),pe(pn.instanceApi)}},t.backstages.popup,re.ariaAttrs,Rn),Go=()=>pn.dialog.getSystem().broadcastOn([_c()],{target:pn.dialog.element}),Un=()=>pn.dialog.getSystem().broadcastOn([Gm()],{target:pn.dialog.element}),ho=p(kr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:re.persistent?{event:"doNotDismissYet"}:{},...Ct?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Dt([ao("window-manager-inline-events",[Ye(Ng(),(mt,$t)=>{zo(pn.dialog,Wp)})]),...MK(s,a,Ct,Un)]),isExtraPart:(mt,$t)=>mI($t)}));vt.set(ho);const hn=()=>{const mt=s.inline?Di():Nt.fromDom(s.getContainer()),$t=sa(mt);return k.some($t)};return kr.showWithinBounds(ho,y(pn.dialog),{anchor:se},hn),(!a||!Ct)&&(Ar.refresh(ho),s.on("ResizeEditor",Rn)),s.on("ScrollWindow",Go),pn.instanceApi.setData(Wt),En.focusIn(pn.dialog),pn.instanceApi};return Lp.open(we,V)},D=(V,se,pe,re)=>{const we=(Te,ze,Ue)=>{const Wt=dI(ze,Ue),vt=Kn(),Ct=t.backstages.popup.shared.header.isPositionedAtTop(),gt={dataValidator:Ue,initialData:Wt,internalDialog:Te},Rn=()=>vt.on(ho=>{kr.reposition(ho),Ar.refresh(ho)}),pn=iI(gt,{redial:Lp.redial,closeWindow:()=>{vt.on(kr.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Rn),vt.clear(),pe(pn.instanceApi)}},t.backstages.popup,re.ariaAttrs,Rn),Go=p(kr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:re.persistent?{event:"doNotDismissYet"}:{},...Ct?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Dt([ao("window-manager-inline-events",[Ye(Ng(),(ho,hn)=>{zo(pn.dialog,Wp)})]),Ar.config({contextual:{lazyContext:()=>k.some(sa(Nt.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:ho=>_d(s,ho.element).map(mt=>({bounds:Rp(mt),optScrollEnv:k.some({currentScrollTop:mt.element.dom.scrollTop,scrollElmTop:lc(mt.element).top})})).getOrThunk(()=>({bounds:Vc(),optScrollEnv:k.none()}))})]),isExtraPart:(ho,hn)=>mI(hn)}));vt.set(Go);const Un=()=>t.backstages.popup.shared.getSink().toOptional().bind(ho=>{const hn=_d(s,ho.element),mt=15,$t=hn.map(Cn=>Rp(Cn)).getOr(Vc()),Yn=sa(Nt.fromDom(s.getContentAreaContainer())),wo=Uh(Yn,$t);return k.some(ba(wo.x,wo.y,wo.width,wo.height-mt))});return kr.showWithinBounds(Go,y(pn.dialog),{anchor:se},Un),Ar.refresh(Go),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Rn),pn.instanceApi.setData(Wt),En.focusIn(pn.dialog),pn.instanceApi};return Lp.open(we,V)};return{open:g,openUrl:h,alert:(V,se)=>{i.open(V,se)},close:V=>{V.close()},confirm:(V,se)=>{d.open(V,se)}}},fI=t=>{aT(t),yW(t),IG(t)};var gI=()=>{xz.add("silver",t=>{fI(t);let s=()=>Vc();const{dialogs:a,popups:i,renderUI:d}=cK(t,{getPopupSinkBounds:()=>s()}),g=()=>{const D=d();return _d(t,i.getMothership().element).each(I=>{s=()=>Rp(I)}),D};OP.register(t,i.backstage.shared);const h=FK({editor:t,backstages:{popup:i.backstage,dialog:a.backstage}}),C=Kn(),w=()=>qz(t,{backstage:i.backstage},i.getMothership(),C),E=()=>Fs(Nt.fromDom(t.getContainer()),".tox-promotion").map(D=>D.dom).getOrNull();return{renderUI:g,getWindowManagerImpl:q(h),getNotificationManagerImpl:w,getPromotionElement:E}})};gI()})()),gX}var pX;function TQ(){return pX||(pX=1,EQ()),fX}TQ();var bX={},vX={},yX;function AQ(){return yX||(yX=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.ModelManager");const Mn=(l,m,p)=>{var y;return p(l,m.prototype)?!0:((y=l.constructor)===null||y===void 0?void 0:y.name)===m.name},Fn=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&Mn(l,String,(p,y)=>y.isPrototypeOf(p))?"string":m},Xn=l=>m=>Fn(m)===l,$n=l=>m=>typeof m===l,Pn=l=>m=>l===m,so=Xn("string"),ct=Xn("object"),Lt=Xn("array"),st=Pn(null),qo=$n("boolean"),rn=Pn(void 0),Tt=l=>l==null,mn=l=>!Tt(l),fo=$n("function"),In=$n("number"),nt=()=>{},Oo=(l,m)=>(...p)=>l(m.apply(null,p)),_t=(l,m)=>p=>l(m(p)),ae=l=>()=>l,Jt=l=>l,Lo=(l,m)=>l===m;function Ze(l,...m){return(...p)=>{const y=m.concat(p);return l.apply(null,y)}}const q=l=>m=>!l(m),Rt=l=>()=>{throw new Error(l)},Zn=l=>l(),gn=ae(!1),_e=ae(!0);class fe{constructor(m,p){this.tag=m,this.value=p}static some(m){return new fe(!0,m)}static none(){return fe.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?fe.some(m(this.value)):fe.none()}bind(m){return this.tag?m(this.value):fe.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:fe.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return mn(m)?fe.some(m):fe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}fe.singletonNone=new fe(!1);const cs=Array.prototype.slice,Je=Array.prototype.indexOf,rt=Array.prototype.push,k=(l,m)=>Je.call(l,m),mo=(l,m)=>k(l,m)>-1,it=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const T=l[p];if(m(T,p))return!0}return!1},Mo=(l,m)=>{const p=[];for(let y=0;y<l;y++)p.push(m(y));return p},ln=(l,m)=>{const p=l.length,y=new Array(p);for(let T=0;T<p;T++){const O=l[T];y[T]=m(O,T)}return y},Ce=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const T=l[p];m(T,p)}},dt=(l,m)=>{for(let p=l.length-1;p>=0;p--){const y=l[p];m(y,p)}},wn=(l,m)=>{const p=[],y=[];for(let T=0,O=l.length;T<O;T++){const P=l[T];(m(P,T)?p:y).push(P)}return{pass:p,fail:y}},Ve=(l,m)=>{const p=[];for(let y=0,T=l.length;y<T;y++){const O=l[y];m(O,y)&&p.push(O)}return p},Ht=(l,m,p)=>(dt(l,(y,T)=>{p=m(p,y,T)}),p),Oe=(l,m,p)=>(Ce(l,(y,T)=>{p=m(p,y,T)}),p),ot=(l,m,p)=>{for(let y=0,T=l.length;y<T;y++){const O=l[y];if(m(O,y))return fe.some(O);if(p(O,y))break}return fe.none()},F=(l,m)=>ot(l,m,gn),No=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const T=l[p];if(m(T,p))return fe.some(p)}return fe.none()},jn=l=>{const m=[];for(let p=0,y=l.length;p<y;++p){if(!Lt(l[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+l);rt.apply(m,l[p])}return m},qn=(l,m)=>jn(ln(l,m)),yo=(l,m)=>{for(let p=0,y=l.length;p<y;++p){const T=l[p];if(m(T,p)!==!0)return!1}return!0},ht=l=>{const m=cs.call(l,0);return m.reverse(),m},j=(l,m)=>{const p={};for(let y=0,T=l.length;y<T;y++){const O=l[y];p[String(O)]=m(O,y)}return p},ce=(l,m)=>{const p=cs.call(l,0);return p.sort(m),p},de=(l,m)=>m>=0&&m<l.length?fe.some(l[m]):fe.none(),ne=l=>de(l,0),Q=l=>de(l,l.length-1),ie=(l,m)=>{for(let p=0;p<l.length;p++){const y=m(l[p],p);if(y.isSome())return y}return fe.none()},ye=Object.keys,wt=Object.hasOwnProperty,Ae=(l,m)=>{const p=ye(l);for(let y=0,T=p.length;y<T;y++){const O=p[y],P=l[O];m(P,O)}},Ne=(l,m)=>un(l,(p,y)=>({k:y,v:m(p,y)})),un=(l,m)=>{const p={};return Ae(l,(y,T)=>{const O=m(y,T);p[O.k]=O.v}),p},Gt=l=>(m,p)=>{l[p]=m},go=(l,m,p,y)=>{Ae(l,(T,O)=>{(m(T,O)?p:y)(T,O)})},ko=(l,m)=>{const p={};return go(l,m,Gt(p),nt),p},_o=(l,m)=>{const p=[];return Ae(l,(y,T)=>{p.push(m(y,T))}),p},_n=l=>_o(l,Jt),ns=(l,m)=>Ln(l,m)?fe.from(l[m]):fe.none(),Ln=(l,m)=>wt.call(l,m),Ke=(l,m)=>Ln(l,m)&&l[m]!==void 0&&l[m]!==null,At=l=>{for(const m in l)if(wt.call(l,m))return!1;return!0},an={generate:l=>{if(!Lt(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],p={};return Ce(l,(y,T)=>{const O=ye(y);if(O.length!==1)throw new Error("one and only one name per case");const P=O[0],z=y[P];if(p[P]!==void 0)throw new Error("duplicate key detected:"+P);if(P==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Lt(z))throw new Error("case arguments must be an array");m.push(P),p[P]=(...ee)=>{const he=ee.length;if(he!==z.length)throw new Error("Wrong number of arguments to case "+P+". Expected "+z.length+" ("+z+"), got "+he);return{fold:(...pt)=>{if(pt.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+pt.length);return pt[T].apply(null,ee)},match:pt=>{const Vt=ye(pt);if(m.length!==Vt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+Vt.join(","));if(!yo(m,An=>mo(Vt,An)))throw new Error("Not all branches were specified when using match. Specified: "+Vt.join(", ")+`
Required: `+m.join(", "));return pt[P].apply(null,ee)},log:pt=>{console.log(pt,{constructors:m,constructor:P,params:ee})}}}}),p}},to=l=>{let m=l;return{get:()=>m,set:T=>{m=T}}},es=l=>l.slice(0).sort(),Eo=(l,m)=>{throw new Error("All required keys ("+es(l).join(", ")+") were not specified. Specified keys were: "+es(m).join(", ")+".")},Ds=l=>{throw new Error("Unsupported keys for object: "+es(l).join(", "))},Xs=(l,m)=>{if(!Lt(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Ce(m,p=>{if(!so(p))throw new Error("The value "+p+" in the "+l+" fields was not a string.")})},sn=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+es(l).join(", ")+") were not.")},Do=l=>{const m=es(l);F(m,(y,T)=>T<m.length-1&&y===m[T+1]).each(y=>{throw new Error("The field: "+y+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},To=(l,m)=>ac(l,m,{validate:fo,label:"function"}),ac=(l,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Xs("required",m),Do(m),y=>{const T=ye(y);yo(m,z=>mo(T,z))||Eo(m,T),l(m,T);const P=Ve(m,z=>!p.validate(y[z],z));return P.length>0&&sn(P,p.label),y}},da=(l,m)=>{const p=Ve(m,y=>!mo(l,y));p.length>0&&Ds(p)},tn=l=>To(da,l),Bc=l=>{const m=O=>O(l),p=ae(l),y=()=>T,T={tag:!0,inner:l,fold:(O,P)=>P(l),isValue:_e,isError:gn,map:O=>Ma.value(O(l)),mapError:y,bind:m,exists:m,forall:m,getOr:p,or:y,getOrThunk:p,orThunk:y,getOrDie:p,each:O=>{O(l)},toOptional:()=>fe.some(l)};return T},Os=l=>{const m=()=>p,p={tag:!1,inner:l,fold:(y,T)=>y(l),isValue:gn,isError:_e,map:m,mapError:y=>Ma.error(y(l)),bind:m,exists:gn,forall:_e,getOr:Jt,or:Jt,getOrThunk:Zn,orThunk:Zn,getOrDie:Rt(String(l)),each:nt,toOptional:fe.none};return p},Ma={value:Bc,error:Os,fromOption:(l,m)=>l.fold(()=>Os(m),Bc)},zr=typeof window<"u"?window:Function("return this;")(),xs=l=>{const m=l.replace(/\./g,"-");return{resolve:y=>m+"-"+y}},no=(l,m,p=Lo)=>l.exists(y=>p(y,m)),rs=l=>{const m=[],p=y=>{m.push(y)};for(let y=0;y<l.length;y++)l[y].each(p);return m},Za=(l,m)=>l!=null?m(l):fe.none(),Fc=(l,m)=>l?fe.some(m):fe.none(),ja=(l,m)=>{let p=m??zr;for(let y=0;y<l.length&&p!==void 0&&p!==null;++y)p=p[l[y]];return p},dn=(l,m)=>{const p=l.split(".");return ja(p,m)},Fr=l=>{const m=to(fe.none()),p=()=>m.get().each(l);return{clear:()=>{p(),m.set(fe.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:z=>{p(),m.set(fe.some(z))}}},yr=()=>{const l=Fr(nt);return{...l,on:p=>l.get().each(p)}},Ei=(l,m)=>l.substring(m),ge=(l,m,p)=>m===""||l.length>=m.length&&l.substr(p,p+m.length)===m,be=(l,m)=>tt(l,m)?Ei(l,m.length):l,Be=(l,m,p=0,y)=>{const T=l.indexOf(m,p);return T!==-1?rn(y)?!0:T+m.length<=y:!1},tt=(l,m)=>ge(l,m,0),Dn=(l,m)=>ge(l,m,l.length-m.length),Ao=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),Ko=l=>l.length>0,Yo=l=>{const m=parseFloat(l);return isNaN(m)?fe.none():fe.some(m)},Fo=(l,m)=>{let p=null;const y=()=>{st(p)||(clearTimeout(p),p=null)};return{cancel:y,throttle:(...O)=>{y(),p=setTimeout(()=>{p=null,l.apply(null,O)},m)}}},Z=l=>{let m=!1,p;return(...y)=>(m||(m=!0,p=l.apply(null,y)),p)},ve=" ",at=["tfoot","thead","tbody","colgroup"],Zt=l=>mo(at,l),yt=(l,m)=>({rows:l,columns:m}),On=(l,m)=>({row:l,column:m}),Sn=(l,m,p)=>({element:l,rowspan:m,colspan:p}),Xt=(l,m,p,y)=>({element:l,rowspan:m,colspan:p,isNew:y}),Co=(l,m,p,y,T,O)=>({element:l,rowspan:m,colspan:p,row:y,column:T,isLocked:O}),Uo=(l,m,p)=>({element:l,cells:m,section:p}),os=(l,m,p,y)=>({element:l,cells:m,section:p,isNew:y}),Cs=(l,m,p)=>({element:l,isNew:m,isLocked:p}),xa=(l,m,p,y)=>({element:l,cells:m,section:p,isNew:y}),Er=(l,m,p,y)=>({startRow:l,startCol:m,finishRow:p,finishCol:y}),Ol=(l,m,p)=>({element:l,colspan:m,column:p}),Gs=(l,m)=>({element:l,columns:m}),is=(l,m,p)=>{const y=l.cells,T=y.slice(0,m),O=y.slice(m),P=T.concat(p).concat(O);return Hi(l,P)},Rs=(l,m,p)=>is(l,m,[p]),ma=(l,m,p)=>{const y=l.cells;y[m]=p},Hi=(l,m)=>xa(l.element,m,l.section,l.isNew),er=(l,m)=>{const p=l.cells,y=ln(p,m);return xa(l.element,y,l.section,l.isNew)},Kn=(l,m)=>l.cells[m],fa=(l,m)=>Kn(l,m).element,Ea=l=>l.cells.length,cr=l=>{const m=wn(l,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},Yu=(l,m,p)=>{const y=ln(l.cells,p);return xa(m(l.element),y,l.section,!0)},hu=(l,m)=>{const y=(m||document).createElement("div");if(y.innerHTML=l,!y.hasChildNodes()||y.childNodes.length>1){const T="HTML does not have a single root node";throw console.error(T,l),new Error(T)}return si(y.childNodes[0])},Js=(l,m)=>{const y=(m||document).createElement(l);return si(y)},Ti=(l,m)=>{const y=(m||document).createTextNode(l);return si(y)},si=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},Ut={fromHtml:hu,fromTag:Js,fromText:Ti,fromDom:si,fromPoint:(l,m,p)=>fe.from(l.dom.elementFromPoint(m,p)).map(si)},Nc=(l,m)=>{const p=l.document.createRange();return p.selectNode(m.dom),p},Fa=(l,m)=>{const p=l.document.createRange();return qa(p,m),p},qa=(l,m)=>l.selectNodeContents(m.dom),ir=(l,m)=>{m.fold(p=>{l.setStartBefore(p.dom)},(p,y)=>{l.setStart(p.dom,y)},p=>{l.setStartAfter(p.dom)})},pu=(l,m)=>{m.fold(p=>{l.setEndBefore(p.dom)},(p,y)=>{l.setEnd(p.dom,y)},p=>{l.setEndAfter(p.dom)})},Ga=(l,m,p)=>{const y=l.document.createRange();return ir(y,m),pu(y,p),y},yc=(l,m,p,y,T)=>{const O=l.document.createRange();return O.setStart(m.dom,p),O.setEnd(y.dom,T),O},Rl=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),Ju=l=>{const m=l.getClientRects(),p=m.length>0?m[0]:l.getBoundingClientRect();return p.width>0||p.height>0?fe.some(p).map(Rl):fe.none()},zi=an.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),bu=(l,m,p)=>m(Ut.fromDom(p.startContainer),p.startOffset,Ut.fromDom(p.endContainer),p.endOffset),Bl=(l,m)=>m.match({domRange:p=>({ltr:ae(p),rtl:fe.none}),relative:(p,y)=>({ltr:Z(()=>Ga(l,p,y)),rtl:Z(()=>fe.some(Ga(l,y,p)))}),exact:(p,y,T,O)=>({ltr:Z(()=>yc(l,p,y,T,O)),rtl:Z(()=>fe.some(yc(l,T,O,p,y)))})}),Vi=(l,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(T=>T.collapsed===!1).map(T=>zi.rtl(Ut.fromDom(T.endContainer),T.endOffset,Ut.fromDom(T.startContainer),T.startOffset)).getOrThunk(()=>bu(l,zi.ltr,p)):bu(l,zi.ltr,p)},Ml=(l,m)=>{const p=Bl(l,m);return Vi(l,p)},Nt=(l,m)=>Ml(l,m).match({ltr:(y,T,O,P)=>{const z=l.document.createRange();return z.setStart(y.dom,T),z.setEnd(O.dom,P),z},rtl:(y,T,O,P)=>{const z=l.document.createRange();return z.setStart(O.dom,P),z.setEnd(y.dom,T),z}});zi.ltr,zi.rtl;const ll=8,Qu=9,H=11,le=1,ke=3,Xe=(l,m)=>{const p=l.dom;if(p.nodeType!==le)return!1;{const y=p;if(y.matches!==void 0)return y.matches(m);if(y.msMatchesSelector!==void 0)return y.msMatchesSelector(m);if(y.webkitMatchesSelector!==void 0)return y.webkitMatchesSelector(m);if(y.mozMatchesSelector!==void 0)return y.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Mt=l=>l.nodeType!==le&&l.nodeType!==Qu&&l.nodeType!==H||l.childElementCount===0,cn=(l,m)=>{const p=m===void 0?document:m.dom;return Mt(p)?[]:ln(p.querySelectorAll(l),Ut.fromDom)},Po=(l,m)=>{const p=m===void 0?document:m.dom;return Mt(p)?fe.none():fe.from(p.querySelector(l)).map(Ut.fromDom)},So=(l,m)=>l.dom===m.dom,fs=(l,m)=>{const p=l.dom,y=m.dom;return p===y?!1:p.contains(y)},N=Xe,U=(l,m,p,y)=>{const T=l.isiOS()&&/ipad/i.test(p)===!0,O=l.isiOS()&&!T,P=l.isiOS()||l.isAndroid(),z=P||y("(pointer:coarse)"),ee=T||!O&&P&&y("(min-device-width:768px)"),he=O||P&&!ee,Me=m.isSafari()&&l.isiOS()&&/safari/i.test(p)===!1,pt=!he&&!ee&&!Me;return{isiPad:ae(T),isiPhone:ae(O),isTablet:ae(ee),isPhone:ae(he),isTouch:ae(z),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ae(Me),isDesktop:ae(pt)}},me=(l,m)=>{for(let p=0;p<l.length;p++){const y=l[p];if(y.test(m))return y}},He=(l,m)=>{const p=me(l,m);if(!p)return{major:0,minor:0};const y=T=>Number(m.replace(p,"$"+T));return Bs(y(1),y(2))},nn=(l,m)=>{const p=String(m).toLowerCase();return l.length===0?Xo():He(l,p)},Xo=()=>Bs(0,0),Bs=(l,m)=>({major:l,minor:m}),Or={nu:Bs,detect:nn,unknown:Xo},Na=(l,m)=>ie(m.brands,p=>{const y=p.brand.toLowerCase();return F(l,T=>{var O;return y===((O=T.brand)===null||O===void 0?void 0:O.toLowerCase())}).map(T=>({current:T.name,version:Or.nu(parseInt(p.version,10),0)}))}),Cc=(l,m)=>{const p=String(m).toLowerCase();return F(l,y=>y.search(p))},Jo=(l,m)=>Cc(l,m).map(p=>{const y=Or.detect(p.versionRegexes,m);return{current:p.name,version:y}}),ul=(l,m)=>Cc(l,m).map(p=>{const y=Or.detect(p.versionRegexes,m);return{current:p.name,version:y}}),_m=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ui=l=>m=>Be(m,l),ig=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>Be(l,"edge/")&&Be(l,"chrome")&&Be(l,"safari")&&Be(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,_m],search:l=>Be(l,"chrome")&&!Be(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>Be(l,"msie")||Be(l,"trident")},{name:"Opera",versionRegexes:[_m,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ui("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ui("firefox")},{name:"Safari",versionRegexes:[_m,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(Be(l,"safari")||Be(l,"mobile/"))&&Be(l,"applewebkit")}],Dm=[{name:"Windows",search:Ui("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>Be(l,"iphone")||Be(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ui("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ui("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ui("linux"),versionRegexes:[]},{name:"Solaris",search:Ui("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ui("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ui("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],wc={browsers:ae(ig),oses:ae(Dm)},ed="Edge",td="Chromium",Ah="IE",lg="Opera",ug="Firefox",kh="Safari",ff=()=>Wi({current:void 0,version:Or.unknown()}),Wi=l=>{const m=l.current,p=l.version,y=T=>()=>m===T;return{current:m,version:p,isEdge:y(ed),isChromium:y(td),isIE:y(Ah),isOpera:y(lg),isFirefox:y(ug),isSafari:y(kh)}},_h={unknown:ff,nu:Wi},Dh="Windows",K="iOS",ue="Android",Fe="Linux",ut="macOS",Hn="Solaris",Ro="FreeBSD",Rr="ChromeOS",Sc=()=>ga({current:void 0,version:Or.unknown()}),ga=l=>{const m=l.current,p=l.version,y=T=>()=>m===T;return{current:m,version:p,isWindows:y(Dh),isiOS:y(K),isAndroid:y(ue),isMacOS:y(ut),isLinux:y(Fe),isSolaris:y(Hn),isFreeBSD:y(Ro),isChromeOS:y(Rr)}},xc={unknown:Sc,nu:ga},Ec={detect:(l,m,p)=>{const y=wc.browsers(),T=wc.oses(),O=m.bind(ee=>Na(y,ee)).orThunk(()=>Jo(y,l)).fold(_h.unknown,_h.nu),P=ul(T,l).fold(xc.unknown,xc.nu),z=U(P,O,l,p);return{browser:O,os:P,deviceType:z}}},yu=l=>window.matchMedia(l).matches;let Tc=Z(()=>Ec.detect(window.navigator.userAgent,fe.from(window.navigator.userAgentData),yu));const Pc=()=>Tc(),Fl=(l,m)=>dn(l,m),$c=(l,m)=>{const p=Fl(l,m);if(p==null)throw new Error(l+" not available on this browser");return p},Ho=Object.getPrototypeOf,gf=l=>$c("HTMLElement",l),Oh=l=>{const m=dn("ownerDocument.defaultView",l);return ct(l)&&(gf(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Ho(l).constructor.name))},Ir=l=>l.dom.nodeName.toLowerCase(),nS=l=>l.dom.nodeType,Kp=l=>m=>nS(m)===l,oS=l=>nS(l)===ll||Ir(l)==="#comment",Q0=l=>Nr(l)&&Oh(l.dom),Nr=Kp(le),Om=Kp(ke),_y=Kp(Qu),kt=Kp(H),Ai=l=>m=>Nr(m)&&Ir(m)===l,dg=l=>Ut.fromDom(l.dom.ownerDocument),dl=l=>_y(l)?l:dg(l),hf=l=>Ut.fromDom(dl(l).dom.documentElement),Yp=l=>Ut.fromDom(dl(l).dom.defaultView),oe=l=>fe.from(l.dom.parentNode).map(Ut.fromDom),ri=l=>fe.from(l.dom.parentElement).map(Ut.fromDom),$d=(l,m)=>{const p=fo(m)?m:gn;let y=l.dom;const T=[];for(;y.parentNode!==null&&y.parentNode!==void 0;){const O=y.parentNode,P=Ut.fromDom(O);if(T.push(P),p(P)===!0)break;y=O}return T},Xp=l=>fe.from(l.dom.previousSibling).map(Ut.fromDom),pf=l=>fe.from(l.dom.nextSibling).map(Ut.fromDom),cc=l=>ln(l.dom.childNodes,Ut.fromDom),ai=(l,m)=>{const p=l.dom.childNodes;return fe.from(p[m]).map(Ut.fromDom)},Jp=l=>ai(l,0),Qp=(l,m,p,y)=>{const O=dg(l).dom.createRange();return O.setStart(l.dom,m),O.setEnd(p.dom,y),O},mg=(l,m,p,y)=>{const T=Qp(l,m,p,y),O=So(l,p)&&m===y;return T.collapsed&&!O},ci=l=>kt(l)&&mn(l.dom.host),e1=l=>Ut.fromDom(l.dom.getRootNode()),Cu=l=>ci(l)?l:Ut.fromDom(dl(l).dom.body),fg=l=>{const m=e1(l);return ci(m)?fe.some(m):fe.none()},t1=l=>Ut.fromDom(l.dom.host),ki=l=>{if(mn(l.target)){const m=Ut.fromDom(l.target);if(Nr(m)&&n1(m)&&l.composed&&l.composedPath){const p=l.composedPath();if(p)return ne(p)}}return fe.from(l.target)},n1=l=>mn(l.dom.shadowRoot),Nl=(l,m,p,y,T,O,P)=>({target:l,x:m,y:p,stop:y,prevent:T,kill:O,raw:P}),Id=l=>{const m=Ut.fromDom(ki(l).getOr(l.target)),p=()=>l.stopPropagation(),y=()=>l.preventDefault(),T=Oo(y,p);return Nl(m,l.clientX,l.clientY,p,y,T,l)},Qo=(l,m)=>p=>{l(p)&&m(Id(p))},Ic=(l,m,p,y,T)=>{const O=Qo(p,y);return l.dom.addEventListener(m,O,T),{unbind:Ze(eb,l,m,O,T)}},bf=(l,m,p,y)=>Ic(l,m,p,y,!1),eb=(l,m,p,y)=>{l.dom.removeEventListener(m,p,y)},Bo=_e,nd=(l,m,p)=>bf(l,m,Bo,p),Xr=Id,Pl=(l,m)=>{oe(l).each(y=>{y.dom.insertBefore(m.dom,l.dom)})},$l=(l,m)=>{pf(l).fold(()=>{oe(l).each(T=>{Es(T,m)})},y=>{Pl(y,m)})},Tr=(l,m)=>{Jp(l).fold(()=>{Es(l,m)},y=>{l.dom.insertBefore(m.dom,y.dom)})},Es=(l,m)=>{l.dom.appendChild(m.dom)},Dy=(l,m,p)=>{ai(l,p).fold(()=>{Es(l,m)},y=>{Pl(y,m)})},Oy=(l,m)=>{Pl(l,m),Es(m,l)},Jr=(l,m)=>{Ce(m,(p,y)=>{const T=y===0?l:m[y-1];$l(T,p)})},ml=(l,m)=>{Ce(m,p=>{Es(l,p)})},fl=(l,m,p)=>{if(so(p)||qo(p)||In(p))l.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",l),new Error("Attribute value was not simple")},oa=(l,m,p)=>{fl(l.dom,m,p)},Il=(l,m)=>{const p=l.dom;Ae(m,(y,T)=>{fl(p,T,y)})},Lc=(l,m)=>{Ae(m,(p,y)=>{p.fold(()=>{_s(l,y)},T=>{fl(l.dom,y,T)})})},_i=(l,m)=>{const p=l.dom.getAttribute(m);return p===null?void 0:p},ic=(l,m)=>fe.from(_i(l,m)),_s=(l,m)=>{l.dom.removeAttribute(m)},Zi=l=>Oe(l.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),Hc=l=>{l.dom.textContent="",Ce(cc(l),m=>{Pa(m)})},Pa=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Ta=l=>{const m=cc(l);m.length>0&&Jr(l,m),Pa(l)},wr=(l,m)=>Ut.fromDom(l.dom.cloneNode(m)),gl=l=>wr(l,!1),Aa=l=>wr(l,!0),Vr=(l,m)=>{const p=Ut.fromTag(m),y=Zi(l);return Il(p,y),p},Ld=(l,m)=>{const p=Vr(l,m),y=cc(Aa(l));return ml(p,y),p},tb=(l,m)=>{const p=Vr(l,m);$l(l,p);const y=cc(l);return ml(p,y),Pa(l),p},Rh=(l,m)=>{const y=document.createElement("div");return y.innerHTML=l,cc(Ut.fromDom(y))},ka=l=>ln(l,Ut.fromDom),o1=l=>l.dom.innerHTML,nb=l=>{const m=Ut.fromTag("div"),p=Ut.fromDom(l.dom.cloneNode(!0));return Es(m,p),o1(m)},Rm=l=>l.style!==void 0&&fo(l.style.getPropertyValue),zn=l=>{const m=Om(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return fg(Ut.fromDom(m)).fold(()=>p.body.contains(m),_t(zn,t1))},s1=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return Ut.fromDom(m)},ha=(l,m,p)=>{if(!so(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",l),new Error("CSS value must be a string: "+p);Rm(l)&&l.style.setProperty(m,p)},$a=(l,m)=>{Rm(l)&&l.style.removeProperty(m)},Ia=(l,m,p)=>{const y=l.dom;ha(y,m,p)},tr=(l,m)=>{const p=l.dom;Ae(m,(y,T)=>{ha(p,T,y)})},Hd=(l,m)=>{const p=l.dom,T=window.getComputedStyle(p).getPropertyValue(m);return T===""&&!zn(l)?Bh(p,m):T},Bh=(l,m)=>Rm(l)?l.style.getPropertyValue(m):"",ji=(l,m)=>{const p=l.dom,y=Bh(p,m);return fe.from(y).filter(T=>T.length>0)},Ll=(l,m)=>{const p=l.dom;$a(p,m),no(ic(l,"style").map(Ao),"")&&_s(l,"style")},r1=(l,m)=>{const p=l.dom,y=m.dom;Rm(p)&&Rm(y)&&(y.style.cssText=p.style.cssText)},a1=(l,m)=>{const p=(z,ee)=>{if(!In(ee)&&!ee.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+ee);const he=z.dom;Rm(he)&&(he.style[l]=ee+"px")},y=z=>{const ee=m(z);if(ee<=0||ee===null){const he=Hd(z,l);return parseFloat(he)||0}return ee},T=y,O=(z,ee)=>Oe(ee,(he,Me)=>{const pt=Hd(z,Me),Vt=pt===void 0?0:parseInt(pt,10);return isNaN(Vt)?he:he+Vt},0);return{set:p,get:y,getOuter:T,aggregate:O,max:(z,ee,he)=>{const Me=O(z,he);return ee>Me?ee-Me:0}}},gg=(l,m)=>Yo(l).getOr(m),wu=(l,m,p)=>gg(Hd(l,m),p),hl=(l,m,p,y)=>{const T=wu(l,`padding-${p}`,0),O=wu(l,`padding-${y}`,0),P=wu(l,`border-${p}-width`,0),z=wu(l,`border-${y}-width`,0);return m-T-O-P-z},c1=(l,m)=>{const p=l.dom,y=p.getBoundingClientRect().width||p.offsetWidth;return hl(l,y,"left","right")},Ka=l=>wu(l,"height",l.dom.offsetHeight),qi=l=>wu(l,"width",l.dom.offsetWidth),Su=l=>c1(l),gs=a1("height",l=>{const m=l.dom;return zn(l)?m.getBoundingClientRect().height:m.offsetHeight}),Di=l=>gs.get(l),ob=l=>gs.getOuter(l),hg=Ka,Gi=a1("width",l=>{const m=l.dom;return zn(l)?m.getBoundingClientRect().width:m.offsetWidth}),Jn=l=>Gi.get(l),Cr=l=>Gi.getOuter(l),Ya=Su,nr=qi,Ki=(l,m)=>({left:l,top:m,translate:(y,T)=>Ki(l+y,m+T)}),lr=Ki,Qr=l=>{const m=l.getBoundingClientRect();return lr(m.left,m.top)},vf=(l,m)=>l!==void 0?l:m!==void 0?m:0,Wo=l=>{const m=l.dom.ownerDocument,p=m.body,y=m.defaultView,T=m.documentElement;if(p===l.dom)return lr(p.offsetLeft,p.offsetTop);const O=vf(y?.pageYOffset,T.scrollTop),P=vf(y?.pageXOffset,T.scrollLeft),z=vf(T.clientTop,p.clientTop),ee=vf(T.clientLeft,p.clientLeft);return pl(l).translate(P-ee,O-z)},pl=l=>{const m=l.dom,y=m.ownerDocument.body;return y===m?lr(y.offsetLeft,y.offsetTop):zn(l)?Qr(m):lr(0,0)},Ws=l=>{const m=l!==void 0?l.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,y=m.body.scrollTop||m.documentElement.scrollTop;return lr(p,y)},ii=(l,m,p)=>{const T=(p!==void 0?p.dom:document).defaultView;T&&T.scrollBy(l,m)},ta=((l,m)=>{const p=O=>{if(!l(O))throw new Error("Can only get "+m+" value of a "+m+" node");return y(O).getOr("")},y=O=>l(O)?fe.from(O.dom.nodeValue):fe.none();return{get:p,getOption:y,set:(O,P)=>{if(!l(O))throw new Error("Can only set raw "+m+" value of a "+m+" node");O.dom.nodeValue=P}}})(Om,"text"),xu=l=>ta.get(l),yf=l=>ta.getOption(l),od=(l,m)=>ta.set(l,m),zd=(l,m)=>p=>Vd(p)==="rtl"?m:l,Vd=l=>Hd(l,"direction")==="rtl"?"rtl":"ltr",Xa=(l,m)=>{const p=_i(l,m);return p===void 0||p===""?[]:p.split(" ")},sd=(l,m,p)=>{const T=Xa(l,m).concat([p]);return oa(l,m,T.join(" ")),!0},Ry=(l,m,p)=>{const y=Ve(Xa(l,m),T=>T!==p);return y.length>0?oa(l,m,y.join(" ")):_s(l,m),!1};var Ud=(l,m,p,y,T)=>l(p,y)?fe.some(p):fo(T)&&T(p)?fe.none():m(p,y,T);const Ms=(l,m,p)=>{let y=l.dom;const T=fo(p)?p:gn;for(;y.parentNode;){y=y.parentNode;const O=Ut.fromDom(y);if(m(O))return fe.some(O);if(T(O))break}return fe.none()},i1=(l,m,p)=>Ud((T,O)=>O(T),Ms,l,m,p),Cf=(l,m)=>{const p=T=>m(Ut.fromDom(T));return F(l.dom.childNodes,p).map(Ut.fromDom)},lc=(l,m)=>{const p=y=>{for(let T=0;T<y.childNodes.length;T++){const O=Ut.fromDom(y.childNodes[T]);if(m(O))return fe.some(O);const P=p(y.childNodes[T]);if(P.isSome())return P}return fe.none()};return p(l.dom)},li=(l,m,p)=>Ms(l,y=>Xe(y,m),p),Pr=(l,m)=>Cf(l,p=>Xe(p,m)),rd=(l,m)=>Po(m,l),Ur=(l,m,p)=>Ud((T,O)=>Xe(T,O),li,l,m,p),wf=l=>l.dom.classList!==void 0,Mh=l=>Xa(l,"class"),l1=(l,m)=>sd(l,"class",m),sS=(l,m)=>Ry(l,"class",m),Hl=(l,m)=>{wf(l)?l.dom.classList.add(m):l1(l,m)},By=l=>{(wf(l)?l.dom.classList:Mh(l)).length===0&&_s(l,"class")},u1=(l,m)=>{wf(l)?l.dom.classList.remove(m):sS(l,m),By(l)},zl=(l,m)=>wf(l)&&l.dom.classList.contains(m),sb=(l,m)=>{Ce(m,p=>{u1(l,p)})},Sf=l=>Ur(l,"[contenteditable]"),pg=(l,m=!1)=>zn(l)?l.dom.isContentEditable:Sf(l).fold(ae(m),p=>bg(p)==="true"),bg=l=>l.dom.contentEditable,d1=l=>m=>{Hl(m,l)},rb=l=>m=>{sb(m,l)},bl=(l,m,p)=>Ve($d(l,p),m),My=(l,m)=>Ve(cc(l),m),Wd=(l,m)=>{let p=[];return Ce(cc(l),y=>{m(y)&&(p=p.concat([y])),p=p.concat(Wd(y,m))}),p},Fs=(l,m,p)=>bl(l,y=>Xe(y,m),p),uc=(l,m)=>My(l,p=>Xe(p,m)),Eu=(l,m)=>cn(m,l),m1=(l,m,p,y)=>({parent:l,children:m,element:p,index:y}),Zd=l=>oe(l).bind(m=>{const p=cc(m);return f1(p,l).map(y=>m1(m,p,l,y))}),f1=(l,m)=>No(l,Ze(So,m)),ab=(l,m,p)=>Ms(l,m,p).isSome(),Tu=l=>Ir(l)==="img"?1:yf(l).fold(()=>cc(l).length,m=>m.length),Au=l=>yf(l).filter(m=>m.trim().length!==0||m.indexOf(ve)>-1).isSome(),Hs=l=>Q0(l)&&_i(l,"contenteditable")==="false",cb=["img","br"],Sr=l=>Au(l)||mo(cb,Ir(l))||Hs(l),xf=l=>lc(l,Sr),Wr=l=>ku(l,Sr),ku=(l,m)=>{const p=y=>{const T=cc(y);for(let O=T.length-1;O>=0;O--){const P=T[O];if(m(P))return fe.some(P);const z=p(P);if(z.isSome())return z}return fe.none()};return p(l)},ad={create:(l,m,p,y)=>({start:l,soffset:m,finish:p,foffset:y})},Fh=an.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),g1=(l,m,p,y)=>l.fold(m,p,y),h1=l=>l.fold(Jt,Jt,Jt),Fy=Fh.before,ui=Fh.on,Vl=Fh.after,Zr={before:Fy,on:ui,after:Vl,cata:g1,getStart:h1},_a=an.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Nh=l=>_a.exact(l.start,l.soffset,l.finish,l.foffset),vg=l=>l.match({domRange:m=>Ut.fromDom(m.startContainer),relative:(m,p)=>Zr.getStart(m),exact:(m,p,y,T)=>m}),Ph=_a.domRange,ib=_a.relative,vl=_a.exact,rS=l=>{const m=vg(l);return Yp(m)},x=ad.create,A={domRange:Ph,relative:ib,exact:vl,exactFromRange:Nh,getWin:rS,range:x},L=(l,m,p)=>{var y;return fe.from((y=l.caretPositionFromPoint)===null||y===void 0?void 0:y.call(l,m,p)).bind(T=>{if(T.offsetNode===null)return fe.none();const O=l.createRange();return O.setStart(T.offsetNode,T.offset),O.collapse(),fe.some(O)})},X=(l,m,p)=>{var y;return fe.from((y=l.caretRangeFromPoint)===null||y===void 0?void 0:y.call(l,m,p))},Se=(l,m,p)=>l.caretPositionFromPoint?L(l,m,p):l.caretRangeFromPoint?X(l,m,p):fe.none(),Ge=(l,m,p)=>{const y=l.document;return Se(y,m,p).map(T=>ad.create(Ut.fromDom(T.startContainer),T.startOffset,Ut.fromDom(T.endContainer),T.endOffset))},zt=(l,m)=>{const p=Ir(l);return p==="input"?Zr.after(l):mo(["br","img"],p)?m===0?Zr.before(l):Zr.after(l):Zr.on(l,m)},vn=(l,m)=>{const p=l.fold(Zr.before,zt,Zr.after),y=m.fold(Zr.before,zt,Zr.after);return A.relative(p,y)},po=(l,m,p,y)=>{const T=zt(l,m),O=zt(p,y);return A.relative(T,O)},$o=l=>fe.from(l.getSelection()),Ks=(l,m)=>{$o(l).each(p=>{p.removeAllRanges(),p.addRange(m)})},ur=(l,m,p,y,T)=>{const O=yc(l,m,p,y,T);Ks(l,O)},na=(l,m,p,y,T,O)=>{m.collapse(p.dom,y),m.extend(T.dom,O)},zc=(l,m)=>Ml(l,m).match({ltr:(p,y,T,O)=>{ur(l,p,y,T,O)},rtl:(p,y,T,O)=>{$o(l).each(P=>{if(P.setBaseAndExtent)P.setBaseAndExtent(p.dom,y,T.dom,O);else if(P.extend)try{na(l,P,p,y,T,O)}catch{ur(l,T,O,p,y)}else ur(l,T,O,p,y)})}}),cd=(l,m,p,y,T)=>{const O=po(m,p,y,T);zc(l,O)},id=(l,m,p)=>{const y=vn(m,p);zc(l,y)},yl=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),p=l.getRangeAt(l.rangeCount-1);return fe.some(ad.create(Ut.fromDom(m.startContainer),m.startOffset,Ut.fromDom(p.endContainer),p.endOffset))}else return fe.none()},p1=l=>{if(l.anchorNode===null||l.focusNode===null)return yl(l);{const m=Ut.fromDom(l.anchorNode),p=Ut.fromDom(l.focusNode);return mg(m,l.anchorOffset,p,l.focusOffset)?fe.some(ad.create(m,l.anchorOffset,p,l.focusOffset)):yl(l)}},Ef=(l,m,p=!0)=>{const T=(p?Fa:Nc)(l,m);Ks(l,T)},$h=l=>$o(l).filter(m=>m.rangeCount>0).bind(p1),Bm=l=>$h(l).map(m=>A.exact(m.start,m.soffset,m.finish,m.foffset)),Tf=(l,m)=>{const p=Nt(l,m);return Ju(p)},Ih=(l,m,p)=>Ge(l,m,p),Lh=l=>{$o(l).each(m=>m.removeAllRanges())},Ny={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Py=(()=>{const l="[0-9]+",p="[eE]"+("[+-]?"+l),y="\\.",T=z=>`(?:${z})?`,P=`[+-]?(?:${["Infinity",l+y+T(l)+T(p),y+l+T(p),l+T(p)].join("|")})`;return new RegExp(`^(${P})(.*)$`)})(),ms=(l,m)=>it(m,p=>it(Ny[p],y=>l===y)),Zs=(l,m)=>fe.from(Py.exec(l)).bind(y=>{const T=Number(y[1]),O=y[2];return ms(O,m)?fe.some({value:T,unit:O}):fe.none()}),pa=l=>ln(l,ae(0)),di=(l,m,p,y,T)=>T(l.slice(0,m)).concat(y).concat(T(l.slice(p))),Hh=l=>(m,p,y,T)=>{if(l(y)){const O=Math.max(T,m[p]-Math.abs(y)),P=Math.abs(O-m[p]);return y>=0?P:-P}else return y},yg=Hh(l=>l<0),zh=Hh(_e),Vh=()=>{const l=(z,ee,he,Me,pt)=>{const Vt=yg(z,ee,Me,pt);return di(z,ee,he+1,[Vt,0],pa)},m=(z,ee,he,Me)=>{const pt=(100+he)/100,Vt=Math.max(Me,(z[ee]+he)/pt);return ln(z,(Ot,An)=>(An===ee?Vt:Ot/pt)-Ot)},p=(z,ee,he,Me,pt,Vt)=>Vt?m(z,ee,Me,pt):l(z,ee,he,Me,pt);return{resizeTable:(z,ee)=>z(ee),clampTableDelta:yg,calcLeftEdgeDeltas:p,calcMiddleDeltas:(z,ee,he,Me,pt,Vt,Ot)=>p(z,he,Me,pt,Vt,Ot),calcRightEdgeDeltas:(z,ee,he,Me,pt,Vt)=>{if(Vt)return m(z,he,Me,pt);{const Ot=yg(z,he,Me,pt);return pa(z.slice(0,he)).concat([Ot])}},calcRedestributedWidths:(z,ee,he,Me)=>{if(Me){const Vt=(ee+he)/ee,Ot=ln(z,An=>An/Vt);return{delta:Vt*100-100,newSizes:Ot}}else return{delta:he,newSizes:z}}}},aS=()=>{const l=(P,z,ee,he,Me)=>{const pt=he>=0?ee:z,Vt=zh(P,pt,he,Me);return di(P,z,ee+1,[Vt,-Vt],pa)};return{resizeTable:(P,z,ee)=>{ee&&P(z)},clampTableDelta:(P,z,ee,he,Me)=>{if(Me){if(ee>=0)return ee;{const pt=Oe(P,(Vt,Ot)=>Vt+Ot-he,0);return Math.max(-pt,ee)}}else return yg(P,z,ee,he)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(P,z,ee,he,Me,pt)=>l(P,ee,he,Me,pt),calcRightEdgeDeltas:(P,z,ee,he,Me,pt)=>{if(pt)return pa(P);{const Vt=he/P.length;return ln(P,ae(Vt))}},calcRedestributedWidths:(P,z,ee,he)=>({delta:0,newSizes:P})}},Mm=(l,m,p=0)=>ic(l,m).map(y=>parseInt(y,10)).getOr(p),jd=(l,m)=>Mm(l,m,1),$y=l=>Ai("col")(l)?Mm(l,"span",1)>1:jd(l,"colspan")>1,hk=l=>jd(l,"rowspan")>1,ba=(l,m)=>parseInt(Hd(l,m),10),sa=ae(10),ld=ae(10),Uh=(l,m)=>lb(l,m,_e),lb=(l,m,p)=>qn(cc(l),y=>Xe(y,m)?p(y)?[y]:[]:lb(y,m,p)),Vc=(l,m,p=gn)=>{if(p(m))return fe.none();if(mo(l,Ir(m)))return fe.some(m);const y=T=>Xe(T,"table")||p(T);return li(m,l.join(","),y)},Iy=(l,m)=>Vc(["td","th"],l,m),Af=l=>Uh(l,"th,td"),ub=l=>Xe(l,"colgroup")?uc(l,"col"):qn(Qs(l),m=>uc(m,"col")),Yi=(l,m)=>Ur(l,"table",m),db=l=>Uh(l,"tr"),Qs=l=>Yi(l).fold(ae([]),m=>uc(m,"colgroup")),Wh=Ai("th"),Fm=l=>yo(l,m=>Wh(m.element)),pk=(l,m)=>l&&m?"sectionCells":l?"section":"cells",cS=l=>{const m=l.section==="thead",p=no(mb(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:pk(m,p)}:{type:"body"}},mb=l=>{const m=Ve(l,p=>Wh(p.element));return m.length===0?fe.some("td"):m.length===l.length?fe.some("th"):fe.none()},bk=l=>{const m=ln(l,T=>cS(T).type),p=mo(m,"header"),y=mo(m,"footer");if(!p&&!y)return fe.some("body");{const T=mo(m,"body");return p&&!T&&!y?fe.some("header"):!p&&!T&&y?fe.some("footer"):fe.none()}},Ly=l=>ie(l.all,m=>{const p=cS(m);return p.type==="header"?fe.from(p.subType):fe.none()}),Nm=(l,m)=>ln(l,p=>{if(Ir(p)==="colgroup"){const y=ln(ub(p),T=>{const O=Mm(T,"span",1);return Sn(T,1,O)});return Uo(p,y,"colgroup")}else{const y=ln(Af(p),T=>{const O=Mm(T,"rowspan",1),P=Mm(T,"colspan",1);return Sn(T,O,P)});return Uo(p,y,m(p))}}),Hy=l=>oe(l).map(m=>{const p=Ir(m);return Zt(p)?p:"tbody"}).getOr("tbody"),bn=l=>{const m=db(l),y=[...Qs(l),...m];return Nm(y,Hy)},dr=(l,m)=>Nm(l,()=>m),Zh="data-snooker-locked-cols",Cg=l=>ic(l,Zh).bind(m=>fe.from(m.match(/\d+/g))).map(m=>j(m,_e)),Ja=l=>{const m=Oe(cr(l).rows,(y,T)=>(Ce(T.cells,(O,P)=>{O.isLocked&&(y[P]=!0)}),y),{}),p=_o(m,(y,T)=>parseInt(T,10));return ce(p)},jh=(l,m)=>l+","+m,vk=(l,m,p)=>fe.from(l.access[jh(m,p)]),wg=(l,m,p)=>{const y=iS(l,T=>p(m,T.element));return y.length>0?fe.some(y[0]):fe.none()},iS=(l,m)=>{const p=qn(l.all,y=>y.cells);return Ve(p,m)},qd=l=>{const m={};let p=0;return Ce(l.cells,y=>{const T=y.colspan;Mo(T,O=>{const P=p+O;m[P]=Ol(y.element,T,P)}),p+=T}),m},kf=l=>{const m={},p=[],T=ne(l).map(Ot=>Ot.element).bind(Yi).bind(Cg).getOr({});let O=0,P=0,z=0;const{pass:ee,fail:he}=wn(l,Ot=>Ot.section==="colgroup");Ce(he,Ot=>{const An=[];Ce(Ot.cells,Qe=>{let bt=0;for(;m[jh(z,bt)]!==void 0;)bt++;const Vn=Ke(T,bt.toString()),bo=Co(Qe.element,Qe.rowspan,Qe.colspan,z,bt,Vn);for(let on=0;on<Qe.colspan;on++)for(let Ns=0;Ns<Qe.rowspan;Ns++){const Ps=z+Ns,xo=bt+on,ca=jh(Ps,xo);m[ca]=bo,P=Math.max(P,xo+1)}An.push(bo)}),O++,p.push(Uo(Ot.element,An,Ot.section)),z++});const{columns:Me,colgroups:pt}=Q(ee).map(Ot=>{const An=qd(Ot);return{colgroups:[Gs(Ot.element,_n(An))],columns:An}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:yt(O,P),access:m,all:p,columns:Me,colgroups:pt}},Vo={fromTable:l=>{const m=bn(l);return kf(m)},generate:kf,getAt:vk,findItem:wg,filterItems:iS,justCells:l=>qn(l.all,m=>m.cells),justColumns:l=>_n(l.columns),hasColumns:l=>ye(l.columns).length>0,getColumnAt:(l,m)=>fe.from(l.columns[m])},Sg=(l,m,p)=>Cs(p(l.element,m),!0,l.isLocked),xr=(l,m)=>l.section!==m?xa(l.element,l.cells,m,l.isNew):l,Wy=()=>({transformRow:xr,transformCell:(l,m,p)=>{const y=p(l.element,m),T=Ir(y)!=="td"?tb(y,"td"):y;return Cs(T,l.isNew,l.isLocked)}}),_u=()=>({transformRow:xr,transformCell:Sg}),mi=()=>({transformRow:(l,m)=>xr(l,m==="thead"?"tbody":m),transformCell:Sg}),Gd={getTableSectionType:(l,m)=>{const p=Vo.fromTable(l);switch(Ly(p).getOr(m)){case"section":return Wy();case"sectionCells":return _u();case"cells":return mi()}},section:Wy,sectionCells:_u,cells:mi,fallback:()=>({transformRow:Jt,transformCell:Sg})},Zy=(l,m=_e)=>{const p=l.grid,y=Mo(p.columns,Jt),T=Mo(p.rows,Jt);return ln(y,O=>gb(()=>qn(T,he=>Vo.getAt(l,he,O).filter(Me=>Me.column===O).toArray()),he=>he.colspan===1&&m(he.element),()=>Vo.getAt(l,0,O)))},gb=(l,m,p)=>{const y=l();return F(y,m).orThunk(()=>fe.from(y[0]).orThunk(p)).map(P=>P.element)},Du=l=>{const m=l.grid,p=Mo(m.rows,Jt),y=Mo(m.columns,Jt);return ln(p,T=>gb(()=>qn(y,ee=>Vo.getAt(l,T,ee).filter(he=>he.row===T).fold(ae([]),he=>[he])),ee=>ee.rowspan===1,()=>Vo.getAt(l,T,0)))},jy=(l,m)=>{if(m<0||m>=l.length-1)return fe.none();const p=l[m].fold(()=>{const T=ht(l.slice(0,m));return ie(T,(O,P)=>O.map(z=>({value:z,delta:P+1})))},T=>fe.some({value:T,delta:0})),y=l[m+1].fold(()=>{const T=l.slice(m+1);return ie(T,(O,P)=>O.map(z=>({value:z,delta:P+1})))},T=>fe.some({value:T,delta:1}));return p.bind(T=>y.map(O=>{const P=O.delta+T.delta;return Math.abs(O.value-T.value)/P}))},hb=(l,m)=>({row:l,y:m}),qy=(l,m)=>({col:l,x:m}),lS=l=>Wo(l).left+Cr(l),yk=l=>Wo(l).left,Gy=(l,m)=>qy(l,yk(m)),uS=(l,m)=>qy(l,lS(m)),pb=l=>Wo(l).top,Ck=(l,m)=>hb(l,pb(m)),wk=(l,m)=>hb(l,pb(m)+ob(m)),Ky=(l,m,p)=>{if(p.length===0)return[];const y=ln(p.slice(1),(O,P)=>O.map(z=>l(P,z))),T=p[p.length-1].map(O=>m(p.length-1,O));return y.concat([T])},Yy=l=>-l,Ul={delta:Jt,positions:l=>Ky(Ck,wk,l),edge:pb},Qn=zd({delta:Jt,edge:yk,positions:l=>Ky(Gy,uS,l)},{delta:Yy,edge:lS,positions:l=>Ky(uS,Gy,l)}),gi={delta:(l,m)=>Qn(m).delta(l,m),positions:(l,m)=>Qn(m).positions(l,m),edge:l=>Qn(l).edge(l)},xg=/(\d+(\.\d+)?)%/,dS=/(\d+(\.\d+)?)px|em/,Sk=Ai("col"),bb=Ai("tr"),b1=(l,m,p)=>{const y=ri(l).getOrThunk(()=>s1(dg(l)));return m(l)/p(y)*100},Eg=(l,m)=>{Ia(l,"width",m+"px")},vb=(l,m)=>{Ia(l,"width",m+"%")},_f=(l,m)=>{Ia(l,"height",m+"px")},Xy=l=>{Ll(l,"height")},mS=l=>hg(l)+"px",Br=(l,m,p,y)=>{const T=Yi(l).map(O=>{const P=p(O);return Math.floor(m/100*P)}).getOr(m);return y(l,T),T},Ou=(l,m,p,y)=>{const T=parseFloat(l);return Dn(l,"%")&&Ir(m)!=="table"?Br(m,T,p,y):T},Oi=l=>{const m=mS(l);return m?Ou(m,l,Di,_f):Di(l)},Df=(l,m,p)=>{const y=p(l),T=jd(l,m);return y/T},hi=(l,m)=>ji(l,m).orThunk(()=>ic(l,m).map(p=>p+"px")),Tg=l=>hi(l,"width"),La=l=>hi(l,"height"),Ac=l=>b1(l,Jn,Ya),qh=l=>Sk(l)?Math.round(Jn(l)):nr(l),ft=l=>bb(l)?Di(l):Df(l,"rowspan",Oi),wl=l=>Tg(l).bind(p=>Zs(p,["fixed","relative","empty"])),v1=(l,m,p)=>{Ia(l,"width",m+p)},Da=l=>Jn(l)+"px",Wl=l=>Di(l)+"px",Zl=l=>b1(l,Jn,Ya)+"%",fS=l=>Tg(l).exists(m=>xg.test(m)),Pm=l=>Tg(l).exists(m=>dS.test(m)),gS=l=>Tg(l).isNone(),Ri=ae(xg),zs=Ai("col"),Ru=l=>Tg(l).getOrThunk(()=>qh(l)+"px"),y1=l=>La(l).getOrThunk(()=>ft(l)+"px"),Lr=l=>ln(Vo.justColumns(l),m=>fe.from(m.element)),hS=l=>{const m=Pc().browser,p=m.isChromium()||m.isFirefox();return zs(l)?p:!0},yb=(l,m,p,y,T,O)=>l.filter(y).fold(()=>O(jy(p,m)),P=>T(P)),ud=(l,m,p,y)=>{const T=Zy(l),O=Vo.hasColumns(l)?Lr(l):T,P=[fe.some(gi.edge(m))].concat(ln(gi.positions(T,m),ee=>ee.map(he=>he.x))),z=q($y);return ln(O,(ee,he)=>yb(ee,he,P,z,Me=>{if(hS(Me))return p(Me);{const pt=Za(T[he],Jt);return yb(pt,he,P,z,Vt=>y(fe.some(Math.round(Jn(Vt)))),y)}},y))},Jy=l=>l.map(m=>m+"px").getOr(""),Xi=(l,m)=>ud(l,m,Ru,Jy),Qy=(l,m,p)=>ud(l,m,Ac,y=>y.fold(()=>p.minCellWidth(),T=>T/p.pixelWidth()*100)),$e=(l,m,p)=>ud(l,m,qh,y=>y.getOrThunk(p.minCellWidth)),pi=(l,m,p,y)=>{const T=Du(l),O=ln(l.all,z=>fe.some(z.element)),P=[fe.some(Ul.edge(m))].concat(ln(Ul.positions(T,m),z=>z.map(ee=>ee.y)));return ln(O,(z,ee)=>yb(z,ee,P,_e,p,y))},Gh=(l,m)=>pi(l,m,ft,p=>p.getOrThunk(ld)),Mr=(l,m)=>pi(l,m,y1,Jy),Sl=(l,m)=>()=>zn(l)?m(l):parseFloat(ji(l,"width").getOr("0")),mc=l=>{const m=Sl(l,Jn),p=ae(0);return{width:m,pixelWidth:m,getWidths:(T,O)=>$e(T,l,O),getCellDelta:p,singleColumnWidth:ae([0]),minCellWidth:p,setElementWidth:nt,adjustTableWidth:nt,isRelative:!0,label:"none"}},Is=l=>{const m=Sl(l,ee=>parseFloat(Zl(ee))),p=Sl(l,Jn);return{width:m,pixelWidth:p,getWidths:(ee,he)=>Qy(ee,l,he),getCellDelta:ee=>ee/p()*100,singleColumnWidth:(ee,he)=>[100-ee],minCellWidth:()=>sa()/p()*100,setElementWidth:vb,adjustTableWidth:ee=>{const he=m(),Me=ee/100*he,pt=he+Me;vb(l,pt)},isRelative:!0,label:"percent"}},pS=l=>{const m=Sl(l,Jn);return{width:m,pixelWidth:m,getWidths:(P,z)=>$e(P,l,z),getCellDelta:Jt,singleColumnWidth:(P,z)=>[Math.max(sa(),P+z)-P],minCellWidth:sa,setElementWidth:Eg,adjustTableWidth:P=>{const z=m()+P;Eg(l,z)},isRelative:!1,label:"pixel"}},Of=(l,m)=>Ri().exec(m)!==null?Is(l):pS(l),Rf={getTableSize:l=>Tg(l).fold(()=>mc(l),p=>Of(l,p)),pixelSize:pS,percentageSize:Is,noneSize:mc},Kh=(l,m,p,y)=>{p===y?_s(l,m):oa(l,m,p)},bS=(l,m,p)=>{Q(uc(l,m)).fold(()=>Tr(l,p),y=>$l(y,p))},vS=(l,m)=>{const p=Pr(l,m).getOrThunk(()=>{const y=Ut.fromTag(m,dg(l).dom);return m==="thead"?bS(l,"caption,colgroup",y):m==="colgroup"?bS(l,"caption",y):Es(l,y),y});return Hc(p),p},$m=(l,m)=>{const p=[],y=[],T=Ot=>ln(Ot,An=>{An.isNew&&p.push(An.element);const Qe=An.element;return Hc(Qe),Ce(An.cells,bt=>{bt.isNew&&y.push(bt.element),Kh(bt.element,"colspan",bt.colspan,1),Kh(bt.element,"rowspan",bt.rowspan,1),Es(Qe,bt.element)}),Qe}),O=Ot=>qn(Ot,An=>ln(An.cells,Qe=>(Kh(Qe.element,"span",Qe.colspan,1),Qe.element))),P=(Ot,An)=>{const Qe=vS(l,An),Vn=(An==="colgroup"?O:T)(Ot);ml(Qe,Vn)},z=Ot=>{Pr(l,Ot).each(Pa)},ee=(Ot,An)=>{Ot.length>0?P(Ot,An):z(An)},he=[],Me=[],pt=[],Vt=[];return Ce(m,Ot=>{switch(Ot.section){case"thead":he.push(Ot);break;case"tbody":Me.push(Ot);break;case"tfoot":pt.push(Ot);break;case"colgroup":Vt.push(Ot);break}}),ee(Vt,"colgroup"),ee(he,"thead"),ee(Me,"tbody"),ee(pt,"tfoot"),{newRows:p,newCells:y}},C1=l=>ln(l,m=>{const p=gl(m.element);return Ce(m.cells,y=>{const T=Aa(y.element);Kh(T,"colspan",y.colspan,1),Kh(T,"rowspan",y.rowspan,1),Es(p,T)}),p}),w5=(l,m)=>ln(l,p=>Kn(p,m)),Ag=(l,m)=>l[m],fc=(l,m)=>{if(l.length===0)return 0;const p=l[0];return No(l,T=>!m(p.element,T.element)).getOr(l.length)},Qa=(l,m,p,y)=>{const T=Ag(l,m),O=T.section==="colgroup",P=fc(T.cells.slice(p),y),z=O?1:fc(w5(l.slice(m),p),y);return{colspan:P,rowspan:z}},Im=(l,m)=>{const p=ln(l,T=>ln(T.cells,gn)),y=(T,O,P,z)=>{for(let ee=T;ee<T+P;ee++)for(let he=O;he<O+z;he++)p[ee][he]=!0};return ln(l,(T,O)=>{const P=qn(T.cells,(z,ee)=>{if(p[O][ee]===!1){const he=Qa(l,O,ee,m);return y(O,ee,he.rowspan,he.colspan),[Xt(z.element,he.rowspan,he.colspan,z.isNew)]}else return[]});return os(T.element,P,T.section,T.isNew)})},Lm=(l,m,p)=>{const y=[];Ce(l.colgroups,T=>{const O=[];for(let P=0;P<l.grid.columns;P++){const z=Vo.getColumnAt(l,P).map(ee=>Cs(ee.element,p,!1)).getOrThunk(()=>Cs(m.colGap(),!0,!1));O.push(z)}y.push(xa(T.element,O,"colgroup",p))});for(let T=0;T<l.grid.rows;T++){const O=[];for(let ee=0;ee<l.grid.columns;ee++){const he=Vo.getAt(l,T,ee).map(Me=>Cs(Me.element,p,Me.isLocked)).getOrThunk(()=>Cs(m.gap(),!0,!1));O.push(he)}const P=l.all[T],z=xa(P.element,O,P.section,p);y.push(z)}return y},kg=(l,m)=>Lm(l,m,!1),Yh=l=>Im(l,So),bi=(l,m)=>ie(l.all,p=>F(p.cells,y=>So(m,y.element))),Bf=(l,m,p)=>{const y=ln(m.selection,O=>Iy(O).bind(P=>bi(l,P)).filter(p)),T=rs(y);return Fc(T.length>0,T)},Oa=(l,m,p,y,T,O,P,z,ee)=>{const he=Vo.fromTable(O),Me=fe.from(ee?.section).getOrThunk(Gd.fallback);return m(he,P).map(Vt=>{const Ot=kg(he,z),An=l(Ot,Vt,So,T(z),Me),Qe=Ja(An.grid),bt=Yh(An.grid);return{info:Vt,grid:bt,cursor:An.cursor,lockedColumns:Qe}}).bind(Vt=>{const Ot=$m(O,Vt.grid),An=fe.from(ee?.sizing).getOrThunk(()=>Rf.getTableSize(O)),Qe=fe.from(ee?.resize).getOrThunk(aS);return p(O,Vt.grid,Vt.info,{sizing:An,resize:Qe,section:Me}),y(O),_s(O,Zh),Vt.lockedColumns.length>0&&oa(O,Zh,Vt.lockedColumns.join(",")),fe.some({cursor:Vt.cursor,newRows:Ot.newRows,newCells:Ot.newCells})})},Cb=(l,m)=>Iy(m.element).bind(p=>bi(l,p).map(y=>({...y,generators:m.generators,clipboard:m.clipboard}))),Bu=(l,m)=>Bf(l,m,_e).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),Mu=(l,m)=>m.mergable,wb=(l,m)=>m.unmergable,Ha=(l,m)=>Bf(l,m,_e),Xh=(l,m)=>Bf(l,m,p=>!p.isLocked),Hm=(l,m)=>bi(l,m).exists(p=>!p.isLocked),_g=(l,m)=>yo(m,p=>Hm(l,p)),Kd=(l,m)=>Mu(l,m).filter(p=>_g(l,p.cells)),w1=(l,m)=>wb(l,m).filter(p=>_g(l,p)),Dg={...an.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},yS=(l,m)=>l.length===0?Dg.none():l.length===1?Dg.only(0):m===0?Dg.left(0,1):m===l.length-1?Dg.right(m-1,m):m>0&&m<l.length-1?Dg.middle(m-1,m,m+1):Dg.none(),jr=(l,m,p,y,T)=>{const O=l.slice(0),P=yS(l,m),z=ae(ln(O,ae(0))),ee=Vt=>y.singleColumnWidth(O[Vt],p),he=(Vt,Ot)=>T.calcLeftEdgeDeltas(O,Vt,Ot,p,y.minCellWidth(),y.isRelative),Me=(Vt,Ot,An)=>T.calcMiddleDeltas(O,Vt,Ot,An,p,y.minCellWidth(),y.isRelative),pt=(Vt,Ot)=>T.calcRightEdgeDeltas(O,Vt,Ot,p,y.minCellWidth(),y.isRelative);return P.fold(z,ee,he,Me,pt)},CS=(l,m,p)=>{let y=0;for(let T=l;T<m;T++)y+=p[T]!==void 0?p[T]:0;return y},Yd=(l,m)=>{const p=Vo.justCells(l);return ln(p,y=>{const T=CS(y.column,y.column+y.colspan,m);return{element:y.element,width:T,colspan:y.colspan}})},Fu=(l,m)=>{const p=Vo.justColumns(l);return ln(p,(y,T)=>({element:y.element,width:m[T],colspan:y.colspan}))},t2=(l,m)=>ln(l.all,(p,y)=>({element:p.element,height:m[y]})),Og=l=>Ht(l,(m,p)=>m+p,0),Ji=(l,m)=>Vo.hasColumns(l)?Fu(l,m):Yd(l,m),Rg=(l,m,p)=>{const y=Ji(l,m);Ce(y,T=>{p.setElementWidth(T.element,T.width)})},Bg=(l,m,p,y,T)=>{const O=Vo.fromTable(l),P=T.getCellDelta(m),z=T.getWidths(O,T),ee=p===O.grid.columns-1,he=y.clampTableDelta(z,p,P,T.minCellWidth(),ee),Me=jr(z,p,he,T,y),pt=ln(Me,(Vt,Ot)=>Vt+z[Ot]);Rg(O,pt,T),y.resizeTable(T.adjustTableWidth,he,ee)},n2=(l,m,p)=>{const y=Vo.fromTable(l),T=Gh(y,l),O=ln(T,(ee,he)=>p===he?Math.max(m+ee,ld()):ee),P=t2(y,O);Ce(P,ee=>{_f(ee.element,ee.height)}),Ce(Vo.justCells(y),ee=>{Xy(ee.element)});const z=Og(O);_f(l,z)},Sb=(l,m,p,y,T)=>{const O=Vo.generate(m),P=y.getWidths(O,y),z=y.pixelWidth(),{newSizes:ee,delta:he}=T.calcRedestributedWidths(P,z,p.pixelDelta,y.isRelative);Rg(O,ee,y),y.adjustTableWidth(he)},xb=(l,m,p,y)=>{const T=Vo.generate(m),O=y.getWidths(T,y);Rg(T,O,y)},Eb=(l,m)=>{$y(l)||wl(l).each(y=>{const T=y.value/2;v1(l,T,y.unit),v1(m,T,y.unit)})},o2=(l,m,p)=>{const y=Mm(l,m,1);p===1||y<=1?_s(l,m):oa(l,m,Math.min(p,y))},wS=(l,m)=>p=>{const y=p.column+p.colspan-1,T=p.column;return y>=l&&T<m},Mg=(l,m,p)=>{if(Vo.hasColumns(l)){const y=Ve(Vo.justColumns(l),wS(m,p)),T=ln(y,P=>{const z=Aa(P.element);return o2(z,"span",p-m),z}),O=Ut.fromTag("colgroup");return ml(O,T),[O]}else return[]},Fg=(l,m,p)=>ln(l.all,y=>{const T=Ve(y.cells,wS(m,p)),O=ln(T,z=>{const ee=Aa(z.element);return o2(ee,"colspan",p-m),ee}),P=Ut.fromTag("tr");return ml(P,O),P}),dd=(l,m)=>{const p=Vo.fromTable(l);return Xh(p,m).map(T=>{const O=T[T.length-1],P=T[0].column,z=O.column+O.colspan,ee=Mg(p,P,z),he=Fg(p,P,z);return[...ee,...he]})},zm=(l,m,p)=>{const y=Vo.fromTable(l);return Ha(y,m).bind(O=>{const P=Lm(y,p,!1),ee=cr(P).rows.slice(O[0].row,O[O.length-1].row+O[O.length-1].rowspan),he=qn(ee,pt=>{const Vt=Ve(pt.cells,Ot=>!Ot.isLocked);return Vt.length>0?[{...pt,cells:Vt}]:[]}),Me=Yh(he);return Fc(Me.length>0,Me)}).map(O=>C1(O))},Ng=(l,m,p,y,T,O)=>({minRow:l,minCol:m,maxRow:p,maxCol:y,allCells:T,selectedCells:O}),SS=(l,m)=>{const p=l.grid.columns;let T=l.grid.rows,O=p,P=0,z=0;const ee=[],he=[];return Ae(l.access,Me=>{if(ee.push(Me),m(Me)){he.push(Me);const pt=Me.row,Vt=pt+Me.rowspan-1,Ot=Me.column,An=Ot+Me.colspan-1;pt<T?T=pt:Vt>P&&(P=Vt),Ot<O?O=Ot:An>z&&(z=An)}}),Ng(T,O,P,z,ee,he)},S1=(l,m,p)=>{const y=l[p].element,T=Ut.fromTag("td");Es(T,Ut.fromTag("br")),(m?Es:Tr)(y,T)},x1=(l,m,p,y)=>{const T=Ve(l,z=>z.section!=="colgroup"),O=m.grid.columns,P=m.grid.rows;for(let z=0;z<P;z++){let ee=!1;for(let he=0;he<O;he++)z<p.minRow||z>p.maxRow||he<p.minCol||he>p.maxCol||(Vo.getAt(m,z,he).filter(y).isNone()?S1(T,ee,z):ee=!0)}},xS=(l,m,p,y)=>{Ae(p.columns,P=>{(P.column<m.minCol||P.column>m.maxCol)&&Pa(P.element)});const T=Ve(Uh(l,"tr"),P=>P.dom.childElementCount===0);Ce(T,Pa),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Ce(Uh(l,"th,td"),P=>{_s(P,"rowspan"),_s(P,"colspan")}),_s(l,Zh),_s(l,"data-snooker-col-series"),Rf.getTableSize(l).adjustTableWidth(y)},ES=(l,m,p,y)=>{if(y.minCol===0&&m.grid.columns===y.maxCol+1)return 0;const T=$e(m,l,p),O=Oe(T,(he,Me)=>he+Me,0),ee=Oe(T.slice(y.minCol,y.maxCol+1),(he,Me)=>he+Me,0)/O*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(ee)},Tb=(l,m)=>{const p=Vt=>Xe(Vt.element,m),y=Aa(l),T=bn(y),O=Rf.getTableSize(l),P=Vo.generate(T),z=SS(P,p),ee="th:not("+m+"),td:not("+m+")",he=lb(y,"th,td",Vt=>Xe(Vt,ee));Ce(he,Pa),x1(T,P,z,p);const Me=Vo.fromTable(l),pt=ES(l,Me,O,z);return xS(y,z,P,pt),y},Pg=Ai("col"),Ab=Ai("colgroup"),jl=l=>Ir(l)==="tr"||Ab(l),TS=l=>{const m=Mm(l,"colspan",1),p=Mm(l,"rowspan",1);return{element:l,colspan:m,rowspan:p}},Nu=(l,m=TS)=>{const p=z=>Pg(z.element)?l.col(z):l.cell(z),y=z=>Ab(z.element)?l.colgroup(z):l.row(z),T=z=>{if(jl(z))return y({element:z});{const ee=z,he=p(m(ee));return O=fe.some({item:ee,replacement:he}),he}};let O=fe.none();return{getOrInit:(z,ee)=>O.fold(()=>T(z),he=>ee(z,he.item)?he.replacement:T(z))}},E1=l=>m=>{const p=[],y=(P,z)=>F(p,ee=>z(ee.item,P)),T=P=>{const z=l==="td"?{scope:null}:{},ee=m.replace(P,l,z);return p.push({item:P,sub:ee}),ee};return{replaceOrInit:(P,z)=>{if(jl(P)||Pg(P))return P;{const ee=P;return y(ee,z).fold(()=>T(ee),he=>z(P,he.item)?he.sub:T(ee))}}}},AS=l=>ic(l,"scope").map(m=>m.substr(0,3)),Qi={modification:Nu,transform:E1,merging:l=>({unmerge:y=>{const T=AS(y);return T.each(O=>oa(y,"scope",O)),()=>{const O=l.cell({element:y,colspan:1,rowspan:1});return Ll(O,"width"),Ll(y,"width"),T.each(P=>oa(O,"scope",P)),O}},merge:y=>{const T=()=>{const O=rs(ln(y,AS));if(O.length===0)return fe.none();{const P=O[0],z=["row","col"];return it(O,he=>he!==P&&mo(z,he))?fe.none():fe.from(P)}};return Ll(y[0],"width"),T().fold(()=>_s(y[0],"scope"),O=>oa(y[0],"scope",O+"group")),ae(y[0])}})},T1=(l,m)=>{const p=l.slice(0,m[m.length-1].row+1),y=Yh(p);return qn(y,T=>{const O=T.cells.slice(0,m[m.length-1].column+1);return ln(O,P=>P.element)})},_S=(l,m)=>{const p=l.slice(m[0].row+m[0].rowspan-1,l.length),y=Yh(p);return qn(y,T=>{const O=T.cells.slice(m[0].column+m[0].colspan-1,T.cells.length);return ln(O,P=>P.element)})},Mf=(l,m,p)=>{const y=Vo.fromTable(l);return Ha(y,m).map(O=>{const P=Lm(y,p,!1),{rows:z}=cr(P),ee=T1(z,O),he=_S(z,O);return{upOrLeftCells:ee,downOrRightCells:he}})},Tk={only:(l,m)=>{const p=_y(l)?hf(l):l;return{parent:ae(p),view:ae(l),dragContainer:ae(p),origin:ae(lr(0,0)),isResizable:m}},detached:(l,m,p)=>{const y=()=>Wo(m);return{parent:ae(m),view:ae(l),dragContainer:ae(m),origin:y,isResizable:p}},body:(l,m)=>({parent:ae(l),view:ae(l),dragContainer:ae(l),origin:()=>Wo(l),isResizable:m})},Ls=an.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),DS=(l,m,p)=>{const y=p.substring(0,p.length-l.length),T=parseFloat(y);return y===T.toString()?m(T):Ls.invalid(p)},ql={...Ls,from:l=>Dn(l,"%")?DS("%",Ls.percent,l):Dn(l,"px")?DS("px",Ls.pixels,l):Ls.invalid(l)},$g=(l,m)=>ln(l,p=>ql.from(p).fold(()=>p,T=>T/m*100+"%",T=>T+"%")),ls=(l,m,p)=>{const y=p/m;return ln(l,T=>ql.from(T).fold(()=>T,P=>P*y+"px",P=>P/100*p+"px"))},va=(l,m)=>{const p=l.fold(()=>ae(""),y=>{const T=y/m;return ae(T+"px")},()=>{const y=100/m;return ae(y+"%")});return Mo(m,p)},A1=(l,m,p)=>l.fold(()=>m,y=>ls(m,p,y),y=>$g(m,p)),kb=(l,m,p)=>{const y=ql.from(p),T=yo(l,O=>O==="0px")?va(y,l.length):A1(y,l,m);return RS(T)},fr=(l,m)=>l.length===0?m:Ht(l,(p,y)=>ql.from(y).fold(ae(0),Jt,Jt)+p,0),Jh=(l,m)=>{const p=Math.floor(l);return{value:p+m,remainder:l-p}},_b=(l,m)=>ql.from(l).fold(ae(l),p=>p+m+"px",p=>p+m+"%"),RS=l=>{if(l.length===0)return l;const m=Ht(l,(y,T)=>{const O=ql.from(T).fold(()=>({value:T,remainder:0}),P=>Jh(P,"px"),P=>({value:P+"%",remainder:0}));return{output:[O.value].concat(y.output),remainder:y.remainder+O.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([_b(p[p.length-1],Math.round(m.remainder))])},BS=ql.from,MS=(l,m,p)=>{Ce(m,y=>{const T=l.slice(y.column,y.colspan+y.column),O=fr(T,sa());Ia(y.element,"width",O+p)})},S5=(l,m,p)=>{Ce(m,(y,T)=>{const O=fr([l[T]],sa());Ia(y.element,"width",O+p)})},Ak=(l,m,p)=>{Ce(p,y=>{Ll(y.element,"height")}),Ce(m,(y,T)=>{Ia(y.element,"height",l[T])})},kk=l=>BS(l).fold(ae("px"),ae("px"),ae("%")),FS=(l,m,p)=>{const y=Vo.fromTable(l),T=y.all,O=Vo.justCells(y),P=Vo.justColumns(y);m.each(z=>{const ee=kk(z),he=Jn(l),Me=Xi(y,l),pt=kb(Me,he,z);Vo.hasColumns(y)?S5(pt,P,ee):MS(pt,O,ee),Ia(l,"width",z)}),p.each(z=>{const ee=Di(l),he=Mr(y,l),Me=kb(he,ee,z);Ak(Me,T,O),Ia(l,"height",z)})},NS=fS,Pu=Pm,kc=gS;var $u=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],md=()=>{const l=he=>Ut.fromDom(he.dom.cloneNode(!1)),m=he=>dl(he).dom,p=he=>Nr(he)?Ir(he)==="body"?!0:mo($u,Ir(he)):!1,y=he=>Nr(he)?mo(["br","img","hr","input"],Ir(he)):!1,T=he=>Nr(he)&&_i(he,"contenteditable")==="false",O=(he,Me)=>he.dom.compareDocumentPosition(Me.dom),P=(he,Me)=>{const pt=Zi(he);Il(Me,pt)},z=he=>{const Me=Ir(he);return mo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Me)},ee=he=>Nr(he)?ic(he,"lang"):fe.none();return{up:ae({selector:li,closest:Ur,predicate:Ms,all:$d}),down:ae({selector:Eu,predicate:Wd}),styles:ae({get:Hd,getRaw:ji,set:Ia,remove:Ll}),attrs:ae({get:_i,set:oa,remove:_s,copyTo:P}),insert:ae({before:Pl,after:$l,afterAll:Jr,append:Es,appendAll:ml,prepend:Tr,wrap:Oy}),remove:ae({unwrap:Ta,remove:Pa}),create:ae({nu:Ut.fromTag,clone:l,text:Ut.fromText}),query:ae({comparePosition:O,prevSibling:Xp,nextSibling:pf}),property:ae({children:cc,name:Ir,parent:oe,document:m,isText:Om,isComment:oS,isElement:Nr,isSpecial:z,getLanguage:ee,getText:xu,setText:od,isBoundary:p,isEmptyTag:y,isNonEditable:T}),eq:So,is:N}};const fd=(l,m)=>({item:l,mode:m}),Ff=(l,m,p,y=Xd)=>l.property().parent(m).map(T=>fd(T,y)),Xd=(l,m,p,y=Vm)=>p.sibling(l,m).map(T=>fd(T,y)),Vm=(l,m,p,y=Vm)=>{const T=l.property().children(m);return p.first(T).map(P=>fd(P,y))},r2=[{current:Ff,next:Xd,fallback:fe.none()},{current:Xd,next:Vm,fallback:fe.some(Ff)},{current:Vm,next:Vm,fallback:fe.some(Xd)}],a2=(l,m,p,y,T=r2)=>F(T,P=>P.current===p).bind(P=>P.current(l,m,y,P.next).orThunk(()=>P.fallback.bind(z=>a2(l,m,z,y)))),Db={left:()=>({sibling:(p,y)=>p.query().prevSibling(y),first:p=>p.length>0?fe.some(p[p.length-1]):fe.none()}),right:()=>({sibling:(p,y)=>p.query().nextSibling(y),first:p=>p.length>0?fe.some(p[0]):fe.none()})},Ob=(l,m,p,y,T,O)=>a2(l,m,y,T).bind(z=>O(z.item)?fe.none():p(z.item)?fe.some(z.item):Ob(l,z.item,p,z.mode,T,O)),PS=(l,m,p,y)=>Ob(l,m,p,Xd,Db.left(),y),Rb=(l,m,p,y)=>Ob(l,m,p,Xd,Db.right(),y),Nf=(l,m)=>({element:l,offset:m}),k1=(l,m,p)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?p(m).bind(y=>k1(l,y,p).orThunk(()=>fe.some(y))):fe.none(),gd=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,Bb=(l,m)=>{const p=k1(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(p))return Nf(p,gd(l,p));const y=l.property().children(p);return y.length>0?Bb(l,y[y.length-1]):Nf(p,gd(l,p))},Dk=Bb,Mb=md(),Fb=l=>Dk(Mb,l),$S=l=>m=>l.property().children(m).length===0,Ok=(l,m,p)=>IS(l,m,$S(l),p),Qh=(l,m,p)=>Jd(l,m,$S(l),p),IS=PS,Jd=Rb,ep=md(),Nb=(l,m)=>Ok(ep,l,m),Qd=(l,m)=>Qh(ep,l,m),vi=(l,m,p)=>IS(ep,l,m,p),el=(l,m,p)=>Jd(ep,l,m,p),tl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Pb=(l,m)=>{const p=l.property().name(m);return mo(["ol","ul"],p)},c2=(l,m)=>{const p=l.property().name(m);return mo(tl,p)},tp=(l,m)=>mo(["br","img","hr","input"],l.property().name(m)),em=(l,m,p,y)=>{const T=p[0],O=p.slice(1);return y(l,m,T,O)},Rk=(l,m,p)=>p.length>0?em(l,m,p,ya):fe.none(),ya=(l,m,p,y)=>{const T=m(l,p);return Ht(y,(O,P)=>{const z=m(l,P);return $b(l,O,z)},T)},$b=(l,m,p)=>m.bind(y=>p.filter(Ze(l.eq,y))),Bi=(l,m)=>Ze(l.eq,m),LS=(l,m,p,y=gn)=>{const T=[m].concat(l.up().all(m)),O=[p].concat(l.up().all(p)),P=Me=>No(Me,y).fold(()=>Me,Vt=>Me.slice(0,Vt+1)),z=P(T),ee=P(O),he=F(z,Me=>it(ee,Bi(l,Me)));return{firstpath:z,secondpath:ee,shared:he}},HS=Rk,Pf=LS,Um=md(),Ts=(l,m)=>HS(Um,(p,y)=>l(y),m),Uc=(l,m,p)=>Pf(Um,l,m,p),_1=md(),Ib=l=>c2(_1,l),Lb=l=>Pb(_1,l),D1=l=>tp(_1,l),zS=l=>{const m=Ai("br"),p=ee=>yo(ee,he=>m(he)||Om(he)&&xu(he).trim().length===0),y=ee=>Ir(ee)==="li"||Ms(ee,Lb).isSome(),T=ee=>pf(ee).map(he=>Ib(he)?!0:D1(he)?Ir(he)!=="img":!1).getOr(!1),O=ee=>Wr(ee).bind(he=>{const Me=T(he);return oe(he).map(pt=>Me===!0||y(pt)||m(he)||Ib(pt)&&!So(ee,pt)?[]:[Ut.fromTag("br")])}).getOr([]),z=(()=>{const ee=qn(l,he=>{const Me=cc(he);return p(Me)?[]:Me.concat(O(he))});return ee.length===0?[Ut.fromTag("br")]:ee})();Hc(l[0]),ml(l[0],z)},tm=l=>{_s(l,"width"),_s(l,"height")},$f=l=>{const m=Zl(l);FS(l,fe.some(m),fe.none()),tm(l)},i2=l=>{const m=Da(l);FS(l,fe.some(m),fe.none()),tm(l)},El=l=>{const m=Wl(l);FS(l,fe.none(),fe.some(m)),tm(l)},np=l=>{Ll(l,"width");const m=ub(l),p=m.length>0?m:Af(l);Ce(p,y=>{Ll(y,"width"),tm(y)}),tm(l)},ra={scope:["row","col"]},Mi=l=>()=>{const m=Ut.fromTag("td",l.dom);return Es(m,Ut.fromTag("br",l.dom)),m},Hb=l=>()=>Ut.fromTag("col",l.dom),VS=l=>()=>Ut.fromTag("colgroup",l.dom),l2=l=>()=>Ut.fromTag("tr",l.dom),If=(l,m,p)=>{const y=Ld(l,m);return Ae(p,(T,O)=>{T===null?_s(y,O):oa(y,O,T)}),y},Ig=l=>l,u2=(l,m,p)=>xf(l).map(T=>{const O=p.join(","),P=Fs(T,O,z=>So(z,l));return Ht(P,(z,ee)=>{const he=gl(ee);return Es(z,he),he},m)}).getOr(m),d2=(l,m)=>{Ae(ra,(p,y)=>ic(l,y).filter(T=>mo(p,T)).each(T=>oa(m,y,T)))},O1=(l,m,p)=>{const y=(P,z)=>{r1(P.element,z),Ll(z,"height"),P.colspan!==1&&Ll(z,"width")},T=P=>{const z=Ut.fromTag(Ir(P.element),m.dom),ee=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),he=ee.length>0?u2(P.element,z,ee):z;return Es(he,Ut.fromTag("br")),y(P,z),d2(P.element,z),l(P.element,z),z};return{col:P=>{const z=Ut.fromTag(Ir(P.element),m.dom);return y(P,z),l(P.element,z),z},colgroup:VS(m),row:l2(m),cell:T,replace:If,colGap:Hb(m),gap:Mi(m)}},m2=l=>({col:Hb(l),colgroup:VS(l),row:l2(l),cell:Mi(l),replace:Ig,colGap:Hb(l),gap:Mi(l)}),Lf=l=>Vo.fromTable(l).grid,Wm=(l,m,p,y)=>{const T=cr(l).rows;if(T.length===0)return l;for(let O=m.startRow;O<=m.finishRow;O++)for(let P=m.startCol;P<=m.finishCol;P++){const z=T[O],ee=Kn(z,P).isLocked;ma(z,P,Cs(y(),!1,ee))}return l},US=(l,m,p,y)=>{const T=cr(l).rows;let O=!0;for(let P=0;P<T.length;P++)for(let z=0;z<Ea(T[0]);z++){const ee=T[P],he=Kn(ee,z),Me=he.element,pt=p(Me,m);pt&&!O?ma(ee,z,Cs(y(),!0,he.isLocked)):pt&&(O=!1)}return l},gc=(l,m)=>Oe(l,(p,y)=>it(p,T=>m(T.element,y.element))?p:p.concat([y]),[]),WS=(l,m,p,y)=>(m>0&&m<l[0].cells.length&&Ce(l,T=>{const O=T.cells[m-1];let P=0;const z=y();for(;T.cells.length>m+P&&p(O.element,T.cells[m+P].element);)ma(T,m+P,Cs(z,!0,T.cells[m+P].isLocked)),P++}),l),Hf=(l,m,p,y)=>{const T=cr(l).rows;if(m>0&&m<T.length){const O=T[m-1].cells,P=gc(O,p);Ce(P,z=>{let ee=fe.none();for(let he=m;he<T.length;he++)for(let Me=0;Me<Ea(T[0]);Me++){const pt=T[he],Vt=Kn(pt,Me);p(Vt.element,z.element)&&(ee.isNone()&&(ee=fe.some(y())),ee.each(An=>{ma(pt,Me,Cs(An,!0,Vt.isLocked))}))}})}return l},ZS=(l,m,p)=>{if(l.row>=m.length||l.column>Ea(m[0]))return Ma.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const y=m.slice(l.row),T=y[0].cells.slice(l.column),O=Ea(p[0]),P=p.length;return Ma.value({rowDelta:y.length-P,colDelta:T.length-O})},zb=(l,m)=>{const p=Ea(l[0]),y=Ea(m[0]);return{rowDelta:0,colDelta:p-y}},f2=(l,m)=>{const p=l.length,y=m.length;return{rowDelta:p-y,colDelta:0}},R1=(l,m,p,y)=>{const T=m.section==="colgroup"?p.col:p.cell;return Mo(l,O=>Cs(T(),!0,y(O)))},g2=(l,m,p,y)=>{const T=l[l.length-1];return l.concat(Mo(m,()=>{const O=T.section==="colgroup"?p.colgroup:p.row,P=Yu(T,O,Jt),z=R1(P.cells.length,P,p,ee=>Ln(y,ee.toString()));return Hi(P,z)}))},jS=(l,m,p,y)=>ln(l,T=>{const O=R1(m,T,p,gn);return is(T,y,O)}),qS=(l,m,p)=>ln(l,y=>Oe(p,(T,O)=>{const P=R1(1,y,m,_e)[0];return Rs(T,O,P)},y)),B1=(l,m,p)=>{const y=m.colDelta<0?jS:Jt,T=m.rowDelta<0?g2:Jt,O=Ja(l),P=Ea(l[0]),z=it(O,Me=>Me===P-1),ee=y(l,Math.abs(m.colDelta),p,z?P-1:P),he=Ja(ee);return T(ee,Math.abs(m.rowDelta),p,j(he,_e))},Ca=(l,m,p,y)=>{const T=Kn(l[m],p),O=Ze(y,T.element),P=l[m];return l.length>1&&Ea(P)>1&&(p>0&&O(fa(P,p-1))||p<P.cells.length-1&&O(fa(P,p+1))||m>0&&O(fa(l[m-1],p))||m<l.length-1&&O(fa(l[m+1],p)))},gr=(l,m,p,y,T,O)=>{const P=l.row,z=l.column,ee=p.length,he=Ea(p[0]),Me=P+ee,pt=z+he+O.length,Vt=j(O,_e);for(let Ot=P;Ot<Me;Ot++){let An=0;for(let Qe=z;Qe<pt;Qe++){if(Vt[Qe]){An++;continue}Ca(m,Ot,Qe,T)&&US(m,fa(m[Ot],Qe),T,y.cell);const bt=Qe-z-An,Vn=Kn(p[Ot-P],bt),bo=Vn.element,on=y.replace(bo);ma(m[Ot],Qe,Cs(on,!0,Vn.isLocked))}}return m},hc=(l,m,p)=>{const y=Ea(m[0]),T=cr(m).cols.length+l.row,O=Mo(y-l.column,z=>z+l.column),P=F(O,z=>yo(p,ee=>ee!==z)).getOr(y-1);return{row:T,column:P}},Ra=(l,m,p)=>Ve(p,y=>y>=l.column&&y<=Ea(m[0])+l.column),za=(l,m,p,y,T)=>{const O=Ja(m),P=hc(l,m,O),z=cr(p).rows,ee=Ra(P,z,O);return ZS(P,m,z).map(Me=>{const pt={...Me,colDelta:Me.colDelta-ee.length},Vt=B1(m,pt,y),Ot=Ja(Vt),An=Ra(P,z,Ot);return gr(P,Vt,z,y,T,An)})},aa=(l,m,p,y,T)=>{WS(m,l,T,y.cell);const O=f2(p,m),P=B1(p,O,y),z=f2(m,P),ee=B1(m,z,y);return ln(ee,(he,Me)=>is(he,l,P[Me].cells))},Vb=(l,m,p,y,T)=>{Hf(m,l,T,y.cell);const O=Ja(m),P=zb(m,p),z={...P,colDelta:P.colDelta-O.length},ee=B1(m,z,y),{cols:he,rows:Me}=cr(ee),pt=Ja(ee),Vt=zb(p,m),Ot={...Vt,colDelta:Vt.colDelta+pt.length},An=qS(p,y,pt),Qe=B1(An,Ot,y);return[...he,...Me.slice(0,l),...Qe,...Me.slice(l,Me.length)]},Ub=(l,m,p,y)=>Yu(l,T=>y(T,p),m),Wb=(l,m,p,y,T)=>{const{rows:O,cols:P}=cr(l),z=O.slice(0,m),ee=O.slice(m),he=Ub(O[p],(Me,pt)=>m>0&&m<O.length&&y(fa(O[m-1],pt),fa(O[m],pt))?Kn(O[m],pt):Cs(T(Me.element,y),!0,Me.isLocked),y,T);return[...P,...z,he,...ee]},GS=(l,m,p,y,T,O,P)=>{if(p==="colgroup"||!y){const z=Kn(l,T);return Cs(P(z.element,O),!0,!1)}else return Kn(l,m)},Zb=(l,m,p,y,T)=>ln(l,O=>{const P=m>0&&m<Ea(O)&&y(fa(O,m-1),fa(O,m)),z=GS(O,m,O.section,P,p,y,T);return Rs(O,m,z)}),KS=(l,m)=>qn(l,p=>{const y=p.cells,T=Ht(m,(O,P)=>P>=0&&P<O.length?O.slice(0,P).concat(O.slice(P+1)):O,y);return T.length>0?[xa(p.element,T,p.section,p.isNew)]:[]}),Lg=(l,m,p)=>{const{rows:y,cols:T}=cr(l);return[...T,...y.slice(0,m),...y.slice(p+1)]},h2=(l,m,p,y)=>fa(l[m],p)!==void 0&&m>0&&y(fa(l[m-1],p),fa(l[m],p)),Hg=(l,m,p)=>m>0&&p(fa(l,m-1),fa(l,m)),jb=(l,m,p,y)=>h2(l,m,p,y)||Hg(l[m],p,y),p2=(l,m)=>yo(m,Jt)&&Fm(l.cells)?_e:(y,T,O)=>!(Ir(y.element)==="th"&&m[O]),qb=(l,m)=>yo(m,Jt)&&Fm(l)?_e:(y,T,O)=>!(Ir(y.element)==="th"&&m[T]),hd=(l,m,p,y)=>{const T=P=>P==="row"?hk(m):$y(m),O=P=>T(P)?`${P}group`:P;return l?Wh(m)?O(p):null:y&&Wh(m)?O(p==="row"?"col":"row"):null},M1=(l,m)=>(p,y,T)=>fe.some(hd(l,p.element,"col",m[T])),b2=(l,m)=>(p,y)=>fe.some(hd(l,p.element,"row",m[y])),op=(l,m,p)=>Cs(p(l.element,m),!0,l.isLocked),F1=(l,m,p,y,T,O,P)=>{const z=ee=>it(m,he=>p(ee.element,he.element));return ln(l,(ee,he)=>er(ee,(Me,pt)=>{if(z(Me)){const Vt=P(Me,he,pt)?T(Me,p,y):Me;return O(Vt,he,pt).each(Ot=>{Lc(Vt.element,{scope:fe.from(Ot)})}),Vt}else return Me}))},Gb=(l,m,p)=>qn(l,(y,T)=>jb(l,T,m,p)?[]:[Kn(y,m)]),v2=(l,m,p)=>{const y=l[m];return qn(y.cells,(T,O)=>jb(l,m,O,p)?[]:[T])},Iu=(l,m,p,y,T)=>{const O=cr(l).rows,P=qn(m,Me=>Gb(O,Me,y)),z=ln(O,Me=>Fm(Me.cells)),ee=qb(P,z),he=b2(p,z);return F1(l,P,y,T,op,he,ee)},nm=(l,m,p,y,T,O,P)=>{const{cols:z,rows:ee}=cr(l),he=ee[m[0]],Me=qn(m,bt=>v2(ee,bt,T)),pt=ln(he.cells,(bt,Vn)=>Fm(Gb(ee,Vn,T))),Vt=[...ee];Ce(m,bt=>{Vt[bt]=P.transformRow(ee[bt],p)});const Ot=[...z,...Vt],An=p2(he,pt),Qe=M1(y,pt);return F1(Ot,Me,T,O,P.transformCell,Qe,An)},sp=(l,m,p,y)=>{const T=cr(l).rows,O=ln(m,P=>Kn(T[P.row],P.column));return F1(l,O,p,y,op,fe.none,_e)},qe=l=>Oe(l,(p,y)=>it(p,O=>O.column===y.column)?p:p.concat([y]),[]).sort((p,y)=>p.column-y.column),Fi=l=>pg(l,!0),rp=l=>{Af(l).length===0&&Pa(l)},N1=(l,m)=>({grid:l,cursor:m}),Kb=l=>ie(l,m=>ie(m.cells,p=>{const y=p.element;return Fc(Fi(y),y)})),pd=(l,m,p)=>{var y,T;const O=cr(l).rows;return fe.from((T=(y=O[m])===null||y===void 0?void 0:y.cells[p])===null||T===void 0?void 0:T.element).filter(Fi).orThunk(()=>Kb(O))},Wc=(l,m,p)=>{const y=pd(l,m,p);return N1(l,y)},P1=l=>Oe(l,(p,y)=>it(p,O=>O.row===y.row)?p:p.concat([y]),[]).sort((p,y)=>p.row-y.row),YS=(l,m,p,y)=>{const T=m[0].row,O=P1(m),P=Ht(O,(z,ee)=>({grid:Wb(z.grid,T,ee.row+z.delta,p,y.getOrInit),delta:z.delta+1}),{grid:l,delta:0}).grid;return Wc(P,T,m[0].column)},Yb=(l,m,p,y)=>{const T=P1(m),O=T[T.length-1],P=O.row+O.rowspan,z=Ht(T,(ee,he)=>Wb(ee,P,he.row,p,y.getOrInit),l);return Wc(z,P,m[0].column)},XS=(l,m,p,y)=>{const T=m.details,O=qe(T),P=O[0].column,z=Ht(O,(ee,he)=>({grid:Zb(ee.grid,P,he.column+ee.delta,p,y.getOrInit),delta:ee.delta+1}),{grid:l,delta:0}).grid;return Wc(z,T[0].row,P)},zg=(l,m,p,y)=>{const T=m.details,O=T[T.length-1],P=O.column+O.colspan,z=qe(T),ee=Ht(z,(he,Me)=>Zb(he,P,Me.column,p,y.getOrInit),l);return Wc(ee,T[0].row,P)},y2=(l,m,p,y)=>{const T=qe(m),O=ln(T,z=>z.column),P=Iu(l,O,!0,p,y.replaceOrInit);return Wc(P,m[0].row,m[0].column)},om=(l,m,p,y)=>{const T=sp(l,m,p,y.replaceOrInit);return Wc(T,m[0].row,m[0].column)},C2=(l,m,p,y)=>{const T=qe(m),O=ln(T,z=>z.column),P=Iu(l,O,!1,p,y.replaceOrInit);return Wc(P,m[0].row,m[0].column)},JS=(l,m,p,y)=>{const T=sp(l,m,p,y.replaceOrInit);return Wc(T,m[0].row,m[0].column)},Zc=(l,m)=>(p,y,T,O,P)=>{const z=P1(y),ee=ln(z,Me=>Me.row),he=nm(p,ee,l,m,T,O.replaceOrInit,P);return Wc(he,y[0].row,y[0].column)},bd=Zc("thead",!0),nl=Zc("tbody",!1),Xb=Zc("tfoot",!1),ap=(l,m,p,y)=>{const T=qe(m.details),O=KS(l,ln(T,z=>z.column)),P=O.length>0?O[0].cells.length-1:0;return Wc(O,T[0].row,Math.min(T[0].column,P))},QS=(l,m,p,y)=>{const T=P1(m),O=Lg(l,T[0].row,T[T.length-1].row),P=Math.max(cr(O).rows.length-1,0);return Wc(O,Math.min(m[0].row,P),m[0].column)},Bk=(l,m,p,y)=>{const T=m.cells;zS(T);const O=Wm(l,m.bounds,p,y.merge(T));return N1(O,fe.from(T[0]))},w2=(l,m,p,y)=>{const O=Ht(m,(P,z)=>US(P,z,p,y.unmerge(z)),l);return N1(O,fe.from(m[0]))},ex=(l,m,p,y)=>{const O=((ee,he)=>{const Me=Vo.fromTable(ee);return Lm(Me,he,!0)})(m.clipboard,m.generators),P=On(m.row,m.column);return za(P,l,O,m.generators,p).fold(()=>N1(l,fe.some(m.element)),ee=>Wc(ee,m.row,m.column))},zo=(l,m,p)=>{const y=dr(l,p.section),T=Vo.generate(y);return Lm(T,m,!0)},Bn=(l,m,p,y)=>{const T=cr(l).rows,O=m.cells[0].column,P=T[m.cells[0].row],z=zo(m.clipboard,m.generators,P),ee=aa(O,l,z,m.generators,p);return Wc(ee,m.cells[0].row,m.cells[0].column)},$1=(l,m,p,y)=>{const T=cr(l).rows,O=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,P=T[m.cells[0].row],z=zo(m.clipboard,m.generators,P),ee=aa(O,l,z,m.generators,p);return Wc(ee,m.cells[0].row,O)},Jb=(l,m,p,y)=>{const T=cr(l).rows,O=m.cells[0].row,P=T[O],z=zo(m.clipboard,m.generators,P),ee=Vb(O,l,z,m.generators,p);return Wc(ee,m.cells[0].row,m.cells[0].column)},S2=(l,m,p,y)=>{const T=cr(l).rows,O=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,P=T[m.cells[0].row],z=zo(m.clipboard,m.generators,P),ee=Vb(O,l,z,m.generators,p);return Wc(ee,O,m.cells[0].column)},Mk=(l,m)=>{const p=Vo.fromTable(l);return Ha(p,m).bind(T=>{const O=T[T.length-1],P=T[0].column,z=O.column+O.colspan,ee=jn(ln(p.all,he=>Ve(he.cells,Me=>Me.column>=P&&Me.column<z)));return mb(ee)}).getOr("")},x2=(l,m)=>{const p=Vo.fromTable(l);return Ha(p,m).bind(mb).getOr("")},hr=(l,m)=>{const p=Vo.fromTable(l);return Ha(p,m).bind(T=>{const O=T[T.length-1],P=T[0].row,z=O.row+O.rowspan,ee=p.all.slice(P,z);return bk(ee)}).getOr("")},Qb=(l,m,p,y)=>xb(l,m,p,y.sizing),I1=(l,m,p,y)=>Sb(l,m,p,y.sizing,y.resize),Vg=(l,m)=>it(m,p=>p.column===0&&p.isLocked),Ye=(l,m)=>it(m,p=>p.column+p.colspan>=l.grid.columns&&p.isLocked),ev=(l,m)=>{const p=Zy(l),y=qe(m);return Oe(y,(T,O)=>{const z=p[O.column].map(Cr).getOr(0);return T+z},0)},tx=l=>(m,p)=>Ha(m,p).filter(y=>!(l?Vg:Ye)(m,y)).map(y=>({details:y,pixelDelta:ev(m,y)})),tv=(l,m)=>Xh(l,m).map(p=>({details:p,pixelDelta:-ev(l,p)})),nx=l=>(m,p)=>Bu(m,p).filter(y=>!(l?Vg:Ye)(m,y.cells)),Zm=Qi.transform("th"),Ug=Qi.transform("td"),Wg=(l,m,p,y)=>Oa(YS,Ha,nt,nt,Qi.modification,l,m,p,y),E2=(l,m,p,y)=>Oa(Yb,Ha,nt,nt,Qi.modification,l,m,p,y),Zg=(l,m,p,y)=>Oa(XS,tx(!0),I1,nt,Qi.modification,l,m,p,y),or=(l,m,p,y)=>Oa(zg,tx(!1),I1,nt,Qi.modification,l,m,p,y),vd=(l,m,p,y)=>Oa(ap,tv,I1,rp,Qi.modification,l,m,p,y),ox=(l,m,p,y)=>Oa(QS,Ha,nt,rp,Qi.modification,l,m,p,y),jm=(l,m,p,y)=>Oa(y2,Xh,nt,nt,Zm,l,m,p,y),Lu=(l,m,p,y)=>Oa(C2,Xh,nt,nt,Ug,l,m,p,y),Fk=(l,m,p,y)=>Oa(bd,Ha,nt,nt,Zm,l,m,p,y),Nk=(l,m,p,y)=>Oa(nl,Ha,nt,nt,Ug,l,m,p,y),T2=(l,m,p,y)=>Oa(Xb,Ha,nt,nt,Ug,l,m,p,y),Pk=(l,m,p,y)=>Oa(om,Xh,nt,nt,Zm,l,m,p,y),$k=(l,m,p,y)=>Oa(JS,Xh,nt,nt,Ug,l,m,p,y),Ik=(l,m,p,y)=>Oa(Bk,Kd,Qb,nt,Qi.merging,l,m,p,y),Lk=(l,m,p,y)=>Oa(w2,w1,Qb,nt,Qi.merging,l,m,p,y),A2=(l,m,p,y)=>Oa(ex,Cb,Qb,nt,Qi.modification,l,m,p,y),Dt=(l,m,p,y)=>Oa(Bn,nx(!0),nt,nt,Qi.modification,l,m,p,y),sx=(l,m,p,y)=>Oa($1,nx(!1),nt,nt,Qi.modification,l,m,p,y),ec=(l,m,p,y)=>Oa(Jb,Bu,nt,nt,Qi.modification,l,m,p,y),rx=(l,m,p,y)=>Oa(S2,Bu,nt,nt,Qi.modification,l,m,p,y),ax=Mk,cx=x2,Hk=hr,ao=(l,m)=>{const p=m.column,y=m.column+m.colspan-1,T=m.row,O=m.row+m.rowspan-1;return p<=l.finishCol&&y>=l.startCol&&T<=l.finishRow&&O>=l.startRow},k2=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,ix=(l,m)=>{let p=!0;const y=Ze(k2,m);for(let T=m.startRow;T<=m.finishRow;T++)for(let O=m.startCol;O<=m.finishCol;O++)p=p&&Vo.getAt(l,T,O).exists(y);return p?fe.some(m):fe.none()},E5=(l,m)=>Er(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),zk=(l,m,p)=>{const y=Vo.findItem(l,m,So),T=Vo.findItem(l,p,So);return y.bind(O=>T.map(P=>E5(O,P)))},lx=(l,m,p)=>zk(l,m,p).bind(y=>ix(l,y)),T5=(l,m,p,y)=>Vo.findItem(l,m,So).bind(T=>{const O=p>0?T.row+T.rowspan-1:T.row,P=y>0?T.column+T.colspan-1:T.column;return Vo.getAt(l,O+p,P+y).map(ee=>ee.element)}),Vk=(l,m,p)=>zk(l,m,p).map(y=>{const T=Vo.filterItems(l,Ze(ao,y));return ln(T,O=>O.element)}),ux=(l,m)=>{const p=(y,T)=>fs(T,y);return Vo.findItem(l,m,p).map(y=>y.element)},_2=(l,m,p)=>Yi(l).bind(y=>{const T=Tl(y);return T5(T,l,m,p)}),co=(l,m,p)=>{const y=Tl(l);return Vk(y,m,p)},D2=(l,m,p,y,T)=>{const O=Tl(l),P=So(l,p)?fe.some(m):ux(O,m),z=So(l,T)?fe.some(y):ux(O,y);return P.bind(ee=>z.bind(he=>Vk(O,ee,he)))},qm=(l,m,p)=>{const y=Tl(l);return lx(y,m,p)},Tl=Vo.fromTable,en={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},jc=()=>Ut.fromTag("th"),L1=()=>Ut.fromTag("td"),H1=()=>Ut.fromTag("col"),nv=(l,m,p,y)=>{const T=Ut.fromTag("tr");for(let O=0;O<l;O++){const P=y<m||O<p?jc():L1();O<p&&oa(P,"scope","row"),y<m&&oa(P,"scope","col"),Es(P,Ut.fromTag("br")),Es(T,P)}return T},cp=l=>{const m=Ut.fromTag("colgroup");return Mo(l,()=>Es(m,H1())),m},z1=(l,m,p,y)=>Mo(l,T=>nv(m,p,y,T)),Gm=(l,m,p,y,T,O=en)=>{const P=Ut.fromTag("table"),z=T!=="cells";tr(P,O.styles),Il(P,O.attributes),O.colGroups&&Es(P,cp(m));const ee=Math.min(l,p);if(z&&p>0){const Ot=Ut.fromTag("thead");Es(P,Ot);const Qe=z1(p,m,T==="sectionCells"?ee:0,y);ml(Ot,Qe)}const he=Ut.fromTag("tbody");Es(P,he);const Me=z?l-ee:l,Vt=z1(Me,m,z?0:p,y);return ml(he,Vt),P},_c=l=>{let m=[];return{bind:O=>{if(O===void 0)throw new Error("Event bind error: undefined handler");m.push(O)},unbind:O=>{m=Ve(m,P=>P!==O)},trigger:(...O)=>{const P={};Ce(l,(z,ee)=>{P[z]=O[ee]}),Ce(m,z=>{z(P)})}}},sm=l=>{const m=Ne(l,y=>({bind:y.bind,unbind:y.unbind})),p=Ne(l,y=>y.trigger);return{registry:m,trigger:p}},Uk=tn(["compare","extract","mutate","sink"]),pc=tn(["element","start","stop","destroy"]),ip=tn(["forceDrop","drop","move","delayDrop"]),Wk=()=>{let l=fe.none();const m=()=>{l=fe.none()},p=(O,P)=>{const z=l.map(ee=>O.compare(ee,P));return l=fe.some(P),z},y=(O,P)=>{P.extract(O).each(ee=>{p(P,ee).each(Me=>{T.trigger.move(Me)})})},T=sm({move:_c(["info"])});return{onEvent:y,reset:m,events:T.registry}},as=()=>{const l=sm({move:_c(["info"])});return{onEvent:nt,reset:nt,events:l.registry}},yd=()=>{const l=as(),m=Wk();let p=l;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=l},isOn:()=>p===m,onEvent:(z,ee)=>{p.onEvent(z,ee)},events:m.events}},jg=(l,m,p)=>{let y=!1;const T=sm({start:_c([]),stop:_c([])}),O=yd(),P=()=>{An.stop(),O.isOn()&&(O.off(),T.trigger.stop())},z=Fo(P,200),ee=bt=>{An.start(bt),O.on(),T.trigger.start()},he=bt=>{z.cancel(),O.onEvent(bt,m)};O.events.move.bind(bt=>{m.mutate(l,bt.info)});const Me=()=>{y=!0},pt=()=>{y=!1},Vt=()=>y,Ot=bt=>(...Vn)=>{y&&bt.apply(null,Vn)},An=m.sink(ip({forceDrop:P,drop:Ot(P),move:Ot(he),delayDrop:Ot(z.throttle)}),p),Qe=()=>{An.destroy()};return{element:An.element,go:ee,on:Me,off:pt,isActive:Vt,destroy:Qe,events:T.registry}},qg=xs("ephox-dragster").resolve,us=l=>{const m={layerClass:qg("blocker"),...l},p=Ut.fromTag("div");return oa(p,"role","presentation"),tr(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Hl(p,qg("blocker")),Hl(p,m.layerClass),{element:ae(p),destroy:()=>{Pa(p)}}};var V1=Uk({compare:(l,m)=>lr(m.left-l.left,m.top-l.top),extract:l=>fe.some(lr(l.x,l.y)),sink:(l,m)=>{const p=us(m),y=nd(p.element(),"mousedown",l.forceDrop),T=nd(p.element(),"mouseup",l.drop),O=nd(p.element(),"mousemove",l.move),P=nd(p.element(),"mouseout",l.delayDrop),z=()=>{p.destroy(),T.unbind(),O.unbind(),P.unbind(),y.unbind()},ee=Me=>{Es(Me,p.element())},he=()=>{Pa(p.element())};return pc({element:p.element,start:ee,stop:he,destroy:z})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const Zk=(l,m={})=>{var p;const y=(p=m.mode)!==null&&p!==void 0?p:V1;return jg(l,y,m)},ov=xs("ephox-snooker").resolve,O2=()=>{const l=sm({drag:_c(["xDelta","yDelta"])});return{mutate:(p,y)=>{l.trigger.drag(p,y)},events:l.registry}},U1=()=>{const l=sm({drag:_c(["xDelta","yDelta","target"])});let m=fe.none();const p=O2();return p.events.drag.bind(O=>{m.each(P=>{l.trigger.drag(O.xDelta,O.yDelta,P)})}),{assign:O=>{m=fe.some(O)},get:()=>m,mutate:p.mutate,events:l.registry}},mx=(l,m,p,y,T)=>{const O=Ut.fromTag("div");return tr(O,{position:"absolute",left:m-y/2+"px",top:p+"px",height:T+"px",width:y+"px"}),Il(O,{"data-mce-bogus":"all","data-column":l,role:"presentation"}),O},jk=(l,m,p,y,T)=>{const O=Ut.fromTag("div");return tr(O,{position:"absolute",left:m+"px",top:p-T/2+"px",height:T+"px",width:y+"px"}),Il(O,{"data-mce-bogus":"all","data-row":l,role:"presentation"}),O},W1=ov("resizer-bar"),R2=ov("resizer-rows"),B2=ov("resizer-cols"),fx=7,gx=(l,m)=>qn(l.all,(p,y)=>m(p.element)?[y]:[]),hx=(l,m)=>{const p=[];return Mo(l.grid.columns,y=>{Vo.getColumnAt(l,y).map(O=>O.element).forall(m)&&p.push(y)}),Ve(p,y=>{const T=Vo.filterItems(l,O=>O.column===y);return yo(T,O=>m(O.element))})},M2=l=>{const m=Eu(l.parent(),"."+W1);Ce(m,Pa)},F2=(l,m,p)=>{const y=l.origin();Ce(m,T=>{T.each(O=>{const P=p(y,O);Hl(P,W1),Es(l.parent(),P)})})},ws=(l,m,p,y)=>{F2(l,m,(T,O)=>{const P=mx(O.col,O.x-T.left,p.top-T.top,fx,y);return Hl(P,B2),P})},px=(l,m,p,y)=>{F2(l,m,(T,O)=>{const P=jk(O.row,p.left-T.left,O.y-T.top,y,fx);return Hl(P,R2),P})},sv=(l,m,p,y,T)=>{const O=Wo(p),P=m.isResizable,z=y.length>0?Ul.positions(y,p):[],ee=z.length>0?gx(l,P):[],he=Ve(z,(Ot,An)=>it(ee,Qe=>An===Qe));px(m,he,O,Cr(p));const Me=T.length>0?gi.positions(T,p):[],pt=Me.length>0?hx(l,P):[],Vt=Ve(Me,(Ot,An)=>it(pt,Qe=>An===Qe));ws(m,Vt,O,ob(p))},N2=(l,m)=>{if(M2(l),l.isResizable(m)){const p=Vo.fromTable(m),y=Du(p),T=Zy(p);sv(p,l,m,y,T)}},Gl=(l,m)=>{const p=Eu(l.parent(),"."+W1);Ce(p,m)},bx=l=>{Gl(l,m=>{Ia(m,"display","none")})},P2=l=>{Gl(l,m=>{Ia(m,"display","block")})},qk=l=>zl(l,R2),rm=l=>zl(l,B2),Gk=ov("resizer-bar-dragging"),Z1=l=>{const m=U1(),p=Zk(m,{});let y=fe.none();const T=(Qe,bt)=>fe.from(_i(Qe,bt));m.events.drag.bind(Qe=>{T(Qe.target,"data-row").each(bt=>{const Vn=ba(Qe.target,"top");Ia(Qe.target,"top",Vn+Qe.yDelta+"px")}),T(Qe.target,"data-column").each(bt=>{const Vn=ba(Qe.target,"left");Ia(Qe.target,"left",Vn+Qe.xDelta+"px")})});const O=(Qe,bt)=>{const Vn=ba(Qe,bt),bo=Mm(Qe,"data-initial-"+bt,0);return Vn-bo};p.events.stop.bind(()=>{m.get().each(Qe=>{y.each(bt=>{T(Qe,"data-row").each(Vn=>{const bo=O(Qe,"top");_s(Qe,"data-initial-top"),An.trigger.adjustHeight(bt,bo,parseInt(Vn,10))}),T(Qe,"data-column").each(Vn=>{const bo=O(Qe,"left");_s(Qe,"data-initial-left"),An.trigger.adjustWidth(bt,bo,parseInt(Vn,10))}),N2(l,bt)})})});const P=(Qe,bt)=>{An.trigger.startAdjust(),m.assign(Qe),oa(Qe,"data-initial-"+bt,ba(Qe,bt)),Hl(Qe,Gk),Ia(Qe,"opacity","0.2"),p.go(l.dragContainer())},z=nd(l.parent(),"mousedown",Qe=>{qk(Qe.target)&&P(Qe.target,"top"),rm(Qe.target)&&P(Qe.target,"left")}),ee=Qe=>So(Qe,l.view()),he=Qe=>Ur(Qe,"table",ee).filter(pg),Me=Qe=>zl(Qe,"ephox-snooker-resizer-bar")||zl(Qe,"ephox-dragster-blocker"),pt=nd(l.view(),"mouseover",Qe=>{he(Qe.target).fold(()=>{zn(Qe.target)&&!Me(Qe.target)&&M2(l)},bt=>{p.isActive()&&(y=fe.some(bt),N2(l,bt))})}),Vt=()=>{z.unbind(),pt.unbind(),p.destroy(),M2(l)},Ot=Qe=>{N2(l,Qe)},An=sm({adjustHeight:_c(["table","delta","row"]),adjustWidth:_c(["table","delta","column"]),startAdjust:_c([])});return{destroy:Vt,refresh:Ot,on:p.on,off:p.off,hideBars:Ze(bx,l),showBars:Ze(P2,l),events:An.registry}},Kk={create:(l,m,p)=>{const y=Ul,T=gi,O=Z1(l),P=sm({beforeResize:_c(["table","type"]),afterResize:_c(["table","type"]),startDrag:_c([])});return O.events.adjustHeight.bind(z=>{const ee=z.table;P.trigger.beforeResize(ee,"row");const he=y.delta(z.delta,ee);n2(ee,he,z.row),P.trigger.afterResize(ee,"row")}),O.events.startAdjust.bind(z=>{P.trigger.startDrag()}),O.events.adjustWidth.bind(z=>{const ee=z.table;P.trigger.beforeResize(ee,"col");const he=T.delta(z.delta,ee),Me=p(ee);Bg(ee,he,z.column,m,Me),P.trigger.afterResize(ee,"col")}),{on:O.on,off:O.off,refreshBars:O.refresh,hideBars:O.hideBars,showBars:O.showBars,destroy:O.destroy,events:P.registry}}},zf=l=>m=>m.options.get(l),rv="100%",vx=l=>{var m;const p=l.dom,y=(m=p.getParent(l.selection.getStart(),p.isBlock))!==null&&m!==void 0?m:l.getBody();return Ya(Ut.fromDom(y))+"px"},Yk=(l,m)=>X1(l)||!cv(l)?m:Km(l)?{...m,width:vx(l)}:{...m,width:rv},yx=(l,m)=>X1(l)||cv(l)?m:Km(l)?{...m,width:vx(l)}:{...m,width:rv},R5=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const y=mo(["section","cells","sectionCells","auto"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const y=mo(["preservetable","resizetable"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},Cx=l=>fe.from(l.options.get("table_clone_elements")),wx=l=>{const m=l.options.get("object_resizing");return mo(m.split(","),"table")},q1=zf("table_header_type"),G1=zf("table_column_resizing"),K1=l=>G1(l)==="preservetable",Gg=l=>G1(l)==="resizetable",av=zf("table_sizing_mode"),Y1=l=>av(l)==="relative",Km=l=>av(l)==="fixed",X1=l=>av(l)==="responsive",$2=zf("table_resize_bars"),cv=zf("table_style_by_css"),Sx=zf("table_merge_content_on_paste"),xx=l=>{const m=l.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:yx(l,p)},Ex=l=>{const m=l.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:Yk(l,p)},Xk=zf("table_use_colgroups"),iv=l=>Ut.fromDom(l.getBody()),lp=l=>m=>So(m,iv(l)),Kg=l=>{_s(l,"data-mce-style");const m=p=>_s(p,"data-mce-style");Ce(Af(l),m),Ce(ub(l),m),Ce(db(l),m)},Yg=l=>Ut.fromDom(l.selection.getStart()),Tx=l=>l.getBoundingClientRect().width,Ax=l=>l.getBoundingClientRect().height,kx=l=>(m,p)=>{const y=m.dom.getStyle(p,l)||m.dom.getAttrib(p,l);return fe.from(y).filter(Ko)},lv=kx("width"),_x=kx("height"),Jk=l=>/^(\d+(\.\d+)?)%$/.test(l),Dx=l=>/^(\d+(\.\d+)?)px$/.test(l),uv=l=>i1(l,Ai("table")).exists(pg),I2=l=>li(l,"table"),dv=(l,m,p)=>{const y=T=>O=>p!==void 0&&p(O)||So(O,T);return So(l,m)?fe.some({boxes:fe.some([l]),start:l,finish:m}):I2(l).bind(T=>I2(m).bind(O=>{if(So(T,O))return fe.some({boxes:co(T,l,m),start:l,finish:m});if(fs(T,O)){const P=Fs(m,"td,th",y(T)),z=P.length>0?P[P.length-1]:m;return fe.some({boxes:D2(T,l,T,m,O),start:l,finish:z})}else if(fs(O,T)){const P=Fs(l,"td,th",y(O)),z=P.length>0?P[P.length-1]:l;return fe.some({boxes:D2(O,l,T,m,O),start:l,finish:z})}else return Uc(l,m).shared.bind(P=>Ur(P,"table",p).bind(z=>{const ee=Fs(m,"td,th",y(z)),he=ee.length>0?ee[ee.length-1]:m,Me=Fs(l,"td,th",y(z)),pt=Me.length>0?Me[Me.length-1]:l;return fe.some({boxes:D2(z,l,T,m,O),start:pt,finish:he})}))}))},L2=(l,m)=>{const p=Eu(l,m);return p.length>0?fe.some(p):fe.none()},Qk=(l,m)=>F(l,p=>Xe(p,m)),H2=(l,m,p)=>rd(l,m).bind(y=>rd(l,p).bind(T=>Ts(I2,[y,T]).map(O=>({first:y,last:T,table:O})))),Ox=(l,m)=>li(l,"table").bind(p=>rd(p,m).bind(y=>dv(y,l).bind(T=>T.boxes.map(O=>({boxes:O,start:T.start,finish:T.finish}))))),Rx=(l,m,p,y,T)=>Qk(l,T).bind(O=>_2(O,m,p).bind(P=>Ox(P,y))),J1=(l,m)=>L2(l,m),e4=(l,m,p)=>H2(l,m,p).bind(y=>{const T=ee=>So(l,ee),O="thead,tfoot,tbody,table",P=li(y.first,O,T),z=li(y.last,O,T);return P.bind(ee=>z.bind(he=>So(ee,he)?qm(y.table,y.first,y.last):fe.none()))}),z2=Jt,V2=l=>{const m=(y,T)=>ic(y,T).exists(O=>parseInt(O,10)>1),p=y=>m(y,"rowspan")||m(y,"colspan");return l.length>0&&yo(l,p)?fe.some(l):fe.none()},t4=(l,m,p)=>m.length<=1?fe.none():e4(l,p.firstSelectedSelector,p.lastSelectedSelector).map(y=>({bounds:y,cells:m})),Xg={create:(l,m)=>({selection:l,kill:m})},Bx=(l,m,p,y)=>{switch(l.tag){case"none":return m();case"single":return y(l.element);case"multiple":return p(l.elements)}},Mx=()=>({tag:"none"}),o4=l=>({tag:"multiple",elements:l}),s4=l=>({tag:"single",element:l}),r4=(l,m,p)=>({get:()=>J1(l(),p).fold(()=>m().fold(Mx,s4),o4)}),Q1={create:(l,m,p,y)=>({start:Zr.on(l,m),finish:Zr.on(p,y)})},U2=(l,m)=>{const p=Nt(l,m);return ad.create(Ut.fromDom(p.startContainer),p.startOffset,Ut.fromDom(p.endContainer),p.endOffset)},e0=Q1.create,Fx=(l,m,p,y,T,O,P)=>So(p,T)&&y===O?fe.none():Ur(p,"td,th",m).bind(z=>Ur(T,"td,th",m).bind(ee=>t0(l,m,z,ee,P))),t0=(l,m,p,y,T)=>So(p,y)?fe.none():dv(p,y,m).bind(O=>{const P=O.boxes.getOr([]);return P.length>1?(T(l,P,O.start,O.finish),fe.some(Xg.create(fe.some(e0(p,0,p,Tu(p))),!0))):fe.none()}),a4=(l,m,p,y,T)=>{const O=P=>(T.clearBeforeUpdate(p),T.selectRange(p,P.boxes,P.start,P.finish),P.boxes);return Rx(y,l,m,T.firstSelectedSelector,T.lastSelectedSelector).map(O)},fv=an.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),c4=(l,m,p)=>{const y=l.getRect(m),T=l.getRect(p);return T.right>y.left&&T.left<y.right},Nx=l=>Ur(l,"tr"),Jg={...fv,verify:(l,m,p,y,T,O,P)=>Ur(y,"td,th",P).bind(z=>Ur(m,"td,th",P).map(ee=>So(z,ee)?So(y,z)&&Tu(z)===T?O(ee):fv.none("in same cell"):Ts(Nx,[z,ee]).fold(()=>c4(l,ee,z)?fv.success():O(ee),he=>O(ee)))).getOr(fv.none("default")),cata:(l,m,p,y,T)=>l.fold(m,p,y,T)},gv=Ai("br"),hv=(l,m,p)=>m(l,p).bind(y=>Om(y)&&xu(y).trim().length===0?hv(y,m,p):fe.some(y)),Px=(l,m,p)=>p.traverse(m).orThunk(()=>hv(m,p.gather,l)).map(p.relative),l4=(l,m)=>ai(l,m).filter(gv).orThunk(()=>ai(l,m-1).filter(gv)),pv=(l,m,p,y)=>l4(m,p).bind(T=>y.traverse(T).fold(()=>hv(T,y.gather,l).map(y.relative),O=>Zd(O).map(P=>Zr.on(P.parent,P.index)))),$x=(l,m,p,y)=>(gv(m)?Px(l,m,y):pv(l,m,p,y)).map(O=>({start:O,finish:O})),Ix=l=>Jg.cata(l,m=>fe.none(),()=>fe.none(),m=>fe.some(Nf(m,0)),m=>fe.some(Nf(m,Tu(m)))),bv=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),am=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),Lx=(l,m,p)=>({left:l.left+m,top:l.top+p,right:l.right+m,bottom:l.bottom+p}),u4=l=>l.top,d4=l=>l.bottom,m4=(l,m,p)=>p>=0&&p<Tu(m)?l.getRangedRect(m,p,m,p+1):p>0?l.getRangedRect(m,p-1,m,p):fe.none(),up=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Hx=(l,m)=>fe.some(l.getRect(m)),W2=(l,m,p)=>Nr(m)?Hx(l,m).map(up):Om(m)?m4(l,m,p).map(up):fe.none(),vv=(l,m)=>Nr(m)?Hx(l,m).map(up):Om(m)?l.getRangedRect(m,0,m,Tu(m)).map(up):fe.none(),Cd=5,n0=100,cm=an.generate([{none:[]},{retry:["caret"]}]),Z2=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,zx=(l,m,p)=>i1(m,Ib).fold(gn,y=>vv(l,y).exists(T=>Z2(p,T))),Vx=(l,m,p,y,T)=>{const O=bv(T,Cd);return Math.abs(p.bottom-y.bottom)<1||p.top>T.bottom?cm.retry(O):p.top===T.bottom?cm.retry(bv(T,1)):zx(l,m,T)?cm.retry(Lx(O,Cd,0)):cm.none()},Ux={point:u4,adjuster:(l,m,p,y,T)=>{const O=am(T,Cd);return Math.abs(p.top-y.top)<1||p.bottom<T.top?cm.retry(O):p.bottom===T.top?cm.retry(am(T,1)):zx(l,m,T)?cm.retry(Lx(O,Cd,0)):cm.none()},move:am,gather:Nb},g4={point:d4,adjuster:Vx,move:bv,gather:Qd},h4=(l,m,p)=>l.elementFromPoint(m,p).filter(y=>Ir(y)==="table").isSome(),p4=(l,m,p,y,T)=>dp(l,m,p,m.move(y,Cd),T),dp=(l,m,p,y,T)=>T===0?fe.some(y):h4(l,y.left,m.point(y))?p4(l,m,p,y,T-1):l.situsFromPoint(y.left,m.point(y)).bind(O=>O.start.fold(fe.none,P=>vv(l,P).bind(z=>m.adjuster(l,P,z,p,y).fold(fe.none,ee=>dp(l,m,p,ee,T-1))).orThunk(()=>fe.some(y)),fe.none)),o0=(l,m,p)=>l.point(m)>p.getInnerHeight()?fe.some(l.point(m)-p.getInnerHeight()):l.point(m)<0?fe.some(-l.point(m)):fe.none(),Wx=(l,m,p)=>{const y=l.move(p,Cd),T=dp(m,l,p,y,n0).getOr(y);return o0(l,T,m).fold(()=>m.situsFromPoint(T.left,l.point(T)),O=>(m.scrollBy(0,O),m.situsFromPoint(T.left,l.point(T)-O)))},im={tryUp:Ze(Wx,Ux),tryDown:Ze(Wx,g4),getJumpSize:ae(Cd)},lm=20,j2=(l,m,p)=>l.getSelection().bind(y=>$x(m,y.finish,y.foffset,p).fold(()=>fe.some(Nf(y.finish,y.foffset)),T=>{const O=l.fromSitus(T),P=Jg.verify(l,y.finish,y.foffset,O.finish,O.foffset,p.failure,m);return Ix(P)})),yv=(l,m,p,y,T,O)=>O===0?fe.none():Vf(l,m,p,y,T).bind(P=>{const z=l.fromSitus(P),ee=Jg.verify(l,p,y,z.finish,z.foffset,T.failure,m);return Jg.cata(ee,()=>fe.none(),()=>fe.some(P),he=>So(p,he)&&y===0?Zx(l,p,y,am,T):yv(l,m,he,0,T,O-1),he=>So(p,he)&&y===Tu(he)?Zx(l,p,y,bv,T):yv(l,m,he,Tu(he),T,O-1))}),Zx=(l,m,p,y,T)=>W2(l,m,p).bind(O=>En(l,T,y(O,im.getJumpSize()))),En=(l,m,p)=>{const y=Pc().browser;return y.isChromium()||y.isSafari()||y.isFirefox()?m.retry(l,p):fe.none()},Vf=(l,m,p,y,T)=>W2(l,p,y).bind(O=>En(l,T,O)),mp=(l,m,p)=>j2(l,m,p).bind(y=>yv(l,m,y.element,y.offset,p,lm).map(l.fromSitus)),q2=(l,m)=>ab(l,p=>oe(p).exists(y=>So(y,m))),Cv=(l,m,p,y,T)=>Ur(y,"td,th",m).bind(O=>Ur(O,"table",m).bind(P=>q2(T,P)?mp(l,m,p).bind(z=>Ur(z.finish,"td,th",m).map(ee=>({start:O,finish:ee,range:z}))):fe.none())),Ym=(l,m,p,y,T,O)=>O(y,m).orThunk(()=>Cv(l,m,p,y,T).map(P=>{const z=P.range;return Xg.create(fe.some(e0(z.start,z.soffset,z.finish,z.foffset)),!0)})),fp=(l,m)=>Ur(l,"tr",m).bind(p=>Ur(p,"table",m).bind(y=>{const T=Eu(y,"tr");return So(p,T[0])?vi(y,O=>Wr(O).isSome(),m).map(O=>{const P=Tu(O);return Xg.create(fe.some(e0(O,P,O,P)),!0)}):fe.none()})),s0=(l,m)=>Ur(l,"tr",m).bind(p=>Ur(p,"table",m).bind(y=>{const T=Eu(y,"tr");return So(p,T[T.length-1])?el(y,O=>xf(O).isSome(),m).map(O=>Xg.create(fe.some(e0(O,0,O,0)),!0)):fe.none()})),Uf=(l,m,p,y,T,O,P)=>Cv(l,p,y,T,O).bind(z=>t0(m,p,z.start,z.finish,P)),gp=(l,m)=>Ur(l,"td,th",m),G2=l=>ri(l).exists(pg),wd=(l,m,p,y)=>{const T=yr(),O=T.clear,P=Me=>{T.on(pt=>{y.clearBeforeUpdate(m),gp(Me.target,p).each(Vt=>{dv(pt,Vt,p).each(Ot=>{const An=Ot.boxes.getOr([]);if(An.length===1){const Qe=An[0],bt=bg(Qe)==="false",Vn=no(Sf(Me.target),Qe,So);bt&&Vn&&y.selectRange(m,An,Qe,Qe)}else An.length>1&&(y.selectRange(m,An,Ot.start,Ot.finish),l.selectContents(Vt))})})})};return{clearstate:O,mousedown:Me=>{y.clear(m),gp(Me.target,p).filter(G2).each(T.set)},mouseover:Me=>{P(Me)},mouseup:Me=>{P(Me),O()}}},K2={traverse:pf,gather:Qd,relative:Zr.before,retry:im.tryDown,failure:Jg.failedDown},wv={traverse:Xp,gather:Nb,relative:Zr.before,retry:im.tryUp,failure:Jg.failedUp},Sd=l=>m=>m===l,um=Sd(38),Wf=Sd(40),Qg=l=>l>=37&&l<=40,dm={isBackward:Sd(37),isForward:Sd(39)},Y2={isBackward:Sd(39),isForward:Sd(37)},r0=l=>({elementFromPoint:(bt,Vn)=>Ut.fromPoint(Ut.fromDom(l.document),bt,Vn),getRect:bt=>bt.dom.getBoundingClientRect(),getRangedRect:(bt,Vn,bo,on)=>{const Ns=A.exact(bt,Vn,bo,on);return Tf(l,Ns)},getSelection:()=>Bm(l).map(bt=>U2(l,bt)),fromSitus:bt=>{const Vn=A.relative(bt.start,bt.finish);return U2(l,Vn)},situsFromPoint:(bt,Vn)=>Ih(l,bt,Vn).map(bo=>Q1.create(bo.start,bo.soffset,bo.finish,bo.foffset)),clearSelection:()=>{Lh(l)},collapseSelection:(bt=!1)=>{Bm(l).each(Vn=>Vn.fold(bo=>bo.collapse(bt),(bo,on)=>{const Ns=bt?bo:on;id(l,Ns,Ns)},(bo,on,Ns,Ps)=>{const xo=bt?bo:Ns,ca=bt?on:Ps;cd(l,xo,ca,xo,ca)}))},setSelection:bt=>{cd(l,bt.start,bt.soffset,bt.finish,bt.foffset)},setRelativeSelection:(bt,Vn)=>{id(l,bt,Vn)},selectNode:bt=>{Ef(l,bt,!1)},selectContents:bt=>{Ef(l,bt)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>Ws(Ut.fromDom(l.document)).top,scrollBy:(bt,Vn)=>{ii(bt,Vn,Ut.fromDom(l.document))}}),xd=(l,m)=>({rows:l,cols:m}),Ed=(l,m,p,y)=>{const T=r0(l),O=wd(T,m,p,y);return{clearstate:O.clearstate,mousedown:O.mousedown,mouseover:O.mouseover,mouseup:O.mouseup}},jx=l=>i1(l,Q0).exists(pg),X2=(l,m)=>jx(l)||jx(m),J2=(l,m,p,y)=>{const T=r0(l),O=()=>(y.clear(m),fe.none());return{keydown:(ee,he,Me,pt,Vt,Ot)=>{const An=ee.raw,Qe=An.which,bt=An.shiftKey===!0;return L2(m,y.selectedSelector).fold(()=>(Qg(Qe)&&!bt&&y.clearBeforeUpdate(m),Qg(Qe)&&bt&&!X2(he,pt)?fe.none:Wf(Qe)&&bt?Ze(Uf,T,m,p,K2,pt,he,y.selectRange):um(Qe)&&bt?Ze(Uf,T,m,p,wv,pt,he,y.selectRange):Wf(Qe)?Ze(Ym,T,p,K2,pt,he,s0):um(Qe)?Ze(Ym,T,p,wv,pt,he,fp):fe.none),bo=>{const on=Ns=>()=>ie(Ns,xo=>a4(xo.rows,xo.cols,m,bo,y)).fold(()=>H2(m,y.firstSelectedSelector,y.lastSelectedSelector).map(xo=>{const ca=Wf(Qe)||Ot.isForward(Qe)?Zr.after:Zr.before;return T.setRelativeSelection(Zr.on(xo.first,0),ca(xo.table)),y.clear(m),Xg.create(fe.none(),!0)}),xo=>fe.some(Xg.create(fe.none(),!0)));return Qg(Qe)&&bt&&!X2(he,pt)?fe.none:Wf(Qe)&&bt?on([xd(1,0)]):um(Qe)&&bt?on([xd(-1,0)]):Ot.isBackward(Qe)&&bt?on([xd(0,-1),xd(-1,0)]):Ot.isForward(Qe)&&bt?on([xd(0,1),xd(1,0)]):Qg(Qe)&&!bt?O:fe.none})()},keyup:(ee,he,Me,pt,Vt)=>L2(m,y.selectedSelector).fold(()=>{const Ot=ee.raw,An=Ot.which;return Ot.shiftKey===!0&&Qg(An)&&X2(he,pt)?Fx(m,p,he,Me,pt,Vt,y.selectRange):fe.none()},fe.none)}},Q2=(l,m,p,y)=>{const T=r0(l);return(O,P)=>{y.clearBeforeUpdate(m),dv(O,P,p).each(z=>{const ee=z.boxes.getOr([]);y.selectRange(m,ee,z.start,z.finish),T.selectContents(P),T.collapseSelection()})}},b4={byClass:l=>{const m=d1(l.selected),p=rb([l.selected,l.lastSelected,l.firstSelected]),y=O=>{const P=Eu(O,l.selectedSelector);Ce(P,p)};return{clearBeforeUpdate:y,clear:y,selectRange:(O,P,z,ee)=>{y(O),Ce(P,m),Hl(z,l.firstSelected),Hl(ee,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,p)=>{const y=ee=>{_s(ee,l.selected),_s(ee,l.firstSelected),_s(ee,l.lastSelected)},T=ee=>{oa(ee,l.selected,"1")},O=ee=>{P(ee),p()},P=ee=>{const he=Eu(ee,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Ce(he,y)};return{clearBeforeUpdate:P,clear:O,selectRange:(ee,he,Me,pt)=>{O(ee),Ce(he,T),oa(Me,l.firstSelected,"1"),oa(pt,l.lastSelected,"1"),m(he,Me,pt)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},qc="data-mce-selected",eh="td["+qc+"],th["+qc+"]",eC="["+qc+"]",Zf="data-mce-first-selected",Gc="td["+Zf+"],th["+Zf+"]",yi="data-mce-last-selected",Kc="td["+yi+"],th["+yi+"]",Hu=eC,Xm={selected:qc,selectedSelector:eh,firstSelected:Zf,firstSelectedSelector:Gc,lastSelected:yi,lastSelectedSelector:Kc},Ni=(l,m,p)=>({element:p,mergable:t4(m,l,Xm),unmergable:V2(l),selection:z2(l)}),mm=(l,m,p)=>({element:l,clipboard:m,generators:p}),Gx=(l,m,p,y)=>({selection:z2(l),clipboard:p,generators:y}),F5=l=>Yi(l).bind(m=>J1(m,Xm.firstSelectedSelector)).fold(ae(l),m=>m[0]),Kx=l=>(m,p)=>{const y=Ir(m),T=y==="col"||y==="colgroup"?F5(m):m;return Ur(T,l,p)},io=Kx("th,td,caption"),Sv=Kx("th,td"),Kl=l=>ka(l.model.table.getSelectedCells()),Yx=l=>Ve(Kl(l),m=>Xe(m,Xm.selectedSelector)),v4=l=>Yi(l[0]).map(m=>{const p=Tb(m,Hu);return Kg(p),[p]}),y4=(l,m)=>ln(m,p=>l.selection.serializer.serialize(p.dom,{})).join(""),C4=(l,m)=>{const p=l.getDoc(),y=e1(Ut.fromDom(l.getBody())),T=Ut.fromTag("div",p);oa(T,"data-mce-bogus","all"),tr(T,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const O=Cu(y);ml(T,m),Es(O,T);const P=T.dom.innerText;return Pa(T),P},Xx=(l,m)=>{l.on("BeforeGetContent",p=>{const y=T=>{p.preventDefault(),v4(T).each(O=>{const P=p.format==="text"?C4(l,O):y4(l,O);p.content=P})};if(p.selection===!0){const T=Yx(l);T.length>=1&&y(T)}}),l.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const y=Kl(l);ne(y).each(T=>{Yi(T).each(O=>{const P=Ve(Rh(p.content),ee=>Ir(ee)!=="meta"),z=Ai("table");if(Sx(l)&&P.length===1&&z(P[0])){p.preventDefault();const ee=Ut.fromDom(l.getDoc()),he=m2(ee),Me=mm(T,P[0],he);m.pasteCells(O,Me).each(()=>{l.focus()})}})})}})},tC=(l,m)=>l.dispatch("NewRow",{node:m}),a0=(l,m)=>l.dispatch("NewCell",{node:m}),Yl=(l,m,p)=>{l.dispatch("TableModified",{...p,table:m})},th=(l,m,p,y,T)=>{l.dispatch("TableSelectionChange",{cells:m,start:p,finish:y,otherCells:T})},w4=l=>{l.dispatch("TableSelectionClear")},xv=(l,m,p,y,T)=>{l.dispatch("ObjectResizeStart",{target:m,width:p,height:y,origin:T})},S4=(l,m,p,y,T)=>{l.dispatch("ObjectResized",{target:m,width:p,height:y,origin:T})},Ev={structure:!1,style:!0},tc={structure:!0,style:!1},x4={structure:!0,style:!0},ol=(l,m)=>Y1(l)?Rf.percentageSize(m):Km(l)?Rf.pixelSize(m):Rf.getTableSize(m),N5=(l,m,p)=>{const y=wa=>Ir(iv(wa))==="table",T=wa=>!y(l)||Lf(wa).rows>1,O=wa=>!y(l)||Lf(wa).columns>1,P=Cx(l),z=Gg(l)?nt:Eb,ee=wa=>{switch(q1(l)){case"section":return Gd.section();case"sectionCells":return Gd.sectionCells();case"cells":return Gd.cells();default:return Gd.getTableSectionType(wa,"section")}},he=(wa,bp)=>bp.cursor.fold(()=>{const u0=Af(wa);return ne(u0).filter(zn).map(ef=>{p.clearSelectedCells(wa.dom);const Qc=l.dom.createRng();return Qc.selectNode(ef.dom),l.selection.setRng(Qc),oa(ef,"data-mce-selected","1"),Qc})},u0=>{const ef=Fb(u0),Qc=l.dom.createRng();return Qc.setStart(ef.element.dom,ef.offset),Qc.setEnd(ef.element.dom,ef.offset),l.selection.setRng(Qc),p.clearSelectedCells(wa.dom),fe.some(Qc)}),Me=(wa,bp,u0,ef)=>(Qc,_4,sE=!1)=>{Kg(Qc);const yn=Ut.fromDom(l.getDoc()),Jl=O1(u0,yn,P),D4={sizing:ol(l,Qc),resize:Gg(l)?Vh():aS(),section:ee(Qc)};return bp(Qc)?wa(Qc,_4,Jl,D4).bind(Rv=>{m.refresh(Qc.dom),Ce(Rv.newRows,gm=>{tC(l,gm.dom)}),Ce(Rv.newCells,gm=>{a0(l,gm.dom)});const rE=he(Qc,Rv);return zn(Qc)&&(Kg(Qc),sE||Yl(l,Qc.dom,ef)),rE.map(gm=>({rng:gm,effect:ef}))}):fe.none()},pt=Me(ox,T,nt,tc),Vt=Me(vd,O,nt,tc),Ot=Me(Wg,_e,nt,tc),An=Me(E2,_e,nt,tc),Qe=Me(Zg,_e,z,tc),bt=Me(or,_e,z,tc),Vn=Me(Ik,_e,nt,tc),bo=Me(Lk,_e,nt,tc),on=Me(Dt,_e,nt,tc),Ns=Me(sx,_e,nt,tc),Ps=Me(ec,_e,nt,tc),xo=Me(rx,_e,nt,tc),ca=Me(A2,_e,nt,x4),Al=Me(Pk,_e,nt,tc),fm=Me($k,_e,nt,tc),qf=Me(jm,_e,nt,tc),oh=Me(Lu,_e,nt,tc),Vs=Me(Fk,_e,nt,tc),Yc=Me(Nk,_e,nt,tc),Xc=Me(T2,_e,nt,tc);return{deleteRow:pt,deleteColumn:Vt,insertRowsBefore:Ot,insertRowsAfter:An,insertColumnsBefore:Qe,insertColumnsAfter:bt,mergeCells:Vn,unmergeCells:bo,pasteColsBefore:on,pasteColsAfter:Ns,pasteRowsBefore:Ps,pasteRowsAfter:xo,pasteCells:ca,makeCellsHeader:Al,unmakeCellsHeader:fm,makeColumnsHeader:qf,unmakeColumnsHeader:oh,makeRowsHeader:Vs,makeRowsBody:Yc,makeRowsFooter:Xc,getTableRowType:Hk,getTableCellType:cx,getTableColType:ax}},Tv=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},nh=(l,m)=>{rd(m,"td,th").each(Ze(Tv,l))},nC=(l,m)=>{Ce(Eu(m,"tr"),p=>{tC(l,p.dom),Ce(Eu(p,"th,td"),y=>{a0(l,y.dom)})})},oC=l=>so(l)&&l.indexOf("%")!==-1,sC=(l,m,p,y,T)=>{const O=Ex(l),P={styles:O,attributes:xx(l),colGroups:Xk(l)};return l.undoManager.ignore(()=>{const z=Gm(p,m,T,y,q1(l),P);oa(z,"data-mce-id","__mce");const ee=nb(z);l.insertContent(ee),l.addVisual()}),rd(iv(l),'table[data-mce-id="__mce"]').map(z=>(Km(l)?i2(z):X1(l)?np(z):(Y1(l)||oC(O.width))&&$f(z),Kg(z),_s(z,"data-mce-id"),nC(l,z),nh(l,z),z.dom)).getOrNull()},E4=(l,m,p,y={})=>{const T=O=>In(O)&&O>0;if(T(m)&&T(p)){const O=y.headerRows||0,P=y.headerColumns||0;return sC(l,p,m,P,O)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Av=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Jx="x-tinymce/dom-table-",kv=Jx+"rows",jf=Jx+"columns",hp=l=>{const m=Av.FakeClipboardItem(l);Av.write([m])},rC=l=>{var m;const p=(m=Av.read())!==null&&m!==void 0?m:[];return ie(p,y=>fe.from(y.getType(l)))},Qx=l=>{rC(l).isSome()&&Av.clear()},Jm=l=>{l.fold(aC,m=>hp({[kv]:m}))},_v=()=>rC(kv),aC=()=>Qx(kv),Dv=l=>{l.fold(cC,m=>hp({[jf]:m}))},c0=()=>rC(jf),cC=()=>Qx(jf),i0=l=>io(Yg(l),lp(l)).filter(uv),iC=l=>Sv(Yg(l),lp(l)).filter(uv),T4=(l,m)=>{const p=lp(l),y=()=>i0(l).each(bt=>{Yi(bt,p).filter(q(p)).each(Vn=>{const bo=Ut.fromText("");if($l(Vn,bo),Pa(Vn),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const on=l.dom.createRng();on.setStart(bo.dom,0),on.setEnd(bo.dom,0),l.selection.setRng(on),l.nodeChanged()}})}),T=bt=>i0(l).each(Vn=>{X1(l)||Km(l)||Y1(l)||Yi(Vn,p).each(on=>{bt==="relative"&&!NS(on)?$f(on):bt==="fixed"&&!Pu(on)?i2(on):bt==="responsive"&&!kc(on)&&np(on),Kg(on),Yl(l,on.dom,tc)})}),O=bt=>Yi(bt,p),P=bt=>iC(l).bind(Vn=>O(Vn).map(bo=>bt(bo,Vn))),z=(bt,Vn)=>{P(bo=>{l.formatter.toggle("tableclass",{value:Vn},bo.dom),Yl(l,bo.dom,Ev)})},ee=(bt,Vn)=>{P(bo=>{const on=Kl(l),Ps=yo(on,xo=>l.formatter.match("tablecellclass",{value:Vn},xo.dom))?l.formatter.remove:l.formatter.apply;Ce(on,xo=>Ps("tablecellclass",{value:Vn},xo.dom)),Yl(l,bo.dom,Ev)})},he=()=>{i0(l).each(bt=>{Yi(bt,p).each(Vn=>{Pr(Vn,"caption").fold(()=>{const bo=Ut.fromTag("caption");Es(bo,Ut.fromText("Caption")),Dy(Vn,bo,0),l.selection.setCursorLocation(bo.dom,0)},bo=>{Ai("caption")(bt)&&Po("td",Vn).each(on=>l.selection.setCursorLocation(on.dom,0)),Pa(bo)}),Yl(l,Vn.dom,tc)})})},Me=bt=>{l.focus()},pt=(bt,Vn=!1)=>P((bo,on)=>{const Ns=Ni(Kl(l),bo,on);bt(bo,Ns,Vn).each(Me)}),Vt=()=>P((bt,Vn)=>{const bo=Ni(Kl(l),bt,Vn),on=O1(nt,Ut.fromDom(l.getDoc()),fe.none());return zm(bt,bo,on)}),Ot=()=>P((bt,Vn)=>{const bo=Ni(Kl(l),bt,Vn);return dd(bt,bo)}),An=(bt,Vn)=>Vn().each(bo=>{const on=ln(bo,Ns=>Aa(Ns));P((Ns,Ps)=>{const xo=m2(Ut.fromDom(l.getDoc())),ca=Gx(Kl(l),Ps,on,xo);bt(Ns,ca).each(Me)})}),Qe=bt=>(Vn,bo)=>ns(bo,"type").each(on=>{pt(bt(on),bo.no_events)});Ae({mceTableSplitCells:()=>pt(m.unmergeCells),mceTableMergeCells:()=>pt(m.mergeCells),mceTableInsertRowBefore:()=>pt(m.insertRowsBefore),mceTableInsertRowAfter:()=>pt(m.insertRowsAfter),mceTableInsertColBefore:()=>pt(m.insertColumnsBefore),mceTableInsertColAfter:()=>pt(m.insertColumnsAfter),mceTableDeleteCol:()=>pt(m.deleteColumn),mceTableDeleteRow:()=>pt(m.deleteRow),mceTableCutCol:()=>Ot().each(bt=>{Dv(bt),pt(m.deleteColumn)}),mceTableCutRow:()=>Vt().each(bt=>{Jm(bt),pt(m.deleteRow)}),mceTableCopyCol:()=>Ot().each(bt=>Dv(bt)),mceTableCopyRow:()=>Vt().each(bt=>Jm(bt)),mceTablePasteColBefore:()=>An(m.pasteColsBefore,c0),mceTablePasteColAfter:()=>An(m.pasteColsAfter,c0),mceTablePasteRowBefore:()=>An(m.pasteRowsBefore,_v),mceTablePasteRowAfter:()=>An(m.pasteRowsAfter,_v),mceTableDelete:y,mceTableCellToggleClass:ee,mceTableToggleClass:z,mceTableToggleCaption:he,mceTableSizingMode:(bt,Vn)=>T(Vn),mceTableCellType:Qe(bt=>bt==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:Qe(bt=>bt==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:Qe(bt=>{switch(bt){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(bt,Vn)=>l.addCommand(Vn,bt)),l.addCommand("mceInsertTable",(bt,Vn)=>{E4(l,Vn.rows,Vn.columns,Vn.options)}),l.addCommand("mceTableApplyCellStyle",(bt,Vn)=>{const bo=Ps=>"tablecell"+Ps.toLowerCase().replace("-","");if(!ct(Vn))return;const on=Ve(Kl(l),uv);if(on.length===0)return;const Ns=ko(Vn,(Ps,xo)=>l.formatter.has(bo(xo))&&so(Ps));At(Ns)||(Ae(Ns,(Ps,xo)=>{const ca=bo(xo);Ce(on,Al=>{Ps===""?l.formatter.remove(ca,{value:null},Al.dom,!0):l.formatter.apply(ca,{value:Ps},Al.dom)})}),O(on[0]).each(Ps=>Yl(l,Ps.dom,Ev)))})},A4=(l,m)=>{const p=lp(l),y=T=>Sv(Yg(l)).bind(O=>Yi(O,p).map(P=>{const z=Ni(Kl(l),P,O);return T(P,z)})).getOr("");Ae({mceTableRowType:()=>y(m.getTableRowType),mceTableCellType:()=>y(m.getTableCellType),mceTableColType:()=>y(m.getTableColType)},(T,O)=>l.addQueryValueHandler(O,T))},lC=l=>!zl(Ut.fromDom(l.target),"ephox-snooker-resizer-bar"),l0=(l,m)=>{const p=r4(()=>Ut.fromDom(l.getBody()),()=>Sv(Yg(l),lp(l)),Xm.selectedSelector),y=(ee,he,Me)=>{Yi(he).each(Vt=>{const Ot=ln(ee,bo=>bo.dom),An=Cx(l),Qe=O1(nt,Ut.fromDom(l.getDoc()),An),bt=Kl(l),Vn=Mf(Vt,{selection:bt},Qe).map(bo=>Ne(bo,on=>ln(on,Ns=>Ns.dom))).getOrUndefined();th(l,Ot,he.dom,Me.dom,Vn)})},T=()=>w4(l),O=b4.byAttr(Xm,y,T);return l.on("init",ee=>{const he=l.getWin(),Me=iv(l),pt=lp(l),Vt=()=>{const Vs=l.selection,Yc=Ut.fromDom(Vs.getStart()),Xc=Ut.fromDom(Vs.getEnd());Ts(Yi,[Yc,Xc]).fold(()=>O.clear(Me),nt)},Ot=Ed(he,Me,pt,O),An=J2(he,Me,pt,O),Qe=Q2(he,Me,pt,O),bt=Vs=>Vs.raw.shiftKey===!0;l.on("TableSelectorChange",Vs=>Qe(Vs.start,Vs.finish));const Vn=(Vs,Yc)=>{bt(Vs)&&(Yc.kill&&Vs.kill(),Yc.selection.each(Xc=>{const Xl=A.relative(Xc.start,Xc.finish),Jc=Nt(he,Xl);l.selection.setRng(Jc)}))},bo=Vs=>{const Yc=Xr(Vs);if(Yc.raw.shiftKey&&Qg(Yc.raw.which)){const Xc=l.selection.getRng(),Xl=Ut.fromDom(Xc.startContainer),Jc=Ut.fromDom(Xc.endContainer);An.keyup(Yc,Xl,Xc.startOffset,Jc,Xc.endOffset).each(Qm=>{Vn(Yc,Qm)})}},on=Vs=>{const Yc=Xr(Vs);m.hide();const Xc=l.selection.getRng(),Xl=Ut.fromDom(Xc.startContainer),Jc=Ut.fromDom(Xc.endContainer),Qm=zd(dm,Y2)(Ut.fromDom(l.selection.getStart()));An.keydown(Yc,Xl,Xc.startOffset,Jc,Xc.endOffset,Qm).each(wa=>{Vn(Yc,wa)}),m.show()},Ns=Vs=>Vs.button===0,Ps=Vs=>Vs.buttons===void 0?!0:(Vs.buttons&1)!==0,xo=Vs=>{Ot.clearstate()},ca=Vs=>{Ns(Vs)&&lC(Vs)&&Ot.mousedown(Xr(Vs))},Al=Vs=>{Ps(Vs)&&lC(Vs)&&Ot.mouseover(Xr(Vs))},fm=Vs=>{Ns(Vs)&&lC(Vs)&&Ot.mouseup(Xr(Vs))},oh=(()=>{const Vs=to(Ut.fromDom(Me)),Yc=to(0);return{touchEnd:Xl=>{const Jc=Ut.fromDom(Xl.target);if(Ai("td")(Jc)||Ai("th")(Jc)){const Qm=Vs.get(),wa=Yc.get();So(Qm,Jc)&&Xl.timeStamp-wa<300&&(Xl.preventDefault(),Qe(Jc,Jc))}Vs.set(Jc),Yc.set(Xl.timeStamp)}}})();l.on("dragstart",xo),l.on("mousedown",ca),l.on("mouseover",Al),l.on("mouseup",fm),l.on("touchend",oh.touchEnd),l.on("keyup",bo),l.on("keydown",on),l.on("NodeChange",Vt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Xm.firstSelected),l.serializer.addTempAttr(Xm.lastSelected)}),{getSelectedCells:()=>Bx(p.get(),ae([]),ee=>ln(ee,he=>he.dom),ee=>[ee.dom]),clearSelectedCells:ee=>O.clear(Ut.fromDom(ee))}},uC=(l,m)=>{const p=Ut.fromDom(l.getBody());return Tk.body(p,m)},eE=l=>mn(l)&&l.nodeName==="TABLE",Ov="bar-",k4=l=>_i(l,"data-mce-resize")!=="false",tE=l=>{const m=Vo.fromTable(l);Vo.hasColumns(m)||Ce(Af(l),p=>{const y=Hd(p,"width");Ia(p,"width",y),_s(p,"width")})},dC=l=>tt(l,"corner-"),pp=l=>be(l,"corner-"),mC=l=>{const m=yr(),p=yr(),y=yr();let T,O,P,z;const ee=on=>ol(l,on),he=()=>K1(l)?aS():Vh(),Me=on=>Lf(on).columns,pt=on=>Lf(on).rows,Vt=(on,Ns,Ps,xo)=>{const ca=pp(Ns),Al=Dn(ca,"e"),fm=tt(ca,"n");if(O===""&&$f(on),z===""&&El(on),Ps!==T&&O!==""){Ia(on,"width",O);const qf=he(),oh=ee(on),Vs=K1(l)||Al?Me(on)-1:0;Bg(on,Ps-T,Vs,qf,oh)}else if(Jk(O)){const qf=parseFloat(O.replace("%","")),oh=Ps*qf/T;Ia(on,"width",oh+"%")}if(Dx(O)&&tE(on),xo!==P&&z!==""){Ia(on,"height",z);const qf=fm?0:pt(on)-1;n2(on,xo-P,qf)}},Ot=()=>{p.on(on=>{on.destroy()})};l.on("init",()=>{const on=uC(l,k4);if(y.set(on),wx(l)&&$2(l)){const Ns=he(),Ps=Kk.create(on,Ns,ee);l.mode.isReadOnly()||Ps.on(),Ps.events.startDrag.bind(xo=>{m.set(l.selection.getRng())}),Ps.events.beforeResize.bind(xo=>{const ca=xo.table.dom;xv(l,ca,Tx(ca),Ax(ca),Ov+xo.type)}),Ps.events.afterResize.bind(xo=>{const ca=xo.table,Al=ca.dom;Kg(ca),m.on(fm=>{l.selection.setRng(fm),l.focus()}),S4(l,Al,Tx(Al),Ax(Al),Ov+xo.type),l.undoManager.add()}),p.set(Ps)}}),l.on("ObjectResizeStart",on=>{const Ns=on.target;if(eE(Ns)&&!l.mode.isReadOnly()){const Ps=Ut.fromDom(Ns);Ce(l.dom.select(".mce-clonedresizable"),xo=>{l.dom.addClass(xo,"mce-"+G1(l)+"-columns")}),!Pu(Ps)&&Km(l)?i2(Ps):!NS(Ps)&&Y1(l)&&$f(Ps),kc(Ps)&&tt(on.origin,Ov)&&$f(Ps),T=on.width,O=X1(l)?"":lv(l,Ns).getOr(""),P=on.height,z=_x(l,Ns).getOr("")}}),l.on("ObjectResized",on=>{const Ns=on.target;if(eE(Ns)){const Ps=Ut.fromDom(Ns),xo=on.origin;dC(xo)&&Vt(Ps,xo,on.width,on.height),Kg(Ps),Yl(l,Ps.dom,Ev)}});const An=()=>{p.on(on=>{on.on(),on.showBars()})},Qe=()=>{p.on(on=>{on.off(),on.hideBars()})};return l.on("DisabledStateChange",on=>{on.state?Qe():An()}),l.on("SwitchMode",()=>{l.mode.isReadOnly()?Qe():An()}),l.on("dragstart dragend",on=>{on.type==="dragstart"?Qe():An()}),l.on("remove",()=>{Ot()}),{refresh:on=>{p.on(Ns=>Ns.refreshBars(Ut.fromDom(on)))},hide:()=>{p.on(on=>on.hideBars())},show:()=>{p.on(on=>on.showBars())}}},pr=l=>{R5(l);const m=mC(l),p=l0(l,m),y=N5(l,m,p);return T4(l,y),A4(l,y),Xx(l,y),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},nE=l=>({table:pr(l)});var oE=()=>{qt.add("dom",nE)};oE()})()),vX}var CX;function kQ(){return CX||(CX=1,AQ()),bX}kQ();var wX={},SX={},xX;function _Q(){return xX||(xX=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mn=(Ce,dt,wn)=>{const Ve=dt==="UL"?"InsertUnorderedList":"InsertOrderedList";Ce.execCommand(Ve,!1,wn===!1?null:{"list-style-type":wn})},Fn=Ce=>{Ce.addCommand("ApplyUnorderedListStyle",(dt,wn)=>{Mn(Ce,"UL",wn["list-style-type"])}),Ce.addCommand("ApplyOrderedListStyle",(dt,wn)=>{Mn(Ce,"OL",wn["list-style-type"])})},Xn=Ce=>dt=>dt.options.get(Ce),$n=Ce=>{const dt=Ce.options.register;dt("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),dt("advlist_bullet_styles",{processor:"string[]",default:"default,disc,circle,square".split(",")})},Pn=Xn("advlist_number_styles"),so=Xn("advlist_bullet_styles"),ct=Ce=>Ce==null,Lt=Ce=>!ct(Ce);class st{constructor(dt,wn){this.tag=dt,this.value=wn}static some(dt){return new st(!0,dt)}static none(){return st.singletonNone}fold(dt,wn){return this.tag?wn(this.value):dt()}isSome(){return this.tag}isNone(){return!this.tag}map(dt){return this.tag?st.some(dt(this.value)):st.none()}bind(dt){return this.tag?dt(this.value):st.none()}exists(dt){return this.tag&&dt(this.value)}forall(dt){return!this.tag||dt(this.value)}filter(dt){return!this.tag||dt(this.value)?this:st.none()}getOr(dt){return this.tag?this.value:dt}or(dt){return this.tag?this:dt}getOrThunk(dt){return this.tag?this.value:dt()}orThunk(dt){return this.tag?this:dt()}getOrDie(dt){if(this.tag)return this.value;throw new Error(dt??"Called getOrDie on None")}static from(dt){return Lt(dt)?st.some(dt):st.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(dt){this.tag&&dt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}st.singletonNone=new st(!1);const qo=Array.prototype.indexOf,rn=(Ce,dt)=>qo.call(Ce,dt),Tt=(Ce,dt)=>rn(Ce,dt)>-1,mn=(Ce,dt,wn)=>{for(let Ve=0,Ht=Ce.length;Ve<Ht;Ve++){const Oe=Ce[Ve];if(dt(Oe,Ve))return st.some(Oe);if(wn(Oe,Ve))break}return st.none()},fo=Object.keys,In=(Ce,dt)=>{const wn=fo(Ce);for(let Ve=0,Ht=wn.length;Ve<Ht;Ve++){const Oe=wn[Ve],ot=Ce[Oe];dt(ot,Oe)}},nt=(Ce,dt)=>Oo(Ce,(wn,Ve)=>({k:Ve,v:dt(wn,Ve)})),Oo=(Ce,dt)=>{const wn={};return In(Ce,(Ve,Ht)=>{const Oe=dt(Ve,Ht);wn[Oe.k]=Oe.v}),wn};var _t=tinymce.util.Tools.resolve("tinymce.util.Tools");const ae=Ce=>/\btox\-/.test(Ce.className),Jt=(Ce,dt)=>Ce.dom.isChildOf(dt,Ce.getBody()),Lo=Ce=>dt=>Lt(dt)&&Ce.test(dt.nodeName),Ze=Lo(/^(OL|UL|DL)$/),q=Lo(/^(TH|TD)$/),Rt=(Ce,dt,wn)=>mn(dt,Ve=>Ze(Ve)&&!ae(Ve),q).exists(Ve=>Ve.nodeName===wn&&Jt(Ce,Ve)),Zn=Ce=>{const dt=Ce.dom.getParent(Ce.selection.getNode(),"ol,ul"),wn=Ce.dom.getStyle(dt,"listStyleType");return st.from(wn)},gn=(Ce,dt)=>dt!==null&&!Ce.dom.isEditable(dt),_e=(Ce,dt)=>{const wn=Ce.dom.getParent(dt,"ol,ul,dl");return gn(Ce,wn)||!Ce.selection.isEditable()},fe=(Ce,dt)=>{const wn=Ce.selection.getNode();return dt({parents:Ce.dom.getParents(wn),element:wn}),Ce.on("NodeChange",dt),()=>Ce.off("NodeChange",dt)},cs=Ce=>Ce.replace(/\-/g," ").replace(/\b\w/g,dt=>dt.toUpperCase()),Je=Ce=>ct(Ce)||Ce==="default"?"":Ce,rt=(Ce,dt)=>wn=>{const Ve=(Oe,ot)=>{const F=Oe.selection.getStart(!0);wn.setActive(Rt(Oe,ot,dt)),wn.setEnabled(!_e(Oe,F))};return fe(Ce,Oe=>Ve(Ce,Oe.parents))},k=(Ce,dt,wn,Ve,Ht,Oe)=>{const ot={"lower-latin":"lower-alpha","upper-latin":"upper-alpha","lower-alpha":"lower-latin","upper-alpha":"upper-latin"},F=nt(ot,No=>Tt(Oe,No));Ce.ui.registry.addSplitButton(dt,{tooltip:wn,chevronTooltip:`${wn} menu`,icon:Ht==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:Ht==="OL"?3:4,fetch:No=>{const jn=_t.map(Oe,qn=>{const yo=Ht==="OL"?"num":"bull",ht=qn==="decimal"?"default":qn,j=Je(qn),ce=cs(qn);return{type:"choiceitem",value:j,icon:"list-"+yo+"-"+ht,text:ce}});No(jn)},onAction:()=>Ce.execCommand(Ve),onItemAction:(No,jn)=>{Mn(Ce,Ht,jn)},select:No=>Zn(Ce).exists(qn=>No===qn||ot[qn]===No&&!F[No]),onSetup:rt(Ce,Ht)})},mo=(Ce,dt,wn,Ve,Ht,Oe)=>{Ce.ui.registry.addToggleButton(dt,{active:!1,tooltip:wn,icon:Ht==="OL"?"ordered-list":"unordered-list",onSetup:rt(Ce,Ht),onAction:()=>Ce.queryCommandState(Ve)||Oe===""?Ce.execCommand(Ve):Mn(Ce,Ht,Oe)})},it=(Ce,dt,wn,Ve,Ht,Oe)=>{Oe.length>1?k(Ce,dt,wn,Ve,Ht,Oe):mo(Ce,dt,wn,Ve,Ht,Je(Oe[0]))},Mo=Ce=>{it(Ce,"numlist","Numbered list","InsertOrderedList","OL",Pn(Ce)),it(Ce,"bullist","Bullet list","InsertUnorderedList","UL",so(Ce))};var ln=()=>{qt.add("advlist",Ce=>{Ce.hasPlugin("lists")?($n(Ce),Mo(Ce),Fn(Ce)):console.error("Please use the Lists plugin together with the List Styles plugin.")})};ln()})()),SX}var EX;function DQ(){return EX||(EX=1,_Q()),wX}DQ();var TX={},AX={},kX;function OQ(){return kX||(kX=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mn=(Ve,Ht,Oe)=>{var ot;return Oe(Ve,Ht.prototype)?!0:((ot=Ve.constructor)===null||ot===void 0?void 0:ot.name)===Ht.name},Fn=Ve=>{const Ht=typeof Ve;return Ve===null?"null":Ht==="object"&&Array.isArray(Ve)?"array":Ht==="object"&&Mn(Ve,String,(Oe,ot)=>ot.isPrototypeOf(Oe))?"string":Ht},Xn=Ve=>Ht=>Fn(Ht)===Ve,$n=Ve=>Ht=>Ve===Ht,Pn=Xn("string"),so=$n(void 0),ct=Ve=>Ve==null,Lt=Ve=>!ct(Ve),st=Ve=>Ht=>!Ve(Ht),qo=Object.hasOwnProperty,rn=(Ve,Ht)=>qo.call(Ve,Ht),Tt=(Ve,Ht,Oe)=>Ve.length>=Ht.length&&Ve.substr(Oe,Oe+Ht.length)===Ht,mn=(Ve,Ht,Oe=0,ot)=>{const F=Ve.indexOf(Ht,Oe);return F!==-1?so(ot)?!0:F+Ht.length<=ot:!1},fo=(Ve,Ht)=>Tt(Ve,Ht,0),In="\uFEFF",nt=Ve=>Ve===In,Oo=Ve=>Ve.replace(/\uFEFF/g,""),_t=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,ae=Ve=>Ht=>Ht.options.get(Ve),Jt=Ve=>{const Ht=Ve.options.register;Ht("autolink_pattern",{processor:"regexp",default:new RegExp("^"+_t().source+"$","i")}),Ht("link_default_target",{processor:"string"}),Ht("link_default_protocol",{processor:"string",default:"https"})},Lo=ae("autolink_pattern"),Ze=ae("link_default_target"),q=ae("link_default_protocol"),Rt=ae("allow_unsafe_link_target");var Zn=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const gn=Ve=>Ve.nodeType===3,_e=Ve=>Ve.nodeType===1,fe=Ve=>/^[(\[{ \u00a0]$/.test(Ve),cs=Ve=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(Ve),Je=Ve=>/[?!,.;:]/.test(Ve),rt=(Ve,Ht,Oe)=>{for(let ot=Ht-1;ot>=0;ot--){const F=Ve.charAt(ot);if(!nt(F)&&Oe(F))return ot}return-1},k=(Ve,Ht)=>{let Oe=Ve,ot=Ht;for(;_e(Oe)&&Oe.childNodes[ot];)Oe=Oe.childNodes[ot],ot=gn(Oe)?Oe.data.length:Oe.childNodes.length;return{container:Oe,offset:ot}},mo=(Ve,Ht)=>{var Oe;const ot=Ve.schema.getVoidElements(),F=Lo(Ve),{dom:No,selection:jn}=Ve;if(No.getParent(jn.getNode(),"a[href]")!==null||Ve.mode.isReadOnly())return null;const qn=jn.getRng(),yo=Zn(No,Ae=>No.isBlock(Ae)||rn(ot,Ae.nodeName.toLowerCase())||No.getContentEditable(Ae)==="false"||No.getParent(Ae,"a[href]")!==null),{container:ht,offset:j}=k(qn.endContainer,qn.endOffset),ce=(Oe=No.getParent(ht,No.isBlock))!==null&&Oe!==void 0?Oe:No.getRoot(),de=yo.backwards(ht,j+Ht,(Ae,Ne)=>{const un=Ae.data,Gt=rt(un,Ne,st(fe));return Gt===-1||Je(un[Gt])?Gt:Gt+1},ce);if(!de)return null;let ne=de.container;const Q=yo.backwards(de.container,de.offset,(Ae,Ne)=>{ne=Ae;const un=rt(Ae.data,Ne,fe);return un===-1?un:un+1},ce),ie=No.createRng();Q?ie.setStart(Q.container,Q.offset):ie.setStart(ne,0),ie.setEnd(de.container,de.offset);const wt=Oo(ie.toString()).match(F);if(wt){let Ae=wt[0];return fo(Ae,"www.")?Ae=q(Ve)+"://"+Ae:mn(Ae,"@")&&!cs(Ae)&&(Ae="mailto:"+Ae),{rng:ie,url:Ae}}else return null},it=(Ve,Ht)=>{const{dom:Oe,selection:ot}=Ve,{rng:F,url:No}=Ht,jn=ot.getBookmark();ot.setRng(F);const qn="createlink",yo={command:qn,ui:!1,value:No};if(!Ve.dispatch("BeforeExecCommand",yo).isDefaultPrevented()){Ve.getDoc().execCommand(qn,!1,No),Ve.dispatch("ExecCommand",yo);const j=Ze(Ve);if(Pn(j)){const ce=ot.getNode();Oe.setAttrib(ce,"target",j),j==="_blank"&&!Rt(Ve)&&Oe.setAttrib(ce,"rel","noopener")}}ot.moveToBookmark(jn),Ve.nodeChanged()},Mo=Ve=>{const Ht=mo(Ve,-1);Lt(Ht)&&it(Ve,Ht)},ln=Mo,Ce=Ve=>{const Ht=mo(Ve,0);Lt(Ht)&&it(Ve,Ht)},dt=Ve=>{Ve.on("keydown",Ht=>{Ht.keyCode===13&&!Ht.isDefaultPrevented()&&Ce(Ve)}),Ve.on("keyup",Ht=>{Ht.keyCode===32?Mo(Ve):(Ht.keyCode===48&&Ht.shiftKey||Ht.keyCode===221)&&ln(Ve)})};var wn=()=>{qt.add("autolink",Ve=>{Jt(Ve),dt(Ve)})};wn()})()),AX}var _X;function RQ(){return _X||(_X=1,OQ()),TX}RQ();var DX={},OX={},RX;function BQ(){return RX||(RX=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mn=Q=>({backspaceDelete:ie=>{Q.execCommand("mceListBackspaceDelete",!1,ie)}}),Fn=Q=>Q==null,Xn=Q=>!Fn(Q),$n=Q=>()=>Q,Pn=(Q,ie)=>Q===ie,so=$n(!1);class ct{constructor(ie,ye){this.tag=ie,this.value=ye}static some(ie){return new ct(!0,ie)}static none(){return ct.singletonNone}fold(ie,ye){return this.tag?ye(this.value):ie()}isSome(){return this.tag}isNone(){return!this.tag}map(ie){return this.tag?ct.some(ie(this.value)):ct.none()}bind(ie){return this.tag?ie(this.value):ct.none()}exists(ie){return this.tag&&ie(this.value)}forall(ie){return!this.tag||ie(this.value)}filter(ie){return!this.tag||ie(this.value)?this:ct.none()}getOr(ie){return this.tag?this.value:ie}or(ie){return this.tag?this:ie}getOrThunk(ie){return this.tag?this.value:ie()}orThunk(ie){return this.tag?this:ie()}getOrDie(ie){if(this.tag)return this.value;throw new Error(ie??"Called getOrDie on None")}static from(ie){return Xn(ie)?ct.some(ie):ct.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ie){this.tag&&ie(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ct.singletonNone=new ct(!1);const Lt=Array.prototype.slice,st=(Q,ie)=>{for(let ye=0,wt=Q.length;ye<wt;ye++){const Ae=Q[ye];if(ie(Ae,ye))return!0}return!1},qo=(Q,ie)=>{const ye=Q.length,wt=new Array(ye);for(let Ae=0;Ae<ye;Ae++){const Ne=Q[Ae];wt[Ae]=ie(Ne,Ae)}return wt},rn=(Q,ie)=>{for(let ye=0,wt=Q.length;ye<wt;ye++){const Ae=Q[ye];ie(Ae,ye)}},Tt=(Q,ie,ye)=>(rn(Q,(wt,Ae)=>{ye=ie(ye,wt,Ae)}),ye),mn=(Q,ie,ye)=>{for(let wt=0,Ae=Q.length;wt<Ae;wt++){const Ne=Q[wt];if(ie(Ne,wt))return ct.some(Ne);if(ye(Ne,wt))break}return ct.none()},fo=(Q,ie)=>mn(Q,ie,so),In=Q=>{const ie=Lt.call(Q,0);return ie.reverse(),ie},nt=(Q,ie,ye=Pn)=>Q.exists(wt=>ye(wt,ie)),_t=(Q=>ie=>ie.replace(Q,""))(/^\s+|\s+$/g),ae=Q=>Q.length>0,Jt=Q=>!ae(Q),Lo=Q=>{const ie=In(_t(Q).split("")),ye=qo(ie,(wt,Ae)=>{const Ne=wt.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,Ae)*Ne});return Tt(ye,(wt,Ae)=>wt+Ae,0)},Ze=Q=>{if(Q--,Q<0)return"";{const ie=Q%26,ye=Math.floor(Q/26),wt=Ze(ye),Ae=String.fromCharCode(65+ie);return wt+Ae}},q=Q=>/^[A-Z]+$/.test(Q),Rt=Q=>/^[a-z]+$/.test(Q),Zn=Q=>/^[0-9]+$/.test(Q),gn=Q=>Zn(Q)?2:q(Q)?0:Rt(Q)?1:Jt(Q)?3:4,_e=Q=>{switch(gn(Q)){case 2:return ct.some({listStyleType:ct.none(),start:Q});case 0:return ct.some({listStyleType:ct.some("upper-alpha"),start:Lo(Q).toString()});case 1:return ct.some({listStyleType:ct.some("lower-alpha"),start:Lo(Q).toString()});case 3:return ct.some({listStyleType:ct.none(),start:""});case 4:return ct.none()}},fe=Q=>{const ie=parseInt(Q.start,10);return nt(Q.listStyleType,"upper-alpha")?Ze(ie):nt(Q.listStyleType,"lower-alpha")?Ze(ie).toLowerCase():Q.start},Je=(Q=>ie=>ie.options.get(Q))("forced_root_block"),rt=Q=>/\btox\-/.test(Q.className),k=Q=>ie=>Xn(ie)&&Q.test(ie.nodeName),mo=Q=>ie=>Xn(ie)&&ie.nodeName.toLowerCase()===Q,it=k(/^(OL|UL|DL)$/),Mo=k(/^(TH|TD)$/),ln=k(/^(LI|DT|DD)$/),Ce=(Q,ie)=>mn(Q,it,Mo).exists(ye=>ye.nodeName===ie&&!rt(ye)),dt=(Q,ie)=>{const ye=Q.selection.getNode();return ie({parents:Q.dom.getParents(ye),element:ye}),Q.on("NodeChange",ie),()=>Q.off("NodeChange",ie)},wn=(Q,ie)=>ie!==null&&!Q.dom.isEditable(ie),Ve=(Q,ie)=>{const ye=Q.dom.getParent(ie,"ol,ul,dl");return wn(Q,ye)||!Q.selection.isEditable()},Ht=mo("ol"),Oe=["OL","UL","DL"],ot=Oe.join(","),F=(Q,ie)=>{const ye=ie||Q.selection.getStart(!0);return Q.dom.getParent(ye,ot,No(Q,ye))},No=(Q,ie)=>{const ye=Q.dom.getParents(ie,Q.dom.isBlock),wt=Ne=>Ne.nodeName.toLowerCase()!==Je(Q);return fo(ye,Ne=>wt(Ne)&&jn(Q.schema,Ne)).getOr(Q.getBody())},jn=(Q,ie)=>!it(ie)&&!ln(ie)&&st(Oe,ye=>Q.isValidChild(ie.nodeName,ye)),qn=Q=>{const ie=F(Q);!Ht(ie)||Ve(Q,ie)||Q.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:fe({start:Q.dom.getAttrib(ie,"start","1"),listStyleType:ct.from(Q.dom.getStyle(ie,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:ye=>{const wt=ye.getData();_e(wt.start).each(Ae=>{Q.execCommand("mceListUpdate",!1,{attrs:{start:Ae.start==="1"?"":Ae.start},styles:{"list-style-type":Ae.listStyleType.getOr("")}})}),ye.close()}})},yo=Q=>{Q.addCommand("mceListProps",()=>{qn(Q)})},ht=(Q,ie)=>ye=>{const wt=Ae=>{ye.setActive(Ce(Ae.parents,ie)),ye.setEnabled(!Ve(Q,Ae.element)&&Q.selection.isEditable())};return ye.setEnabled(Q.selection.isEditable()),dt(Q,wt)},j=Q=>{const ie=ye=>()=>Q.execCommand(ye);Q.hasPlugin("advlist")||(Q.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:ie("InsertOrderedList"),onSetup:ht(Q,"OL")}),Q.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:ie("InsertUnorderedList"),onSetup:ht(Q,"UL")}))},ce=(Q,ie)=>ye=>dt(Q,Ae=>ye.setEnabled(Ce(Ae.parents,ie)&&!Ve(Q,Ae.element))),de=Q=>{const ie={text:"List properties...",icon:"ordered-list",onAction:()=>Q.execCommand("mceListProps"),onSetup:ce(Q,"OL")};Q.ui.registry.addMenuItem("listprops",ie),Q.ui.registry.addContextMenu("lists",{update:ye=>{const wt=F(Q,ye);return Ht(wt)?["listprops"]:[]}})};var ne=()=>{qt.add("lists",Q=>(yo(Q),j(Q),de(Q),Mn(Q)))};ne()})()),OX}var BX;function MQ(){return BX||(BX=1,BQ()),DX}MQ();var MX={},FX={},NX;function FQ(){return NX||(NX=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mn=(H,le,ke)=>{var Xe;return ke(H,le.prototype)?!0:((Xe=H.constructor)===null||Xe===void 0?void 0:Xe.name)===le.name},Fn=H=>{const le=typeof H;return H===null?"null":le==="object"&&Array.isArray(H)?"array":le==="object"&&Mn(H,String,(ke,Xe)=>Xe.isPrototypeOf(ke))?"string":le},Xn=H=>le=>Fn(le)===H,$n=H=>le=>typeof le===H,Pn=H=>le=>H===le,so=Xn("string"),ct=Xn("object"),Lt=Xn("array"),st=Pn(null),qo=$n("boolean"),rn=H=>H==null,Tt=H=>!rn(H),mn=$n("function"),fo=(H,le)=>{if(Lt(H)){for(let ke=0,Xe=H.length;ke<Xe;++ke)if(!le(H[ke]))return!1;return!0}return!1},In=()=>{},nt=H=>()=>H,Oo=(H,le)=>H===le;class _t{constructor(le,ke){this.tag=le,this.value=ke}static some(le){return new _t(!0,le)}static none(){return _t.singletonNone}fold(le,ke){return this.tag?ke(this.value):le()}isSome(){return this.tag}isNone(){return!this.tag}map(le){return this.tag?_t.some(le(this.value)):_t.none()}bind(le){return this.tag?le(this.value):_t.none()}exists(le){return this.tag&&le(this.value)}forall(le){return!this.tag||le(this.value)}filter(le){return!this.tag||le(this.value)?this:_t.none()}getOr(le){return this.tag?this.value:le}or(le){return this.tag?this:le}getOrThunk(le){return this.tag?this.value:le()}orThunk(le){return this.tag?this:le()}getOrDie(le){if(this.tag)return this.value;throw new Error(le??"Called getOrDie on None")}static from(le){return Tt(le)?_t.some(le):_t.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(le){this.tag&&le(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}_t.singletonNone=new _t(!1);const ae=Array.prototype.indexOf,Jt=Array.prototype.push,Lo=(H,le)=>ae.call(H,le),Ze=(H,le)=>Lo(H,le)>-1,q=(H,le)=>{const ke=H.length,Xe=new Array(ke);for(let Mt=0;Mt<ke;Mt++){const cn=H[Mt];Xe[Mt]=le(cn,Mt)}return Xe},Rt=(H,le)=>{for(let ke=0,Xe=H.length;ke<Xe;ke++){const Mt=H[ke];le(Mt,ke)}},Zn=(H,le,ke)=>(Rt(H,(Xe,Mt)=>{ke=le(ke,Xe,Mt)}),ke),gn=H=>{const le=[];for(let ke=0,Xe=H.length;ke<Xe;++ke){if(!Lt(H[ke]))throw new Error("Arr.flatten item "+ke+" was not an array, input: "+H);Jt.apply(le,H[ke])}return le},_e=(H,le)=>gn(q(H,le)),fe=(H,le)=>{for(let ke=0;ke<H.length;ke++){const Xe=le(H[ke],ke);if(Xe.isSome())return Xe}return _t.none()},cs=Object.keys,Je=Object.hasOwnProperty,rt=(H,le)=>{const ke=cs(H);for(let Xe=0,Mt=ke.length;Xe<Mt;Xe++){const cn=ke[Xe],Po=H[cn];le(Po,cn)}},k=H=>(le,ke)=>{H[ke]=le},mo=(H,le,ke,Xe)=>{rt(H,(Mt,cn)=>{(le(Mt,cn)?ke:Xe)(Mt,cn)})},it=(H,le)=>{const ke={};return mo(H,le,k(ke),In),ke},Mo=(H,le)=>Je.call(H,le),ln=(H,le)=>Mo(H,le)&&H[le]!==void 0&&H[le]!==null,Ce=H=>{let le=H;return{get:()=>le,set:Mt=>{le=Mt}}},dt=(H,le,ke=Oo)=>H.exists(Xe=>ke(Xe,le)),wn=H=>{const le=[],ke=Xe=>{le.push(Xe)};for(let Xe=0;Xe<H.length;Xe++)H[Xe].each(ke);return le},Ve=(H,le)=>H?_t.some(le):_t.none(),Ht=H=>{const le=Ce(_t.none()),ke=()=>le.get().each(H);return{clear:()=>{ke(),le.set(_t.none())},isSet:()=>le.get().isSome(),get:()=>le.get(),set:So=>{ke(),le.set(_t.some(So))}}},Oe=()=>{const H=Ht(In);return{...H,on:ke=>H.get().each(ke)}},ot=(H,le)=>H.substring(le),F=(H,le,ke)=>le===""||H.length>=le.length&&H.substr(ke,ke+le.length)===le,No=(H,le)=>jn(H,le)?ot(H,le.length):H,jn=(H,le)=>F(H,le,0),qn=H=>le=>le.options.get(H),yo=H=>{const le=H.options.register;le("link_assume_external_targets",{processor:ke=>{const Xe=so(ke)||qo(ke);return Xe?ke===!0?{value:1,valid:Xe}:ke==="http"||ke==="https"?{value:ke,valid:Xe}:{value:0,valid:Xe}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),le("link_context_toolbar",{processor:"boolean",default:!1}),le("link_list",{processor:ke=>so(ke)||mn(ke)||fo(ke,ct)}),le("link_default_target",{processor:"string"}),le("link_default_protocol",{processor:"string",default:"https"}),le("link_target_list",{processor:ke=>qo(ke)||fo(ke,ct),default:!0}),le("link_rel_list",{processor:"object[]",default:[]}),le("link_class_list",{processor:"object[]",default:[]}),le("link_title",{processor:"boolean",default:!0}),le("allow_unsafe_link_target",{processor:"boolean",default:!1}),le("link_quicklink",{processor:"boolean",default:!1}),le("link_attributes_postprocess",{processor:"function"})},ht=qn("link_assume_external_targets"),j=qn("link_context_toolbar"),ce=qn("link_list"),de=qn("link_default_target"),ne=qn("link_default_protocol"),Q=qn("link_target_list"),ie=qn("link_rel_list"),ye=qn("link_class_list"),wt=qn("link_title"),Ae=qn("allow_unsafe_link_target"),Ne=qn("link_quicklink"),un=qn("link_attributes_postprocess");var Gt=tinymce.util.Tools.resolve("tinymce.util.URI"),go=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ko=tinymce.util.Tools.resolve("tinymce.util.Tools");const _o=H=>Tt(H)&&H.nodeName.toLowerCase()==="a",_n=H=>_o(H)&&!!Ke(H),ns=(H,le)=>{if(H.collapsed)return[];{const ke=H.cloneContents(),Xe=ke.firstChild,Mt=new go(Xe,ke),cn=[];let Po=Xe;do le(Po)&&cn.push(Po);while(Po=Mt.next());return cn}},Ln=H=>/^\w+:/i.test(H),Ke=H=>{var le,ke;return(ke=(le=H.getAttribute("data-mce-href"))!==null&&le!==void 0?le:H.getAttribute("href"))!==null&&ke!==void 0?ke:""},At=(H,le)=>{const ke=["noopener"],Xe=H?H.split(/\s+/):[],Mt=fs=>ko.trim(fs.sort().join(" ")),cn=fs=>(fs=Po(fs),fs.length>0?fs.concat(ke):ke),Po=fs=>fs.filter(N=>ko.inArray(ke,N)===-1),So=le?cn(Xe):Po(Xe);return So.length>0?Mt(So):""},fn=H=>H.replace(/\uFEFF/g,""),an=(H,le)=>(le=le||Eo(H.selection.getRng())[0]||H.selection.getNode(),To(le)?_t.from(H.dom.select("a[href]",le)[0]):_t.from(H.dom.getParent(le,"a[href]"))),to=(H,le)=>an(H,le).isSome(),es=(H,le)=>{const ke=le.fold(()=>H.getContent({format:"text"}),Xe=>Xe.innerText||Xe.textContent||"");return fn(ke)},Eo=H=>ns(H,_n),Ds=H=>ko.grep(H,_n),Xs=H=>Ds(H).length>0,sn=H=>Eo(H).length>0,Do=H=>{const le=H.schema.getTextInlineElements(),ke=cn=>cn.nodeType===1&&!_o(cn)&&!Mo(le,cn.nodeName.toLowerCase());if(an(H).exists(cn=>cn.hasAttribute("data-mce-block")))return!1;const Mt=H.selection.getRng();return Mt.collapsed?!0:ns(Mt,ke).length===0},To=H=>Tt(H)&&H.nodeName==="FIGURE"&&/\bimage\b/i.test(H.className),ac=H=>Zn(["title","rel","class","target"],(ke,Xe)=>(H[Xe].each(Mt=>{ke[Xe]=Mt.length>0?Mt:null}),ke),{href:H.href}),da=(H,le)=>(le==="http"||le==="https")&&!Ln(H)?le+"://"+H:H,tn=(H,le)=>{const ke={...le};if(ie(H).length===0&&!Ae(H)){const Xe=At(ke.rel,ke.target==="_blank");ke.rel=Xe||null}return _t.from(ke.target).isNone()&&Q(H)===!1&&(ke.target=de(H)),ke.href=da(ke.href,ht(H)),ke},Bc=(H,le,ke,Xe)=>{ke.each(cn=>{Mo(le,"innerText")?le.innerText=cn:le.textContent=cn}),H.dom.setAttribs(le,Xe);const Mt=H.dom.createRng();Mt.setStartAfter(le),Mt.setEndAfter(le),H.selection.setRng(Mt)},Os=(H,le,ke,Xe)=>{const Mt=H.dom;To(le)?ja(Mt,le,Xe):ke.fold(()=>{H.execCommand("mceInsertLink",!1,Xe);const cn=H.selection.getEnd(),Po=Mt.createRng();Po.setStartAfter(cn),Po.setEndAfter(cn),H.selection.setRng(Po)},cn=>{H.insertContent(Mt.createHTML("a",Xe,Mt.encode(cn)))})},Mc=(H,le,ke)=>{const Xe=H.selection.getNode(),Mt=an(H,Xe),cn=tn(H,ac(ke)),Po=un(H);Tt(Po)&&Po(cn),H.undoManager.transact(()=>{ke.href===le.href&&le.attach(),Mt.fold(()=>{Os(H,Xe,ke.text,cn)},So=>{H.focus(),Bc(H,So,ke.text,cn)})})},Ma=H=>{const le=H.dom,ke=H.selection,Xe=ke.getBookmark(),Mt=ke.getRng().cloneRange(),cn=le.getParent(Mt.startContainer,"a[href]",H.getBody()),Po=le.getParent(Mt.endContainer,"a[href]",H.getBody());cn&&Mt.setStartBefore(cn),Po&&Mt.setEndAfter(Po),ke.setRng(Mt),H.execCommand("unlink"),ke.moveToBookmark(Xe)},zr=H=>{H.undoManager.transact(()=>{const le=H.selection.getNode();To(le)?Fc(H,le):Ma(H),H.focus()})},xs=H=>{const{class:le,href:ke,rel:Xe,target:Mt,text:cn,title:Po}=H;return it({class:le.getOrNull(),href:ke,rel:Xe.getOrNull(),target:Mt.getOrNull(),text:cn.getOrNull(),title:Po.getOrNull()},(So,fs)=>st(So)===!1)},no=(H,le)=>{const ke=H.options.get,Xe={allow_html_data_urls:ke("allow_html_data_urls"),allow_script_urls:ke("allow_script_urls"),allow_svg_data_urls:ke("allow_svg_data_urls")},Mt=le.href;return{...le,href:Gt.isDomSafe(Mt,"a",Xe)?Mt:""}},rs=(H,le,ke)=>{const Xe=no(H,ke);H.hasPlugin("rtc",!0)?H.execCommand("createlink",!1,xs(Xe)):Mc(H,le,Xe)},Za=H=>{H.hasPlugin("rtc",!0)?H.execCommand("unlink"):zr(H)},Fc=(H,le)=>{var ke;const Xe=H.dom.select("img",le)[0];if(Xe){const Mt=H.dom.getParents(Xe,"a[href]",le)[0];Mt&&((ke=Mt.parentNode)===null||ke===void 0||ke.insertBefore(Xe,Mt),H.dom.remove(Mt))}},ja=(H,le,ke)=>{var Xe;const Mt=H.select("img",le)[0];if(Mt){const cn=H.create("a",ke);(Xe=Mt.parentNode)===null||Xe===void 0||Xe.insertBefore(cn,Mt),cn.appendChild(Mt)}},dn=H=>so(H.value)?H.value:"",Fr=H=>so(H.text)?H.text:so(H.title)?H.title:"",yr=(H,le)=>{const ke=[];return ko.each(H,Xe=>{const Mt=Fr(Xe);if(Xe.menu!==void 0){const cn=yr(Xe.menu,le);ke.push({text:Mt,items:cn})}else{const cn=le(Xe);ke.push({text:Mt,value:cn})}}),ke},Ei=(H=dn)=>le=>_t.from(le).map(ke=>yr(ke,H)),Be={sanitize:H=>Ei(dn)(H),sanitizeWith:Ei,createUi:(H,le)=>ke=>({name:H,type:"listbox",label:le,items:ke}),getValue:dn},tt=H=>ln(H,"items"),Dn=(H,le)=>fe(le,ke=>tt(ke)?Dn(H,ke.items):Ve(ke.value===H,ke)),Gn=(H,le,ke,Xe)=>{const Mt=Xe[le],cn=H.length>0;return Mt!==void 0?Dn(Mt,ke).map(Po=>({url:{value:Po.value,meta:{text:cn?H:Po.text,attach:In}},text:cn?H:Po.text})):_t.none()},Ao=(H,le)=>le==="link"?H.link:le==="anchor"?H.anchor:_t.none(),Yo={init:(H,le)=>{const ke={text:H.text,title:H.title},Xe=fs=>{var N;return Ve(ke.title.length<=0,_t.from((N=fs.meta)===null||N===void 0?void 0:N.title).getOr(""))},Mt=fs=>{var N;return Ve(ke.text.length<=0,_t.from((N=fs.meta)===null||N===void 0?void 0:N.text).getOr(fs.value))},cn=fs=>{const N=Mt(fs.url),U=Xe(fs.url);return N.isSome()||U.isSome()?_t.some({...N.map(me=>({text:me})).getOr({}),...U.map(me=>({title:me})).getOr({})}):_t.none()},Po=(fs,N)=>{const U=Ao(le,N).getOr([]);return Gn(ke.text,N,U,fs)};return{onChange:(fs,N)=>{const U=N.name;return U==="url"?cn(fs()):Ze(["anchor","link"],U)?Po(fs(),U):((U==="text"||U==="title")&&(ke[U]=fs()[U]),_t.none())}}},getDelta:Gn};var Fo=tinymce.util.Tools.resolve("tinymce.util.Delay");const Z=(H,le,ke)=>{const Xe=H.selection.getRng();Fo.setEditorTimeout(H,()=>{H.windowManager.confirm(le,Mt=>{H.selection.setRng(Xe),ke(Mt)})})},ve=H=>{const le=H.href;return le.indexOf("@")>0&&le.indexOf("/")===-1&&le.indexOf("mailto:")===-1?_t.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Xe=>({...Xe,href:"mailto:"+le})}):_t.none()},at=(H,le)=>ke=>{const Xe=ke.href;return H===1&&!Ln(Xe)||H===0&&/^\s*www(\.|\d\.)/i.test(Xe)?_t.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${le}:// prefix?`,preprocess:cn=>({...cn,href:le+"://"+Xe})}):_t.none()},yt={preprocess:(H,le)=>fe([ve,at(ht(H),ne(H))],ke=>ke(le)).fold(()=>Promise.resolve(le),ke=>new Promise(Xe=>{Z(H,ke.message,Mt=>{Xe(Mt?ke.preprocess(le):le)})}))},Sn={getAnchors:H=>{const le=H.dom.select("a:not([href])"),ke=_e(le,Xe=>{const Mt=Xe.name||Xe.id;return Mt?[{text:Mt,value:"#"+Mt}]:[]});return ke.length>0?_t.some([{text:"None",value:""}].concat(ke)):_t.none()}},Co={getClasses:H=>{const le=ye(H);return le.length>0?Be.sanitize(le):_t.none()}},Uo=H=>{try{return _t.some(JSON.parse(H))}catch{return _t.none()}},Cs={getLinks:H=>{const le=Xe=>H.convertURL(Xe.value||Xe.url||"","href"),ke=ce(H);return new Promise(Xe=>{so(ke)?fetch(ke).then(Mt=>Mt.ok?Mt.text().then(Uo):Promise.reject()).then(Xe,()=>Xe(_t.none())):mn(ke)?ke(Mt=>Xe(_t.some(Mt))):Xe(_t.from(ke))}).then(Xe=>Xe.bind(Be.sanitizeWith(le)).map(Mt=>Mt.length>0?[{text:"None",value:""}].concat(Mt):Mt))}},Er={getRels:(H,le)=>{const ke=ie(H);if(ke.length>0){const Xe=dt(le,"_blank"),Mt=Ae(H)===!1,cn=So=>At(Be.getValue(So),Xe);return(Mt?Be.sanitizeWith(cn):Be.sanitize)(ke)}return _t.none()}},Ol=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],is={getTargets:H=>{const le=Q(H);return Lt(le)?Be.sanitize(le).orThunk(()=>_t.some(Ol)):le===!1?_t.none():_t.some(Ol)}},Rs=(H,le,ke)=>{const Xe=H.getAttrib(le,ke);return Xe!==null&&Xe.length>0?_t.some(Xe):_t.none()},ma=(H,le)=>{const ke=H.dom,Mt=Do(H)?_t.some(es(H.selection,le)):_t.none(),cn=le.bind(U=>_t.from(ke.getAttrib(U,"href"))),Po=le.bind(U=>_t.from(ke.getAttrib(U,"target"))),So=le.bind(U=>Rs(ke,U,"rel")),fs=le.bind(U=>Rs(ke,U,"class")),N=le.bind(U=>Rs(ke,U,"title"));return{url:cn,text:Mt,title:N,target:Po,rel:So,linkClass:fs}},er={collect:(H,le)=>Cs.getLinks(H).then(ke=>{const Xe=ma(H,le);return{anchor:Xe,catalogs:{targets:is.getTargets(H),rels:Er.getRels(H,Xe.target),classes:Co.getClasses(H),anchor:Sn.getAnchors(H),link:ke},optNode:le,flags:{titleEnabled:wt(H)}}})},Kn=(H,le)=>ke=>{const Xe=ke.getData();if(!Xe.url.value){Za(H),ke.close();return}const Mt=So=>_t.from(Xe[So]).filter(fs=>!dt(le.anchor[So],fs)),cn={href:Xe.url.value,text:Mt("text"),target:Mt("target"),rel:Mt("rel"),class:Mt("linkClass"),title:Mt("title")},Po={href:Xe.url.value,attach:Xe.url.meta!==void 0&&Xe.url.meta.attach?Xe.url.meta.attach:In};yt.preprocess(H,cn).then(So=>{rs(H,Po,So)}),ke.close()},fa=H=>{const le=an(H);return er.collect(H,le)},Ea=(H,le)=>{const ke=H.anchor,Xe=ke.url.getOr("");return{url:{value:Xe,meta:{original:{value:Xe}}},text:ke.text.getOr(""),title:ke.title.getOr(""),anchor:Xe,link:Xe,rel:ke.rel.getOr(""),target:ke.target.or(le).getOr(""),linkClass:ke.linkClass.getOr("")}},cr=(H,le,ke)=>{const Xe=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Mt=H.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),cn=H.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Po=_t.from(de(ke)),So=Ea(H,Po),fs=H.catalogs,N=Yo.init(So,fs);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:gn([Xe,Mt,cn,wn([fs.anchor.map(Be.createUi("anchor","Anchors")),fs.rels.map(Be.createUi("rel","Rel")),fs.targets.map(Be.createUi("target","Open link in...")),fs.link.map(Be.createUi("link","Link list")),fs.classes.map(Be.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:So,onChange:(me,{name:He})=>{N.onChange(me.getData,{name:He}).each(nn=>{me.setData(nn)})},onSubmit:le}},Yu=H=>{fa(H).then(ke=>{const Xe=Kn(H,ke);return cr(ke,Xe,H)}).then(ke=>{H.windowManager.open(ke)})},hu=H=>{H.addCommand("mceLink",(le,ke)=>{ke?.dialog===!0||!Ne(H)?Yu(H):H.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},Js=H=>{H.addShortcut("Meta+K","",()=>{H.execCommand("mceLink")})};var Ti=tinymce.util.Tools.resolve("tinymce.util.VK");const si=(H,le)=>{document.body.appendChild(H),H.dispatchEvent(le),document.body.removeChild(H)},Xu=H=>{const le=document.createElement("a");le.target="_blank",le.href=H,le.rel="noreferrer noopener";const ke=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(ke),si(le,ke)},Ut=H=>H.altKey===!0&&H.shiftKey===!1&&H.ctrlKey===!1&&H.metaKey===!1,Nc=(H,le)=>{if(le){const ke=Ke(le);if(/^#/.test(ke)){const Xe=H.dom.select(`${ke},[name="${No(ke,"#")}"]`);Xe.length&&H.selection.scrollIntoView(Xe[0],!0)}else Xu(le.href)}},Fa=H=>{const le=H.selection.getRng(),ke=le.startContainer;return _n(ke)&&le.startContainer===le.endContainer&&H.dom.select("img",ke).length===1},qa=(H,le)=>{const ke=Ds(H.dom.getParents(le));return Ve(ke.length===1,ke[0])},ir=H=>{const le=Eo(H.selection.getRng());return Ve(le.length>0,le[0]).or(qa(H,H.selection.getNode()))},pu=H=>H.selection.isCollapsed()||Fa(H)?qa(H,H.selection.getStart()):ir(H),Ga=H=>{const le=Oe(),ke=()=>le.get().or(pu(H)),Xe=()=>ke().each(Mt=>Nc(H,Mt));return H.on("contextmenu",Mt=>{qa(H,Mt.target).each(le.set)}),H.on("SelectionChange",()=>{le.isSet()||pu(H).each(le.set)}),H.on("click",Mt=>{le.clear();const cn=Ds(H.dom.getParents(Mt.target));cn.length===1&&Ti.metaKeyPressed(Mt)&&(Mt.preventDefault(),Nc(H,cn[0]))}),H.on("keydown",Mt=>{le.clear(),!Mt.isDefaultPrevented()&&Mt.keyCode===13&&Ut(Mt)&&ke().each(cn=>{Mt.preventDefault(),Nc(H,cn)})}),{gotoSelectedLink:Xe}},yc=H=>()=>{H.execCommand("mceLink",!1,{dialog:!0})},Rl=(H,le)=>(H.on("NodeChange",le),()=>H.off("NodeChange",le)),Ju=H=>le=>{const ke=()=>{le.setActive(!H.mode.isReadOnly()&&to(H,H.selection.getNode())),le.setEnabled(H.selection.isEditable())};return ke(),Rl(H,ke)},zi=H=>le=>{const ke=()=>{le.setEnabled(H.selection.isEditable())};return ke(),Rl(H,ke)},bu=H=>le=>{const ke=cn=>Xs(cn)||sn(H.selection.getRng()),Xe=H.dom.getParents(H.selection.getStart()),Mt=cn=>{le.setEnabled(ke(cn)&&H.selection.isEditable())};return Mt(Xe),Rl(H,cn=>Mt(cn.parents))},Bl=(H,le)=>{H.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:yc(H),onSetup:Ju(H)}),H.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:le.gotoSelectedLink,onSetup:bu(H)}),H.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Za(H),onSetup:bu(H)})},Vi=(H,le)=>{H.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:le.gotoSelectedLink,onSetup:bu(H)}),H.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:yc(H),onSetup:zi(H)}),H.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Za(H),onSetup:bu(H)})},Ml=H=>{const le="link unlink openlink",ke="link";H.ui.registry.addContextMenu("link",{update:Xe=>H.dom.isEditable(Xe)?Xs(H.dom.getParents(Xe,"a"))?le:ke:""})},Nt=(H,le)=>{const ke=cn=>{cn.selection.collapse(!1)},Xe=cn=>{const Po=H.selection.getNode();return cn.setEnabled(to(H,Po)&&H.selection.isEditable()),In},Mt=cn=>{const Po=an(H),So=Do(H);if(Po.isNone()&&So){const fs=es(H.selection,Po);return Ve(fs.length===0,cn)}else return _t.none()};H.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Ju(H)},label:"Link",predicate:cn=>j(H)&&to(H,cn),initValue:()=>an(H).fold(nt(""),Ke),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:cn=>{const Po=H.selection.getNode();return cn.setActive(to(H,Po)),Ju(H)(cn)},onAction:cn=>{const Po=cn.getValue(),So=Mt(Po);rs(H,{href:Po,attach:In},{href:Po,text:So,title:_t.none(),rel:_t.none(),target:_t.from(de(H)),class:_t.none()}),ke(H),cn.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Xe,onAction:cn=>{Za(H),cn.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Xe,onAction:cn=>{le.gotoSelectedLink(),cn.hide()}}]})},ll=H=>{const le=Ga(H);Bl(H,le),Vi(H,le),Ml(H),Nt(H,le)};var Qu=()=>{qt.add("link",H=>{yo(H),hu(H),ll(H),Js(H)})};Qu()})()),FX}var PX;function NQ(){return PX||(PX=1,FQ()),MX}NQ();var $X={},IX={},LX;function PQ(){return LX||(LX=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mn=Object.getPrototypeOf,Fn=(N,U,me)=>{var He;return me(N,U.prototype)?!0:((He=N.constructor)===null||He===void 0?void 0:He.name)===U.name},Xn=N=>{const U=typeof N;return N===null?"null":U==="object"&&Array.isArray(N)?"array":U==="object"&&Fn(N,String,(me,He)=>He.isPrototypeOf(me))?"string":U},$n=N=>U=>Xn(U)===N,Pn=N=>U=>typeof U===N,so=N=>U=>N===U,ct=(N,U)=>st(N)&&Fn(N,U,(me,He)=>Mn(me)===He),Lt=$n("string"),st=$n("object"),qo=N=>ct(N,Object),rn=$n("array"),Tt=so(null),mn=Pn("boolean"),fo=N=>N==null,In=N=>!fo(N),nt=Pn("function"),Oo=Pn("number"),_t=(N,U)=>{if(rn(N)){for(let me=0,He=N.length;me<He;++me)if(!U(N[me]))return!1;return!0}return!1},ae=()=>{};class Jt{constructor(U,me){this.tag=U,this.value=me}static some(U){return new Jt(!0,U)}static none(){return Jt.singletonNone}fold(U,me){return this.tag?me(this.value):U()}isSome(){return this.tag}isNone(){return!this.tag}map(U){return this.tag?Jt.some(U(this.value)):Jt.none()}bind(U){return this.tag?U(this.value):Jt.none()}exists(U){return this.tag&&U(this.value)}forall(U){return!this.tag||U(this.value)}filter(U){return!this.tag||U(this.value)?this:Jt.none()}getOr(U){return this.tag?this.value:U}or(U){return this.tag?this:U}getOrThunk(U){return this.tag?this.value:U()}orThunk(U){return this.tag?this:U()}getOrDie(U){if(this.tag)return this.value;throw new Error(U??"Called getOrDie on None")}static from(U){return In(U)?Jt.some(U):Jt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(U){this.tag&&U(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Jt.singletonNone=new Jt(!1);const Lo=Array.prototype.push,Ze=N=>{const U=[];for(let me=0,He=N.length;me<He;++me){if(!rn(N[me]))throw new Error("Arr.flatten item "+me+" was not an array, input: "+N);Lo.apply(U,N[me])}return U},q=(N,U)=>U>=0&&U<N.length?Jt.some(N[U]):Jt.none(),Rt=N=>q(N,0),Zn=(N,U)=>{for(let me=0;me<N.length;me++){const He=U(N[me],me);if(He.isSome())return He}return Jt.none()},gn=Object.keys,_e=Object.hasOwnProperty,fe=(N,U)=>{const me=gn(N);for(let He=0,nn=me.length;He<nn;He++){const Xo=me[He],Bs=N[Xo];U(Bs,Xo)}},cs=N=>(U,me)=>{N[me]=U},Je=(N,U,me,He)=>{fe(N,(nn,Xo)=>{(U(nn,Xo)?me:He)(nn,Xo)})},rt=(N,U)=>{const me={};return Je(N,U,cs(me),ae),me},k=(N,U)=>_e.call(N,U),mo=(N,U)=>k(N,U)&&N[U]!==void 0&&N[U]!==null,ln=(N=>(...U)=>{if(U.length===0)throw new Error("Can't merge zero objects");const me={};for(let He=0;He<U.length;He++){const nn=U[He];for(const Xo in nn)k(nn,Xo)&&(me[Xo]=N(me[Xo],nn[Xo]))}return me})((N,U)=>qo(N)&&qo(U)?ln(N,U):U),Ce=N=>N.length>0,dt=(N,U)=>{const He=(U||document).createElement("div");if(He.innerHTML=N,!He.hasChildNodes()||He.childNodes.length>1){const nn="HTML does not have a single root node";throw console.error(nn,N),new Error(nn)}return Ht(He.childNodes[0])},wn=(N,U)=>{const He=(U||document).createElement(N);return Ht(He)},Ve=(N,U)=>{const He=(U||document).createTextNode(N);return Ht(He)},Ht=N=>{if(N==null)throw new Error("Node cannot be null or undefined");return{dom:N}},ot={fromHtml:dt,fromTag:wn,fromText:Ve,fromDom:Ht,fromPoint:(N,U,me)=>Jt.from(N.dom.elementFromPoint(U,me)).map(Ht)},F=(N,U,me)=>{if(Lt(me)||mn(me)||Oo(me))N.setAttribute(U,me+"");else throw console.error("Invalid call to Attribute.set. Key ",U,":: Value ",me,":: Element ",N),new Error("Attribute value was not simple")},No=(N,U,me)=>{F(N.dom,U,me)},jn=(N,U)=>{N.dom.removeAttribute(U)};var qn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),yo=tinymce.util.Tools.resolve("tinymce.util.URI");const ht=N=>U=>U.options.get(N),j=N=>{const U=N.options.register;U("image_dimensions",{processor:"boolean",default:!0}),U("image_advtab",{processor:"boolean",default:!1}),U("image_uploadtab",{processor:"boolean",default:!0}),U("image_prepend_url",{processor:"string",default:""}),U("image_class_list",{processor:"object[]"}),U("image_description",{processor:"boolean",default:!0}),U("image_title",{processor:"boolean",default:!1}),U("image_caption",{processor:"boolean",default:!1}),U("image_list",{processor:me=>{const He=me===!1||Lt(me)||_t(me,st)||nt(me);return He?{value:me,valid:He}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},ce=ht("image_dimensions"),de=ht("image_advtab"),ne=ht("image_uploadtab"),Q=ht("image_prepend_url"),ie=ht("image_class_list"),ye=ht("image_description"),wt=ht("image_title"),Ae=ht("image_caption"),Ne=ht("image_list"),un=ht("a11y_advanced_options"),Gt=ht("automatic_uploads"),go=N=>Ce(N.options.get("images_upload_url")),ko=N=>In(N.options.get("images_upload_handler")),_o=(N,U)=>Math.max(parseInt(N,10),parseInt(U,10)),_n=N=>new Promise(U=>{const me=document.createElement("img"),He=Xo=>{me.parentNode&&me.parentNode.removeChild(me),U(Xo)};me.addEventListener("load",()=>{const Xo=_o(me.width,me.clientWidth),Bs=_o(me.height,me.clientHeight),Or={width:Xo,height:Bs};He(Promise.resolve(Or))}),me.addEventListener("error",()=>{He(Promise.reject(`Failed to get image dimensions for: ${N}`))});const nn=me.style;nn.visibility="hidden",nn.position="fixed",nn.bottom=nn.left="0px",nn.width=nn.height="auto",document.body.appendChild(me),me.src=N}),ns=N=>(N&&(N=N.replace(/px$/,"")),N),Ln=N=>(N.length>0&&/^[0-9]+$/.test(N)&&(N+="px"),N),Ke=N=>{if(N.margin){const U=String(N.margin).split(" ");switch(U.length){case 1:N["margin-top"]=N["margin-top"]||U[0],N["margin-right"]=N["margin-right"]||U[0],N["margin-bottom"]=N["margin-bottom"]||U[0],N["margin-left"]=N["margin-left"]||U[0];break;case 2:N["margin-top"]=N["margin-top"]||U[0],N["margin-right"]=N["margin-right"]||U[1],N["margin-bottom"]=N["margin-bottom"]||U[0],N["margin-left"]=N["margin-left"]||U[1];break;case 3:N["margin-top"]=N["margin-top"]||U[0],N["margin-right"]=N["margin-right"]||U[1],N["margin-bottom"]=N["margin-bottom"]||U[2],N["margin-left"]=N["margin-left"]||U[1];break;case 4:N["margin-top"]=N["margin-top"]||U[0],N["margin-right"]=N["margin-right"]||U[1],N["margin-bottom"]=N["margin-bottom"]||U[2],N["margin-left"]=N["margin-left"]||U[3]}delete N.margin}return N},At=(N,U)=>{const me=Ne(N);Lt(me)?fetch(me).then(He=>{He.ok&&He.json().then(U)}):nt(me)?me(U):U(me)},fn=(N,U,me)=>{const He=()=>{me.onload=me.onerror=null,N.selection&&(N.selection.select(me),N.nodeChanged())};me.onload=()=>{!U.width&&!U.height&&ce(N)&&N.dom.setAttribs(me,{width:String(me.clientWidth),height:String(me.clientHeight)}),He()},me.onerror=He},an=N=>new Promise((U,me)=>{const He=new FileReader;He.onload=()=>{U(He.result)},He.onerror=()=>{var nn;me((nn=He.error)===null||nn===void 0?void 0:nn.message)},He.readAsDataURL(N)}),to=N=>N.nodeName==="IMG"&&(N.hasAttribute("data-mce-object")||N.hasAttribute("data-mce-placeholder")),es=(N,U)=>{const me=N.options.get;return yo.isDomSafe(U,"img",{allow_html_data_urls:me("allow_html_data_urls"),allow_script_urls:me("allow_script_urls"),allow_svg_data_urls:me("allow_svg_data_urls")})},Eo=qn.DOM,Ds=N=>N.style.marginLeft&&N.style.marginRight&&N.style.marginLeft===N.style.marginRight?ns(N.style.marginLeft):"",Xs=N=>N.style.marginTop&&N.style.marginBottom&&N.style.marginTop===N.style.marginBottom?ns(N.style.marginTop):"",sn=N=>N.style.borderWidth?ns(N.style.borderWidth):"",Do=(N,U)=>{var me;return N.hasAttribute(U)&&(me=N.getAttribute(U))!==null&&me!==void 0?me:""},To=N=>N.parentNode!==null&&N.parentNode.nodeName==="FIGURE",ac=(N,U,me)=>{me===""||me===null?N.removeAttribute(U):N.setAttribute(U,me)},da=N=>{const U=Eo.create("figure",{class:"image"});Eo.insertAfter(U,N),U.appendChild(N),U.appendChild(Eo.create("figcaption",{contentEditable:"true"},"Caption")),U.contentEditable="false"},tn=N=>{const U=N.parentNode;In(U)&&(Eo.insertAfter(N,U),Eo.remove(U))},Bc=N=>{To(N)?tn(N):da(N)},Os=(N,U)=>{const me=N.getAttribute("style"),He=U(me!==null?me:"");He.length>0?(N.setAttribute("style",He),N.setAttribute("data-mce-style",He)):N.removeAttribute("style")},Mc=(N,U)=>(me,He,nn)=>{const Xo=me.style;Xo[He]?(Xo[He]=Ln(nn),Os(me,U)):ac(me,He,nn)},Ma=(N,U)=>N.style[U]?ns(N.style[U]):Do(N,U),zr=(N,U)=>{const me=Ln(U);N.style.marginLeft=me,N.style.marginRight=me},xs=(N,U)=>{const me=Ln(U);N.style.marginTop=me,N.style.marginBottom=me},no=(N,U)=>{const me=Ln(U);N.style.borderWidth=me},rs=(N,U)=>{N.style.borderStyle=U},Za=N=>{var U;return(U=N.style.borderStyle)!==null&&U!==void 0?U:""},Fc=N=>In(N)&&N.nodeName==="FIGURE",ja=N=>N.nodeName==="IMG",dn=N=>{const U=Eo.getAttrib(N,"alt"),me=Eo.getAttrib(N,"role");return N.hasAttribute("alt")&&U.length===0||me==="presentation"||me==="none"},Fr=N=>dn(N)?"":Do(N,"alt"),yr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Ei=(N,U)=>{var me;const He=document.createElement("img");return ac(He,"style",U.style),(Ds(He)||U.hspace!=="")&&zr(He,U.hspace),(Xs(He)||U.vspace!=="")&&xs(He,U.vspace),(sn(He)||U.border!=="")&&no(He,U.border),(Za(He)||U.borderStyle!=="")&&rs(He,U.borderStyle),N((me=He.getAttribute("style"))!==null&&me!==void 0?me:"")},ge=(N,U)=>{const me=document.createElement("img");if(Ao(N,{...U,caption:!1},me),tt(me,U.alt,U.isDecorative),U.caption){const He=Eo.create("figure",{class:"image"});return He.appendChild(me),He.appendChild(Eo.create("figcaption",{contentEditable:"true"},"Caption")),He.contentEditable="false",He}else return me},be=(N,U)=>({src:Do(U,"src"),alt:Fr(U),title:Do(U,"title"),width:Ma(U,"width"),height:Ma(U,"height"),class:Do(U,"class"),style:N(Do(U,"style")),caption:To(U),hspace:Ds(U),vspace:Xs(U),border:sn(U),borderStyle:Za(U),isDecorative:dn(U)}),Be=(N,U,me,He,nn)=>{me[He]!==U[He]&&nn(N,He,String(me[He]))},tt=(N,U,me)=>{if(me){Eo.setAttrib(N,"role","presentation");const He=ot.fromDom(N);No(He,"alt","")}else{if(Tt(U)){const He=ot.fromDom(N);jn(He,"alt")}else{const He=ot.fromDom(N);No(He,"alt",U)}Eo.getAttrib(N,"role")==="presentation"&&Eo.setAttrib(N,"role","")}},Dn=(N,U,me)=>{(me.alt!==U.alt||me.isDecorative!==U.isDecorative)&&tt(N,me.alt,me.isDecorative)},Gn=(N,U)=>(me,He,nn)=>{N(me,nn),Os(me,U)},Ao=(N,U,me)=>{const He=be(N,me);Be(me,He,U,"caption",(nn,Xo,Bs)=>Bc(nn)),Be(me,He,U,"src",ac),Be(me,He,U,"title",ac),Be(me,He,U,"width",Mc("width",N)),Be(me,He,U,"height",Mc("height",N)),Be(me,He,U,"class",ac),Be(me,He,U,"style",Gn((nn,Xo)=>ac(nn,"style",Xo),N)),Be(me,He,U,"hspace",Gn(zr,N)),Be(me,He,U,"vspace",Gn(xs,N)),Be(me,He,U,"border",Gn(no,N)),Be(me,He,U,"borderStyle",Gn(rs,N)),Dn(me,He,U)},Ko=(N,U)=>{const me=N.dom.styles.parse(U),He=Ke(me),nn=N.dom.styles.parse(N.dom.styles.serialize(He));return N.dom.styles.serialize(nn)},Yo=N=>{const U=N.selection.getNode(),me=N.dom.getParent(U,"figure.image");return me?N.dom.select("img",me)[0]:U&&(U.nodeName!=="IMG"||to(U))?null:U},Fo=(N,U)=>{var me;const He=N.dom,nn=rt(N.schema.getTextBlockElements(),(Bs,Or)=>!N.schema.isValidChild(Or,"figure")),Xo=He.getParent(U.parentNode,Bs=>mo(nn,Bs.nodeName),N.getBody());return Xo&&(me=He.split(Xo,U))!==null&&me!==void 0?me:U},Z=N=>{const U=Yo(N);return U?be(me=>Ko(N,me),U):yr()},ve=(N,U)=>{const me=ge(nn=>Ko(N,nn),U);N.dom.setAttrib(me,"data-mce-id","__mcenew"),N.focus(),N.insertContent(me.outerHTML);const He=N.dom.select('*[data-mce-id="__mcenew"]')[0];if(N.dom.setAttrib(He,"data-mce-id",null),Fc(He)){const nn=Fo(N,He);N.selection.select(nn)}else N.selection.select(He)},at=(N,U)=>{N.dom.setAttrib(U,"src",U.getAttribute("src"))},Zt=(N,U)=>{if(U){const me=N.dom.is(U.parentNode,"figure.image")?U.parentNode:U;N.dom.remove(me),N.focus(),N.nodeChanged(),N.dom.isEmpty(N.getBody())&&(N.setContent(""),N.selection.setCursorLocation())}},yt=(N,U)=>{const me=Yo(N);if(me)if(Ao(He=>Ko(N,He),U,me),at(N,me),Fc(me.parentNode)){N.dom.setStyle(me,"float","");const He=me.parentNode;Fo(N,He),N.selection.select(me.parentNode)}else N.selection.select(me),fn(N,U,me)},On=(N,U)=>{const me=U.src;return{...U,src:es(N,me)?me:""}},Sn=(N,U)=>{const me=Yo(N);if(me){const nn={...be(Bs=>Ko(N,Bs),me),...U},Xo=On(N,nn);nn.src?yt(N,Xo):Zt(N,me)}else U.src&&ve(N,{...yr(),...U})};var Xt=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Co=tinymce.util.Tools.resolve("tinymce.util.Tools");const Uo=N=>Lt(N.value)?N.value:"",os=N=>Lt(N.text)?N.text:Lt(N.title)?N.title:"",Cs=(N,U)=>{const me=[];return Co.each(N,He=>{const nn=os(He);if(He.menu!==void 0){const Xo=Cs(He.menu,U);me.push({text:nn,items:Xo})}else{const Xo=U(He);me.push({text:nn,value:Xo})}}),me},xa=(N=Uo)=>U=>U?Jt.from(U).map(me=>Cs(me,N)):Jt.none(),Er=N=>xa(Uo)(N),Ol=N=>k(N,"items"),Gs=(N,U)=>Zn(N,me=>Ol(me)?Gs(me.items,U):me.value===U?Jt.some(me):Jt.none()),Rs={sanitizer:xa,sanitize:Er,findEntry:(N,U)=>N.bind(me=>Gs(me,U))},Hi={makeTab:N=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},er=N=>{const U=Rs.sanitizer(wc=>N.convertURL(wc.value||wc.url||"","src")),me=new Promise(wc=>{At(N,ed=>{wc(U(ed).map(td=>Ze([[{text:"None",value:""}],td])))})}),He=Rs.sanitize(ie(N)),nn=de(N),Xo=ne(N),Bs=go(N),Or=ko(N),Na=Z(N),Cc=ye(N),Jo=wt(N),ul=ce(N),_m=Ae(N),Ui=un(N),ig=Gt(N),Dm=Jt.some(Q(N)).filter(wc=>Lt(wc)&&wc.length>0);return me.then(wc=>({image:Na,imageList:wc,classList:He,hasAdvTab:nn,hasUploadTab:Xo,hasUploadUrl:Bs,hasUploadHandler:Or,hasDescription:Cc,hasImageTitle:Jo,hasDimensions:ul,hasImageCaption:_m,prependURL:Dm,hasAccessibilityOptions:Ui,automaticUploads:ig}))},Kn=N=>{const U={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},me=N.imageList.map(Jo=>({name:"images",type:"listbox",label:"Image list",items:Jo})),He={name:"alt",type:"input",label:"Alternative description",enabled:!(N.hasAccessibilityOptions&&N.image.isDecorative)},nn={name:"title",type:"input",label:"Image title"},Xo={name:"dimensions",type:"sizeinput"},Bs={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Or=N.classList.map(Jo=>({name:"classes",type:"listbox",label:"Class",items:Jo})),Na={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Cc=Jo=>Jo?{type:"grid",columns:2}:{type:"panel"};return Ze([[U],me.toArray(),N.hasAccessibilityOptions&&N.hasDescription?[Bs]:[],N.hasDescription?[He]:[],N.hasImageTitle?[nn]:[],N.hasDimensions?[Xo]:[],[{...Cc(N.classList.isSome()&&N.hasImageCaption),items:Ze([Or.toArray(),N.hasImageCaption?[Na]:[]])}]])},Ea={makeTab:N=>({title:"General",name:"general",items:Kn(N)}),makeItems:Kn},Yu={makeTab:N=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},hu=N=>({prevImage:Rs.findEntry(N.imageList,N.image.src),prevAlt:N.image.alt,open:!0}),Js=N=>({src:{value:N.src,meta:{}},images:N.src,alt:N.alt,title:N.title,dimensions:{width:N.width,height:N.height},classes:N.class,caption:N.caption,style:N.style,vspace:N.vspace,border:N.border,hspace:N.hspace,borderstyle:N.borderStyle,fileinput:[],isDecorative:N.isDecorative}),Ti=(N,U)=>({src:N.src.value,alt:(N.alt===null||N.alt.length===0)&&U?null:N.alt,title:N.title,width:N.dimensions.width,height:N.dimensions.height,class:N.classes,style:N.style,caption:N.caption,hspace:N.hspace,vspace:N.vspace,border:N.border,borderStyle:N.borderstyle,isDecorative:N.isDecorative}),si=(N,U)=>/^(?:[a-zA-Z]+:)?\/\//.test(U)?Jt.none():N.prependURL.bind(me=>U.substring(0,me.length)!==me?Jt.some(me+U):Jt.none()),Xu=(N,U)=>{const me=U.getData();si(N,me.src.value).each(He=>{U.setData({src:{value:He,meta:me.src.meta}})})},Ut=(N,U,me)=>{N.hasDescription&&Lt(me.alt)&&(U.alt=me.alt),N.hasAccessibilityOptions&&(U.isDecorative=me.isDecorative||U.isDecorative||!1),N.hasImageTitle&&Lt(me.title)&&(U.title=me.title),N.hasDimensions&&(Lt(me.width)&&(U.dimensions.width=me.width),Lt(me.height)&&(U.dimensions.height=me.height)),Lt(me.class)&&Rs.findEntry(N.classList,me.class).each(He=>{U.classes=He.value}),N.hasImageCaption&&mn(me.caption)&&(U.caption=me.caption),N.hasAdvTab&&(Lt(me.style)&&(U.style=me.style),Lt(me.vspace)&&(U.vspace=me.vspace),Lt(me.border)&&(U.border=me.border),Lt(me.hspace)&&(U.hspace=me.hspace),Lt(me.borderstyle)&&(U.borderstyle=me.borderstyle))},Nc=(N,U)=>{const me=U.getData(),He=me.src.meta;if(He!==void 0){const nn=ln({},me);Ut(N,nn,He),U.setData(nn)}},Fa=(N,U,me,He)=>{const nn=He.getData(),Xo=nn.src.value,Bs=nn.src.meta||{};!Bs.width&&!Bs.height&&U.hasDimensions&&(Ce(Xo)?N.imageSize(Xo).then(Or=>{me.open&&He.setData({dimensions:Or})}).catch(Or=>console.error(Or)):He.setData({dimensions:{width:"",height:""}}))},qa=(N,U,me)=>{const He=me.getData(),nn=Rs.findEntry(N.imageList,He.src.value);U.prevImage=nn,me.setData({images:nn.map(Xo=>Xo.value).getOr("")})},ir=(N,U,me,He)=>{Xu(U,He),Nc(U,He),Fa(N,U,me,He),qa(U,me,He)},pu=(N,U,me,He)=>{const nn=He.getData(),Xo=Rs.findEntry(U.imageList,nn.images);Xo.each(Bs=>{nn.alt===""||me.prevImage.map(Na=>Na.text===nn.alt).getOr(!1)?Bs.value===""?He.setData({src:Bs,alt:me.prevAlt}):He.setData({src:Bs,alt:Bs.text}):He.setData({src:Bs})}),me.prevImage=Xo,ir(N,U,me,He)},Ga=(N,U,me,He)=>{const nn=He.getData();He.block("Uploading image"),Rt(nn.fileinput).fold(()=>{He.unblock()},Xo=>{const Bs=URL.createObjectURL(Xo),Or=()=>{He.unblock(),URL.revokeObjectURL(Bs)},Na=Cc=>{He.setData({src:{value:Cc,meta:{}}}),He.showTab("general"),ir(N,U,me,He),He.focus("src")};an(Xo).then(Cc=>{const Jo=N.createBlobCache(Xo,Bs,Cc);U.automaticUploads?N.uploadImage(Jo).then(ul=>{Na(ul.url),Or()}).catch(ul=>{Or(),N.alertErr(ul,()=>{He.focus("fileinput")})}):(N.addToBlobCache(Jo),Na(Jo.blobUri()),He.unblock())})})},yc=(N,U,me)=>(He,nn)=>{nn.name==="src"?ir(N,U,me,He):nn.name==="images"?pu(N,U,me,He):nn.name==="alt"?me.prevAlt=He.getData().alt:nn.name==="fileinput"?Ga(N,U,me,He):nn.name==="isDecorative"&&He.setEnabled("alt",!He.getData().isDecorative)},Rl=N=>()=>{N.open=!1},Ju=N=>N.hasAdvTab||N.hasUploadUrl||N.hasUploadHandler?{type:"tabpanel",tabs:Ze([[Ea.makeTab(N)],N.hasAdvTab?[Hi.makeTab(N)]:[],N.hasUploadTab&&(N.hasUploadUrl||N.hasUploadHandler)?[Yu.makeTab(N)]:[]])}:{type:"panel",items:Ea.makeItems(N)},zi=(N,U,me)=>He=>{const nn=ln(Js(U.image),He.getData()),Xo={...nn,style:Ei(me.normalizeCss,Ti(nn,!1))};N.execCommand("mceUpdateImage",!1,Ti(Xo,U.hasAccessibilityOptions)),N.editorUpload.uploadImagesAuto(),He.close()},bu=N=>U=>es(N,U)?_n(N.documentBaseURI.toAbsolute(U)).then(me=>({width:String(me.width),height:String(me.height)})):Promise.resolve({width:"",height:""}),Bl=N=>(U,me,He)=>{var nn;return N.editorUpload.blobCache.create({blob:U,blobUri:me,name:(nn=U.name)===null||nn===void 0?void 0:nn.replace(/\.[^\.]+$/,""),filename:U.name,base64:He.split(",")[1]})},Vi=N=>U=>{N.editorUpload.blobCache.add(U)},Ml=N=>(U,me)=>{N.windowManager.alert(U,me)},Nt=N=>U=>Ko(N,U),ll=N=>U=>N.dom.parseStyle(U),Qu=N=>(U,me)=>N.dom.serializeStyle(U,me),H=N=>U=>Xt(N).upload([U],!1).then(me=>{var He;return me.length===0?Promise.reject("Failed to upload image"):me[0].status===!1?Promise.reject((He=me[0].error)===null||He===void 0?void 0:He.message):me[0]}),le=N=>{const U={imageSize:bu(N),addToBlobCache:Vi(N),createBlobCache:Bl(N),alertErr:Ml(N),normalizeCss:Nt(N),parseStyle:ll(N),serializeStyle:Qu(N),uploadImage:H(N)};return{open:()=>{er(N).then(He=>{const nn=hu(He);return{title:"Insert/Edit Image",size:"normal",body:Ju(He),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Js(He.image),onSubmit:zi(N,He,U),onChange:yc(U,He,nn),onClose:Rl(nn)}}).then(N.windowManager.open)}}},ke=N=>{N.addCommand("mceImage",le(N).open),N.addCommand("mceUpdateImage",(U,me)=>{N.undoManager.transact(()=>Sn(N,me))})},Xe=N=>{const U=N.attr("class");return In(U)&&/\bimage\b/.test(U)},Mt=N=>U=>{let me=U.length;const He=nn=>{nn.attr("contenteditable",N?"true":null)};for(;me--;){const nn=U[me];Xe(nn)&&(nn.attr("contenteditable",N?"false":null),Co.each(nn.getAll("figcaption"),He))}},cn=N=>{N.on("PreInit",()=>{N.parser.addNodeFilter("figure",Mt(!0)),N.serializer.addNodeFilter("figure",Mt(!1))})},Po=N=>U=>{const me=()=>{U.setEnabled(N.selection.isEditable())};return N.on("NodeChange",me),me(),()=>{N.off("NodeChange",me)}},So=N=>{N.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:le(N).open,onSetup:U=>{U.setActive(In(Yo(N)));const me=N.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",U.setActive).unbind,He=Po(N)(U);return()=>{me(),He()}}}),N.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:le(N).open,onSetup:Po(N)}),N.ui.registry.addContextMenu("image",{update:U=>N.selection.isEditable()&&(Fc(U)||ja(U)&&!to(U))?["image"]:[]})};var fs=()=>{qt.add("image",N=>{j(N),cn(N),So(N),ke(N)})};fs()})()),IX}var HX;function $Q(){return HX||(HX=1,PQ()),$X}$Q();var zX={},VX={},UX;function IQ(){return UX||(UX=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mn=(j,ce)=>j.dispatch("insertCustomChar",{chr:ce}),Fn=(j,ce)=>{const de=Mn(j,ce).chr;j.execCommand("mceInsertContent",!1,de)},Xn=(j,ce,de)=>{var ne;return de(j,ce.prototype)?!0:((ne=j.constructor)===null||ne===void 0?void 0:ne.name)===ce.name},$n=j=>{const ce=typeof j;return j===null?"null":ce==="object"&&Array.isArray(j)?"array":ce==="object"&&Xn(j,String,(de,ne)=>ne.isPrototypeOf(de))?"string":ce},Pn=j=>ce=>$n(ce)===j,so=j=>ce=>typeof ce===j,ct=j=>ce=>j===ce,Lt=Pn("array"),st=ct(null),qo=ct(void 0),rn=j=>j==null,Tt=j=>!rn(j),mn=so("function"),In=(j=>()=>j)(!1);class nt{constructor(ce,de){this.tag=ce,this.value=de}static some(ce){return new nt(!0,ce)}static none(){return nt.singletonNone}fold(ce,de){return this.tag?de(this.value):ce()}isSome(){return this.tag}isNone(){return!this.tag}map(ce){return this.tag?nt.some(ce(this.value)):nt.none()}bind(ce){return this.tag?ce(this.value):nt.none()}exists(ce){return this.tag&&ce(this.value)}forall(ce){return!this.tag||ce(this.value)}filter(ce){return!this.tag||ce(this.value)?this:nt.none()}getOr(ce){return this.tag?this.value:ce}or(ce){return this.tag?this:ce}getOrThunk(ce){return this.tag?this.value:ce()}orThunk(ce){return this.tag?this:ce()}getOrDie(ce){if(this.tag)return this.value;throw new Error(ce??"Called getOrDie on None")}static from(ce){return Tt(ce)?nt.some(ce):nt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ce){this.tag&&ce(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}nt.singletonNone=new nt(!1);const Oo=Array.prototype.push,_t=(j,ce)=>{const de=j.length,ne=new Array(de);for(let Q=0;Q<de;Q++){const ie=j[Q];ne[Q]=ce(ie,Q)}return ne},ae=(j,ce)=>{for(let de=0,ne=j.length;de<ne;de++){const Q=j[de];ce(Q,de)}},Jt=(j,ce,de)=>{for(let ne=0,Q=j.length;ne<Q;ne++){const ie=j[ne];if(ce(ie,ne))return nt.some(ie);if(de(ie,ne))break}return nt.none()},Lo=(j,ce)=>Jt(j,ce,In),Ze=j=>{const ce=[];for(let de=0,ne=j.length;de<ne;++de){if(!Lt(j[de]))throw new Error("Arr.flatten item "+de+" was not an array, input: "+j);Oo.apply(ce,j[de])}return ce},q=(j,ce)=>Ze(_t(j,ce)),Rt=j=>{let ce=j;return{get:()=>ce,set:Q=>{ce=Q}}},Zn=(j,ce,de=0,ne)=>{const Q=j.indexOf(ce,de);return Q!==-1?qo(ne)?!0:Q+ce.length<=ne:!1},gn=String.fromCodePoint,_e=(j,ce)=>{let de=null;const ne=()=>{st(de)||(clearTimeout(de),de=null)};return{cancel:ne,throttle:(...ie)=>{ne(),de=setTimeout(()=>{de=null,j.apply(null,ie)},ce)}}};var fe=tinymce.util.Tools.resolve("tinymce.util.Tools");const cs=j=>ce=>ce.options.get(j),Je=j=>{const ce=j.options.register,de=ne=>mn(ne)||Lt(ne);ce("charmap",{processor:de}),ce("charmap_append",{processor:de})},rt=cs("charmap"),k=cs("charmap_append"),mo=fe.isArray,it="User Defined",Mo=()=>[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}],ln=j=>fe.grep(j,ce=>mo(ce)&&ce.length===2),Ce=j=>mo(j)?ln(j):typeof j=="function"?j():[],dt=(j,ce)=>{const de=rt(j);de&&(ce=[{name:it,characters:Ce(de)}]);const ne=k(j);if(ne){const Q=fe.grep(ce,ie=>ie.name===it);return Q.length?(Q[0].characters=[...Q[0].characters,...Ce(ne)],ce):ce.concat({name:it,characters:Ce(ne)})}return ce},wn=j=>{const ce=dt(j,Mo());return ce.length>1?[{name:"All",characters:q(ce,de=>de.characters)}].concat(ce):ce},Ve=j=>({getCharMap:()=>wn(j),insertChar:ne=>{Fn(j,ne)}}),Ht=(j,ce,de)=>Zn(gn(j).toLowerCase(),de)?!0:Zn(ce.toLowerCase(),de)||Zn(ce.toLowerCase().replace(/\s+/g,""),de),Oe=(j,ce)=>{const de=[],ne=ce.toLowerCase();return ae(j.characters,Q=>{Ht(Q[0],Q[1],ne)&&de.push(Q)}),_t(de,Q=>({text:Q[1],value:gn(Q[0]),icon:gn(Q[0])}))},ot="pattern",F=(j,ce)=>{const de=()=>[{label:"Search",type:"input",name:ot},{type:"collection",name:"results"}],ne=()=>_t(ce,_o=>({title:_o.name,name:_o.name,items:de()})),Q=()=>({type:"panel",items:de()}),ie=()=>({type:"tabpanel",tabs:ne()}),ye=ce.length===1?Rt(it):Rt("All"),wt=(_o,_n)=>{Lo(ce,ns=>ns.name===ye.get()).each(ns=>{const Ln=Oe(ns,_n);_o.setData({results:Ln})})},Ne=_e(_o=>{const _n=_o.getData().pattern;wt(_o,_n)},40),un=ce.length===1?Q():ie(),Gt={pattern:"",results:Oe(ce[0],"")},go={title:"Special Character",size:"normal",body:un,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:Gt,onAction:(_o,_n)=>{_n.name==="results"&&(Fn(j,_n.value),_o.close())},onTabChange:(_o,_n)=>{ye.set(_n.newTabName),Ne.throttle(_o)},onChange:(_o,_n)=>{_n.name===ot&&Ne.throttle(_o)}};j.windowManager.open(go).focus(ot)},No=(j,ce)=>{j.addCommand("mceShowCharmap",()=>{F(j,ce)})},jn=(j,ce)=>{j.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(de,ne)=>new Promise((Q,ie)=>{Q(Oe(ce,de))}),onAction:(de,ne,Q)=>{j.selection.setRng(ne),j.insertContent(Q),de.hide()}})},qn=j=>ce=>{const de=()=>{ce.setEnabled(j.selection.isEditable())};return j.on("NodeChange",de),de(),()=>{j.off("NodeChange",de)}},yo=j=>{const ce=()=>j.execCommand("mceShowCharmap");j.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:ce,onSetup:qn(j)}),j.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:ce,onSetup:qn(j)})};var ht=()=>{qt.add("charmap",j=>{Je(j);const ce=wn(j);return No(j,ce),yo(j),jn(j,ce[0]),Ve(j)})};ht()})()),VX}var WX;function LQ(){return WX||(WX=1,IQ()),zX}LQ();var ZX={},jX={},qX;function HQ(){return qX||(qX=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Fn=(Ke=>At=>Ke===At)(void 0),Xn=Ke=>Ke==null,$n=Ke=>!Xn(Ke),Pn=Ke=>()=>Ke,so=Pn(!1);class ct{constructor(At,fn){this.tag=At,this.value=fn}static some(At){return new ct(!0,At)}static none(){return ct.singletonNone}fold(At,fn){return this.tag?fn(this.value):At()}isSome(){return this.tag}isNone(){return!this.tag}map(At){return this.tag?ct.some(At(this.value)):ct.none()}bind(At){return this.tag?At(this.value):ct.none()}exists(At){return this.tag&&At(this.value)}forall(At){return!this.tag||At(this.value)}filter(At){return!this.tag||At(this.value)?this:ct.none()}getOr(At){return this.tag?this.value:At}or(At){return this.tag?this:At}getOrThunk(At){return this.tag?this.value:At()}orThunk(At){return this.tag?this:At()}getOrDie(At){if(this.tag)return this.value;throw new Error(At??"Called getOrDie on None")}static from(At){return $n(At)?ct.some(At):ct.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(At){this.tag&&At(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ct.singletonNone=new ct(!1);const Lt=(Ke,At,fn)=>{for(let an=0,to=Ke.length;an<to;an++){const es=Ke[an];if(At(es,an))return ct.some(es);if(fn(es,an))break}return ct.none()},st=(Ke,At)=>Lt(Ke,At,so),qo=(Ke,At)=>{for(let fn=0;fn<Ke.length;fn++){const an=At(Ke[fn],fn);if(an.isSome())return an}return ct.none()},rn=(Ke,At,fn=0,an)=>{const to=Ke.indexOf(At,fn);return to!==-1?Fn(an)?!0:to+At.length<=an:!1},Tt=Ke=>{let At=!1,fn;return(...an)=>(At||(At=!0,fn=Ke.apply(null,an)),fn)},mn=(Ke,At,fn,an)=>{const to=Ke.isiOS()&&/ipad/i.test(fn)===!0,es=Ke.isiOS()&&!to,Eo=Ke.isiOS()||Ke.isAndroid(),Ds=Eo||an("(pointer:coarse)"),Xs=to||!es&&Eo&&an("(min-device-width:768px)"),sn=es||Eo&&!Xs,Do=At.isSafari()&&Ke.isiOS()&&/safari/i.test(fn)===!1,To=!sn&&!Xs&&!Do;return{isiPad:Pn(to),isiPhone:Pn(es),isTablet:Pn(Xs),isPhone:Pn(sn),isTouch:Pn(Ds),isAndroid:Ke.isAndroid,isiOS:Ke.isiOS,isWebView:Pn(Do),isDesktop:Pn(To)}},fo=(Ke,At)=>{for(let fn=0;fn<Ke.length;fn++){const an=Ke[fn];if(an.test(At))return an}},In=(Ke,At)=>{const fn=fo(Ke,At);if(!fn)return{major:0,minor:0};const an=to=>Number(At.replace(fn,"$"+to));return _t(an(1),an(2))},nt=(Ke,At)=>{const fn=String(At).toLowerCase();return Ke.length===0?Oo():In(Ke,fn)},Oo=()=>_t(0,0),_t=(Ke,At)=>({major:Ke,minor:At}),ae={nu:_t,detect:nt,unknown:Oo},Jt=(Ke,At)=>qo(At.brands,fn=>{const an=fn.brand.toLowerCase();return st(Ke,to=>{var es;return an===((es=to.brand)===null||es===void 0?void 0:es.toLowerCase())}).map(to=>({current:to.name,version:ae.nu(parseInt(fn.version,10),0)}))}),Lo=(Ke,At)=>{const fn=String(At).toLowerCase();return st(Ke,an=>an.search(fn))},Ze=(Ke,At)=>Lo(Ke,At).map(fn=>{const an=ae.detect(fn.versionRegexes,At);return{current:fn.name,version:an}}),q=(Ke,At)=>Lo(Ke,At).map(fn=>{const an=ae.detect(fn.versionRegexes,At);return{current:fn.name,version:an}}),Rt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Zn=Ke=>At=>rn(At,Ke),gn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:Ke=>rn(Ke,"edge/")&&rn(Ke,"chrome")&&rn(Ke,"safari")&&rn(Ke,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Rt],search:Ke=>rn(Ke,"chrome")&&!rn(Ke,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:Ke=>rn(Ke,"msie")||rn(Ke,"trident")},{name:"Opera",versionRegexes:[Rt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Zn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Zn("firefox")},{name:"Safari",versionRegexes:[Rt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:Ke=>(rn(Ke,"safari")||rn(Ke,"mobile/"))&&rn(Ke,"applewebkit")}],_e=[{name:"Windows",search:Zn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:Ke=>rn(Ke,"iphone")||rn(Ke,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Zn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Zn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Zn("linux"),versionRegexes:[]},{name:"Solaris",search:Zn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Zn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Zn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],fe={browsers:Pn(gn),oses:Pn(_e)},cs="Edge",Je="Chromium",rt="IE",k="Opera",mo="Firefox",it="Safari",Mo=()=>ln({current:void 0,version:ae.unknown()}),ln=Ke=>{const At=Ke.current,fn=Ke.version,an=to=>()=>At===to;return{current:At,version:fn,isEdge:an(cs),isChromium:an(Je),isIE:an(rt),isOpera:an(k),isFirefox:an(mo),isSafari:an(it)}},Ce={unknown:Mo,nu:ln},dt="Windows",wn="iOS",Ve="Android",Ht="Linux",Oe="macOS",ot="Solaris",F="FreeBSD",No="ChromeOS",jn=()=>qn({current:void 0,version:ae.unknown()}),qn=Ke=>{const At=Ke.current,fn=Ke.version,an=to=>()=>At===to;return{current:At,version:fn,isWindows:an(dt),isiOS:an(wn),isAndroid:an(Ve),isMacOS:an(Oe),isLinux:an(Ht),isSolaris:an(ot),isFreeBSD:an(F),isChromeOS:an(No)}},yo={unknown:jn,nu:qn},j={detect:(Ke,At,fn)=>{const an=fe.browsers(),to=fe.oses(),es=At.bind(Xs=>Jt(an,Xs)).orThunk(()=>Ze(an,Ke)).fold(Ce.unknown,Ce.nu),Eo=q(to,Ke).fold(yo.unknown,yo.nu),Ds=mn(Eo,es,Ke,fn);return{browser:es,os:Eo,deviceType:Ds}}},ce=Ke=>window.matchMedia(Ke).matches;let de=Tt(()=>j.detect(window.navigator.userAgent,ct.from(window.navigator.userAgentData),ce));const ne=()=>de(),Q=()=>ne().os.isMacOS(),ie=()=>ne().os.isiOS(),ye=()=>{const Ke=Q()||ie();return`<script>(${(fn=>{document.addEventListener("click",an=>{for(let to=an.target;to;to=to.parentNode)if(to.nodeName==="A"){const Eo=to.getAttribute("href");if(Eo&&Eo.startsWith("#")){an.preventDefault();const Xs=document.getElementById(Eo.substring(1));Xs&&Xs.scrollIntoView({behavior:"smooth"});return}(fn?an.metaKey:an.ctrlKey&&!an.altKey)||an.preventDefault()}},!1)}).toString()})(${Ke})<\/script>`};var wt=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ae=Ke=>At=>At.options.get(Ke),Ne=Ae("content_style"),un=Ae("content_css_cors"),Gt=Ae("body_class"),go=Ae("body_id"),ko=Ke=>{var At;let fn="";const an=Ke.dom.encode,to=(At=Ne(Ke))!==null&&At!==void 0?At:"";fn+=`<base href="${an(Ke.documentBaseURI.getURI())}">`;const es=un(Ke)?' crossorigin="anonymous"':"";wt.each(Ke.contentCSS,To=>{fn+='<link type="text/css" rel="stylesheet" href="'+an(Ke.documentBaseURI.toAbsolute(To))+'"'+es+">"}),to&&(fn+='<style type="text/css">'+to+"</style>");const Eo=go(Ke),Ds=Gt(Ke),Xs=Ke.getBody().dir,sn=Xs?' dir="'+an(Xs)+'"':"";return"<!DOCTYPE html><html><head>"+fn+'</head><body id="'+an(Eo)+'" class="mce-content-body '+an(Ds)+'"'+sn+">"+Ke.getContent()+ye()+"</body></html>"},_o=Ke=>{const At=ko(Ke);Ke.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:At}}).focus("close")},_n=Ke=>{Ke.addCommand("mcePreview",()=>{_o(Ke)})},ns=Ke=>{const At=()=>Ke.execCommand("mcePreview");Ke.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:At,context:"any"}),Ke.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:At,context:"any"})};var Ln=()=>{qt.add("preview",Ke=>{_n(Ke),ns(Ke)})};Ln()})()),jX}var GX;function zQ(){return GX||(GX=1,HQ()),ZX}zQ();var KX={},YX={},XX;function VQ(){return XX||(XX=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager"),Mn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Fn=tinymce.util.Tools.resolve("tinymce.util.Tools");const Xn=Je=>rt=>rt.options.get(Je),$n=Je=>{const rt=Je.options.register;rt("allow_html_in_named_anchor",{processor:"boolean",default:!1})},Pn=Xn("allow_html_in_named_anchor"),so="a:not([href])",ct=Je=>!Je,Lt=Je=>Je.getAttribute("id")||Je.getAttribute("name")||"",st=Je=>Je.nodeName.toLowerCase()==="a",qo=Je=>st(Je)&&!Je.getAttribute("href")&&Lt(Je)!=="",rn=Je=>qo(Je)&&!Je.firstChild,Tt=Je=>{const rt=Je.dom;Mn(rt).walk(Je.selection.getRng(),k=>{Fn.each(k,mo=>{rn(mo)&&rt.remove(mo,!1)})})},mn=Je=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(Je),fo=Je=>Je.dom.getParent(Je.selection.getStart(),so),In=Je=>{const rt=fo(Je);return rt?Lt(rt):""},nt=(Je,rt)=>{Je.undoManager.transact(()=>{Pn(Je)||Je.selection.collapse(!0),Je.selection.isCollapsed()?Je.insertContent(Je.dom.createHTML("a",{id:rt})):(Tt(Je),Je.formatter.remove("namedAnchor",void 0,void 0,!0),Je.formatter.apply("namedAnchor",{value:rt}),Je.addVisual())})},Oo=(Je,rt,k)=>{k.removeAttribute("name"),k.id=rt,Je.addVisual(),Je.undoManager.add()},_t=(Je,rt)=>{const k=fo(Je);k?Oo(Je,rt,k):nt(Je,rt),Je.focus()},ae=(Je,rt)=>mn(rt)?(_t(Je,rt),!0):(Je.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),Jt=Je=>{const rt=In(Je);Je.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:rt},onSubmit:k=>{ae(Je,k.getData().id)&&k.close()}})},Lo=Je=>{Je.addCommand("mceAnchor",()=>{Jt(Je)})},Ze=Je=>ct(Je.attr("href"))&&!ct(Je.attr("id")||Je.attr("name")),q=Je=>Ze(Je)&&!Je.firstChild,Rt=Je=>rt=>{for(let k=0;k<rt.length;k++){const mo=rt[k];q(mo)&&mo.attr("contenteditable",Je)}},Zn=Je=>{Je.on("PreInit",()=>{Je.parser.addNodeFilter("a",Rt("false")),Je.serializer.addNodeFilter("a",Rt(null))})},gn=Je=>{Je.formatter.register("namedAnchor",{inline:"a",selector:so,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(rt,k,mo)=>qo(rt)})},_e=Je=>rt=>{const k=()=>{rt.setEnabled(Je.selection.isEditable())};return Je.on("NodeChange",k),k(),()=>{Je.off("NodeChange",k)}},fe=Je=>{const rt=()=>Je.execCommand("mceAnchor");Je.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:rt,onSetup:k=>{const mo=Je.selection.selectorChangedWithUnbind("a:not([href])",k.setActive).unbind,it=_e(Je)(k);return()=>{mo(),it()}}}),Je.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:rt,onSetup:_e(Je)})};var cs=()=>{qt.add("anchor",Je=>{$n(Je),Zn(Je),Lo(Je),fe(Je),Je.on("PreInit",()=>{gn(Je)})})};cs()})()),YX}var JX;function UQ(){return JX||(JX=1,VQ()),KX}UQ();var QX={},eJ={},tJ;function WQ(){return tJ||(tJ=1,(function(){const qt=(Z,ve,at)=>{var Zt;return at(Z,ve.prototype)?!0:((Zt=Z.constructor)===null||Zt===void 0?void 0:Zt.name)===ve.name},Mn=Z=>{const ve=typeof Z;return Z===null?"null":ve==="object"&&Array.isArray(Z)?"array":ve==="object"&&qt(Z,String,(at,Zt)=>Zt.isPrototypeOf(at))?"string":ve},Fn=Z=>ve=>Mn(ve)===Z,Xn=Z=>ve=>typeof ve===Z,$n=Fn("string"),Pn=Fn("array"),so=Xn("boolean"),ct=Z=>Z==null,Lt=Z=>!ct(Z),st=Xn("number"),qo=()=>{},rn=Z=>()=>Z,Tt=rn(!0);class mn{constructor(ve,at){this.tag=ve,this.value=at}static some(ve){return new mn(!0,ve)}static none(){return mn.singletonNone}fold(ve,at){return this.tag?at(this.value):ve()}isSome(){return this.tag}isNone(){return!this.tag}map(ve){return this.tag?mn.some(ve(this.value)):mn.none()}bind(ve){return this.tag?ve(this.value):mn.none()}exists(ve){return this.tag&&ve(this.value)}forall(ve){return!this.tag||ve(this.value)}filter(ve){return!this.tag||ve(this.value)?this:mn.none()}getOr(ve){return this.tag?this.value:ve}or(ve){return this.tag?this:ve}getOrThunk(ve){return this.tag?this.value:ve()}orThunk(ve){return this.tag?this:ve()}getOrDie(ve){if(this.tag)return this.value;throw new Error(ve??"Called getOrDie on None")}static from(ve){return Lt(ve)?mn.some(ve):mn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ve){this.tag&&ve(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}mn.singletonNone=new mn(!1);const fo=Array.prototype.slice,In=Array.prototype.push,nt=(Z,ve)=>{const at=Z.length,Zt=new Array(at);for(let yt=0;yt<at;yt++){const On=Z[yt];Zt[yt]=ve(On,yt)}return Zt},Oo=(Z,ve)=>{for(let at=0,Zt=Z.length;at<Zt;at++){const yt=Z[at];ve(yt,at)}},_t=(Z,ve)=>{for(let at=Z.length-1;at>=0;at--){const Zt=Z[at];ve(Zt,at)}},ae=(Z,ve)=>{if(Z.length===0)return[];{let at=ve(Z[0]);const Zt=[];let yt=[];for(let On=0,Sn=Z.length;On<Sn;On++){const Xt=Z[On],Co=ve(Xt);Co!==at&&(Zt.push(yt),yt=[]),at=Co,yt.push(Xt)}return yt.length!==0&&Zt.push(yt),Zt}},Jt=(Z,ve,at)=>(Oo(Z,(Zt,yt)=>{at=ve(at,Zt,yt)}),at),Lo=Z=>{const ve=[];for(let at=0,Zt=Z.length;at<Zt;++at){if(!Pn(Z[at]))throw new Error("Arr.flatten item "+at+" was not an array, input: "+Z);In.apply(ve,Z[at])}return ve},Ze=(Z,ve)=>Lo(nt(Z,ve)),q=(Z,ve)=>{const at=fo.call(Z,0);return at.sort(ve),at},Rt=Object.hasOwnProperty,Zn=(Z,ve)=>Rt.call(Z,ve),gn=Z=>{let ve=Z;return{get:()=>ve,set:yt=>{ve=yt}}},_e=Z=>{const ve=gn(mn.none()),at=()=>ve.get().each(Z);return{clear:()=>{at(),ve.set(mn.none())},isSet:()=>ve.get().isSome(),get:()=>ve.get(),set:Xt=>{at(),ve.set(mn.some(Xt))}}},fe=()=>{const Z=_e(qo);return{...Z,on:at=>Z.get().each(at)}};var cs=tinymce.util.Tools.resolve("tinymce.PluginManager");const k=rn("[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]");var mo=tinymce.util.Tools.resolve("tinymce.Env"),it=tinymce.util.Tools.resolve("tinymce.util.Tools");const Mo=(Z,ve)=>{const Zt=(ve||document).createElement("div");if(Zt.innerHTML=Z,!Zt.hasChildNodes()||Zt.childNodes.length>1){const yt="HTML does not have a single root node";throw console.error(yt,Z),new Error(yt)}return dt(Zt.childNodes[0])},ln=(Z,ve)=>{const Zt=(ve||document).createElement(Z);return dt(Zt)},Ce=(Z,ve)=>{const Zt=(ve||document).createTextNode(Z);return dt(Zt)},dt=Z=>{if(Z==null)throw new Error("Node cannot be null or undefined");return{dom:Z}},Ve={fromHtml:Mo,fromTag:ln,fromText:Ce,fromDom:dt,fromPoint:(Z,ve,at)=>mn.from(Z.dom.elementFromPoint(ve,at)).map(dt)},Ht=9,Oe=11,ot=1,F=3,No=Z=>Z.nodeType!==ot&&Z.nodeType!==Ht&&Z.nodeType!==Oe||Z.childElementCount===0,jn=(Z,ve)=>{const at=ve===void 0?document:ve.dom;return No(at)?[]:nt(at.querySelectorAll(Z),Ve.fromDom)},qn=(Z,ve,at)=>(Z.compareDocumentPosition(ve)&at)!==0,yo=(Z,ve)=>qn(Z,ve,Node.DOCUMENT_POSITION_PRECEDING),ht=Z=>Z.dom.nodeType,ce=(Z=>ve=>ht(ve)===Z)(F),de=Z=>mn.from(Z.dom.parentNode).map(Ve.fromDom),ne=Z=>nt(Z.dom.childNodes,Ve.fromDom),Q=(Z,ve)=>({element:Z,offset:ve}),ie=(Z,ve)=>{const at=ne(Z);return at.length>0&&ve<at.length?Q(at[ve],0):Q(Z,ve)},ye=(Z,ve)=>{de(Z).each(Zt=>{Zt.dom.insertBefore(ve.dom,Z.dom)})},wt=(Z,ve)=>{Z.dom.appendChild(ve.dom)},Ae=(Z,ve)=>{ye(Z,ve),wt(ve,Z)},Ne=(Z,ve,at)=>{if($n(at)||so(at)||st(at))Z.setAttribute(ve,at+"");else throw console.error("Invalid call to Attribute.set. Key ",ve,":: Value ",at,":: Element ",Z),new Error("Attribute value was not simple")},un=(Z,ve,at)=>{Ne(Z.dom,ve,at)},go=((Z,ve)=>{const at=On=>{if(!Z(On))throw new Error("Can only get "+ve+" value of a "+ve+" node");return Zt(On).getOr("")},Zt=On=>Z(On)?mn.from(On.dom.nodeValue):mn.none();return{get:at,getOption:Zt,set:(On,Sn)=>{if(!Z(On))throw new Error("Can only set raw "+ve+" value of a "+ve+" node");On.dom.nodeValue=Sn}}})(ce,"text"),ko=Z=>go.get(Z),_o=(Z,ve)=>jn(ve,Z);var _n=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const ns=(Z,ve)=>Z.isBlock(ve)||Zn(Z.schema.getVoidElements(),ve.nodeName),Ln=(Z,ve)=>!Z.isEditable(ve),Ke=(Z,ve)=>Z.getContentEditable(ve)==="true"&&ve.parentNode&&!Z.isEditable(ve.parentNode),At=(Z,ve)=>!Z.isBlock(ve)&&Zn(Z.schema.getWhitespaceElements(),ve.nodeName),fn=(Z,ve)=>ns(Z,ve)||Ln(Z,ve)||At(Z,ve)||Ke(Z,ve),an=Z=>Z.nodeType===3,to=()=>({sOffset:0,fOffset:0,elements:[]}),es=(Z,ve)=>ie(Ve.fromDom(Z),ve),Eo=(Z,ve,at,Zt,yt,On=!0)=>{let Sn=On?ve(!1):at;for(;Sn;){const Xt=Ln(Z,Sn);if(Xt||At(Z,Sn)){if(Xt?Zt.cef(Sn):Zt.boundary(Sn))break;Sn=ve(!0);continue}else if(ns(Z,Sn)){if(Zt.boundary(Sn))break}else an(Sn)&&Zt.text(Sn);if(Sn===yt)break;Sn=ve(!1)}},Ds=(Z,ve,at,Zt,yt)=>{var On;if(fn(Z,at))return;const Sn=(On=Z.getParent(Zt,Z.isBlock))!==null&&On!==void 0?On:Z.getRoot(),Xt=new _n(at,Sn),Co=yt?Xt.next.bind(Xt):Xt.prev.bind(Xt);Eo(Z,Co,at,{boundary:Tt,cef:Tt,text:Uo=>{yt?ve.fOffset+=Uo.length:ve.sOffset+=Uo.length,ve.elements.push(Ve.fromDom(Uo))}})},Xs=(Z,ve,at,Zt,yt,On=!0)=>{const Sn=new _n(at,ve),Xt=[];let Co=to();Ds(Z,Co,at,ve,!1);const Uo=()=>(Co.elements.length>0&&(Xt.push(Co),Co=to()),!1);return Eo(Z,Sn.next.bind(Sn),at,{boundary:Uo,cef:os=>(Uo(),yt&&Xt.push(...yt.cef(os)),!1),text:os=>{Co.elements.push(Ve.fromDom(os)),yt&&yt.text(os,Co)}},Zt,On),Zt&&Ds(Z,Co,Zt,ve,!0),Uo(),Xt},sn=(Z,ve)=>{const at=es(ve.startContainer,ve.startOffset),Zt=at.element.dom,yt=es(ve.endContainer,ve.endOffset),On=yt.element.dom;return Xs(Z,ve.commonAncestorContainer,Zt,On,{text:(Sn,Xt)=>{Sn===On?Xt.fOffset+=Sn.length-yt.offset:Sn===Zt&&(Xt.sOffset+=at.offset)},cef:Sn=>{const Xt=Ze(_o(Ve.fromDom(Sn),"*[contenteditable=true]"),Co=>{const Uo=Co.dom;return Xs(Z,Uo,Uo)});return q(Xt,(Co,Uo)=>yo(Co.elements[0].dom,Uo.elements[0].dom)?1:-1)}},!1)},Do=(Z,ve)=>ve.collapsed?[]:sn(Z,ve),To=(Z,ve)=>{const at=Z.createRng();return at.selectNode(ve),Do(Z,at)},ac=(Z,ve)=>Ze(ve,at=>To(Z,at)),da=(Z,ve,at=0,Zt=Z.length)=>{const yt=ve.regex;yt.lastIndex=at;const On=[];let Sn;for(;Sn=yt.exec(Z);){const Xt=Sn[ve.matchIndex],Co=Sn.index+Sn[0].indexOf(Xt),Uo=Co+Xt.length;if(Uo>Zt)break;On.push({start:Co,finish:Uo}),yt.lastIndex=Uo}return On},tn=(Z,ve)=>{const at=Jt(Z,(Zt,yt)=>{const On=ko(yt),Sn=Zt.last,Xt=Sn+On.length,Co=Ze(ve,(Uo,os)=>Uo.start<Xt&&Uo.finish>Sn?[{element:yt,start:Math.max(Sn,Uo.start)-Sn,finish:Math.min(Xt,Uo.finish)-Sn,matchId:os}]:[]);return{results:Zt.results.concat(Co),last:Xt}},{results:[],last:0}).results;return ae(at,Zt=>Zt.matchId)},Bc=(Z,ve)=>Ze(ve,at=>{const Zt=at.elements,yt=nt(Zt,ko).join(""),On=da(yt,Z,at.sOffset,yt.length-at.fOffset);return tn(Zt,On)}),Os=(Z,ve)=>{_t(Z,(at,Zt)=>{_t(at,yt=>{const On=Ve.fromDom(ve.cloneNode(!1));un(On,"data-mce-index",Zt);const Sn=yt.element.dom;if(Sn.length===yt.finish&&yt.start===0)Ae(yt.element,On);else{Sn.length!==yt.finish&&Sn.splitText(yt.finish);const Xt=Sn.splitText(yt.start);Ae(Ve.fromDom(Xt),On)}})})},Mc=(Z,ve,at,Zt)=>{const yt=To(Z,at),On=Bc(ve,yt);return Os(On,Zt),On.length},Ma=(Z,ve,at,Zt)=>{const yt=at.getBookmark(),On=Z.select("td[data-mce-selected],th[data-mce-selected]"),Sn=On.length>0?ac(Z,On):Do(Z,at.getRng()),Xt=Bc(ve,Sn);return Os(Xt,Zt),at.moveToBookmark(yt),Xt.length},zr=Z=>Z.getAttribute("data-mce-index"),xs=(Z,ve,at,Zt)=>{const yt=Z.dom.create("span",{"data-mce-bogus":1});yt.className="mce-match-marker";const On=Z.getBody();return be(Z,ve,!1),Zt?Ma(Z.dom,at,Z.selection,yt):Mc(Z.dom,at,On,yt)},no=Z=>{var ve;const at=Z.parentNode;Z.firstChild&&at.insertBefore(Z.firstChild,Z),(ve=Z.parentNode)===null||ve===void 0||ve.removeChild(Z)},rs=(Z,ve)=>{const at=[],Zt=it.toArray(Z.getBody().getElementsByTagName("span"));if(Zt.length)for(let yt=0;yt<Zt.length;yt++){const On=zr(Zt[yt]);On===null||!On.length||On===ve.toString()&&at.push(Zt[yt])}return at},Za=(Z,ve,at)=>{const Zt=ve.get();let yt=Zt.index;const On=Z.dom;at?yt+1===Zt.count?yt=0:yt++:yt-1===-1?yt=Zt.count-1:yt--,On.removeClass(rs(Z,Zt.index),"mce-match-marker-selected");const Sn=rs(Z,yt);return Sn.length?(On.addClass(rs(Z,yt),"mce-match-marker-selected"),Z.selection.scrollIntoView(Sn[0]),yt):-1},Fc=(Z,ve)=>{const at=ve.parentNode;Z.remove(ve),at&&Z.isEmpty(at)&&Z.remove(at)},ja=(Z,ve)=>{const Zt="("+Z.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return ve?`(?:^|\\s|${k()})`+Zt+`(?=$|\\s|${k()})`:Zt},dn=(Z,ve,at,Zt,yt,On)=>{const Sn=Z.selection,Xt=ja(at,yt),Co=Sn.isForward(),Uo={regex:new RegExp(Xt,Zt?"g":"gi"),matchIndex:1},os=xs(Z,ve,Uo,On);if(mo.browser.isSafari()&&Sn.setRng(Sn.getRng(),Co),os){const Cs=Za(Z,ve,!0);ve.set({index:Cs,count:os,text:at,matchCase:Zt,wholeWord:yt,inSelection:On})}return os},Fr=(Z,ve)=>{const at=Za(Z,ve,!0);ve.set({...ve.get(),index:at})},yr=(Z,ve)=>{const at=Za(Z,ve,!1);ve.set({...ve.get(),index:at})},Ei=Z=>{const ve=zr(Z);return ve!==null&&ve.length>0},ge=(Z,ve,at,Zt,yt)=>{const On=ve.get(),Sn=On.index;let Xt,Co=Sn;Zt=Zt!==!1;const Uo=Z.getBody(),os=it.grep(it.toArray(Uo.getElementsByTagName("span")),Ei);for(let Cs=0;Cs<os.length;Cs++){const xa=zr(os[Cs]);let Er=Xt=parseInt(xa,10);if(yt||Er===On.index){for(at.length?(os[Cs].innerText=at,no(os[Cs])):Fc(Z.dom,os[Cs]);os[++Cs];)if(Er=parseInt(zr(os[Cs]),10),Er===Xt)Fc(Z.dom,os[Cs]);else{Cs--;break}Zt&&Co--}else Xt>Sn&&os[Cs].setAttribute("data-mce-index",String(Xt-1))}return ve.set({...On,count:yt?0:On.count-1,index:Co}),Zt?Fr(Z,ve):yr(Z,ve),!yt&&ve.get().count>0},be=(Z,ve,at)=>{let Zt,yt;const On=ve.get(),Sn=it.toArray(Z.getBody().getElementsByTagName("span"));for(let Xt=0;Xt<Sn.length;Xt++){const Co=zr(Sn[Xt]);Co!==null&&Co.length&&(Co===On.index.toString()&&(Zt||(Zt=Sn[Xt].firstChild),yt=Sn[Xt].firstChild),no(Sn[Xt]))}if(ve.set({...On,index:-1,count:0,text:""}),Zt&&yt){const Xt=Z.dom.createRng();return Xt.setStart(Zt,0),Xt.setEnd(yt,yt.data.length),at!==!1&&Z.selection.setRng(Xt),Xt}else return},Be=(Z,ve)=>ve.get().count>1,tt=(Z,ve)=>ve.get().count>1,Dn=(Z,ve)=>({done:Xt=>be(Z,ve,Xt),find:(Xt,Co,Uo,os=!1)=>dn(Z,ve,Xt,Co,Uo,os),next:()=>Fr(Z,ve),prev:()=>yr(Z,ve),replace:(Xt,Co,Uo)=>ge(Z,ve,Xt,Co,Uo)}),Gn=(Z,ve)=>{const at=fe();Z.undoManager.add();const Zt=it.trim(Z.selection.getContent({format:"text"})),yt=Gs=>{Gs.setEnabled("next",Be(Z,ve)),Gs.setEnabled("prev",tt(Z,ve))},On=Gs=>{const is=Gs.getData(),Rs=ve.get();ve.set({...Rs,matchCase:is.matchcase,wholeWord:is.wholewords,inSelection:is.inselection})},Sn=(Gs,is)=>{Oo(["replace","replaceall","prev","next"],Hi=>Gs.setEnabled(Hi,!is))},Xt=(Gs,is)=>{is.redial(Ol(Gs,is.getData()))},Co=(Gs,is)=>{mo.browser.isSafari()&&mo.deviceType.isTouch()&&(is==="find"||is==="replace"||is==="replaceall")&&Gs.focus(is)},Uo=Gs=>{be(Z,ve,!1),Sn(Gs,!0),yt(Gs)},os=Gs=>{const is=Gs.getData(),Rs=ve.get();if(!is.findtext.length){Uo(Gs);return}if(Rs.text===is.findtext&&Rs.matchCase===is.matchcase&&Rs.wholeWord===is.wholewords)Fr(Z,ve);else{const ma=dn(Z,ve,is.findtext,is.matchcase,is.wholewords,is.inselection);ma<=0&&Xt(!0,Gs),Sn(Gs,ma===0)}yt(Gs)},Cs=ve.get(),xa={findtext:Zt,replacetext:"",wholewords:Cs.wholeWord,matchcase:Cs.matchCase,inselection:Cs.inSelection},Er=Gs=>{const is=[{type:"label",label:"Find",for:"findtext",items:[{type:"bar",items:[{type:"input",name:"findtext",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]}]},{type:"input",name:"replacetext",label:"Replace with",inputMode:"search"}];return Gs&&is.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),is},Ol=(Gs,is)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:Er(Gs)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:is,onChange:(Rs,ma)=>{Gs&&Xt(!1,Rs),ma.name==="findtext"&&ve.get().count>0&&Uo(Rs)},onAction:(Rs,ma)=>{const Hi=Rs.getData();switch(ma.name){case"find":os(Rs);break;case"replace":ge(Z,ve,Hi.replacetext)?yt(Rs):Uo(Rs);break;case"replaceall":ge(Z,ve,Hi.replacetext,!0,!0),Uo(Rs);break;case"prev":yr(Z,ve),yt(Rs);break;case"next":Fr(Z,ve),yt(Rs);break;case"matchcase":case"wholewords":case"inselection":Xt(!1,Rs),On(Rs),Uo(Rs);break}Co(Rs,ma.name)},onSubmit:Rs=>{os(Rs),Co(Rs,"find")},onClose:()=>{Z.focus(),be(Z,ve),Z.undoManager.add()}});at.set(Z.windowManager.open(Ol(!1,xa),{inline:"toolbar"}))},Ao=(Z,ve)=>{Z.addCommand("SearchReplace",()=>{Gn(Z,ve)})},Ko=(Z,ve)=>()=>{Gn(Z,ve)},Yo=(Z,ve)=>{Z.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:Ko(Z,ve),icon:"search"}),Z.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:Ko(Z,ve),icon:"search",shortcut:"Meta+F"}),Z.shortcuts.add("Meta+F","",Ko(Z,ve))};var Fo=()=>{cs.add("searchreplace",Z=>{const ve=gn({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return Ao(Z,ve),Yo(Z,ve),Dn(Z,ve)})};Fo()})()),eJ}var nJ;function ZQ(){return nJ||(nJ=1,WQ()),QX}ZQ();var oJ={},sJ={},rJ;function jQ(){return rJ||(rJ=1,(function(){const qt=Tt=>{let mn=Tt;return{get:()=>mn,set:nt=>{mn=nt}}};var Mn=tinymce.util.Tools.resolve("tinymce.PluginManager");const Fn=(Tt,mn)=>{Tt.dispatch("VisualBlocks",{state:mn})},Xn=(Tt,mn,fo)=>{Tt.dom.toggleClass(Tt.getBody(),"mce-visualblocks"),fo.set(!fo.get()),Fn(Tt,fo.get())},$n=(Tt,mn,fo)=>{Tt.addCommand("mceVisualBlocks",()=>{Xn(Tt,mn,fo)})},Pn=Tt=>mn=>mn.options.get(Tt),so=Tt=>{const mn=Tt.options.register;mn("visualblocks_default_state",{processor:"boolean",default:!1})},ct=Pn("visualblocks_default_state"),Lt=(Tt,mn,fo)=>{Tt.on("PreviewFormats AfterPreviewFormats",In=>{fo.get()&&Tt.dom.toggleClass(Tt.getBody(),"mce-visualblocks",In.type==="afterpreviewformats")}),Tt.on("init",()=>{ct(Tt)&&Xn(Tt,mn,fo)})},st=(Tt,mn)=>fo=>{fo.setActive(mn.get());const In=nt=>fo.setActive(nt.state);return Tt.on("VisualBlocks",In),()=>Tt.off("VisualBlocks",In)},qo=(Tt,mn)=>{const fo=()=>Tt.execCommand("mceVisualBlocks");Tt.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:fo,onSetup:st(Tt,mn),context:"any"}),Tt.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:fo,onSetup:st(Tt,mn),context:"any"})};var rn=()=>{Mn.add("visualblocks",(Tt,mn)=>{so(Tt);const fo=qt(!1);$n(Tt,mn,fo),qo(Tt,fo),Lt(Tt,mn,fo)})};rn()})()),sJ}var aJ;function qQ(){return aJ||(aJ=1,jQ()),oJ}qQ();var cJ={},iJ={},lJ;function GQ(){return lJ||(lJ=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mn=(ct,Lt)=>{ct.focus(),ct.undoManager.transact(()=>{ct.setContent(Lt)}),ct.selection.setCursorLocation(),ct.nodeChanged()},Fn=ct=>ct.getContent({source_view:!0}),Xn=ct=>{const Lt=Fn(ct);ct.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code",spellcheck:!1}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Lt},onSubmit:st=>{Mn(ct,st.getData().code),st.close()}})},$n=ct=>{ct.addCommand("mceCodeEditor",()=>{Xn(ct)})},Pn=ct=>{const Lt=()=>ct.execCommand("mceCodeEditor");ct.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Lt}),ct.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Lt})};var so=()=>{qt.add("code",ct=>($n(ct),Pn(ct),{}))};so()})()),iJ}var uJ;function KQ(){return uJ||(uJ=1,GQ()),cJ}KQ();var dJ={},mJ={},fJ;function YQ(){return fJ||(fJ=1,(function(){const qt=(K,ue,Fe)=>{var ut;return Fe(K,ue.prototype)?!0:((ut=K.constructor)===null||ut===void 0?void 0:ut.name)===ue.name},Mn=K=>{const ue=typeof K;return K===null?"null":ue==="object"&&Array.isArray(K)?"array":ue==="object"&&qt(K,String,(Fe,ut)=>ut.isPrototypeOf(Fe))?"string":ue},Fn=K=>ue=>Mn(ue)===K,Xn=K=>ue=>typeof ue===K,$n=K=>ue=>K===ue,Pn=Fn("string"),so=Fn("object"),ct=Fn("array"),Lt=$n(null),st=Xn("boolean"),qo=$n(void 0),rn=K=>K==null,Tt=K=>!rn(K),mn=Xn("function"),fo=Xn("number"),In=()=>{},nt=(K,ue)=>(...Fe)=>K(ue.apply(null,Fe)),Oo=(K,ue)=>Fe=>K(ue(Fe)),_t=K=>()=>K;function ae(K,...ue){return(...Fe)=>{const ut=ue.concat(Fe);return K.apply(null,ut)}}const Jt=_t(!1),Lo=_t(!0);class Ze{constructor(ue,Fe){this.tag=ue,this.value=Fe}static some(ue){return new Ze(!0,ue)}static none(){return Ze.singletonNone}fold(ue,Fe){return this.tag?Fe(this.value):ue()}isSome(){return this.tag}isNone(){return!this.tag}map(ue){return this.tag?Ze.some(ue(this.value)):Ze.none()}bind(ue){return this.tag?ue(this.value):Ze.none()}exists(ue){return this.tag&&ue(this.value)}forall(ue){return!this.tag||ue(this.value)}filter(ue){return!this.tag||ue(this.value)?this:Ze.none()}getOr(ue){return this.tag?this.value:ue}or(ue){return this.tag?this:ue}getOrThunk(ue){return this.tag?this.value:ue()}orThunk(ue){return this.tag?this:ue()}getOrDie(ue){if(this.tag)return this.value;throw new Error(ue??"Called getOrDie on None")}static from(ue){return Tt(ue)?Ze.some(ue):Ze.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ue){this.tag&&ue(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ze.singletonNone=new Ze(!1);const q=Array.prototype.push,Rt=(K,ue)=>{const Fe=K.length,ut=new Array(Fe);for(let Hn=0;Hn<Fe;Hn++){const Ro=K[Hn];ut[Hn]=ue(Ro,Hn)}return ut},Zn=(K,ue)=>{for(let Fe=0,ut=K.length;Fe<ut;Fe++){const Hn=K[Fe];ue(Hn,Fe)}},gn=(K,ue)=>{const Fe=[];for(let ut=0,Hn=K.length;ut<Hn;ut++){const Ro=K[ut];ue(Ro,ut)&&Fe.push(Ro)}return Fe},_e=(K,ue,Fe)=>{for(let ut=0,Hn=K.length;ut<Hn;ut++){const Ro=K[ut];if(ue(Ro,ut))return Ze.some(Ro);if(Fe(Ro,ut))break}return Ze.none()},fe=(K,ue)=>_e(K,ue,Jt),cs=K=>{const ue=[];for(let Fe=0,ut=K.length;Fe<ut;++Fe){if(!ct(K[Fe]))throw new Error("Arr.flatten item "+Fe+" was not an array, input: "+K);q.apply(ue,K[Fe])}return ue},Je=(K,ue)=>cs(Rt(K,ue)),rt=(K,ue)=>ue>=0&&ue<K.length?Ze.some(K[ue]):Ze.none(),k=K=>rt(K,0),mo=(K,ue)=>{for(let Fe=0;Fe<K.length;Fe++){const ut=ue(K[Fe],Fe);if(ut.isSome())return ut}return Ze.none()},it=Object.keys,Mo=(K,ue)=>{const Fe=it(K);for(let ut=0,Hn=Fe.length;ut<Hn;ut++){const Ro=Fe[ut],Rr=K[Ro];ue(Rr,Ro)}},ln=K=>{let ue=K;return{get:()=>ue,set:Hn=>{ue=Hn}}},Ce=typeof window<"u"?window:Function("return this;")(),dt=(K,ue,Fe)=>K.isSome()&&ue.isSome()?Ze.some(Fe(K.getOrDie(),ue.getOrDie())):Ze.none(),wn=(K,ue)=>{let Fe=ue??Ce;for(let ut=0;ut<K.length&&Fe!==void 0&&Fe!==null;++ut)Fe=Fe[K[ut]];return Fe},Ve=(K,ue)=>{const Fe=K.split(".");return wn(Fe,ue)},Ht=K=>{const ue=ln(Ze.none()),Fe=()=>ue.get().each(K);return{clear:()=>{Fe(),ue.set(Ze.none())},isSet:()=>ue.get().isSome(),get:()=>ue.get(),set:Sc=>{Fe(),ue.set(Ze.some(Sc))}}},Oe=()=>Ht(K=>K.unbind()),ot=()=>{const K=Ht(In);return{...K,on:Fe=>K.get().each(Fe)}},F=(K,ue,Fe=0,ut)=>{const Hn=K.indexOf(ue,Fe);return Hn!==-1?qo(ut)?!0:Hn+ue.length<=ut:!1},No=(K,ue)=>{let Fe=null;return{cancel:()=>{Lt(Fe)||(clearTimeout(Fe),Fe=null)},throttle:(...Ro)=>{Lt(Fe)&&(Fe=setTimeout(()=>{Fe=null,K.apply(null,Ro)},ue))}}},jn=K=>{let ue=!1,Fe;return(...ut)=>(ue||(ue=!0,Fe=K.apply(null,ut)),Fe)};var qn=tinymce.util.Tools.resolve("tinymce.PluginManager");const yo=K=>({isFullscreen:()=>K.get()!==null}),ht=(K,ue)=>{const ut=(ue||document).createElement("div");if(ut.innerHTML=K,!ut.hasChildNodes()||ut.childNodes.length>1){const Hn="HTML does not have a single root node";throw console.error(Hn,K),new Error(Hn)}return de(ut.childNodes[0])},j=(K,ue)=>{const ut=(ue||document).createElement(K);return de(ut)},ce=(K,ue)=>{const ut=(ue||document).createTextNode(K);return de(ut)},de=K=>{if(K==null)throw new Error("Node cannot be null or undefined");return{dom:K}},Q={fromHtml:ht,fromTag:j,fromText:ce,fromDom:de,fromPoint:(K,ue,Fe)=>Ze.from(K.dom.elementFromPoint(ue,Fe)).map(de)},ie=9,ye=11,wt=1,Ae=3,Ne=(K,ue)=>{const Fe=K.dom;if(Fe.nodeType!==wt)return!1;{const ut=Fe;if(ut.matches!==void 0)return ut.matches(ue);if(ut.msMatchesSelector!==void 0)return ut.msMatchesSelector(ue);if(ut.webkitMatchesSelector!==void 0)return ut.webkitMatchesSelector(ue);if(ut.mozMatchesSelector!==void 0)return ut.mozMatchesSelector(ue);throw new Error("Browser lacks native selectors")}},un=K=>K.nodeType!==wt&&K.nodeType!==ie&&K.nodeType!==ye||K.childElementCount===0,Gt=(K,ue)=>{const Fe=document;return un(Fe)?[]:Rt(Fe.querySelectorAll(K),Q.fromDom)},go=(K,ue)=>K.dom===ue.dom,ko=(K,ue,Fe,ut)=>{const Hn=K.isiOS()&&/ipad/i.test(Fe)===!0,Ro=K.isiOS()&&!Hn,Rr=K.isiOS()||K.isAndroid(),Sc=Rr||ut("(pointer:coarse)"),ga=Hn||!Ro&&Rr&&ut("(min-device-width:768px)"),xc=Ro||Rr&&!ga,vu=ue.isSafari()&&K.isiOS()&&/safari/i.test(Fe)===!1,Ec=!xc&&!ga&&!vu;return{isiPad:_t(Hn),isiPhone:_t(Ro),isTablet:_t(ga),isPhone:_t(xc),isTouch:_t(Sc),isAndroid:K.isAndroid,isiOS:K.isiOS,isWebView:_t(vu),isDesktop:_t(Ec)}},_o=(K,ue)=>{for(let Fe=0;Fe<K.length;Fe++){const ut=K[Fe];if(ut.test(ue))return ut}},_n=(K,ue)=>{const Fe=_o(K,ue);if(!Fe)return{major:0,minor:0};const ut=Hn=>Number(ue.replace(Fe,"$"+Hn));return Ke(ut(1),ut(2))},ns=(K,ue)=>{const Fe=String(ue).toLowerCase();return K.length===0?Ln():_n(K,Fe)},Ln=()=>Ke(0,0),Ke=(K,ue)=>({major:K,minor:ue}),At={nu:Ke,detect:ns,unknown:Ln},fn=(K,ue)=>mo(ue.brands,Fe=>{const ut=Fe.brand.toLowerCase();return fe(K,Hn=>{var Ro;return ut===((Ro=Hn.brand)===null||Ro===void 0?void 0:Ro.toLowerCase())}).map(Hn=>({current:Hn.name,version:At.nu(parseInt(Fe.version,10),0)}))}),an=(K,ue)=>{const Fe=String(ue).toLowerCase();return fe(K,ut=>ut.search(Fe))},to=(K,ue)=>an(K,ue).map(Fe=>{const ut=At.detect(Fe.versionRegexes,ue);return{current:Fe.name,version:ut}}),es=(K,ue)=>an(K,ue).map(Fe=>{const ut=At.detect(Fe.versionRegexes,ue);return{current:Fe.name,version:ut}}),Eo=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ds=K=>ue=>F(ue,K),Xs=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:K=>F(K,"edge/")&&F(K,"chrome")&&F(K,"safari")&&F(K,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Eo],search:K=>F(K,"chrome")&&!F(K,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:K=>F(K,"msie")||F(K,"trident")},{name:"Opera",versionRegexes:[Eo,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ds("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ds("firefox")},{name:"Safari",versionRegexes:[Eo,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:K=>(F(K,"safari")||F(K,"mobile/"))&&F(K,"applewebkit")}],sn=[{name:"Windows",search:Ds("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:K=>F(K,"iphone")||F(K,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ds("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ds("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ds("linux"),versionRegexes:[]},{name:"Solaris",search:Ds("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ds("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ds("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Do={browsers:_t(Xs),oses:_t(sn)},To="Edge",ac="Chromium",da="IE",tn="Opera",Bc="Firefox",Os="Safari",Mc=()=>Ma({current:void 0,version:At.unknown()}),Ma=K=>{const ue=K.current,Fe=K.version,ut=Hn=>()=>ue===Hn;return{current:ue,version:Fe,isEdge:ut(To),isChromium:ut(ac),isIE:ut(da),isOpera:ut(tn),isFirefox:ut(Bc),isSafari:ut(Os)}},zr={unknown:Mc,nu:Ma},xs="Windows",no="iOS",rs="Android",Za="Linux",Fc="macOS",ja="Solaris",dn="FreeBSD",Fr="ChromeOS",yr=()=>Ei({current:void 0,version:At.unknown()}),Ei=K=>{const ue=K.current,Fe=K.version,ut=Hn=>()=>ue===Hn;return{current:ue,version:Fe,isWindows:ut(xs),isiOS:ut(no),isAndroid:ut(rs),isMacOS:ut(Fc),isLinux:ut(Za),isSolaris:ut(ja),isFreeBSD:ut(dn),isChromeOS:ut(Fr)}},ge={unknown:yr,nu:Ei},Be={detect:(K,ue,Fe)=>{const ut=Do.browsers(),Hn=Do.oses(),Ro=ue.bind(ga=>fn(ut,ga)).orThunk(()=>to(ut,K)).fold(zr.unknown,zr.nu),Rr=es(Hn,K).fold(ge.unknown,ge.nu),Sc=ko(Rr,Ro,K,Fe);return{browser:Ro,os:Rr,deviceType:Sc}}},tt=K=>window.matchMedia(K).matches;let Dn=jn(()=>Be.detect(window.navigator.userAgent,Ze.from(window.navigator.userAgentData),tt));const Gn=()=>Dn(),Ao=(K,ue)=>Ve(K,ue),Ko=(K,ue)=>{const Fe=Ao(K,ue);if(Fe==null)throw new Error(K+" not available on this browser");return Fe},Yo=Object.getPrototypeOf,Fo=K=>Ko("HTMLElement",K),Z=K=>{const ue=Ve("ownerDocument.defaultView",K);return so(K)&&(Fo(ue).prototype.isPrototypeOf(K)||/^HTML\w*Element$/.test(Yo(K).constructor.name))},ve=K=>K.dom.nodeType,at=K=>ue=>ve(ue)===K,Zt=K=>yt(K)&&Z(K.dom),yt=at(wt),On=at(Ae),Sn=at(ye),Xt=K=>Q.fromDom(K.dom.ownerDocument),Co=K=>Ze.from(K.dom.parentNode).map(Q.fromDom),Uo=(K,ue)=>{const Fe=mn(ue)?ue:Jt;let ut=K.dom;const Hn=[];for(;ut.parentNode!==null&&ut.parentNode!==void 0;){const Ro=ut.parentNode,Rr=Q.fromDom(Ro);if(Hn.push(Rr),Fe(Rr)===!0)break;ut=Ro}return Hn},os=K=>{const ue=Fe=>gn(Fe,ut=>!go(K,ut));return Co(K).map(xa).map(ue).getOr([])},Cs=K=>Ze.from(K.dom.nextSibling).map(Q.fromDom),xa=K=>Rt(K.dom.childNodes,Q.fromDom),Er=K=>Sn(K)&&Tt(K.dom.host),Ol=K=>Q.fromDom(K.dom.getRootNode()),Gs=K=>{const ue=Ol(K);return Er(ue)?Ze.some(ue):Ze.none()},is=K=>Q.fromDom(K.dom.host),Rs=K=>{if(Tt(K.target)){const ue=Q.fromDom(K.target);if(yt(ue)&&ma(ue)&&K.composed&&K.composedPath){const Fe=K.composedPath();if(Fe)return k(Fe)}}return Ze.from(K.target)},ma=K=>Tt(K.dom.shadowRoot),Hi=(K,ue,Fe,ut,Hn,Ro,Rr)=>({target:K,x:ue,y:Fe,stop:ut,prevent:Hn,kill:Ro,raw:Rr}),er=K=>{const ue=Q.fromDom(Rs(K).getOr(K.target)),Fe=()=>K.stopPropagation(),ut=()=>K.preventDefault(),Hn=nt(ut,Fe);return Hi(ue,K.clientX,K.clientY,Fe,ut,Hn,K)},Kn=(K,ue)=>Fe=>{K(Fe)&&ue(er(Fe))},fa=(K,ue,Fe,ut,Hn)=>{const Ro=Kn(Fe,ut);return K.dom.addEventListener(ue,Ro,Hn),{unbind:ae(cr,K,ue,Ro,Hn)}},Ea=(K,ue,Fe,ut)=>fa(K,ue,Fe,ut,!1),cr=(K,ue,Fe,ut)=>{K.dom.removeEventListener(ue,Fe,ut)},Yu=Lo,hu=(K,ue,Fe)=>Ea(K,ue,Yu,Fe),Js=(K,ue,Fe)=>{if(Pn(Fe)||st(Fe)||fo(Fe))K.setAttribute(ue,Fe+"");else throw console.error("Invalid call to Attribute.set. Key ",ue,":: Value ",Fe,":: Element ",K),new Error("Attribute value was not simple")},Ti=(K,ue,Fe)=>{Js(K.dom,ue,Fe)},si=(K,ue)=>{const Fe=K.dom.getAttribute(ue);return Fe===null?void 0:Fe},Xu=(K,ue)=>{K.dom.removeAttribute(ue)},Ut=K=>K.style!==void 0&&mn(K.style.getPropertyValue),Nc=K=>{const ue=On(K)?K.dom.parentNode:K.dom;if(ue==null||ue.ownerDocument===null)return!1;const Fe=ue.ownerDocument;return Gs(Q.fromDom(ue)).fold(()=>Fe.body.contains(ue),Oo(Nc,is))},Fa=K=>{const ue=K.dom.body;if(ue==null)throw new Error("Body is not available yet");return Q.fromDom(ue)},qa=(K,ue,Fe)=>{if(!Pn(Fe))throw console.error("Invalid call to CSS.set. Property ",ue,":: Value ",Fe,":: Element ",K),new Error("CSS value must be a string: "+Fe);Ut(K)&&K.style.setProperty(ue,Fe)},ir=(K,ue,Fe)=>{const ut=K.dom;qa(ut,ue,Fe)},pu=(K,ue)=>{const Fe=K.dom;Mo(ue,(ut,Hn)=>{qa(Fe,Hn,ut)})},Ga=(K,ue)=>{const Fe=K.dom,Hn=window.getComputedStyle(Fe).getPropertyValue(ue);return Hn===""&&!Nc(K)?yc(Fe,ue):Hn},yc=(K,ue)=>Ut(K)?K.style.getPropertyValue(ue):"",Rl=(K,ue)=>({left:K,top:ue,translate:(ut,Hn)=>Rl(K+ut,ue+Hn)}),Ju=Rl,zi=K=>{const ue=K!==void 0?K.dom:document,Fe=ue.body.scrollLeft||ue.documentElement.scrollLeft,ut=ue.body.scrollTop||ue.documentElement.scrollTop;return Ju(Fe,ut)},bu=K=>K.dom.classList!==void 0,Bl=(K,ue)=>bu(K)&&K.dom.classList.contains(ue),Vi=(K,ue,Fe)=>gn(Uo(K,Fe),ue),Ml=(K,ue)=>gn(os(K),ue),Nt=K=>Gt(K),ll=(K,ue,Fe)=>Vi(K,ut=>Ne(ut,ue),Fe),Qu=(K,ue)=>Ml(K,Fe=>Ne(Fe,ue)),H=K=>{const ue=K===void 0?window:K;return Gn().browser.isFirefox()?Ze.none():Ze.from(ue.visualViewport)},le=(K,ue,Fe,ut)=>({x:K,y:ue,width:Fe,height:ut,right:K+Fe,bottom:ue+ut}),ke=K=>{const ue=K===void 0?window:K,Fe=ue.document,ut=zi(Q.fromDom(Fe));return H(ue).fold(()=>{const Hn=ue.document.documentElement,Ro=Hn.clientWidth,Rr=Hn.clientHeight;return le(ut.left,ut.top,Ro,Rr)},Hn=>le(Math.max(Hn.pageLeft,ut.left),Math.max(Hn.pageTop,ut.top),Hn.width,Hn.height))},Xe=(K,ue,Fe)=>H(Fe).map(ut=>{const Hn=Ro=>ue(er(Ro));return ut.addEventListener(K,Hn),{unbind:()=>ut.removeEventListener(K,Hn)}}).getOrThunk(()=>({unbind:In}));var Mt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),cn=tinymce.util.Tools.resolve("tinymce.Env");const Po=(K,ue)=>{K.dispatch("FullscreenStateChanged",{state:ue}),K.dispatch("ResizeEditor")},So=K=>ue=>ue.options.get(K),fs=K=>{const ue=K.options.register;ue("fullscreen_native",{processor:"boolean",default:!1})},N=So("fullscreen_native"),U=K=>{const ue=Q.fromDom(K.getElement());return Gs(ue).map(is).getOrThunk(()=>Fa(Xt(ue)))},me=K=>K.fullscreenElement!==void 0?K.fullscreenElement:K.msFullscreenElement!==void 0?K.msFullscreenElement:K.webkitFullscreenElement!==void 0?K.webkitFullscreenElement:null,He=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",nn=K=>{const ue=K.dom;ue.requestFullscreen?ue.requestFullscreen():ue.msRequestFullscreen?ue.msRequestFullscreen():ue.webkitRequestFullScreen&&ue.webkitRequestFullScreen()},Xo=K=>{const ue=K.dom;ue.exitFullscreen?ue.exitFullscreen():ue.msExitFullscreen?ue.msExitFullscreen():ue.webkitCancelFullScreen&&ue.webkitCancelFullScreen()},Bs=K=>K.dom===me(Xt(K).dom),Or="data-ephox-mobile-fullscreen-style",Na="display:none!important;",Cc="position:absolute!important;",Jo="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",ul="background-color:rgb(255,255,255)!important;",_m=cn.os.isAndroid(),Ui=K=>{const ue=Ga(K,"background-color");return ue!==void 0&&ue!==""?"background-color:"+ue+"!important":ul},ig=(K,ue,Fe)=>{const ut=xc=>Qu(xc,"*:not(.tox-silver-sink)"),Hn=xc=>vu=>{const Ec=si(vu,"style"),yu=Ec===void 0?"no-styles":Ec.trim();yu!==xc&&(Ti(vu,Or,yu),pu(vu,K.parseStyle(xc)))},Ro=ll(ue,"*"),Rr=Je(Ro,ut),Sc=Ui(Fe);Zn(Rr,Hn(Na)),Zn(Ro,Hn(Cc+Jo+Sc)),Hn((_m===!0?"":Cc)+Jo+Sc)(ue)},Dm=K=>{const ue=Nt("["+Or+"]");Zn(ue,Fe=>{const ut=si(Fe,Or);ut&&ut!=="no-styles"?pu(Fe,K.parseStyle(ut)):Xu(Fe,"style"),Xu(Fe,Or)})},wc=Mt.DOM,ed=()=>ke(window),td=K=>window.scrollTo(K.x,K.y),Ah=H().fold(()=>({bind:In,unbind:In}),K=>{const ue=ot(),Fe=Oe(),ut=Oe(),Hn=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Ro=()=>{window.requestAnimationFrame(()=>{ue.on(xc=>pu(xc,{top:K.offsetTop+"px",left:K.offsetLeft+"px",height:K.height+"px",width:K.width+"px"}))})},Rr=No(()=>{Hn(),Ro()},50);return{bind:xc=>{ue.set(xc),Rr.throttle(),Fe.set(Xe("resize",Rr.throttle)),ut.set(Xe("scroll",Rr.throttle))},unbind:()=>{ue.on(()=>{Fe.clear(),ut.clear()}),ue.clear()}}}),lg=(K,ue)=>{const Fe=document.body,ut=document.documentElement,Hn=K.getContainer(),Ro=Q.fromDom(Hn),Rr=Cs(Ro).filter($c=>Zt($c)&&Bl($c,"tox-silver-sink")),Sc=U(K),ga=ue.get(),xc=Q.fromDom(K.getBody()),vu=cn.deviceType.isTouch(),Ec=Hn.style,yu=K.iframeElement,Tc=yu?.style,Pc=$c=>{$c(Fe,"tox-fullscreen"),$c(ut,"tox-fullscreen"),$c(Hn,"tox-fullscreen"),Gs(Ro).map(Ho=>is(Ho).dom).each(Ho=>{$c(Ho,"tox-fullscreen"),$c(Ho,"tox-shadowhost")})},Fl=()=>{vu&&Dm(K.dom),Pc(wc.removeClass),Ah.unbind(),Ze.from(ue.get()).each($c=>$c.fullscreenChangeHandler.unbind())};if(ga)ga.fullscreenChangeHandler.unbind(),N(K)&&Bs(Sc)&&Xo(Xt(Sc)),Tc.width=ga.iframeWidth,Tc.height=ga.iframeHeight,Ec.width=ga.containerWidth,Ec.height=ga.containerHeight,Ec.top=ga.containerTop,Ec.left=ga.containerLeft,dt(Rr,ga.sinkCssPosition,($c,Ho)=>{ir($c,"position",Ho)}),Fl(),td(ga.scrollPos),ue.set(null),Po(K,!1),K.off("remove",Fl);else{const $c=hu(Xt(Sc),He(),gf=>{N(K)&&!Bs(Sc)&&ue.get()!==null&&lg(K,ue)}),Ho={scrollPos:ed(),containerWidth:Ec.width,containerHeight:Ec.height,containerTop:Ec.top,containerLeft:Ec.left,iframeWidth:Tc.width,iframeHeight:Tc.height,fullscreenChangeHandler:$c,sinkCssPosition:Rr.map(gf=>Ga(gf,"position"))};vu&&ig(K.dom,Ro,xc),Tc.width=Tc.height="100%",Ec.width=Ec.height="",Pc(wc.addClass),Rr.each(gf=>{ir(gf,"position","fixed")}),Ah.bind(Ro),K.on("remove",Fl),ue.set(Ho),N(K)&&nn(Sc),Po(K,!0)}},ug=(K,ue)=>{K.addCommand("mceFullScreen",()=>{lg(K,ue)})};var kh=tinymce.util.Tools.resolve("tinymce.util.VK");const ff=(K,ue)=>{K.on("init",()=>{K.on("keydown",Fe=>{Fe.keyCode===kh.TAB&&!(Fe.metaKey||Fe.ctrlKey)&&ue.get()&&Fe.preventDefault()})})},Wi=(K,ue)=>Fe=>{Fe.setActive(ue.get()!==null);const ut=Hn=>Fe.setActive(Hn.state);return K.on("FullscreenStateChanged",ut),()=>K.off("FullscreenStateChanged",ut)},_h=(K,ue)=>{const Fe=()=>K.execCommand("mceFullScreen");K.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:Fe,onSetup:Wi(K,ue),context:"any"}),K.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:Fe,onSetup:Wi(K,ue),shortcut:"Meta+Shift+F",context:"any"})};var Dh=()=>{qn.add("fullscreen",K=>{const ue=ln(null);return K.inline||(fs(K),ug(K,ue),_h(K,ue),ff(K,ue),K.addShortcut("Meta+Shift+F","","mceFullScreen")),yo(ue)})};Dh()})()),mJ}var gJ;function XQ(){return gJ||(gJ=1,YQ()),dJ}XQ();var hJ={},pJ={},bJ;function JQ(){return bJ||(bJ=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mn=Ze=>q=>q.options.get(Ze),Fn=Ze=>{const q=Ze.options.register;q("insertdatetime_dateformat",{processor:"string",default:Ze.translate("%Y-%m-%d")}),q("insertdatetime_timeformat",{processor:"string",default:Ze.translate("%H:%M:%S")}),q("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),q("insertdatetime_element",{processor:"boolean",default:!1})},Xn=Mn("insertdatetime_dateformat"),$n=Mn("insertdatetime_timeformat"),Pn=Mn("insertdatetime_formats"),so=Mn("insertdatetime_element"),ct=Ze=>{const q=Pn(Ze);return q.length>0?q[0]:$n(Ze)},Lt="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),st="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),qo="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),rn="January February March April May June July August September October November December".split(" "),Tt=(Ze,q)=>{if(Ze=""+Ze,Ze.length<q)for(let Rt=0;Rt<q-Ze.length;Rt++)Ze="0"+Ze;return Ze},mn=(Ze,q,Rt=new Date)=>(q=q.replace("%D","%m/%d/%Y"),q=q.replace("%r","%I:%M:%S %p"),q=q.replace("%Y",""+Rt.getFullYear()),q=q.replace("%y",""+Rt.getYear()),q=q.replace("%m",Tt(Rt.getMonth()+1,2)),q=q.replace("%d",Tt(Rt.getDate(),2)),q=q.replace("%H",""+Tt(Rt.getHours(),2)),q=q.replace("%M",""+Tt(Rt.getMinutes(),2)),q=q.replace("%S",""+Tt(Rt.getSeconds(),2)),q=q.replace("%I",""+((Rt.getHours()+11)%12+1)),q=q.replace("%p",Rt.getHours()<12?"AM":"PM"),q=q.replace("%B",""+Ze.translate(rn[Rt.getMonth()])),q=q.replace("%b",""+Ze.translate(qo[Rt.getMonth()])),q=q.replace("%A",""+Ze.translate(st[Rt.getDay()])),q=q.replace("%a",""+Ze.translate(Lt[Rt.getDay()])),q=q.replace("%%","%"),q),fo=(Ze,q,Rt,Zn)=>{const gn=Ze.dom.create("time",{datetime:Rt},Zn);Ze.dom.replace(gn,q),Ze.selection.select(gn,!0),Ze.selection.collapse(!1)},In=(Ze,q)=>{if(so(Ze)&&Ze.selection.isEditable()){const Rt=mn(Ze,q);let Zn;/%[HMSIp]/.test(q)?Zn=mn(Ze,"%Y-%m-%dT%H:%M"):Zn=mn(Ze,"%Y-%m-%d");const gn=Ze.dom.getParent(Ze.selection.getStart(),"time");gn?fo(Ze,gn,Zn,Rt):Ze.insertContent('<time datetime="'+Zn+'">'+Rt+"</time>")}else Ze.insertContent(mn(Ze,q))},nt=Ze=>{Ze.addCommand("mceInsertDate",(q,Rt)=>{In(Ze,Rt??Xn(Ze))}),Ze.addCommand("mceInsertTime",(q,Rt)=>{In(Ze,Rt??$n(Ze))})},Oo=Ze=>{let q=Ze;return{get:()=>q,set:gn=>{q=gn}}};var _t=tinymce.util.Tools.resolve("tinymce.util.Tools");const ae=Ze=>q=>{const Rt=()=>{q.setEnabled(Ze.selection.isEditable())};return Ze.on("NodeChange",Rt),Rt(),()=>{Ze.off("NodeChange",Rt)}},Jt=Ze=>{const q=Pn(Ze),Rt=Oo(ct(Ze)),Zn=_e=>Ze.execCommand("mceInsertDate",!1,_e);Ze.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",chevronTooltip:"Insert date/time menu",select:_e=>_e===Rt.get(),fetch:_e=>{_e(_t.map(q,fe=>({type:"choiceitem",text:mn(Ze,fe),value:fe})))},onAction:_e=>{Zn(Rt.get())},onItemAction:(_e,fe)=>{Rt.set(fe),Zn(fe)},onSetup:ae(Ze)});const gn=_e=>()=>{Rt.set(_e),Zn(_e)};Ze.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>_t.map(q,_e=>({type:"menuitem",text:mn(Ze,_e),onAction:gn(_e)})),onSetup:ae(Ze)})};var Lo=()=>{qt.add("insertdatetime",Ze=>{Fn(Ze),nt(Ze),Jt(Ze)})};Lo()})()),pJ}var vJ;function QQ(){return vJ||(vJ=1,JQ()),hJ}QQ();var yJ={},CJ={},wJ;function eee(){return wJ||(wJ=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mn=(ge,be,Be)=>{var tt;return Be(ge,be.prototype)?!0:((tt=ge.constructor)===null||tt===void 0?void 0:tt.name)===be.name},Fn=ge=>{const be=typeof ge;return ge===null?"null":be==="object"&&Array.isArray(ge)?"array":be==="object"&&Mn(ge,String,(Be,tt)=>tt.isPrototypeOf(Be))?"string":be},Xn=ge=>be=>Fn(be)===ge,$n=Xn("string"),Pn=Xn("object"),so=Xn("array"),ct=ge=>ge==null,Lt=ge=>!ct(ge);class st{constructor(be,Be){this.tag=be,this.value=Be}static some(be){return new st(!0,be)}static none(){return st.singletonNone}fold(be,Be){return this.tag?Be(this.value):be()}isSome(){return this.tag}isNone(){return!this.tag}map(be){return this.tag?st.some(be(this.value)):st.none()}bind(be){return this.tag?be(this.value):st.none()}exists(be){return this.tag&&be(this.value)}forall(be){return!this.tag||be(this.value)}filter(be){return!this.tag||be(this.value)?this:st.none()}getOr(be){return this.tag?this.value:be}or(be){return this.tag?this:be}getOrThunk(be){return this.tag?this.value:be()}orThunk(be){return this.tag?this:be()}getOrDie(be){if(this.tag)return this.value;throw new Error(be??"Called getOrDie on None")}static from(be){return Lt(be)?st.some(be):st.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(be){this.tag&&be(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}st.singletonNone=new st(!1);const qo=Array.prototype.push,rn=(ge,be)=>{for(let Be=0,tt=ge.length;Be<tt;Be++){const Dn=ge[Be];be(Dn,Be)}},Tt=ge=>{const be=[];for(let Be=0,tt=ge.length;Be<tt;++Be){if(!so(ge[Be]))throw new Error("Arr.flatten item "+Be+" was not an array, input: "+ge);qo.apply(be,ge[Be])}return be},mn=Object.keys,fo=Object.hasOwnProperty,In=(ge,be)=>{const Be=mn(ge);for(let tt=0,Dn=Be.length;tt<Dn;tt++){const Gn=Be[tt],Ao=ge[Gn];be(Ao,Gn)}},nt=(ge,be)=>Oo(ge,be)?st.from(ge[be]):st.none(),Oo=(ge,be)=>fo.call(ge,be),_t=ge=>{let be=ge;return{get:()=>be,set:Dn=>{be=Dn}}},ae=(ge,be,Be)=>ge.length>=be.length&&ge.substr(Be,Be+be.length)===be,Jt=(ge,be)=>ae(ge,be,0),Lo=ge=>be=>be.options.get(ge),Ze=ge=>{const be=ge.options.register;be("audio_template_callback",{processor:"function"}),be("video_template_callback",{processor:"function"}),be("iframe_template_callback",{processor:"function"}),be("media_live_embeds",{processor:"boolean",default:!0}),be("media_filter_html",{processor:"boolean",default:!0}),be("media_url_resolver",{processor:"function"}),be("media_alt_source",{processor:"boolean",default:!0}),be("media_poster",{processor:"boolean",default:!0}),be("media_dimensions",{processor:"boolean",default:!0})},q=Lo("audio_template_callback"),Rt=Lo("video_template_callback"),Zn=Lo("iframe_template_callback"),gn=Lo("media_live_embeds"),_e=Lo("media_filter_html"),fe=Lo("media_url_resolver"),cs=Lo("media_alt_source"),Je=Lo("media_poster"),rt=Lo("media_dimensions");var k=tinymce.util.Tools.resolve("tinymce.util.Tools"),mo=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),it=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Mo=mo.DOM,ln=ge=>ge.replace(/px$/,""),Ce=ge=>{const be=ge.attr("style"),Be=be?Mo.parseStyle(be):{};return{type:"ephox-embed-iri",source:ge.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:nt(Be,"max-width").map(ln).getOr(""),height:nt(Be,"max-height").map(ln).getOr("")}},dt=(ge,be)=>{let Be={};const Dn=it({validate:!1,forced_root_block:!1},be).parse(ge);for(let Gn=Dn;Gn;Gn=Gn.walk())if(Gn.type===1){const Ao=Gn.name;if(Gn.attr("data-ephox-embed-iri")){Be=Ce(Gn);break}else!Be.source&&Ao==="param"&&(Be.source=Gn.attr("movie")),(Ao==="iframe"||Ao==="object"||Ao==="embed"||Ao==="video"||Ao==="audio")&&(Be.type||(Be.type=Ao),Be=k.extend(Gn.attributes.map,Be)),Ao==="source"&&(Be.source?Be.altsource||(Be.altsource=Gn.attr("src")):Be.source=Gn.attr("src")),Ao==="img"&&!Be.poster&&(Be.poster=Gn.attr("src"))}return Be.source=Be.source||Be.src||"",Be.altsource=Be.altsource||"",Be.poster=Be.poster||"",Be},wn=ge=>{var be;const Be={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},tt=(be=ge.toLowerCase().split(".").pop())!==null&&be!==void 0?be:"";return nt(Be,tt).getOr("")};var Ve=tinymce.util.Tools.resolve("tinymce.html.Node"),Ht=tinymce.util.Tools.resolve("tinymce.html.Serializer");const Oe=(ge,be={})=>it({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...be},ge),ot=mo.DOM,F=ge=>/^[0-9.]+$/.test(ge)?ge+"px":ge,No=(ge,be)=>{const Be=be.attr("style"),tt=Be?ot.parseStyle(Be):{};Lt(ge.width)&&(tt["max-width"]=F(ge.width)),Lt(ge.height)&&(tt["max-height"]=F(ge.height)),be.attr("style",ot.serializeStyle(tt))},jn=["source","altsource"],qn=(ge,be,Be,tt)=>{let Dn=0,Gn=0;const Ao=Oe(tt);Ao.addNodeFilter("source",Yo=>Dn=Yo.length);const Ko=Ao.parse(ge);for(let Yo=Ko;Yo;Yo=Yo.walk())if(Yo.type===1){const Fo=Yo.name;if(Yo.attr("data-ephox-embed-iri")){No(be,Yo);break}else{switch(Fo){case"video":case"object":case"embed":case"img":case"iframe":be.height!==void 0&&be.width!==void 0&&(Yo.attr("width",be.width),Yo.attr("height",be.height));break}if(Be)switch(Fo){case"video":Yo.attr("poster",be.poster),Yo.attr("src",null);for(let ve=Dn;ve<2;ve++)if(be[jn[ve]]){const at=new Ve("source",1);at.attr("src",be[jn[ve]]),at.attr("type",be[jn[ve]+"mime"]||null),Yo.append(at)}break;case"iframe":Yo.attr("src",be.source);break;case"object":const Z=Yo.getAll("img").length>0;if(be.poster&&!Z){Yo.attr("src",be.poster);const ve=new Ve("img",1);ve.attr("src",be.poster),ve.attr("width",be.width),ve.attr("height",be.height),Yo.append(ve)}break;case"source":if(Gn<2&&(Yo.attr("src",be[jn[Gn]]),Yo.attr("type",be[jn[Gn]+"mime"]||null),!be[jn[Gn]])){Yo.remove();continue}Gn++;break;case"img":be.poster||Yo.remove();break}}}return Ht({},tt).serialize(Ko)},yo=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],ht=ge=>{const be=ge.match(/^(https?:\/\/|www\.)(.+)$/i);return be&&be.length>1?be[1]==="www."?"https://":be[1]:"https://"},j=(ge,be)=>{const Be=ht(be),tt=ge.regex.exec(be);let Dn=Be+ge.url;if(Lt(tt))for(let Gn=0;Gn<tt.length;Gn++)Dn=Dn.replace("$"+Gn,()=>tt[Gn]?tt[Gn]:"");return Dn.replace(/\?$/,"")},ce=ge=>{const be=yo.filter(Be=>Be.regex.test(ge));return be.length>0?k.extend({},be[0],{url:j(be[0],ge)}):null},de=(ge,be)=>{if(be)return be(ge);{const Be=ge.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+ge.source+'" width="'+ge.width+'" height="'+ge.height+'"'+Be+"></iframe>"}},ne=ge=>{let be='<object data="'+ge.source+'" width="'+ge.width+'" height="'+ge.height+'" type="application/x-shockwave-flash">';return ge.poster&&(be+='<img src="'+ge.poster+'" width="'+ge.width+'" height="'+ge.height+'" />'),be+="</object>",be},Q=(ge,be)=>be?be(ge):'<audio controls="controls" src="'+ge.source+'">'+(ge.altsource?`
<source src="`+ge.altsource+'"'+(ge.altsourcemime?' type="'+ge.altsourcemime+'"':"")+` />
`:"")+"</audio>",ie=(ge,be)=>be?be(ge):'<video width="'+ge.width+'" height="'+ge.height+'"'+(ge.poster?' poster="'+ge.poster+'"':"")+` controls="controls">
<source src="`+ge.source+'"'+(ge.sourcemime?' type="'+ge.sourcemime+'"':"")+` />
`+(ge.altsource?'<source src="'+ge.altsource+'"'+(ge.altsourcemime?' type="'+ge.altsourcemime+'"':"")+` />
`:"")+"</video>",ye=(ge,be)=>{var Be;const tt=k.extend({},be);if(!tt.source&&(k.extend(tt,dt((Be=tt.embed)!==null&&Be!==void 0?Be:"",ge.schema)),!tt.source))return"";tt.altsource||(tt.altsource=""),tt.poster||(tt.poster=""),tt.source=ge.convertURL(tt.source,"source"),tt.altsource=ge.convertURL(tt.altsource,"source"),tt.sourcemime=wn(tt.source),tt.altsourcemime=wn(tt.altsource),tt.poster=ge.convertURL(tt.poster,"poster");const Dn=ce(tt.source);if(Dn&&(tt.source=Dn.url,tt.type=Dn.type,tt.allowfullscreen=Dn.allowFullscreen,tt.width=tt.width||String(Dn.w),tt.height=tt.height||String(Dn.h)),tt.embed)return qn(tt.embed,tt,!0,ge.schema);{const Gn=q(ge),Ao=Rt(ge),Ko=Zn(ge);return tt.width=tt.width||"300",tt.height=tt.height||"150",k.each(tt,(Yo,Fo)=>{tt[Fo]=ge.dom.encode(""+Yo)}),tt.type==="iframe"?de(tt,Ko):tt.sourcemime==="application/x-shockwave-flash"?ne(tt):tt.sourcemime.indexOf("audio")!==-1?Q(tt,Gn):ie(tt,Ao)}},wt=ge=>ge.hasAttribute("data-mce-object")||ge.hasAttribute("data-ephox-embed-iri"),Ae=ge=>{ge.on("mousedown",be=>{const Be=ge.dom.getParent(be.target,".mce-preview-object");Be&&ge.dom.getAttrib(Be,"data-mce-selected")==="2"&&be.stopImmediatePropagation()}),ge.on("click keyup touchend",()=>{const be=ge.selection.getNode();be&&ge.dom.hasClass(be,"mce-preview-object")&&ge.dom.getAttrib(be,"data-mce-selected")&&be.setAttribute("data-mce-selected","2")}),ge.on("ObjectResized",be=>{const Be=be.target;if(Be.getAttribute("data-mce-object")){let tt=Be.getAttribute("data-mce-html");tt&&(tt=unescape(tt),Be.setAttribute("data-mce-html",escape(qn(tt,{width:String(be.width),height:String(be.height)},!1,ge.schema))))}})},Ne={},un=(ge,be,Be)=>new Promise((tt,Dn)=>{const Gn=Ao=>(Ao.html&&(Ne[ge.source]=Ao),tt({url:ge.source,html:Ao.html?Ao.html:be(ge)}));Ne[ge.source]?Gn(Ne[ge.source]):Be({url:ge.source}).then(Gn).catch(Dn)}),Gt=(ge,be)=>Promise.resolve({html:be(ge),url:ge.source}),go=ge=>be=>ye(ge,be),ko=(ge,be)=>{const Be=fe(ge);return Be?un(be,go(ge),Be):Gt(be,go(ge))},_o=ge=>Oo(Ne,ge),_n=(ge,be)=>nt(be,ge).bind(Be=>nt(Be,"meta")),ns=(ge,be,Be)=>tt=>{const Dn=()=>nt(ge,tt),Gn=()=>nt(be,tt),Ao=Fo=>nt(Fo,"value").bind(Z=>Z.length>0?st.some(Z):st.none()),Ko=()=>Dn().bind(Fo=>Pn(Fo)?Ao(Fo).orThunk(Gn):Gn().orThunk(()=>st.from(Fo))),Yo=()=>Gn().orThunk(()=>Dn().bind(Fo=>Pn(Fo)?Ao(Fo):st.from(Fo)));return{[tt]:(tt===Be?Ko():Yo()).getOr("")}},Ln=(ge,be)=>{const Be={};return nt(ge,"dimensions").each(tt=>{rn(["width","height"],Dn=>{nt(be,Dn).orThunk(()=>nt(tt,Dn)).each(Gn=>Be[Dn]=Gn)})}),Be},Ke=(ge,be)=>{const Be=be&&be!=="dimensions"?_n(be,ge).getOr({}):{},tt=ns(ge,Be,be);return{...tt("source"),...tt("altsource"),...tt("poster"),...tt("embed"),...Ln(ge,Be)}},At=ge=>{const be={...ge,source:{value:nt(ge,"source").getOr("")},altsource:{value:nt(ge,"altsource").getOr("")},poster:{value:nt(ge,"poster").getOr("")}};return rn(["width","height"],Be=>{nt(ge,Be).each(tt=>{const Dn=be.dimensions||{};Dn[Be]=tt,be.dimensions=Dn})}),be},fn=ge=>be=>{const Be=be&&be.msg?"Media embed handler error: "+be.msg:"Media embed handler threw unknown error.";ge.notificationManager.open({type:"error",text:Be})},an=ge=>{const be=ge.selection.getNode(),Be=wt(be)?ge.serializer.serialize(be,{selection:!0}):"",tt=dt(Be,ge.schema),Gn=(()=>{if(Ds(tt.source,tt.type)){const Ao=ge.dom.getRect(be);return{width:Ao.w.toString().replace(/px$/,""),height:Ao.h.toString().replace(/px$/,"")}}else return{}})();return{embed:Be,...tt,...Gn}},to=(ge,be)=>Be=>{if($n(Be.url)&&Be.url.trim().length>0){const tt=Be.html,Gn={...dt(tt,be.schema),source:Be.url,embed:tt};ge.setData(At(Gn))}},es=(ge,be)=>{const Be=ge.dom.select("*[data-mce-object]");for(let tt=0;tt<be.length;tt++)for(let Dn=Be.length-1;Dn>=0;Dn--)be[tt]===Be[Dn]&&Be.splice(Dn,1);ge.selection.select(Be[0])},Eo=(ge,be)=>{const Be=ge.dom.select("*[data-mce-object]");ge.insertContent(be),es(ge,Be),ge.nodeChanged()},Ds=(ge,be)=>Lt(be)&&be==="ephox-embed-iri"&&Lt(ce(ge)),Xs=(ge,be)=>((tt,Dn)=>tt.width!==Dn.width||tt.height!==Dn.height)(ge,be)&&Ds(be.source,ge.type),sn=(ge,be,Be)=>{var tt;be.embed=Xs(ge,be)&&rt(Be)?ye(Be,{...be,embed:""}):qn((tt=be.embed)!==null&&tt!==void 0?tt:"",be,!1,Be.schema),be.embed&&(ge.source===be.source||_o(be.source))?Eo(Be,be.embed):ko(Be,be).then(Dn=>{Eo(Be,Dn.html)}).catch(fn(Be))},Do=ge=>{const be=an(ge),Be=_t(be),tt=At(be),Dn=(Xt,Co)=>{const Uo=Ke(Co.getData(),"source");Xt.source!==Uo.source&&(to(Sn,ge)({url:Uo.source,html:""}),ko(ge,Uo).then(to(Sn,ge)).catch(fn(ge)))},Gn=Xt=>{var Co;const Uo=Ke(Xt.getData()),os=dt((Co=Uo.embed)!==null&&Co!==void 0?Co:"",ge.schema);Xt.setData(At(os))},Ao=(Xt,Co,Uo)=>{const os=Ke(Xt.getData(),Co),Cs=Xs(Uo,os)&&rt(ge)?{...os,embed:""}:os,xa=ye(ge,Cs);Xt.setData(At({...Cs,embed:xa}))},Ko=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],Yo=rt(ge)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Fo={title:"General",name:"general",items:Tt([Ko,Yo])},ve={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},at=[];cs(ge)&&at.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),Je(ge)&&at.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const Zt={title:"Advanced",name:"advanced",items:at},yt=[Fo,ve];at.length>0&&yt.push(Zt);const On={type:"tabpanel",tabs:yt},Sn=ge.windowManager.open({title:"Insert/Edit Media",size:"normal",body:On,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Xt=>{const Co=Ke(Xt.getData());sn(Be.get(),Co,ge),Xt.close()},onChange:(Xt,Co)=>{switch(Co.name){case"source":Dn(Be.get(),Xt);break;case"embed":Gn(Xt);break;case"dimensions":case"altsource":case"poster":Ao(Xt,Co.name,Be.get());break}Be.set(Ke(Xt.getData()))},initialData:tt})},To=ge=>({showDialog:()=>{Do(ge)}}),ac=ge=>{const be=()=>{Do(ge)};ge.addCommand("mceMedia",be)};var da=tinymce.util.Tools.resolve("tinymce.Env");const tn=ge=>{const be=ge.name;return be==="iframe"||be==="video"||be==="audio"},Bc=(ge,be,Be,tt=null)=>{const Dn=ge.attr(Be);return Lt(Dn)?Dn:Oo(be,Be)?null:tt},Os=(ge,be,Be)=>{const tt=be.name==="img"||ge.name==="video",Dn=tt?"300":null,Gn=ge.name==="audio"?"30":"150",Ao=tt?Gn:null;be.attr({width:Bc(ge,Be,"width",Dn),height:Bc(ge,Be,"height",Ao)})},Mc=(ge,be,Be,tt)=>{const Dn=Oe(ge.schema).parse(tt,{context:be});for(;Dn.firstChild;)Be.append(Dn.firstChild)},Ma=(ge,be)=>{const Be=be.name,tt=new Ve("img",1);return xs(ge,be,tt),Os(be,tt,{}),tt.attr({style:be.attr("style"),src:da.transparentSrc,"data-mce-object":Be,class:"mce-object mce-object-"+Be}),tt},zr=(ge,be)=>{var Be;const tt=be.name,Dn=new Ve("span",1);Dn.attr({contentEditable:"false",style:be.attr("style"),"data-mce-object":tt,class:"mce-preview-object mce-object-"+tt}),xs(ge,be,Dn);const Gn=ge.dom.parseStyle((Be=be.attr("style"))!==null&&Be!==void 0?Be:""),Ao=new Ve(tt,1);if(Os(be,Ao,Gn),Ao.attr({src:be.attr("src"),style:be.attr("style"),class:be.attr("class")}),tt==="iframe")Ao.attr({allowfullscreen:be.attr("allowfullscreen"),frameborder:"0",sandbox:be.attr("sandbox"),referrerpolicy:be.attr("referrerpolicy")});else{rn(["controls","crossorigin","currentTime","loop","muted","poster","preload"],Z=>{Ao.attr(Z,be.attr(Z))});const Fo=Dn.attr("data-mce-html");Lt(Fo)&&Mc(ge,tt,Ao,unescape(Fo))}const Ko=new Ve("span",1);return Ko.attr("class","mce-shim"),Dn.append(Ao),Dn.append(Ko),Dn},xs=(ge,be,Be)=>{var tt;const Dn=(tt=be.attributes)!==null&&tt!==void 0?tt:[];let Gn=Dn.length;for(;Gn--;){const Fo=Dn[Gn].name;let Z=Dn[Gn].value;Fo!=="width"&&Fo!=="height"&&Fo!=="style"&&!Jt(Fo,"data-mce-")&&((Fo==="data"||Fo==="src")&&(Z=ge.convertURL(Z,Fo)),Be.attr("data-mce-p-"+Fo,Z))}const Ao=Ht({inner:!0},ge.schema),Ko=new Ve("div",1);rn(be.children(),Fo=>Ko.append(Fo));const Yo=Ao.serialize(Ko);Yo&&(Be.attr("data-mce-html",escape(Yo)),Be.empty())},no=ge=>{const be=ge.attr("class");return $n(be)&&/\btiny-pageembed\b/.test(be)},rs=ge=>{let be=ge;for(;be=be.parent;)if(be.attr("data-ephox-embed-iri")||no(be))return!0;return!1},Za=ge=>be=>{let Be=be.length,tt;for(;Be--;)tt=be[Be],tt.parent&&(tt.parent.attr("data-mce-object")||(tn(tt)&&gn(ge)?rs(tt)||tt.replace(zr(ge,tt)):rs(tt)||tt.replace(Ma(ge,tt))))},Fc=(ge,be,Be)=>{const tt=ge.options.get,Dn=tt("xss_sanitization"),Gn=_e(ge);return Oe(ge.schema,{sanitize:Dn,validate:Gn}).parse(Be,{context:be})},ja=ge=>{ge.on("PreInit",()=>{const{schema:be,serializer:Be,parser:tt}=ge,Dn=be.getBoolAttrs();rn("webkitallowfullscreen mozallowfullscreen".split(" "),Gn=>{Dn[Gn]={}}),In({embed:["wmode"]},(Gn,Ao)=>{const Ko=be.getElementRule(Ao);Ko&&rn(Gn,Yo=>{Ko.attributes[Yo]={},Ko.attributesOrder.push(Yo)})}),tt.addNodeFilter("iframe,video,audio,object,embed",Za(ge)),Be.addAttributeFilter("data-mce-object",(Gn,Ao)=>{var Ko;let Yo=Gn.length;for(;Yo--;){const Fo=Gn[Yo];if(!Fo.parent)continue;const Z=Fo.attr(Ao),ve=new Ve(Z,1);if(Z!=="audio"){const On=Fo.attr("class");On&&On.indexOf("mce-preview-object")!==-1&&Fo.firstChild?ve.attr({width:Fo.firstChild.attr("width"),height:Fo.firstChild.attr("height")}):ve.attr({width:Fo.attr("width"),height:Fo.attr("height")})}ve.attr({style:Fo.attr("style")});const at=(Ko=Fo.attributes)!==null&&Ko!==void 0?Ko:[];let Zt=at.length;for(;Zt--;){const On=at[Zt].name;On.indexOf("data-mce-p-")===0&&ve.attr(On.substr(11),at[Zt].value)}const yt=Fo.attr("data-mce-html");if(yt){const On=Fc(ge,Z,unescape(yt));rn(On.children(),Sn=>ve.append(Sn))}Fo.replace(ve)}})}),ge.on("SetContent",()=>{const be=ge.dom;rn(be.select("span.mce-preview-object"),Be=>{be.select("span.mce-shim",Be).length===0&&be.add(Be,"span",{class:"mce-shim"})})})},dn=ge=>{ge.on("ResolveName",be=>{let Be;be.target.nodeType===1&&(Be=be.target.getAttribute("data-mce-object"))&&(be.name=Be)})},Fr=ge=>be=>{const Be=()=>{be.setEnabled(ge.selection.isEditable())};return ge.on("NodeChange",Be),Be(),()=>{ge.off("NodeChange",Be)}},yr=ge=>{const be=()=>ge.execCommand("mceMedia");ge.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:be,onSetup:Be=>{const tt=ge.selection;Be.setActive(wt(tt.getNode()));const Dn=tt.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Be.setActive).unbind,Gn=Fr(ge)(Be);return()=>{Dn(),Gn()}}}),ge.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:be,onSetup:Fr(ge)})};var Ei=()=>{qt.add("media",ge=>(Ze(ge),ac(ge),yr(ge),dn(ge),ja(ge),Ae(ge),To(ge)))};Ei()})()),CJ}var SJ;function tee(){return SJ||(SJ=1,eee()),yJ}tee();var xJ={},EJ={},TJ;function nee(){return TJ||(TJ=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mn=(x,A,L)=>{var X;return L(x,A.prototype)?!0:((X=x.constructor)===null||X===void 0?void 0:X.name)===A.name},Fn=x=>{const A=typeof x;return x===null?"null":A==="object"&&Array.isArray(x)?"array":A==="object"&&Mn(x,String,(L,X)=>X.isPrototypeOf(L))?"string":A},Xn=x=>A=>Fn(A)===x,$n=x=>A=>typeof A===x,Pn=x=>A=>x===A,so=Xn("string"),ct=Xn("array"),Lt=$n("boolean"),st=Pn(void 0),qo=x=>x==null,rn=x=>!qo(x),Tt=$n("function"),mn=$n("number"),fo=()=>{},In=(x,A)=>L=>x(A(L)),nt=x=>()=>x,Oo=x=>x,_t=(x,A)=>x===A;function ae(x,...A){return(...L)=>{const X=A.concat(L);return x.apply(null,X)}}const Jt=x=>{x()},Lo=nt(!1),Ze=nt(!0);class q{constructor(A,L){this.tag=A,this.value=L}static some(A){return new q(!0,A)}static none(){return q.singletonNone}fold(A,L){return this.tag?L(this.value):A()}isSome(){return this.tag}isNone(){return!this.tag}map(A){return this.tag?q.some(A(this.value)):q.none()}bind(A){return this.tag?A(this.value):q.none()}exists(A){return this.tag&&A(this.value)}forall(A){return!this.tag||A(this.value)}filter(A){return!this.tag||A(this.value)?this:q.none()}getOr(A){return this.tag?this.value:A}or(A){return this.tag?this:A}getOrThunk(A){return this.tag?this.value:A()}orThunk(A){return this.tag?this:A()}getOrDie(A){if(this.tag)return this.value;throw new Error(A??"Called getOrDie on None")}static from(A){return rn(A)?q.some(A):q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(A){this.tag&&A(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}q.singletonNone=new q(!1);const Rt=Array.prototype.indexOf,Zn=Array.prototype.push,gn=(x,A)=>Rt.call(x,A),_e=(x,A)=>gn(x,A)>-1,fe=(x,A)=>{for(let L=0,X=x.length;L<X;L++){const Se=x[L];if(A(Se,L))return!0}return!1},cs=(x,A)=>{const L=[];for(let X=0;X<x;X++)L.push(A(X));return L},Je=(x,A)=>{const L=x.length,X=new Array(L);for(let Se=0;Se<L;Se++){const Ge=x[Se];X[Se]=A(Ge,Se)}return X},rt=(x,A)=>{for(let L=0,X=x.length;L<X;L++){const Se=x[L];A(Se,L)}},k=(x,A)=>{for(let L=x.length-1;L>=0;L--){const X=x[L];A(X,L)}},mo=(x,A)=>{const L=[],X=[];for(let Se=0,Ge=x.length;Se<Ge;Se++){const zt=x[Se];(A(zt,Se)?L:X).push(zt)}return{pass:L,fail:X}},it=(x,A)=>{const L=[];for(let X=0,Se=x.length;X<Se;X++){const Ge=x[X];A(Ge,X)&&L.push(Ge)}return L},Mo=(x,A,L)=>(k(x,(X,Se)=>{L=A(L,X,Se)}),L),ln=(x,A,L)=>(rt(x,(X,Se)=>{L=A(L,X,Se)}),L),Ce=(x,A,L)=>{for(let X=0,Se=x.length;X<Se;X++){const Ge=x[X];if(A(Ge,X))return q.some(Ge);if(L(Ge,X))break}return q.none()},dt=(x,A)=>Ce(x,A,Lo),wn=x=>{const A=[];for(let L=0,X=x.length;L<X;++L){if(!ct(x[L]))throw new Error("Arr.flatten item "+L+" was not an array, input: "+x);Zn.apply(A,x[L])}return A},Ve=(x,A)=>wn(Je(x,A)),Ht=(x,A)=>{for(let L=0,X=x.length;L<X;++L){const Se=x[L];if(A(Se,L)!==!0)return!1}return!0},Oe=(x,A)=>{const L={};for(let X=0,Se=x.length;X<Se;X++){const Ge=x[X];L[String(Ge)]=A(Ge,X)}return L},ot=(x,A)=>A>=0&&A<x.length?q.some(x[A]):q.none(),F=x=>ot(x,0),No=x=>ot(x,x.length-1),jn=(x,A)=>{for(let L=0;L<x.length;L++){const X=A(x[L],L);if(X.isSome())return X}return q.none()},qn=Object.keys,yo=Object.hasOwnProperty,ht=(x,A)=>{const L=qn(x);for(let X=0,Se=L.length;X<Se;X++){const Ge=L[X],zt=x[Ge];A(zt,Ge)}},j=x=>(A,L)=>{x[L]=A},ce=(x,A,L,X)=>{ht(x,(Se,Ge)=>{(A(Se,Ge)?L:X)(Se,Ge)})},de=(x,A)=>{const L={};return ce(x,A,j(L),fo),L},ne=(x,A)=>{const L=[];return ht(x,(X,Se)=>{L.push(A(X,Se))}),L},Q=x=>ne(x,Oo),ie=x=>qn(x).length,ye=(x,A)=>wt(x,A)?q.from(x[A]):q.none(),wt=(x,A)=>yo.call(x,A),Ae=(x,A)=>wt(x,A)&&x[A]!==void 0&&x[A]!==null,Ne=x=>{for(const A in x)if(yo.call(x,A))return!1;return!0},un=x=>{let A=x;return{get:()=>A,set:Se=>{A=Se}}},Gt=(x,A,L=_t)=>x.exists(X=>L(X,A)),go=x=>{const A=[],L=X=>{A.push(X)};for(let X=0;X<x.length;X++)x[X].each(L);return A},ko=(x,A,L)=>x.isSome()&&A.isSome()?q.some(L(x.getOrDie(),A.getOrDie())):q.none(),_o=x=>x.bind(Oo),_n=(x,A)=>x?q.some(A):q.none(),ns=x=>{const A=un(q.none()),L=()=>A.get().each(x);return{clear:()=>{L(),A.set(q.none())},isSet:()=>A.get().isSome(),get:()=>A.get(),set:vn=>{L(),A.set(q.some(vn))}}},Ln=()=>ns(x=>x.unbind()),Ke=(x,A)=>x.substring(A),At=(x,A,L)=>A===""||x.length>=A.length&&x.substr(L,L+A.length)===A,fn=(x,A)=>an(x,A)?Ke(x,A.length):x,an=(x,A)=>At(x,A,0),es=(x=>A=>A.replace(x,""))(/^\s+|\s+$/g),Eo=x=>x.length>0,Ds=x=>!Eo(x),Xs=(x,A=10)=>{const L=parseInt(x,A);return isNaN(L)?q.none():q.some(L)},sn=x=>{const A=parseFloat(x);return isNaN(A)?q.none():q.some(A)},Do=x=>{let A=!1,L;return(...X)=>(A||(A=!0,L=x.apply(null,X)),L)},To=(x,A)=>{const X=(A||document).createElement("div");if(X.innerHTML=x,!X.hasChildNodes()||X.childNodes.length>1){const Se="HTML does not have a single root node";throw console.error(Se,x),new Error(Se)}return tn(X.childNodes[0])},ac=(x,A)=>{const X=(A||document).createElement(x);return tn(X)},da=(x,A)=>{const X=(A||document).createTextNode(x);return tn(X)},tn=x=>{if(x==null)throw new Error("Node cannot be null or undefined");return{dom:x}},Os={fromHtml:To,fromTag:ac,fromText:da,fromDom:tn,fromPoint:(x,A,L)=>q.from(x.dom.elementFromPoint(A,L)).map(tn)},Mc=8,Ma=9,zr=11,xs=1,no=3,rs=(x,A)=>{const L=x.dom;if(L.nodeType!==xs)return!1;{const X=L;if(X.matches!==void 0)return X.matches(A);if(X.msMatchesSelector!==void 0)return X.msMatchesSelector(A);if(X.webkitMatchesSelector!==void 0)return X.webkitMatchesSelector(A);if(X.mozMatchesSelector!==void 0)return X.mozMatchesSelector(A);throw new Error("Browser lacks native selectors")}},Za=x=>x.nodeType!==xs&&x.nodeType!==Ma&&x.nodeType!==zr||x.childElementCount===0,Fc=(x,A)=>{const L=A===void 0?document:A.dom;return Za(L)?[]:Je(L.querySelectorAll(x),Os.fromDom)},ja=(x,A)=>{const L=A===void 0?document:A.dom;return Za(L)?q.none():q.from(L.querySelector(x)).map(Os.fromDom)},dn=(x,A)=>x.dom===A.dom,Fr=rs,yr=x=>x.dom.nodeName.toLowerCase(),Ei=x=>x.dom.nodeType,ge=x=>A=>Ei(A)===x,be=x=>Ei(x)===Mc||yr(x)==="#comment",Be=ge(xs),tt=ge(no),Dn=ge(Ma),Gn=ge(zr),Ao=x=>A=>Be(A)&&yr(A)===x,Ko=x=>Os.fromDom(x.dom.ownerDocument),Yo=x=>Dn(x)?x:Ko(x),Fo=x=>q.from(x.dom.parentNode).map(Os.fromDom),Z=(x,A)=>{const L=Tt(A)?A:Lo;let X=x.dom;const Se=[];for(;X.parentNode!==null&&X.parentNode!==void 0;){const Ge=X.parentNode,zt=Os.fromDom(Ge);if(Se.push(zt),L(zt)===!0)break;X=Ge}return Se},ve=x=>q.from(x.dom.previousSibling).map(Os.fromDom),at=x=>q.from(x.dom.nextSibling).map(Os.fromDom),Zt=x=>Je(x.dom.childNodes,Os.fromDom),yt=(x,A)=>{const L=x.dom.childNodes;return q.from(L[A]).map(Os.fromDom)},On=x=>yt(x,0),Sn=x=>Gn(x)&&rn(x.dom.host),Xt=x=>Os.fromDom(x.dom.getRootNode()),Co=x=>{const A=Xt(x);return Sn(A)?q.some(A):q.none()},Uo=x=>Os.fromDom(x.dom.host),os=(x,A)=>{Fo(x).each(X=>{X.dom.insertBefore(A.dom,x.dom)})},Cs=(x,A)=>{at(x).fold(()=>{Fo(x).each(Se=>{Er(Se,A)})},X=>{os(X,A)})},xa=(x,A)=>{On(x).fold(()=>{Er(x,A)},X=>{x.dom.insertBefore(A.dom,X.dom)})},Er=(x,A)=>{x.dom.appendChild(A.dom)},Ol=(x,A)=>{os(x,A),Er(A,x)},Gs=(x,A)=>{rt(A,(L,X)=>{const Se=X===0?x:A[X-1];Cs(Se,L)})},is=(x,A)=>{rt(A,L=>{Er(x,L)})},Rs=(x,A,L)=>{if(so(L)||Lt(L)||mn(L))x.setAttribute(A,L+"");else throw console.error("Invalid call to Attribute.set. Key ",A,":: Value ",L,":: Element ",x),new Error("Attribute value was not simple")},ma=(x,A,L)=>{Rs(x.dom,A,L)},Hi=(x,A)=>{const L=x.dom;ht(A,(X,Se)=>{Rs(L,Se,X)})},er=(x,A)=>{const L=x.dom.getAttribute(A);return L===null?void 0:L},Kn=(x,A)=>q.from(er(x,A)),fa=(x,A)=>{x.dom.removeAttribute(A)},Ea=x=>ln(x.dom.attributes,(A,L)=>(A[L.name]=L.value,A),{}),cr=x=>{const A=x.dom;A.parentNode!==null&&A.parentNode.removeChild(A)},Yu=x=>{const A=Zt(x);A.length>0&&Gs(x,A),cr(x)},hu=x=>Je(x,Os.fromDom),Js=x=>x.style!==void 0&&Tt(x.style.getPropertyValue),Ti=x=>{const A=tt(x)?x.dom.parentNode:x.dom;if(A==null||A.ownerDocument===null)return!1;const L=A.ownerDocument;return Co(Os.fromDom(A)).fold(()=>L.body.contains(A),In(Ti,Uo))},si=(x,A,L)=>{if(!so(L))throw console.error("Invalid call to CSS.set. Property ",A,":: Value ",L,":: Element ",x),new Error("CSS value must be a string: "+L);Js(x)&&x.style.setProperty(A,L)},Xu=(x,A)=>{Js(x)&&x.style.removeProperty(A)},Ut=(x,A,L)=>{const X=x.dom;si(X,A,L)},Nc=(x,A)=>{const L=x.dom,Se=window.getComputedStyle(L).getPropertyValue(A);return Se===""&&!Ti(x)?Fa(L,A):Se},Fa=(x,A)=>Js(x)?x.style.getPropertyValue(A):"",qa=(x,A)=>{const L=x.dom,X=Fa(L,A);return q.from(X).filter(Se=>Se.length>0)},ir=(x,A)=>{const L=x.dom;Xu(L,A),Gt(Kn(x,"style").map(es),"")&&fa(x,"style")},pu=(x,A)=>sn(x).getOr(A),Ga=(x,A,L)=>pu(Nc(x,A),L),yc=(x,A,L,X)=>{const Se=Ga(x,`padding-${L}`,0),Ge=Ga(x,`padding-${X}`,0),zt=Ga(x,`border-${L}-width`,0),vn=Ga(x,`border-${X}-width`,0);return A-Se-Ge-zt-vn},Rl=(x,A)=>{const L=x.dom,X=L.getBoundingClientRect().width||L.offsetWidth;return yc(x,X,"left","right")},zi=x=>Rl(x),Bl=((x,A)=>{const L=Ge=>{if(!x(Ge))throw new Error("Can only get "+A+" value of a "+A+" node");return X(Ge).getOr("")},X=Ge=>x(Ge)?q.from(Ge.dom.nodeValue):q.none();return{get:L,getOption:X,set:(Ge,zt)=>{if(!x(Ge))throw new Error("Can only set raw "+A+" value of a "+A+" node");Ge.dom.nodeValue=zt}}})(tt,"text"),Vi=x=>Bl.get(x),Ml=(x,A)=>Bl.set(x,A);var Nt=(x,A,L,X,Se)=>x(L,X)?q.some(L):Tt(Se)&&Se(L)?q.none():A(L,X,Se);const ll=(x,A,L)=>{let X=x.dom;const Se=Tt(L)?L:Lo;for(;X.parentNode;){X=X.parentNode;const Ge=Os.fromDom(X);if(A(Ge))return q.some(Ge);if(Se(Ge))break}return q.none()},Qu=(x,A,L)=>Nt((Se,Ge)=>Ge(Se),ll,x,A,L),H=(x,A)=>{const L=Se=>A(Os.fromDom(Se));return dt(x.dom.childNodes,L).map(Os.fromDom)},le=(x,A,L)=>ll(x,X=>rs(X,A),L),ke=(x,A)=>H(x,L=>rs(L,A)),Xe=(x,A)=>ja(A,x),Mt=(x,A,L)=>Nt((Se,Ge)=>rs(Se,Ge),le,x,A,L),cn=x=>Mt(x,"[contenteditable]"),Po=(x,A=!1)=>Ti(x)?x.dom.isContentEditable:cn(x).fold(nt(A),L=>So(L)==="true"),So=x=>x.dom.contentEditable,fs=(x,A)=>it(Zt(x),A),N=(x,A)=>{let L=[];return rt(Zt(x),X=>{A(X)&&(L=L.concat([X])),L=L.concat(N(X,A))}),L},U=(x,A)=>fs(x,L=>rs(L,A)),me=(x,A)=>Fc(A,x),He=(x,A)=>ke(x,A).isSome(),nn=x=>x.nodeName.toLowerCase(),Xo=x=>Os.fromDom(x.getBody()),Bs=x=>A=>dn(A,Xo(x)),Or=x=>x?x.replace(/px$/,""):"",Na=x=>/^\d+(\.\d+)?$/.test(x)?x+"px":x,Cc=x=>Os.fromDom(x.selection.getStart()),Jo=x=>Os.fromDom(x.selection.getEnd()),ul=x=>Qu(x,Ao("table")).forall(Po),_m=["tfoot","thead","tbody","colgroup"],Ui=x=>_e(_m,x),ig=(x,A)=>({rows:x,columns:A}),Dm=(x,A,L)=>({element:x,rowspan:A,colspan:L}),wc=(x,A,L,X,Se,Ge)=>({element:x,rowspan:A,colspan:L,row:X,column:Se,isLocked:Ge}),ed=(x,A,L)=>({element:x,cells:A,section:L}),td=(x,A,L,X)=>({startRow:x,startCol:A,finishRow:L,finishCol:X}),Ah=(x,A,L)=>({element:x,colspan:A,column:L}),lg=(x,A)=>({element:x,columns:A}),ug=(x,A,L=0)=>Kn(x,A).map(X=>parseInt(X,10)).getOr(L),kh=(x,A)=>ff(x,A,Ze),ff=(x,A,L)=>Ve(Zt(x),X=>rs(X,A)?L(X)?[X]:[]:ff(X,A,L)),Wi=(x,A,L=Lo)=>{if(L(A))return q.none();if(_e(x,yr(A)))return q.some(A);const X=Se=>rs(Se,"table")||L(Se);return le(A,x.join(","),X)},_h=(x,A)=>Wi(["td","th"],x,A),Dh=x=>kh(x,"th,td"),K=x=>rs(x,"colgroup")?U(x,"col"):Ve(ut(x),A=>U(A,"col")),ue=(x,A)=>Mt(x,"table",A),Fe=x=>kh(x,"tr"),ut=x=>ue(x).fold(nt([]),A=>U(A,"colgroup")),Hn=Ao("th"),Ro=(x,A)=>x&&A?"sectionCells":x?"section":"cells",Rr=x=>{const A=x.section==="thead",L=Gt(Sc(x.cells),"th");return x.section==="tfoot"?{type:"footer"}:A||L?{type:"header",subType:Ro(A,L)}:{type:"body"}},Sc=x=>{const A=it(x,L=>Hn(L.element));return A.length===0?q.some("td"):A.length===x.length?q.some("th"):q.none()},ga=x=>{const A=Je(x,Se=>Rr(Se).type),L=_e(A,"header"),X=_e(A,"footer");if(!L&&!X)return q.some("body");{const Se=_e(A,"body");return L&&!Se&&!X?q.some("header"):!L&&!Se&&X?q.some("footer"):q.none()}},xc=(x,A)=>Je(x,L=>{if(yr(L)==="colgroup"){const X=Je(K(L),Se=>{const Ge=ug(Se,"span",1);return Dm(Se,1,Ge)});return ed(L,X,"colgroup")}else{const X=Je(Dh(L),Se=>{const Ge=ug(Se,"rowspan",1),zt=ug(Se,"colspan",1);return Dm(Se,Ge,zt)});return ed(L,X,A(L))}}),vu=x=>Fo(x).map(A=>{const L=yr(A);return Ui(L)?L:"tbody"}).getOr("tbody"),Ec=x=>{const A=Fe(x),X=[...ut(x),...A];return xc(X,vu)},yu="data-snooker-locked-cols",Tc=x=>Kn(x,yu).bind(A=>q.from(A.match(/\d+/g))).map(A=>Oe(A,Ze)),Pc=(x,A)=>x+","+A,Fl=(x,A,L)=>q.from(x.access[Pc(A,L)]),$c=(x,A,L)=>{const X=Ho(x,Se=>L(A,Se.element));return X.length>0?q.some(X[0]):q.none()},Ho=(x,A)=>{const L=Ve(x.all,X=>X.cells);return it(L,A)},gf=x=>{const A={};let L=0;return rt(x.cells,X=>{const Se=X.colspan;cs(Se,Ge=>{const zt=L+Ge;A[zt]=Ah(X.element,Se,zt)}),L+=Se}),A},Oh=x=>{const A={},L=[],Se=F(x).map(zc=>zc.element).bind(ue).bind(Tc).getOr({});let Ge=0,zt=0,vn=0;const{pass:po,fail:$o}=mo(x,zc=>zc.section==="colgroup");rt($o,zc=>{const cd=[];rt(zc.cells,id=>{let yl=0;for(;A[Pc(vn,yl)]!==void 0;)yl++;const p1=Ae(Se,yl.toString()),Ef=wc(id.element,id.rowspan,id.colspan,vn,yl,p1);for(let $h=0;$h<id.colspan;$h++)for(let Bm=0;Bm<id.rowspan;Bm++){const Tf=vn+Bm,Ih=yl+$h,Lh=Pc(Tf,Ih);A[Lh]=Ef,zt=Math.max(zt,Ih+1)}cd.push(Ef)}),Ge++,L.push(ed(zc.element,cd,zc.section)),vn++});const{columns:Ks,colgroups:ur}=No(po).map(zc=>{const cd=gf(zc);return{colgroups:[lg(zc.element,Q(cd))],columns:cd}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ig(Ge,zt),access:A,all:L,columns:Ks,colgroups:ur}},Nr={fromTable:x=>{const A=Ec(x);return Oh(A)},generate:Oh,getAt:Fl,findItem:$c,filterItems:Ho,justCells:x=>Ve(x.all,A=>A.cells),justColumns:x=>Q(x.columns),hasColumns:x=>qn(x.columns).length>0,getColumnAt:(x,A)=>q.from(x.columns[A])},Om=(x,A)=>jn(x.all,L=>dt(L.cells,X=>dn(A,X.element))),_y=(x,A,L)=>{const X=Je(A.selection,Ge=>_h(Ge).bind(zt=>Om(x,zt)).filter(L)),Se=go(X);return _n(Se.length>0,Se)},kt=(x,A)=>A.mergable,Ai=(x,A)=>A.unmergable,dg=(x,A)=>_y(x,A,Ze),dl=(x,A)=>Om(x,A).exists(L=>!L.isLocked),hf=(x,A)=>Ht(A,L=>dl(x,L)),Yp=(x,A)=>kt(x,A).filter(L=>hf(x,L.cells)),oe=(x,A)=>Ai(x,A).filter(L=>hf(x,L));var ri=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],$d=()=>{const x=$o=>Os.fromDom($o.dom.cloneNode(!1)),A=$o=>Yo($o).dom,L=$o=>Be($o)?yr($o)==="body"?!0:_e(ri,yr($o)):!1,X=$o=>Be($o)?_e(["br","img","hr","input"],yr($o)):!1,Se=$o=>Be($o)&&er($o,"contenteditable")==="false",Ge=($o,Ks)=>$o.dom.compareDocumentPosition(Ks.dom),zt=($o,Ks)=>{const ur=Ea($o);Hi(Ks,ur)},vn=$o=>{const Ks=yr($o);return _e(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Ks)},po=$o=>Be($o)?Kn($o,"lang"):q.none();return{up:nt({selector:le,closest:Mt,predicate:ll,all:Z}),down:nt({selector:me,predicate:N}),styles:nt({get:Nc,getRaw:qa,set:Ut,remove:ir}),attrs:nt({get:er,set:ma,remove:fa,copyTo:zt}),insert:nt({before:os,after:Cs,afterAll:Gs,append:Er,appendAll:is,prepend:xa,wrap:Ol}),remove:nt({unwrap:Yu,remove:cr}),create:nt({nu:Os.fromTag,clone:x,text:Os.fromText}),query:nt({comparePosition:Ge,prevSibling:ve,nextSibling:at}),property:nt({children:Zt,name:yr,parent:Fo,document:A,isText:tt,isComment:be,isElement:Be,isSpecial:vn,getLanguage:po,getText:Vi,setText:Ml,isBoundary:L,isEmptyTag:X,isNonEditable:Se}),eq:dn,is:Fr}};const Xp=(x,A,L,X)=>{const Se=L[0],Ge=L.slice(1);return X(x,A,Se,Ge)},pf=(x,A,L)=>L.length>0?Xp(x,A,L,cc):q.none(),cc=(x,A,L,X)=>{const Se=A(x,L);return Mo(X,(Ge,zt)=>{const vn=A(x,zt);return ai(x,Ge,vn)},Se)},ai=(x,A,L)=>A.bind(X=>L.filter(ae(x.eq,X))),Jp=pf,Qp=$d(),mg=(x,A)=>Jp(Qp,(L,X)=>x(X),A),e1=(x,A)=>{const L=Nr.fromTable(x);return dg(L,A).bind(Se=>{const Ge=Se[Se.length-1],zt=Se[0].row,vn=Ge.row+Ge.rowspan,po=L.all.slice(zt,vn);return ga(po)}).getOr("")},Cu=(x,A)=>A.column>=x.startCol&&A.column+A.colspan-1<=x.finishCol&&A.row>=x.startRow&&A.row+A.rowspan-1<=x.finishRow,fg=(x,A)=>{let L=!0;const X=ae(Cu,A);for(let Se=A.startRow;Se<=A.finishRow;Se++)for(let Ge=A.startCol;Ge<=A.finishCol;Ge++)L=L&&Nr.getAt(x,Se,Ge).exists(X);return L?q.some(A):q.none()},t1=(x,A)=>td(Math.min(x.row,A.row),Math.min(x.column,A.column),Math.max(x.row+x.rowspan-1,A.row+A.rowspan-1),Math.max(x.column+x.colspan-1,A.column+A.colspan-1)),ki=(x,A,L)=>{const X=Nr.findItem(x,A,dn),Se=Nr.findItem(x,L,dn);return X.bind(Ge=>Se.map(zt=>t1(Ge,zt)))},n1=(x,A,L)=>ki(x,A,L).bind(X=>fg(x,X)),Nl=(x,A,L)=>{const X=Id(x);return n1(X,A,L)},Id=Nr.fromTable;var Qo=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ic=(x,A,L)=>{const X=x.select("td,th",A);let Se;for(let Ge=0;Ge<X.length;Ge++){const zt=x.getStyle(X[Ge],L);if(st(Se)&&(Se=zt),Se!==zt)return""}return Se},bf=(x,A,L)=>{Qo.each("left center right".split(" "),X=>{X!==L&&x.formatter.remove("align"+X,{},A)}),L&&x.formatter.apply("align"+L,{},A)},eb=(x,A,L)=>{Qo.each("top middle bottom".split(" "),X=>{X!==L&&x.formatter.remove("valign"+X,{},A)}),L&&x.formatter.apply("valign"+L,{},A)},Bo=(x,A,L)=>{x.dispatch("TableModified",{...L,table:A})};var nd=tinymce.util.Tools.resolve("tinymce.Env");const Xr="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Pl=cs(5,x=>{const A=`${x+1}px`;return{title:A,value:A}}),$l=Je(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],x=>({title:x,value:x.toLowerCase()})),Tr="100%",Es=x=>{var A;const L=x.dom,X=(A=L.getParent(x.selection.getStart(),L.isBlock))!==null&&A!==void 0?A:x.getBody();return zi(Os.fromDom(X))+"px"},Dy=(x,A)=>tb(x)||!Hc(x)?A:Ld(x)?{...A,width:Es(x)}:{...A,width:Tr},Oy=(x,A)=>tb(x)||Hc(x)?A:Ld(x)?{...A,width:Es(x)}:{...A,width:Tr},Jr=x=>A=>A.options.get(x),ml=x=>{const A=x.options.register;A("table_border_widths",{processor:"object[]",default:Pl}),A("table_border_styles",{processor:"object[]",default:$l}),A("table_cell_advtab",{processor:"boolean",default:!0}),A("table_row_advtab",{processor:"boolean",default:!0}),A("table_advtab",{processor:"boolean",default:!0}),A("table_appearance_options",{processor:"boolean",default:!0}),A("table_grid",{processor:"boolean",default:!nd.deviceType.isTouch()}),A("table_cell_class_list",{processor:"object[]",default:[]}),A("table_row_class_list",{processor:"object[]",default:[]}),A("table_class_list",{processor:"object[]",default:[]}),A("table_toolbar",{processor:"string",default:Xr}),A("table_background_color_map",{processor:"object[]",default:[]}),A("table_border_color_map",{processor:"object[]",default:[]})},fl=Jr("table_sizing_mode"),oa=Jr("table_border_widths"),Il=Jr("table_border_styles"),Lc=Jr("table_cell_advtab"),_i=Jr("table_row_advtab"),ic=Jr("table_advtab"),_s=Jr("table_appearance_options"),Zi=Jr("table_grid"),Hc=Jr("table_style_by_css"),Pa=Jr("table_cell_class_list"),Ta=Jr("table_row_class_list"),wr=Jr("table_class_list"),gl=Jr("table_toolbar"),Aa=Jr("table_background_color_map"),Vr=Jr("table_border_color_map"),Ld=x=>fl(x)==="fixed",tb=x=>fl(x)==="responsive",Rh=x=>{const A=x.options,L=A.get("table_default_styles");return A.isSet("table_default_styles")?L:Dy(x,L)},ka=x=>{const A=x.options,L=A.get("table_default_attributes");return A.isSet("table_default_attributes")?L:Oy(x,L)},o1=x=>le(x,"table"),nb=(x,A)=>{const L=me(x,A);return L.length>0?q.some(L):q.none()},Rm=(x,A,L)=>Xe(x,A).bind(X=>Xe(x,L).bind(Se=>mg(o1,[X,Se]).map(Ge=>({first:X,last:Se,table:Ge})))),zn=(x,A)=>nb(x,A),s1=(x,A,L)=>Rm(x,A,L).bind(X=>{const Se=po=>dn(x,po),Ge="thead,tfoot,tbody,table",zt=le(X.first,Ge,Se),vn=le(X.last,Ge,Se);return zt.bind(po=>vn.bind($o=>dn(po,$o)?Nl(X.table,X.first,X.last):q.none()))}),ha=Oo,$a=x=>{const A=(X,Se)=>Kn(X,Se).exists(Ge=>parseInt(Ge,10)>1),L=X=>A(X,"rowspan")||A(X,"colspan");return x.length>0&&Ht(x,L)?q.some(x):q.none()},Ia=(x,A,L)=>A.length<=1?q.none():s1(x,L.firstSelectedSelector,L.lastSelectedSelector).map(X=>({bounds:X,cells:A})),tr="data-mce-selected",Hd="data-mce-first-selected",Bh="td["+Hd+"],th["+Hd+"]",ji="data-mce-last-selected",Ll="td["+ji+"],th["+ji+"]",r1={selected:tr,firstSelectedSelector:Bh,lastSelectedSelector:Ll},a1=x=>ue(x).bind(A=>zn(A,r1.firstSelectedSelector)).fold(nt(x),A=>A[0]),gg=x=>(A,L)=>{const X=yr(A),Se=X==="col"||X==="colgroup"?a1(A):A;return Mt(Se,x,L)},wu=gg("th,td,caption"),hl=gg("th,td"),c1=x=>hu(x.model.table.getSelectedCells()),Ka=(x,A)=>{const L=hl(x),X=L.bind(Se=>ue(Se)).map(Se=>Fe(Se));return ko(L,X,(Se,Ge)=>it(Ge,zt=>fe(hu(zt.dom.cells),vn=>er(vn,A)==="1"||dn(vn,Se)))).getOr([])},qi=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Su=x=>({value:hg(x)}),gs=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Di=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ob=x=>gs.test(x)||Di.test(x),hg=x=>fn(x,"#").toUpperCase(),Gi=x=>ob(x)?q.some({value:hg(x)}):q.none(),Jn=x=>{const A=x.toString(16);return(A.length===1?"0"+A:A).toUpperCase()},Cr=x=>{const A=Jn(x.red)+Jn(x.green)+Jn(x.blue);return Su(A)},Ya=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,nr=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Ki=(x,A,L,X)=>({red:x,green:A,blue:L,alpha:X}),lr=(x,A,L,X)=>{const Se=parseInt(x,10),Ge=parseInt(A,10),zt=parseInt(L,10),vn=parseFloat(X);return Ki(Se,Ge,zt,vn)},Qr=x=>{const A=Ya.exec(x);if(A!==null)return q.some(lr(A[1],A[2],A[3],"1"));const L=nr.exec(x);return L!==null?q.some(lr(L[1],L[2],L[3],L[4])):q.none()},vf=x=>Gi(x).orThunk(()=>Qr(x).map(Cr)).getOrThunk(()=>{const A=document.createElement("canvas");A.height=1,A.width=1;const L=A.getContext("2d");L.clearRect(0,0,A.width,A.height),L.fillStyle="#FFFFFF",L.fillStyle=x,L.fillRect(0,0,1,1);const X=L.getImageData(0,0,1,1).data,Se=X[0],Ge=X[1],zt=X[2],vn=X[3];return Cr(Ki(Se,Ge,zt,vn))}),Wo=x=>Qr(x).map(Cr).map(A=>"#"+A.value).getOr(x),pl=(x,A,L)=>X=>{const Se=Ln(),Ge=Ds(L),zt=()=>{const vn=c1(x),po=$o=>x.formatter.match(A,{value:L},$o.dom,Ge);Ge?(X.setActive(!fe(vn,po)),Se.set(x.formatter.formatChanged(A,$o=>X.setActive(!$o),!0))):(X.setActive(Ht(vn,po)),Se.set(x.formatter.formatChanged(A,X.setActive,!1,{value:L})))};return x.initialized?zt():x.on("init",zt),Se.clear},Ws=x=>Ae(x,"menu"),ii=x=>Je(x,A=>{const L=A.text||A.title||"";return Ws(A)?{text:L,items:ii(A.menu)}:{text:L,value:A.value}}),ea=x=>x.length?q.some(ii([{text:"Select...",value:"mce-no-match"},...x])):q.none(),ta=(x,A,L,X)=>Je(A,Se=>{const Ge=Se.text||Se.title;return Ws(Se)?{type:"nestedmenuitem",text:Ge,getSubmenuItems:()=>ta(x,Se.menu,L,X)}:{text:Ge,type:"togglemenuitem",onAction:()=>X(Se.value),onSetup:pl(x,L,Se.value)}}),xu=(x,A)=>L=>{x.execCommand("mceTableApplyCellStyle",!1,{[A]:L})},yf=x=>Ve(x,A=>Ws(A)?[{...A,menu:yf(A.menu)}]:Eo(A.value)?[A]:[]),od=(x,A,L,X)=>Se=>Se(ta(x,A,L,X)),zd=(x,A,L)=>{const X=Je(A,Se=>({text:Se.title,value:"#"+vf(Se.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:X.length>0?X:void 0,allowCustomColors:!1},onAction:Se=>{const Ge=Se.value==="remove"?"":Se.value;x.execCommand("mceTableApplyCellStyle",!1,{[L]:Ge})}}]},Vd=x=>()=>{const L=x.queryCommandValue("mceTableRowType")==="header"?"body":"header";x.execCommand("mceTableRowType",!1,{type:L})},Xa=x=>()=>{const L=x.queryCommandValue("mceTableColType")==="th"?"td":"th";x.execCommand("mceTableColType",!1,{type:L})},sd=x=>ea(Pa(x)).map(A=>({name:"class",type:"listbox",label:"Class",items:A})),Ry=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:qi}],Ud=x=>Ry.concat(sd(x).toArray()),Ms=(x,A)=>{const X=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(ii(Il(x)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:A==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(X):X}},Cf={normal:(x,A)=>{const L=x.dom;return{setAttrib:(zt,vn)=>{L.setAttrib(A,zt,vn)},setStyle:(zt,vn)=>{L.setStyle(A,zt,vn)},setFormat:(zt,vn)=>{vn===""?x.formatter.remove(zt,{value:null},A,!0):x.formatter.apply(zt,{value:vn},A)}}}},lc=x=>an(x,"rgb")?Wo(x):x,li=x=>{const A=Os.fromDom(x);return{borderwidth:qa(A,"border-width").getOr(""),borderstyle:qa(A,"border-style").getOr(""),bordercolor:qa(A,"border-color").map(lc).getOr(""),backgroundcolor:qa(A,"background-color").map(lc).getOr("")}},Pr=x=>{const A=x[0],L=x.slice(1);return rt(L,X=>{rt(qn(A),Se=>{ht(X,(Ge,zt)=>{const vn=A[Se];vn!==""&&Se===zt&&vn!==Ge&&(A[Se]=Se==="class"?"mce-no-match":"")})})}),A},rd=(x,A,L,X)=>dt(x,Se=>!st(L.formatter.matchNode(X,A+Se))).getOr(""),Ur=ae(rd,["left","center","right"],"align"),wf=ae(rd,["top","middle","bottom"],"valign"),Mh=(x,A)=>{const L=Rh(x),X=ka(x),Se=()=>({borderstyle:ye(L,"border-style").getOr(""),bordercolor:lc(ye(L,"border-color").getOr("")),backgroundcolor:lc(ye(L,"background-color").getOr(""))}),Ge={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},zt=()=>{const Ks=L["border-width"];return Hc(x)&&Ks?{border:Ks}:ye(X,"border").fold(()=>({}),ur=>({border:ur}))},vn=A?Se():{},po=()=>{const Ks=ye(L,"border-spacing").or(ye(X,"cellspacing")).fold(()=>({}),na=>({cellspacing:na})),ur=ye(L,"border-padding").or(ye(X,"cellpadding")).fold(()=>({}),na=>({cellpadding:na}));return{...Ks,...ur}};return{...Ge,...L,...X,...vn,...zt(),...po()}},l1=x=>ue(Os.fromDom(x)).map(A=>{const L={selection:hu(x.cells)};return e1(A,L)}).getOr(""),sS=(x,A,L)=>{const X=(vn,po)=>{const $o=qa(Os.fromDom(po),"border-width");return Hc(x)&&$o.isSome()?$o.getOr(""):vn.getAttrib(po,"border")||Ic(x.dom,po,"border-width")||Ic(x.dom,po,"border")||""},Se=x.dom,Ge=Hc(x)?Se.getStyle(A,"border-spacing")||Se.getAttrib(A,"cellspacing"):Se.getAttrib(A,"cellspacing")||Se.getStyle(A,"border-spacing"),zt=Hc(x)?Ic(Se,A,"padding")||Se.getAttrib(A,"cellpadding"):Se.getAttrib(A,"cellpadding")||Ic(Se,A,"padding");return{width:Se.getStyle(A,"width")||Se.getAttrib(A,"width"),height:Se.getStyle(A,"height")||Se.getAttrib(A,"height"),cellspacing:Ge??"",cellpadding:zt??"",border:X(Se,A),caption:!!Se.select("caption",A)[0],class:Se.getAttrib(A,"class",""),align:Ur(x,A),...L?li(A):{}}},Hl=(x,A,L)=>{const X=x.dom;return{height:X.getStyle(A,"height")||X.getAttrib(A,"height"),class:X.getAttrib(A,"class",""),type:l1(A),align:Ur(x,A),...L?li(A):{}}},By=(x,A,L,X)=>{const Se=x.dom,Ge=X.getOr(A);return{width:((vn,po)=>Se.getStyle(vn,po)||Se.getAttrib(vn,po))(Ge,"width"),scope:Se.getAttrib(A,"scope"),celltype:nn(A),class:Se.getAttrib(A,"class",""),halign:Ur(x,A),valign:wf(x,A),...L?li(A):{}}},u1=(x,A)=>{const L=Nr.fromTable(x),X=Nr.justCells(L),Se=it(X,Ge=>fe(A,zt=>dn(Ge.element,zt)));return Je(Se,Ge=>({element:Ge.element.dom,column:Nr.getColumnAt(L,Ge.column).map(zt=>zt.element.dom)}))},zl=(x,A,L,X)=>{X("scope")&&x.setAttrib("scope",L.scope),X("class")&&L.class!=="mce-no-match"&&x.setAttrib("class",L.class),X("width")&&A.setStyle("width",Na(L.width))},sb=(x,A,L)=>{L("backgroundcolor")&&x.setFormat("tablecellbackgroundcolor",A.backgroundcolor),L("bordercolor")&&x.setFormat("tablecellbordercolor",A.bordercolor),L("borderstyle")&&x.setFormat("tablecellborderstyle",A.borderstyle),L("borderwidth")&&x.setFormat("tablecellborderwidth",Na(A.borderwidth))},Sf=(x,A,L,X)=>{const Se=A.length===1;rt(A,Ge=>{const zt=Ge.element,vn=Se?Ze:X,po=Cf.normal(x,zt),$o=Ge.column.map(Ks=>Cf.normal(x,Ks)).getOr(po);zl(po,$o,L,vn),Lc(x)&&sb(po,L,vn),X("halign")&&bf(x,zt,L.halign),X("valign")&&eb(x,zt,L.valign)})},pg=(x,A)=>{x.execCommand("mceTableCellType",!1,{type:A.celltype,no_events:!0})},bg=(x,A,L,X)=>{const Se=de(X,(Ge,zt)=>L[zt]!==Ge);ie(Se)>0&&A.length>=1&&ue(A[0]).each(Ge=>{const zt=u1(Ge,A),vn=ie(de(Se,($o,Ks)=>Ks!=="scope"&&Ks!=="celltype"))>0,po=wt(Se,"celltype");(vn||wt(Se,"scope"))&&Sf(x,zt,X,ae(wt,Se)),po&&pg(x,X),Bo(x,Ge.dom,{structure:po,style:vn})})},d1=(x,A,L,X)=>{const Se=X.getData();X.close(),x.undoManager.transact(()=>{bg(x,A,L,Se),x.focus()})},rb=(x,A)=>{const L=ue(A[0]).map(X=>Je(u1(X,A),Se=>By(x,Se.element,Lc(x),Se.column)));return Pr(L.getOrDie())},bl=x=>{const A=c1(x);if(A.length===0)return;const L=rb(x,A),X={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ud(x)},Ms(x,"cell")]},Se={type:"panel",items:[{type:"grid",columns:2,items:Ud(x)}]};x.windowManager.open({title:"Cell Properties",size:"normal",body:Lc(x)?X:Se,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:L,onSubmit:ae(d1,x,A,L)})},My=x=>ea(Ta(x)).map(A=>({name:"class",type:"listbox",label:"Class",items:A})),Wd=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Fs=x=>Wd.concat(My(x).toArray()),uc=(x,A,L)=>{L("class")&&A.class!=="mce-no-match"&&x.setAttrib("class",A.class),L("height")&&x.setStyle("height",Na(A.height))},Eu=(x,A,L)=>{L("backgroundcolor")&&x.setStyle("background-color",A.backgroundcolor),L("bordercolor")&&x.setStyle("border-color",A.bordercolor),L("borderstyle")&&x.setStyle("border-style",A.borderstyle)},m1=(x,A,L,X)=>{const Ge=A.length===1?Ze:X;rt(A,zt=>{const vn=U(Os.fromDom(zt),"td,th"),po=Cf.normal(x,zt);uc(po,L,Ge),_i(x)&&Eu(po,L,Ge),X("height")&&rt(vn,$o=>{x.dom.setStyle($o.dom,"height",null)}),X("align")&&bf(x,zt,L.align)})},Zd=(x,A)=>{x.execCommand("mceTableRowType",!1,{type:A.type,no_events:!0})},f1=(x,A,L,X)=>{const Se=de(X,(Ge,zt)=>L[zt]!==Ge);if(ie(Se)>0){const Ge=wt(Se,"type"),zt=Ge?ie(Se)>1:!0;zt&&m1(x,A,X,ae(wt,Se)),Ge&&Zd(x,X),ue(Os.fromDom(A[0])).each(vn=>Bo(x,vn.dom,{structure:Ge,style:zt}))}},ab=(x,A,L,X)=>{const Se=X.getData();X.close(),x.undoManager.transact(()=>{f1(x,A,L,Se),x.focus()})},Tu=x=>{const A=Ka(Cc(x),r1.selected);if(A.length===0)return;const L=Je(A,zt=>Hl(x,zt.dom,_i(x))),X=Pr(L),Se={type:"tabpanel",tabs:[{title:"General",name:"general",items:Fs(x)},Ms(x,"row")]},Ge={type:"panel",items:[{type:"grid",columns:2,items:Fs(x)}]};x.windowManager.open({title:"Row Properties",size:"normal",body:_i(x)?Se:Ge,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:X,onSubmit:ae(ab,x,Je(A,zt=>zt.dom),X)})},Au=(x,A,L)=>{const X=L?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],Se=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Ge=_s(x)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],zt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],vn=A.length>0?[{name:"class",type:"listbox",label:"Class",items:A}]:[];return X.concat(Se).concat(Ge).concat(zt).concat(vn)},Hs=(x,A,L,X)=>{if(A.tagName==="TD"||A.tagName==="TH")so(L)&&rn(X)?x.setStyle(A,L,X):x.setStyles(A,L);else if(A.children)for(let Se=0;Se<A.children.length;Se++)Hs(x,A.children[Se],L,X)},cb=(x,A,L,X)=>{const Se=x.dom,Ge={},zt={},vn=Hc(x),po=ic(x),$o=parseFloat(L.border)===0;if(!st(L.class)&&L.class!=="mce-no-match"&&(Ge.class=L.class),zt.height=Na(L.height),vn?zt.width=Na(L.width):Se.getAttrib(A,"width")&&(Ge.width=Or(L.width)),vn?($o?(Ge.border=0,zt["border-width"]=""):(zt["border-width"]=Na(L.border),Ge.border=1),zt["border-spacing"]=Na(L.cellspacing)):(Ge.border=$o?0:L.border,Ge.cellpadding=L.cellpadding,Ge.cellspacing=L.cellspacing),vn&&A.children){const Ks={};if($o?Ks["border-width"]="":X.border&&(Ks["border-width"]=Na(L.border)),X.cellpadding&&(Ks.padding=Na(L.cellpadding)),po&&X.bordercolor&&(Ks["border-color"]=L.bordercolor),!Ne(Ks))for(let ur=0;ur<A.children.length;ur++)Hs(Se,A.children[ur],Ks)}if(po){const Ks=L;zt["background-color"]=Ks.backgroundcolor,zt["border-color"]=Ks.bordercolor,zt["border-style"]=Ks.borderstyle}Se.setStyles(A,{...Rh(x),...zt}),Se.setAttribs(A,{...ka(x),...Ge})},Sr=(x,A,L,X)=>{const Se=x.dom,Ge=X.getData(),zt=de(Ge,(vn,po)=>L[po]!==vn);X.close(),x.undoManager.transact(()=>{if(!A){const vn=Xs(Ge.cols).getOr(1),po=Xs(Ge.rows).getOr(1);x.execCommand("mceInsertTable",!1,{rows:po,columns:vn}),A=hl(Cc(x),Bs(x)).bind($o=>ue($o,Bs(x))).map($o=>$o.dom).getOrDie()}if(ie(zt)>0){const vn={border:wt(zt,"border"),bordercolor:wt(zt,"bordercolor"),cellpadding:wt(zt,"cellpadding")};cb(x,A,Ge,vn);const po=Se.select("caption",A)[0];(po&&!Ge.caption||!po&&Ge.caption)&&x.execCommand("mceTableToggleCaption"),bf(x,A,Ge.align)}if(x.focus(),x.addVisual(),ie(zt)>0){const vn=wt(zt,"caption"),po=vn?ie(zt)>1:!0;Bo(x,A,{structure:vn,style:po})}})},xf=(x,A)=>{const L=x.dom;let X,Se=Mh(x,ic(x));A?(Se.cols="1",Se.rows="1",ic(x)&&(Se.borderstyle="",Se.bordercolor="",Se.backgroundcolor="")):(X=L.getParent(x.selection.getStart(),"table",x.getBody()),X?Se=sS(x,X,ic(x)):ic(x)&&(Se.borderstyle="",Se.bordercolor="",Se.backgroundcolor=""));const Ge=ea(wr(x));Ge.isSome()&&Se.class&&(Se.class=Se.class.replace(/\s*mce\-item\-table\s*/g,""));const zt={type:"grid",columns:2,items:Au(x,Ge.getOr([]),A)},vn=()=>({type:"panel",items:[zt]}),po=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[zt]},Ms(x,"table")]}),$o=ic(x)?po():vn();x.windowManager.open({title:"Table Properties",size:"normal",body:$o,onSubmit:ae(Sr,x,X,Se),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Se})},Wr=x=>{const A=L=>{ul(Cc(x))&&L()};ht({mceTableProps:ae(xf,x,!1),mceTableRowProps:ae(Tu,x),mceTableCellProps:ae(bl,x),mceInsertTableDialog:ae(xf,x,!0)},(L,X)=>x.addCommand(X,()=>A(L)))},ku=x=>({element:x,mergable:q.none(),unmergable:q.none(),selection:[x]}),dc=(x,A,L)=>({element:L,mergable:Ia(A,x,r1),unmergable:$a(x),selection:ha(x)}),ad=x=>{const A=un(q.none()),L=un([]);let X=q.none();const Se=Ao("caption"),Ge=ms=>X.forall(Zs=>!Zs[ms]),zt=()=>wu(Cc(x),Bs(x)),vn=()=>wu(Jo(x),Bs(x)),po=()=>zt().bind(ms=>_o(ko(ue(ms),vn().bind(ue),(Zs,pa)=>dn(Zs,pa)?Se(ms)?q.some(ku(ms)):q.some(dc(c1(x),Zs,ms)):q.none()))),$o=ms=>ue(ms.element).map(pa=>{const di=Nr.fromTable(pa),Hh=dg(di,ms).getOr([]),yg=ln(Hh,(zh,Vh)=>(Vh.isLocked&&(zh.onAny=!0,Vh.column===0?zh.onFirst=!0:Vh.column+Vh.colspan>=di.grid.columns&&(zh.onLast=!0)),zh),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Yp(di,ms).isSome(),unmergeable:oe(di,ms).isSome(),locked:yg}}),Ks=()=>{A.set(Do(po)()),X=A.get().bind($o),rt(L.get(),Jt)},ur=ms=>(ms(),L.set(L.get().concat([ms])),()=>{L.set(it(L.get(),Zs=>Zs!==ms))}),na=(ms,Zs)=>ur(()=>A.get().fold(()=>{ms.setEnabled(!1)},pa=>{ms.setEnabled(!Zs(pa)&&x.selection.isEditable())})),zc=(ms,Zs,pa)=>ur(()=>A.get().fold(()=>{ms.setEnabled(!1),ms.setActive(!1)},di=>{ms.setEnabled(!Zs(di)&&x.selection.isEditable()),ms.setActive(pa(di))})),cd=ms=>X.exists(Zs=>Zs.locked[ms]),id=ms=>na(ms,Zs=>!1),yl=ms=>na(ms,Zs=>Se(Zs.element)),p1=ms=>Zs=>na(Zs,pa=>Se(pa.element)||cd(ms)),Ef=ms=>Zs=>na(Zs,pa=>Se(pa.element)||ms().isNone()),$h=(ms,Zs)=>pa=>na(pa,di=>Se(di.element)||ms().isNone()||cd(Zs)),Bm=ms=>na(ms,Zs=>Ge("mergeable")),Tf=ms=>na(ms,Zs=>Ge("unmergeable")),Ih=ms=>zc(ms,Lo,Zs=>ue(Zs.element,Bs(x)).exists(di=>He(di,"caption"))),Lh=(ms,Zs)=>pa=>zc(pa,di=>Se(di.element),()=>x.queryCommandValue(ms)===Zs),Ny=Lh("mceTableRowType","header"),Py=Lh("mceTableColType","th");return x.on("NodeChange ExecCommand TableSelectorChange",Ks),{onSetupTable:id,onSetupCellOrRow:yl,onSetupColumn:p1,onSetupPasteable:Ef,onSetupPasteableColumn:$h,onSetupMergeable:Bm,onSetupUnmergeable:Tf,resetTargets:Ks,onSetupTableWithCaption:Ih,onSetupTableRowHeaders:Ny,onSetupTableColumnHeaders:Py,targets:A.get}};var Fh=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const g1="x-tinymce/dom-table-",h1=g1+"rows",Fy=g1+"columns",ui=x=>{var A;const L=(A=Fh.read())!==null&&A!==void 0?A:[];return jn(L,X=>q.from(X.getType(x)))},Vl=()=>ui(h1),Zr=()=>ui(Fy),_a=x=>A=>{const L=()=>{A.setEnabled(x.selection.isEditable())};return x.on("NodeChange",L),L(),()=>{x.off("NodeChange",L)}},Nh=(x,A)=>{x.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:_a(x),fetch:vn=>vn("inserttable | cell row column | advtablesort | tableprops deletetable")});const L=vn=>()=>x.execCommand(vn),X=(vn,po)=>{x.queryCommandSupported(po.command)&&x.ui.registry.addButton(vn,{...po,onAction:Tt(po.onAction)?po.onAction:L(po.command)})},Se=(vn,po)=>{x.queryCommandSupported(po.command)&&x.ui.registry.addToggleButton(vn,{...po,onAction:Tt(po.onAction)?po.onAction:L(po.command)})};X("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:A.onSetupTable}),X("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:A.onSetupTable}),X("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:A.onSetupCellOrRow}),X("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:A.onSetupMergeable}),X("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:A.onSetupUnmergeable}),X("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:A.onSetupCellOrRow}),X("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:A.onSetupCellOrRow}),X("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:A.onSetupCellOrRow}),X("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:A.onSetupCellOrRow}),X("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:A.onSetupColumn("onFirst")}),X("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:A.onSetupColumn("onLast")}),X("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:A.onSetupColumn("onAny")}),X("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:A.onSetupCellOrRow}),X("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:A.onSetupCellOrRow}),X("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:A.onSetupPasteable(Vl)}),X("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:A.onSetupPasteable(Vl)}),X("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:A.onSetupColumn("onAny")}),X("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:A.onSetupColumn("onAny")}),X("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:A.onSetupPasteableColumn(Zr,"onFirst")}),X("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:A.onSetupPasteableColumn(Zr,"onLast")}),X("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:_a(x)});const Ge=yf(wr(x));Ge.length!==0&&x.queryCommandSupported("mceTableToggleClass")&&x.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:od(x,Ge,"tableclass",vn=>x.execCommand("mceTableToggleClass",!1,vn)),onSetup:A.onSetupTable});const zt=yf(Pa(x));zt.length!==0&&x.queryCommandSupported("mceTableCellToggleClass")&&x.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:od(x,zt,"tablecellclass",vn=>x.execCommand("mceTableCellToggleClass",!1,vn)),onSetup:A.onSetupCellOrRow}),x.queryCommandSupported("mceTableApplyCellStyle")&&(x.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:od(x,qi,"tablecellverticalalign",xu(x,"vertical-align")),onSetup:A.onSetupCellOrRow}),x.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:od(x,oa(x),"tablecellborderwidth",xu(x,"border-width")),onSetup:A.onSetupCellOrRow}),x.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:od(x,Il(x),"tablecellborderstyle",xu(x,"border-style")),onSetup:A.onSetupCellOrRow}),x.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:vn=>vn(zd(x,Aa(x),"background-color")),onSetup:A.onSetupCellOrRow}),x.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:vn=>vn(zd(x,Vr(x),"border-color")),onSetup:A.onSetupCellOrRow})),Se("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:A.onSetupTableWithCaption}),Se("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Vd(x),onSetup:A.onSetupTableRowHeaders}),Se("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Xa(x),onSetup:A.onSetupTableColumnHeaders})},vg=x=>{const A=X=>x.dom.is(X,"table")&&x.getBody().contains(X)&&x.dom.isEditable(X.parentNode),L=gl(x);L.length>0&&x.ui.registry.addContextToolbar("table",{predicate:A,items:L,scope:"node",position:"node"})},Ph=x=>A=>{const L=()=>{A.setEnabled(x.selection.isEditable())};return x.on("NodeChange",L),L(),()=>{x.off("NodeChange",L)}},ib=(x,A)=>{const L=ur=>()=>x.execCommand(ur),X=(ur,na)=>x.queryCommandSupported(na.command)?(x.ui.registry.addMenuItem(ur,{...na,onAction:Tt(na.onAction)?na.onAction:L(na.command)}),!0):!1,Se=(ur,na)=>{x.queryCommandSupported(na.command)&&x.ui.registry.addToggleMenuItem(ur,{...na,onAction:Tt(na.onAction)?na.onAction:L(na.command)})},Ge=ur=>{x.execCommand("mceInsertTable",!1,{rows:ur.numRows,columns:ur.numColumns})},zt=[X("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:A.onSetupCellOrRow}),X("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:A.onSetupCellOrRow}),X("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:A.onSetupCellOrRow}),X("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:A.onSetupCellOrRow}),X("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:A.onSetupCellOrRow}),X("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:A.onSetupCellOrRow}),X("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:A.onSetupPasteable(Vl)}),X("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:A.onSetupPasteable(Vl)})],vn=[X("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:A.onSetupColumn("onFirst")}),X("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:A.onSetupColumn("onLast")}),X("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:A.onSetupColumn("onAny")}),X("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:A.onSetupColumn("onAny")}),X("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:A.onSetupColumn("onAny")}),X("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:A.onSetupPasteableColumn(Zr,"onFirst")}),X("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:A.onSetupPasteableColumn(Zr,"onLast")})],po=[X("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:A.onSetupCellOrRow}),X("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:A.onSetupMergeable}),X("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:A.onSetupUnmergeable})];Zi(x)?x.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Ge}],onSetup:Ph(x)}):x.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:L("mceInsertTableDialog"),onSetup:Ph(x)}),x.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:L("mceInsertTableDialog"),onSetup:Ph(x)}),X("tableprops",{text:"Table properties",onSetup:A.onSetupTable,command:"mceTableProps"}),X("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:A.onSetupTable,command:"mceTableDelete"}),_e(zt,!0)&&x.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:nt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),_e(vn,!0)&&x.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:nt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),_e(po,!0)&&x.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:nt("tablecellprops tablemergecells tablesplitcells")}),x.ui.registry.addContextMenu("table",{update:()=>(A.resetTargets(),A.targets().fold(nt(""),ur=>yr(ur.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const $o=yf(wr(x));$o.length!==0&&x.queryCommandSupported("mceTableToggleClass")&&x.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>ta(x,$o,"tableclass",ur=>x.execCommand("mceTableToggleClass",!1,ur)),onSetup:A.onSetupTable});const Ks=yf(Pa(x));Ks.length!==0&&x.queryCommandSupported("mceTableCellToggleClass")&&x.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>ta(x,Ks,"tablecellclass",ur=>x.execCommand("mceTableCellToggleClass",!1,ur)),onSetup:A.onSetupCellOrRow}),x.queryCommandSupported("mceTableApplyCellStyle")&&(x.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>ta(x,qi,"tablecellverticalalign",xu(x,"vertical-align")),onSetup:A.onSetupCellOrRow}),x.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>ta(x,oa(x),"tablecellborderwidth",xu(x,"border-width")),onSetup:A.onSetupCellOrRow}),x.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>ta(x,Il(x),"tablecellborderstyle",xu(x,"border-style")),onSetup:A.onSetupCellOrRow}),x.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>zd(x,Aa(x),"background-color"),onSetup:A.onSetupCellOrRow}),x.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>zd(x,Vr(x),"border-color"),onSetup:A.onSetupCellOrRow})),Se("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:A.onSetupTableWithCaption}),Se("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Vd(x),onSetup:A.onSetupTableRowHeaders}),Se("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Xa(x),onSetup:A.onSetupTableRowHeaders})},vl=x=>{const A=ad(x);ml(x),Wr(x),ib(x,A),Nh(x,A),vg(x)};var rS=()=>{qt.add("table",vl)};rS()})()),EJ}var AJ;function oee(){return AJ||(AJ=1,nee()),xJ}oee();var kJ={},_J={},DJ;function see(){return DJ||(DJ=1,(function(){const qt=(Ae,Ne,un)=>{var Gt;return un(Ae,Ne.prototype)?!0:((Gt=Ae.constructor)===null||Gt===void 0?void 0:Gt.name)===Ne.name},Mn=Ae=>{const Ne=typeof Ae;return Ae===null?"null":Ne==="object"&&Array.isArray(Ae)?"array":Ne==="object"&&qt(Ae,String,(un,Gt)=>Gt.isPrototypeOf(un))?"string":Ne},Fn=Ae=>Ne=>Mn(Ne)===Ae,Xn=Ae=>Ne=>typeof Ne===Ae,$n=Ae=>Ne=>Ae===Ne,Pn=Fn("string"),so=$n(void 0),ct=Ae=>Ae==null,Lt=Ae=>!ct(Ae),st=Xn("function"),rn=(Ae=>()=>Ae)(!1);class Tt{constructor(Ne,un){this.tag=Ne,this.value=un}static some(Ne){return new Tt(!0,Ne)}static none(){return Tt.singletonNone}fold(Ne,un){return this.tag?un(this.value):Ne()}isSome(){return this.tag}isNone(){return!this.tag}map(Ne){return this.tag?Tt.some(Ne(this.value)):Tt.none()}bind(Ne){return this.tag?Ne(this.value):Tt.none()}exists(Ne){return this.tag&&Ne(this.value)}forall(Ne){return!this.tag||Ne(this.value)}filter(Ne){return!this.tag||Ne(this.value)?this:Tt.none()}getOr(Ne){return this.tag?this.value:Ne}or(Ne){return this.tag?this:Ne}getOrThunk(Ne){return this.tag?this.value:Ne()}orThunk(Ne){return this.tag?this:Ne()}getOrDie(Ne){if(this.tag)return this.value;throw new Error(Ne??"Called getOrDie on None")}static from(Ne){return Lt(Ne)?Tt.some(Ne):Tt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ne){this.tag&&Ne(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Tt.singletonNone=new Tt(!1);const mn=Array.prototype.slice,fo=Array.prototype.indexOf,In=(Ae,Ne)=>fo.call(Ae,Ne),nt=(Ae,Ne)=>In(Ae,Ne)>-1,Oo=(Ae,Ne)=>{const un=Ae.length,Gt=new Array(un);for(let go=0;go<un;go++){const ko=Ae[go];Gt[go]=Ne(ko,go)}return Gt},_t=(Ae,Ne)=>{const un=[];for(let Gt=0,go=Ae.length;Gt<go;Gt++){const ko=Ae[Gt];Ne(ko,Gt)&&un.push(ko)}return un},ae=(Ae,Ne,un)=>{for(let Gt=0,go=Ae.length;Gt<go;Gt++){const ko=Ae[Gt];if(Ne(ko,Gt))return Tt.some(ko);if(un(ko,Gt))break}return Tt.none()},Jt=(Ae,Ne)=>ae(Ae,Ne,rn),Lo=(Ae,Ne)=>{const un=mn.call(Ae,0);return un.sort(Ne),un},Ze=Object.keys,q=Object.hasOwnProperty,Rt=(Ae,Ne)=>Zn(Ae,Ne)?Tt.from(Ae[Ne]):Tt.none(),Zn=(Ae,Ne)=>q.call(Ae,Ne),gn=Ae=>{let Ne=Ae;return{get:()=>Ne,set:go=>{Ne=go}}},_e=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let fe=0;const cs=Ae=>{const un=new Date().getTime(),Gt=Math.floor(_e()*1e9);return fe++,Ae+"_"+Gt+fe+String(un)},Je=Ae=>{const Ne=[],un=Gt=>{Ne.push(Gt)};for(let Gt=0;Gt<Ae.length;Gt++)Ae[Gt].each(un);return Ne};var rt=tinymce.util.Tools.resolve("tinymce.PluginManager");const k=Ae=>({addTab:un=>{var Gt;const go=(Gt=un.name)!==null&&Gt!==void 0?Gt:cs("tab-name"),ko=Ae.get();ko[go]=un,Ae.set(ko)}}),mo=(Ae,Ne)=>{Ae.addCommand("mceHelp",Ne)},it=Ae=>Ne=>Ne.options.get(Ae),Mo=Ae=>{const Ne=Ae.options.register;Ne("help_tabs",{processor:"array"})},ln=it("help_tabs"),Ce=it("forced_plugins"),dt=(Ae,Ne)=>{Ae.ui.registry.addButton("help",{icon:"help",tooltip:"Help",onAction:Ne,context:"any"}),Ae.ui.registry.addMenuItem("help",{text:"Help",icon:"help",shortcut:"Alt+0",onAction:Ne,context:"any"})};var wn=tinymce.util.Tools.resolve("tinymce.Resource"),Ve=tinymce.util.Tools.resolve("tinymce.util.I18n");const Ht=(Ae,Ne)=>wn.load(`tinymce.html-i18n.help-keynav.${Ne}`,`${Ae}/js/i18n/keynav/${Ne}.js`),Oe=Ae=>Ht(Ae,Ve.getCode()).catch(()=>Ht(Ae,"en")),ot=(Ae,Ne)=>{Ae.on("init",()=>{Oe(Ne)})},F=async Ae=>({name:"keyboardnav",title:"Keyboard Navigation",items:[{type:"htmlpanel",presets:"document",html:await Oe(Ae)}]});var No=tinymce.util.Tools.resolve("tinymce.Env");const jn=Ae=>{const Ne=No.os.isMacOS()||No.os.isiOS(),go=Ne?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl ",access:"Shift + Alt "},ko=Ae.split("+"),_o=Oo(ko,_n=>{const ns=_n.toLowerCase().trim();return Zn(go,ns)?go[ns]:_n});return Ne?_o.join("").replace(/\s/,""):_o.join("+")},qn=[{shortcuts:["Meta + B"],action:"Bold"},{shortcuts:["Meta + I"],action:"Italic"},{shortcuts:["Meta + U"],action:"Underline"},{shortcuts:["Meta + A"],action:"Select all"},{shortcuts:["Meta + Y","Meta + Shift + Z"],action:"Redo"},{shortcuts:["Meta + Z"],action:"Undo"},{shortcuts:["Access + 1"],action:"Heading 1"},{shortcuts:["Access + 2"],action:"Heading 2"},{shortcuts:["Access + 3"],action:"Heading 3"},{shortcuts:["Access + 4"],action:"Heading 4"},{shortcuts:["Access + 5"],action:"Heading 5"},{shortcuts:["Access + 6"],action:"Heading 6"},{shortcuts:["Access + 7"],action:"Paragraph"},{shortcuts:["Access + 8"],action:"Div"},{shortcuts:["Access + 9"],action:"Address"},{shortcuts:["Alt + 0"],action:"Open help dialog"},{shortcuts:["Alt + F9"],action:"Focus to menubar"},{shortcuts:["Alt + F10"],action:"Focus to toolbar"},{shortcuts:["Alt + F11"],action:"Focus to element path"},{shortcuts:["Alt + F12"],action:"Focus to notification"},{shortcuts:["Ctrl + F9"],action:"Focus to contextual toolbar"},{shortcuts:["Shift + Enter"],action:"Open popup menu for split buttons"},{shortcuts:["Meta + K"],action:"Insert link (if link plugin activated)"},{shortcuts:["Meta + S"],action:"Save (if save plugin activated)"},{shortcuts:["Meta + F"],action:"Find (if searchreplace plugin activated)"},{shortcuts:["Meta + Shift + F"],action:"Switch to or from fullscreen mode"}],yo=()=>{const Ae=Oo(qn,un=>{const Gt=Oo(un.shortcuts,jn).join(" or ");return[un.action,Gt]});return{name:"shortcuts",title:"Handy Shortcuts",items:[{type:"table",header:["Action","Shortcut"],cells:Ae}]}},ht=Oo([{key:"accordion",name:"Accordion"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"image",name:"Image"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"advlist",name:"List Styles"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"pagebreak",name:"Page Break"},{key:"preview",name:"Preview"},{key:"quickbars",name:"Quick Toolbars"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"table",name:"Table"},{key:"textcolor",name:"Text Color"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"},{key:"a11ychecker",name:"Accessibility Checker",type:"premium"},{key:"typography",name:"Advanced Typography",type:"premium",slug:"advanced-typography"},{key:"ai",name:"AI Assistant",type:"premium"},{key:"casechange",name:"Case Change",type:"premium"},{key:"checklist",name:"Checklist",type:"premium"},{key:"advcode",name:"Enhanced Code Editor",type:"premium"},{key:"mediaembed",name:"Enhanced Media Embed",type:"premium",slug:"introduction-to-mediaembed"},{key:"advtable",name:"Enhanced Tables",type:"premium"},{key:"exportpdf",name:"Export to PDF",type:"premium"},{key:"exportword",name:"Export to Word",type:"premium"},{key:"footnotes",name:"Footnotes",type:"premium"},{key:"formatpainter",name:"Format Painter",type:"premium"},{key:"editimage",name:"Image Editing",type:"premium"},{key:"uploadcare",name:"Image Optimizer Powered by Uploadcare",type:"premium"},{key:"importword",name:"Import from Word",type:"premium"},{key:"inlinecss",name:"Inline CSS",type:"premium",slug:"inline-css"},{key:"linkchecker",name:"Link Checker",type:"premium"},{key:"math",name:"Math",type:"premium"},{key:"markdown",name:"Markdown",type:"premium"},{key:"mentions",name:"Mentions",type:"premium"},{key:"mergetags",name:"Merge Tags",type:"premium"},{key:"pageembed",name:"Page Embed",type:"premium"},{key:"permanentpen",name:"Permanent Pen",type:"premium"},{key:"powerpaste",name:"PowerPaste",type:"premium",slug:"introduction-to-powerpaste"},{key:"revisionhistory",name:"Revision History",type:"premium"},{key:"tinymcespellchecker",name:"Spell Checker",type:"premium",slug:"introduction-to-tiny-spellchecker"},{key:"suggestededits",name:"Suggested Edits",type:"premium"},{key:"autocorrect",name:"Spelling Autocorrect",type:"premium"},{key:"tableofcontents",name:"Table of Contents",type:"premium"},{key:"advtemplate",name:"Templates",type:"premium",slug:"advanced-templates"},{key:"tinycomments",name:"Tiny Comments",type:"premium",slug:"introduction-to-tiny-comments"},{key:"tinydrive",name:"Tiny Drive",type:"premium",slug:"tinydrive-introduction"}],Ae=>({...Ae,type:Ae.type||"opensource",slug:Ae.slug||Ae.key})),j=Ae=>{const Ne=()=>{const Ln=_t(ht,({type:fn})=>fn==="premium"),Ke=Lo(Oo(Ln,fn=>fn.name),(fn,an)=>fn.localeCompare(an)),At=Oo(Ke,fn=>`<li>${fn}</li>`).join("");return"<div><p><b>"+Ve.translate("Premium plugins:")+"</b></p><ul>"+At+'<li class="tox-help__more-link" "><a href="https://www.tiny.cloud/pricing/?utm_campaign=help_dialog_plugin_tab&utm_source=tiny&utm_medium=referral&utm_term=read_more&utm_content=premium_plugin_heading" rel="noopener" target="_blank" data-alloy-tabstop="true" tabindex="-1">'+Ve.translate("Learn more...")+"</a></li></ul></div>"},un=Ln=>`<a data-alloy-tabstop="true" tabindex="-1" href="${Ln.url}" target="_blank" rel="noopener">${Ln.name}</a>`,Gt=(Ln,Ke)=>{const At=Ln.plugins[Ke].getMetadata;if(st(At)){const fn=At();return{name:fn.name,html:un(fn)}}else return{name:Ke,html:Ke}},go=(Ln,Ke)=>Jt(ht,At=>At.key===Ke).fold(()=>Gt(Ln,Ke),At=>{const fn=At.type==="premium"?`${At.name}*`:At.name,an=un({name:fn,url:`https://www.tiny.cloud/docs/tinymce/${tinymce.majorVersion}/${At.slug}/`});return{name:fn,html:an}}),ko=Ln=>{const Ke=Ze(Ln.plugins),At=Ce(Ln),fn=so(At)?["onboarding"]:At.concat(["onboarding"]);return _t(Ke,an=>!nt(fn,an))},_o=Ln=>{const Ke=ko(Ln),At=Lo(Oo(Ke,Eo=>go(Ln,Eo)),(Eo,Ds)=>Eo.name.localeCompare(Ds.name)),fn=Oo(At,Eo=>"<li>"+Eo.html+"</li>"),an=fn.length,to=fn.join("");return"<p><b>"+Ve.translate(["Plugins installed ({0}):",an])+"</b></p><ul>"+to+"</ul>"};return{name:"plugins",title:"Plugins",items:[{type:"htmlpanel",presets:"document",html:[(Ln=>Ln==null?"":"<div>"+_o(Ln)+"</div>")(Ae),Ne()].join("")}]}};var ce=tinymce.util.Tools.resolve("tinymce.EditorManager");const de=()=>{const un='<a data-alloy-tabstop="true" tabindex="-1" href="https://www.tiny.cloud/docs/tinymce/8/changelog/?utm_campaign=help_dialog_version_tab&utm_source=tiny&utm_medium=referral" rel="noopener" target="_blank">TinyMCE '+((go,ko)=>go.indexOf("@")===0?"X.X.X":go+"."+ko)(ce.majorVersion,ce.minorVersion)+"</a>";return{name:"versions",title:"Version",items:[{type:"htmlpanel",html:"<p>"+Ve.translate(["You are using {0}",un])+"</p>",presets:"document"}]}},ne=(Ae,Ne)=>{const un={},Gt=Oo(Ae,go=>{var ko;if(Pn(go))return Zn(Ne,go)&&(un[go]=Ne[go]),go;{const _o=(ko=go.name)!==null&&ko!==void 0?ko:cs("tab-name");return un[_o]=go,_o}});return{tabs:un,names:Gt}},Q=Ae=>{const Ne=Ze(Ae),un=Ne.indexOf("versions");return un!==-1&&(Ne.splice(un,1),Ne.push("versions")),{tabs:Ae,names:Ne}},ie=async(Ae,Ne,un)=>{const Gt=yo(),go=await F(un),ko=j(Ae),_o=de(),_n={[Gt.name]:Gt,[go.name]:go,[ko.name]:ko,[_o.name]:_o,...Ne.get()};return Tt.from(ln(Ae)).fold(()=>Q(_n),ns=>ne(ns,_n))},ye=(Ae,Ne,un)=>()=>{ie(Ae,Ne,un).then(({tabs:Gt,names:go})=>{const ko=Oo(go,ns=>Rt(Gt,ns)),_n={type:"tabpanel",tabs:Je(ko)};Ae.windowManager.open({title:"Help",size:"medium",body:_n,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{}})})};var wt=()=>{rt.add("help",(Ae,Ne)=>{const un=gn({}),Gt=k(un);Mo(Ae);const go=ye(Ae,un,Ne);return dt(Ae,go),mo(Ae,go),Ae.shortcuts.add("Alt+0","Open help dialog","mceHelp"),ot(Ae,Ne),Gt})};wt()})()),_J}var OJ;function ree(){return OJ||(OJ=1,see()),kJ}ree();var RJ={},BJ={},MJ;function aee(){return MJ||(MJ=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Fn=(j=>ce=>j===ce)(null),Xn=j=>j,$n=(j,ce)=>{const de=j.length,ne=new Array(de);for(let Q=0;Q<de;Q++){const ie=j[Q];ne[Q]=ce(ie,Q)}return ne},Pn=(j,ce)=>{let de=null;return{cancel:()=>{Fn(de)||(clearTimeout(de),de=null)},throttle:(...ie)=>{Fn(de)&&(de=setTimeout(()=>{de=null,j.apply(null,ie)},ce))}}},so=j=>j.replace(/\uFEFF/g,""),Lt={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},st={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},qo=[new RegExp(Lt.aletter),new RegExp(Lt.midnumlet),new RegExp(Lt.midletter),new RegExp(Lt.midnum),new RegExp(Lt.numeric),new RegExp(Lt.cr),new RegExp(Lt.lf),new RegExp(Lt.newline),new RegExp(Lt.extend),new RegExp(Lt.format),new RegExp(Lt.katakana),new RegExp(Lt.extendnumlet),new RegExp("@")],rn="",Tt=new RegExp("^"+Lt.punctuation+"$"),mn=/^\s+$/,fo=qo,In=st.OTHER,nt=j=>{let ce=In;const de=fo.length;for(let ne=0;ne<de;++ne){const Q=fo[ne];if(Q&&Q.test(j)){ce=ne;break}}return ce},Oo=j=>{const ce={};return de=>{if(ce[de])return ce[de];{const ne=j(de);return ce[de]=ne,ne}}},_t=j=>{const ce=Oo(nt);return $n(j,ce)},ae=(j,ce)=>{const de=j[ce],ne=j[ce+1];if(ce<0||ce>j.length-1&&ce!==0||de===st.ALETTER&&ne===st.ALETTER)return!1;const Q=j[ce+2];if(de===st.ALETTER&&(ne===st.MIDLETTER||ne===st.MIDNUMLET||ne===st.AT)&&Q===st.ALETTER)return!1;const ie=j[ce-1];return(de===st.MIDLETTER||de===st.MIDNUMLET||ne===st.AT)&&ne===st.ALETTER&&ie===st.ALETTER||(de===st.NUMERIC||de===st.ALETTER)&&(ne===st.NUMERIC||ne===st.ALETTER)||(de===st.MIDNUM||de===st.MIDNUMLET)&&ne===st.NUMERIC&&ie===st.NUMERIC||de===st.NUMERIC&&(ne===st.MIDNUM||ne===st.MIDNUMLET)&&Q===st.NUMERIC||(de===st.EXTEND||de===st.FORMAT)&&(ne===st.ALETTER||ne===st.NUMERIC||ne===st.KATAKANA||ne===st.EXTEND||ne===st.FORMAT)||(ne===st.EXTEND||ne===st.FORMAT&&(Q===st.ALETTER||Q===st.NUMERIC||Q===st.KATAKANA||Q===st.EXTEND||Q===st.FORMAT))&&(de===st.ALETTER||de===st.NUMERIC||de===st.KATAKANA||de===st.EXTEND||de===st.FORMAT)||de===st.CR&&ne===st.LF?!1:de===st.NEWLINE||de===st.CR||de===st.LF||ne===st.NEWLINE||ne===st.CR||ne===st.LF?!0:!(de===st.KATAKANA&&ne===st.KATAKANA||ne===st.EXTENDNUMLET&&(de===st.ALETTER||de===st.NUMERIC||de===st.KATAKANA||de===st.EXTENDNUMLET)||de===st.EXTENDNUMLET&&(ne===st.ALETTER||ne===st.NUMERIC||ne===st.KATAKANA)||de===st.AT)},Jt=rn,Lo=mn,Ze=Tt,q=j=>j==="http"||j==="https",Rt=(j,ce)=>{let de;for(de=ce;de<j.length&&!Lo.test(j[de]);de++);return de},Zn=(j,ce)=>{const de=Rt(j,ce+1);return j.slice(ce+1,de).join(Jt).substr(0,3)==="://"?de:ce},gn=(j,ce,de,ne)=>{const Q=[],ie=[];let ye=[];for(let wt=0;wt<de.length;++wt)if(ye.push(j[wt]),ae(de,wt)){const Ae=ce[wt];if((ne.includeWhitespace||!Lo.test(Ae))&&(ne.includePunctuation||!Ze.test(Ae))){const Ne=wt-ye.length+1,un=wt+1,Gt=ce.slice(Ne,un).join(Jt);if(q(Gt)){const go=Zn(ce,wt),ko=j.slice(un,go);Array.prototype.push.apply(ye,ko),wt=go}ce[wt+1]==="."&&/^([a-zA-Z]\.)+$/.test(Gt+".")?(ye.push(j[wt+1]),ie.push({start:Ne,end:un+1})):ie.push({start:Ne,end:un}),Q.push(ye)}ye=[]}return{words:Q,indices:ie}},_e=()=>({includeWhitespace:!1,includePunctuation:!1}),fe=(j,ce,de)=>{de={..._e(),...de};const ne=$n(j,ce),Q=_t(ne);return gn(j,ne,Q,de)},Je=(j,ce,de)=>fe(j,ce,de).words;var rt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const k=(j,ce)=>{const de=ce.getBlockElements(),ne=ce.getVoidElements(),Q=Ne=>de[Ne.nodeName]||ne[Ne.nodeName],ie=[];let ye="";const wt=new rt(j,j);let Ae;for(;Ae=wt.next();)Ae.nodeType===3?ye+=so(Ae.data):Q(Ae)&&ye.length&&(ie.push(ye),ye="");return ye.length&&ie.push(ye),ie},mo=j=>j.replace(/\u200B/g,""),it=j=>j.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,Mo=(j,ce)=>{const de=mo(k(j,ce).join(`
`));return Je(de.split(""),Xn).length},ln=(j,ce)=>{const de=k(j,ce).join("");return it(de)},Ce=(j,ce)=>{const de=k(j,ce).join("").replace(/\s/g,"");return it(de)},dt=(j,ce)=>()=>ce(j.getBody(),j.schema),wn=(j,ce)=>()=>ce(j.selection.getRng().cloneContents(),j.schema),Ve=j=>dt(j,Mo),Ht=j=>({body:{getWordCount:Ve(j),getCharacterCount:dt(j,ln),getCharacterCountWithoutSpaces:dt(j,Ce)},selection:{getWordCount:wn(j,Mo),getCharacterCount:wn(j,ln),getCharacterCountWithoutSpaces:wn(j,Ce)},getCount:Ve(j)}),Oe=(j,ce)=>{j.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(ce.body.getWordCount()),String(ce.selection.getWordCount())],["Characters (no spaces)",String(ce.body.getCharacterCountWithoutSpaces()),String(ce.selection.getCharacterCountWithoutSpaces())],["Characters",String(ce.body.getCharacterCount()),String(ce.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},ot=(j,ce)=>{j.addCommand("mceWordCount",()=>Oe(j,ce))};var F=tinymce.util.Tools.resolve("tinymce.util.Delay");const No=(j,ce)=>{j.dispatch("wordCountUpdate",{wordCount:{words:ce.body.getWordCount(),characters:ce.body.getCharacterCount(),charactersWithoutSpaces:ce.body.getCharacterCountWithoutSpaces()}})},jn=(j,ce)=>{No(j,ce)},qn=(j,ce,de)=>{const ne=Pn(()=>jn(j,ce),de);j.on("init",()=>{jn(j,ce),F.setEditorTimeout(j,()=>{j.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",ne.throttle)},0),j.on("remove",ne.cancel)})},yo=j=>{const ce=()=>j.execCommand("mceWordCount");j.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:ce,context:"any"}),j.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:ce,context:"any"})};var ht=(j=300)=>{qt.add("wordcount",ce=>{const de=Ht(ce);return ot(ce,de),yo(ce),qn(ce,de,j),de})};ht()})()),BJ}var FJ;function cee(){return FJ||(FJ=1,aee()),RJ}cee();var NJ={},PJ={},$J;function iee(){return $J||($J=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mn=Q=>ie=>Q===ie,Fn=Mn(null),Xn=Mn(void 0),$n=Q=>Q==null,Pn=Q=>!$n(Q),so=()=>{},Lt=(Q=>()=>Q)(!1);class st{constructor(ie,ye){this.tag=ie,this.value=ye}static some(ie){return new st(!0,ie)}static none(){return st.singletonNone}fold(ie,ye){return this.tag?ye(this.value):ie()}isSome(){return this.tag}isNone(){return!this.tag}map(ie){return this.tag?st.some(ie(this.value)):st.none()}bind(ie){return this.tag?ie(this.value):st.none()}exists(ie){return this.tag&&ie(this.value)}forall(ie){return!this.tag||ie(this.value)}filter(ie){return!this.tag||ie(this.value)?this:st.none()}getOr(ie){return this.tag?this.value:ie}or(ie){return this.tag?this:ie}getOrThunk(ie){return this.tag?this.value:ie()}orThunk(ie){return this.tag?this:ie()}getOrDie(ie){if(this.tag)return this.value;throw new Error(ie??"Called getOrDie on None")}static from(ie){return Pn(ie)?st.some(ie):st.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ie){this.tag&&ie(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}st.singletonNone=new st(!1);const qo=(Q,ie)=>{for(let ye=0,wt=Q.length;ye<wt;ye++){const Ae=Q[ye];if(ie(Ae,ye))return!0}return!1},rn=(Q,ie)=>{const ye=Q.length,wt=new Array(ye);for(let Ae=0;Ae<ye;Ae++){const Ne=Q[Ae];wt[Ae]=ie(Ne,Ae)}return wt},Tt=(Q,ie)=>{for(let ye=0,wt=Q.length;ye<wt;ye++){const Ae=Q[ye];ie(Ae,ye)}},mn=Object.keys,fo=Object.hasOwnProperty,In=(Q,ie)=>{const ye=mn(Q);for(let wt=0,Ae=ye.length;wt<Ae;wt++){const Ne=ye[wt],un=Q[Ne];ie(un,Ne)}},nt=(Q,ie)=>Oo(Q,(ye,wt)=>({k:wt,v:ie(ye,wt)})),Oo=(Q,ie)=>{const ye={};return In(Q,(wt,Ae)=>{const Ne=ie(wt,Ae);ye[Ne.k]=Ne.v}),ye},_t=(Q,ie)=>fo.call(Q,ie),ae=Q=>{let ie=Q;return{get:()=>ie,set:Ae=>{ie=Ae}}},Ze=(Q=>(...ie)=>{if(ie.length===0)throw new Error("Can't merge zero objects");const ye={};for(let wt=0;wt<ie.length;wt++){const Ae=ie[wt];for(const Ne in Ae)_t(Ae,Ne)&&(ye[Ne]=Q(ye[Ne],Ae[Ne]))}return ye})((Q,ie)=>ie),q=Q=>{const ie=ae(st.none()),ye=()=>ie.get().each(Q);return{clear:()=>{ye(),ie.set(st.none())},isSet:()=>ie.get().isSome(),get:()=>ie.get(),set:Gt=>{ye(),ie.set(st.some(Gt))}}},Rt=()=>{const Q=q(so);return{...Q,on:ye=>Q.get().each(ye)}},Zn=(Q,ie,ye)=>ie===""||Q.length>=ie.length&&Q.substr(ye,ye+ie.length)===ie,gn=(Q,ie,ye=0,wt)=>{const Ae=Q.indexOf(ie,ye);return Ae!==-1?Xn(wt)?!0:Ae+ie.length<=wt:!1},_e=(Q,ie)=>Zn(Q,ie,0),fe=(Q,ie)=>{let ye=null;const wt=()=>{Fn(ye)||(clearTimeout(ye),ye=null)};return{cancel:wt,throttle:(...Ne)=>{wt(),ye=setTimeout(()=>{ye=null,Q.apply(null,Ne)},ie)}}},cs=(Q,ie)=>{Q.insertContent(ie)};var Je=tinymce.util.Tools.resolve("tinymce.Resource");const rt="tinymce.plugins.emoticons",k=Q=>ie=>ie.options.get(Q),mo=(Q,ie)=>{const ye=Q.options.register;ye("emoticons_database",{processor:"string",default:"emojis"}),ye("emoticons_database_url",{processor:"string",default:`${ie}/js/${it(Q)}${Q.suffix}.js`}),ye("emoticons_database_id",{processor:"string",default:rt}),ye("emoticons_append",{processor:"object",default:{}}),ye("emoticons_images_url",{processor:"string",default:"https://cdnjs.cloudflare.com/ajax/libs/twemoji/15.1.0/72x72/"})},it=k("emoticons_database"),Mo=k("emoticons_database_url"),ln=k("emoticons_database_id"),Ce=k("emoticons_append"),dt=k("emoticons_images_url"),wn="All",Ve={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},Ht=(Q,ie)=>_t(Q,ie)?Q[ie]:ie,Oe=Q=>{const ie=Ce(Q);return nt(ie,ye=>({keywords:[],category:"user",...ye}))},ot=(Q,ie,ye)=>{const wt=Rt(),Ae=Rt(),Ne=dt(Q),un=Ln=>_e(Ln.char,"<img")?Ln.char.replace(/src="([^"]+)"/,(Ke,At)=>`src="${Ne}${At}"`):Ln.char,Gt=Ln=>{const Ke={},At=[];In(Ln,(fn,an)=>{const to={title:an,keywords:fn.keywords,char:un(fn),category:Ht(Ve,fn.category)},es=Ke[to.category]!==void 0?Ke[to.category]:[];Ke[to.category]=es.concat([to]),At.push(to)}),wt.set(Ke),Ae.set(At)};Q.on("init",()=>{Je.load(ye,ie).then(Ln=>{const Ke=Oe(Q);Gt(Ze(Ln,Ke))},Ln=>{console.log(`Failed to load emojis: ${Ln}`),wt.set({}),Ae.set([])})});const go=Ln=>Ln===wn?ko():wt.get().bind(Ke=>st.from(Ke[Ln])).getOr([]),ko=()=>Ae.get().getOr([]),_o=()=>[wn].concat(mn(wt.get().getOr({}))),_n=()=>ns()?Promise.resolve(!0):new Promise((Ln,Ke)=>{let At=15;const fn=setInterval(()=>{ns()?(clearInterval(fn),Ln(!0)):(At--,At<0&&(console.log("Could not load emojis from url: "+ie),clearInterval(fn),Ke(!1)))},100)}),ns=()=>wt.isSet()&&Ae.isSet();return{listCategories:_o,hasLoaded:ns,waitForLoad:_n,listAll:ko,listCategory:go}},F=(Q,ie)=>gn(Q.title.toLowerCase(),ie)||qo(Q.keywords,ye=>gn(ye.toLowerCase(),ie)),No=(Q,ie,ye)=>{const wt=[],Ae=ie.toLowerCase(),Ne=ye.fold(()=>Lt,un=>Gt=>Gt>=un);for(let un=0;un<Q.length&&!((ie.length===0||F(Q[un],Ae))&&(wt.push({value:Q[un].char,text:Q[un].title,icon:Q[un].char}),Ne(wt.length)));un++);return wt},jn="pattern",qn=(Q,ie)=>{const ye={pattern:"",results:No(ie.listAll(),"",st.some(300))},wt=ae(wn),Ae=_o=>{const _n=_o.getData(),ns=wt.get(),Ln=ie.listCategory(ns),Ke=No(Ln,_n[jn],ns===wn?st.some(300):st.none());_o.setData({results:Ke})},Ne=fe(_o=>{Ae(_o)},200),un={label:"Search",type:"input",name:jn},Gt={type:"collection",name:"results"},go=()=>({title:"Emojis",size:"normal",body:{type:"tabpanel",tabs:rn(ie.listCategories(),_n=>({title:_n,name:_n,items:[un,Gt]}))},initialData:ye,onTabChange:(_n,ns)=>{wt.set(ns.newTabName),Ne.throttle(_n)},onChange:Ne.throttle,onAction:(_n,ns)=>{ns.name==="results"&&(cs(Q,ns.value),_n.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}),ko=Q.windowManager.open(go());ko.focus(jn),ie.hasLoaded()||(ko.block("Loading emojis..."),ie.waitForLoad().then(()=>{ko.redial(go()),Ne.throttle(ko),ko.focus(jn),ko.unblock()}).catch(_o=>{ko.redial({title:"Emojis",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"Could not load emojis"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),ko.focus(jn),ko.unblock()}))},yo=(Q,ie)=>{Q.addCommand("mceEmoticons",()=>qn(Q,ie))},ht=Q=>{Q.on("PreInit",()=>{Q.parser.addAttributeFilter("data-emoticon",ie=>{Tt(ie,ye=>{ye.attr("data-mce-resize","false"),ye.attr("data-mce-placeholder","1")})})})},j=(Q,ie)=>{Q.ui.registry.addAutocompleter("emoticons",{trigger:":",columns:"auto",minChars:2,fetch:(ye,wt)=>ie.waitForLoad().then(()=>{const Ae=ie.listAll();return No(Ae,ye,st.some(wt))}),onAction:(ye,wt,Ae)=>{Q.selection.setRng(wt),Q.insertContent(Ae),ye.hide()}})},ce=Q=>ie=>{const ye=()=>{ie.setEnabled(Q.selection.isEditable())};return Q.on("NodeChange",ye),ye(),()=>{Q.off("NodeChange",ye)}},de=Q=>{const ie=()=>Q.execCommand("mceEmoticons");Q.ui.registry.addButton("emoticons",{tooltip:"Emojis",icon:"emoji",onAction:ie,onSetup:ce(Q)}),Q.ui.registry.addMenuItem("emoticons",{text:"Emojis...",icon:"emoji",onAction:ie,onSetup:ce(Q)})};var ne=()=>{qt.add("emoticons",(Q,ie)=>{mo(Q,ie);const ye=Mo(Q),wt=ln(Q),Ae=ot(Q,ye,wt);return yo(Q,Ae),de(Q),j(Q,Ae),ht(Q),{getAllEmojis:()=>Ae.waitForLoad().then(()=>Ae.listAll())}})};ne()})()),PJ}var IJ;function lee(){return IJ||(IJ=1,iee()),NJ}lee();var LJ={},HJ={},zJ;function uee(){return zJ||(zJ=1,(function(){var qt=tinymce.util.Tools.resolve("tinymce.PluginManager");const Mn=(ht,j,ce)=>{var de;return ce(ht,j.prototype)?!0:((de=ht.constructor)===null||de===void 0?void 0:de.name)===j.name},Fn=ht=>{const j=typeof ht;return ht===null?"null":j==="object"&&Array.isArray(ht)?"array":j==="object"&&Mn(ht,String,(ce,de)=>de.isPrototypeOf(ce))?"string":j},Xn=ht=>j=>Fn(j)===ht,$n=ht=>j=>typeof j===ht,Pn=Xn("string"),so=$n("boolean"),ct=ht=>ht==null,Lt=ht=>!ct(ht),st=$n("function"),rn=(ht=>()=>ht)(!1);class Tt{constructor(j,ce){this.tag=j,this.value=ce}static some(j){return new Tt(!0,j)}static none(){return Tt.singletonNone}fold(j,ce){return this.tag?ce(this.value):j()}isSome(){return this.tag}isNone(){return!this.tag}map(j){return this.tag?Tt.some(j(this.value)):Tt.none()}bind(j){return this.tag?j(this.value):Tt.none()}exists(j){return this.tag&&j(this.value)}forall(j){return!this.tag||j(this.value)}filter(j){return!this.tag||j(this.value)?this:Tt.none()}getOr(j){return this.tag?this.value:j}or(j){return this.tag?this:j}getOrThunk(j){return this.tag?this.value:j()}orThunk(j){return this.tag?this:j()}getOrDie(j){if(this.tag)return this.value;throw new Error(j??"Called getOrDie on None")}static from(j){return Lt(j)?Tt.some(j):Tt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(j){this.tag&&j(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Tt.singletonNone=new Tt(!1);const mn=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let fo=0;const In=ht=>{const ce=new Date().getTime(),de=Math.floor(mn()*1e9);return fo++,ht+"_"+de+fo+String(ce)},nt=(ht,j,ce)=>{ht.execCommand("mceInsertTable",!1,{rows:ce,columns:j})},Oo=(ht,j,ce)=>{const de=ht.editorUpload.blobCache,ne=de.create(In("mceu"),ce,j);de.add(ne),ht.insertContent(ht.dom.createHTML("img",{src:ne.blobUri()}))},_t=ht=>new Promise(j=>{const ce=new FileReader;ce.onloadend=()=>{j(ce.result.split(",")[1])},ce.readAsDataURL(ht)});var ae=tinymce.util.Tools.resolve("tinymce.util.Delay");const Jt=ht=>new Promise(j=>{let ce=!1;const de=document.createElement("input");de.type="file",de.accept="image/*",de.style.position="fixed",de.style.left="0",de.style.top="0",de.style.opacity="0.001",document.body.appendChild(de);const ne=ye=>{var wt;ce||((wt=de.parentNode)===null||wt===void 0||wt.removeChild(de),ce=!0,j(ye))},Q=ye=>{ne(Array.prototype.slice.call(ye.target.files))};de.addEventListener("input",Q),de.addEventListener("change",Q);const ie=ye=>{const wt=()=>{ne([])};ce||(ye.type==="focusin"?ae.setEditorTimeout(ht,wt,1e3):wt()),ht.off("focusin remove",ie)};ht.on("focusin remove",ie),de.click()}),Lo=ht=>{ht.on("PreInit",()=>{ht.queryCommandSupported("QuickbarInsertImage")||ht.addCommand("QuickbarInsertImage",()=>{Jt(ht).then(j=>{if(j.length>0){const ce=j[0];_t(ce).then(de=>{Oo(ht,de,ce)})}})})})},Ze=ht=>j=>j.options.get(ht),q=ht=>{const j=ht.options.register,ce=ie=>ye=>{const wt=so(ye)||Pn(ye);return wt?so(ye)?{value:ye?ie:"",valid:wt}:{value:ye.trim(),valid:wt}:{valid:!1,message:"Must be a boolean or string."}},de="bold italic | quicklink h2 h3 blockquote";j("quickbars_selection_toolbar",{processor:ce(de),default:de});const ne="quickimage quicktable";j("quickbars_insert_toolbar",{processor:ce(ne),default:ne});const Q="alignleft aligncenter alignright";j("quickbars_image_toolbar",{processor:ce(Q),default:Q})},Rt=Ze("quickbars_selection_toolbar"),Zn=Ze("quickbars_insert_toolbar"),gn=Ze("quickbars_image_toolbar"),_e=ht=>{ht.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>ht.execCommand("QuickbarInsertImage")}),ht.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{nt(ht,2,2)}})},fe=(ht,j)=>{const de=(j||document).createElement("div");if(de.innerHTML=ht,!de.hasChildNodes()||de.childNodes.length>1){const ne="HTML does not have a single root node";throw console.error(ne,ht),new Error(ne)}return rt(de.childNodes[0])},cs=(ht,j)=>{const de=(j||document).createElement(ht);return rt(de)},Je=(ht,j)=>{const de=(j||document).createTextNode(ht);return rt(de)},rt=ht=>{if(ht==null)throw new Error("Node cannot be null or undefined");return{dom:ht}},mo={fromHtml:fe,fromTag:cs,fromText:Je,fromDom:rt,fromPoint:(ht,j,ce)=>Tt.from(ht.dom.elementFromPoint(j,ce)).map(rt)},it=1,Mo=(ht,j)=>{const ce=ht.dom;if(ce.nodeType!==it)return!1;{const de=ce;if(de.matches!==void 0)return de.matches(j);if(de.msMatchesSelector!==void 0)return de.msMatchesSelector(j);if(de.webkitMatchesSelector!==void 0)return de.webkitMatchesSelector(j);if(de.mozMatchesSelector!==void 0)return de.mozMatchesSelector(j);throw new Error("Browser lacks native selectors")}},ln=ht=>ht.dom.nodeName.toLowerCase(),Ce=(ht,j)=>{const ce=ht.dom;return ce&&ce.hasAttribute?ce.hasAttribute(j):!1};var dt=(ht,j,ce,de,ne)=>ht(ce,de)?Tt.some(ce):st(ne)&&ne(ce)?Tt.none():j(ce,de,ne);const wn=(ht,j,ce)=>{let de=ht.dom;const ne=st(ce)?ce:rn;for(;de.parentNode;){de=de.parentNode;const Q=mo.fromDom(de);if(j(Q))return Tt.some(Q);if(ne(Q))break}return Tt.none()},Ve=(ht,j,ce)=>dt((ne,Q)=>Q(ne),wn,ht,j,ce),Ht=(ht,j,ce)=>wn(ht,de=>Mo(de,j),ce),Oe=(ht,j,ce)=>dt((ne,Q)=>Mo(ne,Q),Ht,ht,j,ce),ot=ht=>ht.dom.classList!==void 0,F=(ht,j)=>ot(ht)&&ht.dom.classList.contains(j),No=(ht,j,ce)=>Ve(ht,j,ce).isSome(),jn=ht=>{const j=Zn(ht);j.length>0&&ht.ui.registry.addContextToolbar("quickblock",{predicate:ce=>{const de=mo.fromDom(ce),ne=ht.schema.getTextBlockElements(),Q=ie=>ie.dom===ht.getBody();return!Ce(de,"data-mce-bogus")&&Oe(de,'table,[data-mce-bogus="all"]',Q).fold(()=>No(de,ie=>ln(ie)in ne&&ht.dom.isEmpty(ie.dom),Q),rn)},items:j,position:"line",scope:"editor"})},qn=ht=>{const j=ie=>ht.dom.isEditable(ie),ce=ie=>j(ie.parentElement),de=ie=>{const ye=ie.nodeName==="FIGURE"&&/image/i.test(ie.className),wt=ie.nodeName==="IMG"||ye,Ae=F(mo.fromDom(ie),"mce-pagebreak");return wt&&ce(ie)&&!Ae},ne=gn(ht);ne.length>0&&ht.ui.registry.addContextToolbar("imageselection",{predicate:de,items:ne,position:"node"});const Q=Rt(ht);Q.length>0&&ht.ui.registry.addContextToolbar("textselection",{predicate:ie=>!de(ie)&&!ht.selection.isCollapsed()&&j(ie),items:Q,position:"selection",scope:"editor"})};var yo=()=>{qt.add("quickbars",ht=>{q(ht),Lo(ht),_e(ht),jn(ht),qn(ht)})};yo()})()),HJ}var VJ;function dee(){return VJ||(VJ=1,uee()),LJ}dee();const mee=["name","value"],fee={__name:"TinyEditor",props:{modelValue:{type:String,default:""},name:{type:String,default:"body"}},emits:["update:modelValue"],setup(qt,{emit:Mn}){const Fn=qt,Xn=Mn,$n=ky(Fn.modelValue||""),Pn={height:500,menubar:"file edit view insert format tools table help",plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount","emoticons","quickbars"].join(" "),toolbar:["undo redo | bold italic underline forecolor backcolor | alignleft aligncenter alignright alignjustify |","bullist numlist outdent indent | link image media table | blockquote | removeformat | code fullscreen"].join(" "),quickbars_selection_toolbar:"bold italic underline | quicklink blockquote",toolbar_sticky:!0,branding:!1,content_style:"body { font-family: Montserrat, sans-serif; font-size: 16px }",license_key:"gpl",base_url:"/tinymce"};return gk($n,so=>Xn("update:modelValue",so)),gk(()=>Fn.modelValue,so=>{so!==$n.value&&($n.value=so||"")}),(so,ct)=>(CI(),VK(QJ,null,[UJ(WJ(CQ),{modelValue:$n.value,"onUpdate:modelValue":ct[0]||(ct[0]=Lt=>$n.value=Lt),init:Pn},null,8,["modelValue"]),Sa("input",{type:"hidden",name:qt.name,value:$n.value},null,8,mee)],64))}},gee={class:"text-2xl font-extrabold text-emerald-900"},hee=["action"],pee=["value"],bee={key:0,type:"hidden",name:"_method",value:"PUT"},vee={key:0,class:"mt-3"},yee=["src"],Cee={class:"grid md:grid-cols-1 gap-4"},xee={__name:"Edit",props:{post:Object},setup(qt){const Mn=qt,Fn=ky(Mn.post?.body||""),Xn=eQ().props.csrf_token,$n=tQ(()=>Mn.post?`/admin/posts/${Mn.post.id}`:"/admin/posts"),Pn=ky(Mn.post?.title||""),so=ky(Mn.post?.slug||""),ct=ky(Mn.post?.excerpt||""),Lt=ky(Mn.post?.cover_image||""),st=ky(Mn.post?.published_at||"");return gk(Pn,qo=>{!Mn.post&&!so.value&&qo&&(so.value=qo.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-"))}),(qo,rn)=>(CI(),nQ(rQ,null,{default:oQ(()=>[Sa("h1",gee,sQ(qt.post?"Chỉnh sửa bài viết":"Tạo bài viết"),1),Sa("form",{class:"mt-6 space-y-6",method:"post",action:$n.value,enctype:"multipart/form-data"},[Sa("input",{type:"hidden",name:"_token",value:WJ(Xn)},null,8,pee),qt.post?(CI(),VK("input",bee)):sX("",!0),Sa("div",null,[rn[5]||(rn[5]=Sa("label",{class:"block text-sm font-medium text-emerald-900"},"Tiêu đề",-1)),vI(Sa("input",{name:"title","onUpdate:modelValue":rn[0]||(rn[0]=Tt=>Pn.value=Tt),class:"mt-2 w-full rounded-lg border-emerald-200 focus:ring-emerald-500 focus:border-emerald-500"},null,512),[[yI,Pn.value]])]),Sa("div",null,[rn[6]||(rn[6]=Sa("label",{class:"block text-sm font-medium text-emerald-900"},"Slug",-1)),vI(Sa("input",{name:"slug","onUpdate:modelValue":rn[1]||(rn[1]=Tt=>so.value=Tt),class:"mt-2 w-full rounded-lg border-emerald-200 focus:ring-emerald-500 focus:border-emerald-500"},null,512),[[yI,so.value]])]),Sa("div",null,[rn[7]||(rn[7]=Sa("label",{class:"block text-sm font-medium text-emerald-900"},"Tóm tắt",-1)),vI(Sa("textarea",{name:"excerpt",rows:"3","onUpdate:modelValue":rn[2]||(rn[2]=Tt=>ct.value=Tt),class:"mt-2 w-full rounded-lg border-emerald-200 focus:ring-emerald-500 focus:border-emerald-500"},null,512),[[yI,ct.value]])]),Sa("div",null,[rn[8]||(rn[8]=Sa("label",{class:"block text-sm font-medium text-emerald-900"},"Nội dung",-1)),UJ(fee,{name:"body",modelValue:Fn.value,"onUpdate:modelValue":rn[3]||(rn[3]=Tt=>Fn.value=Tt)},null,8,["modelValue"])]),Sa("div",null,[rn[10]||(rn[10]=Sa("label",{class:"block text-sm font-medium text-emerald-900"},"Thumbnail",-1)),rn[11]||(rn[11]=Sa("input",{type:"file",name:"thumbnail",accept:"image/*",class:"mt-2 block w-full text-sm text-emerald-900 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100"},null,-1)),rn[12]||(rn[12]=Sa("p",{class:"mt-2 text-xs text-emerald-700"},"Khuyến nghị: 1200×630px (≤ 1MB), JPG/PNG.",-1)),Lt.value?(CI(),VK("div",vee,[rn[9]||(rn[9]=Sa("span",{class:"text-sm text-emerald-900"},"Hiện tại:",-1)),Sa("img",{src:Lt.value,alt:"Thumbnail hiện tại",class:"mt-2 h-24 rounded border border-emerald-200 object-cover"},null,8,yee)])):sX("",!0)]),Sa("div",Cee,[Sa("div",null,[rn[13]||(rn[13]=Sa("label",{class:"block text-sm font-medium text-emerald-900"},"Ngày xuất bản",-1)),vI(Sa("input",{type:"datetime-local",name:"published_at","onUpdate:modelValue":rn[4]||(rn[4]=Tt=>st.value=Tt),class:"mt-2 w-full rounded-lg border-emerald-200 focus:ring-emerald-500 focus:border-emerald-500"},null,512),[[yI,st.value]])])]),rn[14]||(rn[14]=Sa("div",{class:"flex items-center gap-3"},[Sa("button",{class:"px-5 py-2 rounded-lg bg-emerald-600 text-white font-semibold hover:bg-emerald-700",type:"submit"},"Lưu"),Sa("a",{href:"/admin/posts",class:"text-emerald-700 hover:text-emerald-800"},"Hủy")],-1))],8,hee)]),_:1}))}};export{xee as default};
